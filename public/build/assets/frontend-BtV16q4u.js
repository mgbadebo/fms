import{a as Xm}from"./index-B9ygI19o.js";/* empty css            */function Zm(i,o){for(var d=0;d<o.length;d++){const x=o[d];if(typeof x!="string"&&!Array.isArray(x)){for(const b in x)if(b!=="default"&&!(b in i)){const N=Object.getOwnPropertyDescriptor(x,b);N&&Object.defineProperty(i,b,N.get?N:{enumerable:!0,get:()=>x[b]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}function Ud(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ti={exports:{}},zs={},ri={exports:{}},ue={};var vd;function Jm(){if(vd)return ue;vd=1;var i=Symbol.for("react.element"),o=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),k=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),C=Symbol.iterator;function p(L){return L===null||typeof L!="object"?null:(L=C&&L[C]||L["@@iterator"],typeof L=="function"?L:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,_={};function R(L,j,$){this.props=L,this.context=j,this.refs=_,this.updater=$||O}R.prototype.isReactComponent={},R.prototype.setState=function(L,j){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,j,"setState")},R.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function u(){}u.prototype=R.prototype;function D(L,j,$){this.props=L,this.context=j,this.refs=_,this.updater=$||O}var F=D.prototype=new u;F.constructor=D,y(F,R.prototype),F.isPureReactComponent=!0;var U=Array.isArray,W=Object.prototype.hasOwnProperty,G={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function X(L,j,$){var Z,le={},ce=null,ge=null;if(j!=null)for(Z in j.ref!==void 0&&(ge=j.ref),j.key!==void 0&&(ce=""+j.key),j)W.call(j,Z)&&!T.hasOwnProperty(Z)&&(le[Z]=j[Z]);var pe=arguments.length-2;if(pe===1)le.children=$;else if(1<pe){for(var Se=Array(pe),lt=0;lt<pe;lt++)Se[lt]=arguments[lt+2];le.children=Se}if(L&&L.defaultProps)for(Z in pe=L.defaultProps,pe)le[Z]===void 0&&(le[Z]=pe[Z]);return{$$typeof:i,type:L,key:ce,ref:ge,props:le,_owner:G.current}}function z(L,j){return{$$typeof:i,type:L.type,key:j,ref:L.ref,props:L.props,_owner:L._owner}}function oe(L){return typeof L=="object"&&L!==null&&L.$$typeof===i}function be(L){var j={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function($){return j[$]})}var Me=/\/+/g;function me(L,j){return typeof L=="object"&&L!==null&&L.key!=null?be(""+L.key):j.toString(36)}function xe(L,j,$,Z,le){var ce=typeof L;(ce==="undefined"||ce==="boolean")&&(L=null);var ge=!1;if(L===null)ge=!0;else switch(ce){case"string":case"number":ge=!0;break;case"object":switch(L.$$typeof){case i:case o:ge=!0}}if(ge)return ge=L,le=le(ge),L=Z===""?"."+me(ge,0):Z,U(le)?($="",L!=null&&($=L.replace(Me,"$&/")+"/"),xe(le,j,$,"",function(lt){return lt})):le!=null&&(oe(le)&&(le=z(le,$+(!le.key||ge&&ge.key===le.key?"":(""+le.key).replace(Me,"$&/")+"/")+L)),j.push(le)),1;if(ge=0,Z=Z===""?".":Z+":",U(L))for(var pe=0;pe<L.length;pe++){ce=L[pe];var Se=Z+me(ce,pe);ge+=xe(ce,j,$,Se,le)}else if(Se=p(L),typeof Se=="function")for(L=Se.call(L),pe=0;!(ce=L.next()).done;)ce=ce.value,Se=Z+me(ce,pe++),ge+=xe(ce,j,$,Se,le);else if(ce==="object")throw j=String(L),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return ge}function He(L,j,$){if(L==null)return L;var Z=[],le=0;return xe(L,Z,"","",function(ce){return j.call($,ce,le++)}),Z}function Ne(L){if(L._status===-1){var j=L._result;j=j(),j.then(function($){(L._status===0||L._status===-1)&&(L._status=1,L._result=$)},function($){(L._status===0||L._status===-1)&&(L._status=2,L._result=$)}),L._status===-1&&(L._status=0,L._result=j)}if(L._status===1)return L._result.default;throw L._result}var ve={current:null},E={transition:null},Y={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:E,ReactCurrentOwner:G};function K(){throw Error("act(...) is not supported in production builds of React.")}return ue.Children={map:He,forEach:function(L,j,$){He(L,function(){j.apply(this,arguments)},$)},count:function(L){var j=0;return He(L,function(){j++}),j},toArray:function(L){return He(L,function(j){return j})||[]},only:function(L){if(!oe(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},ue.Component=R,ue.Fragment=d,ue.Profiler=b,ue.PureComponent=D,ue.StrictMode=x,ue.Suspense=m,ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,ue.act=K,ue.cloneElement=function(L,j,$){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Z=y({},L.props),le=L.key,ce=L.ref,ge=L._owner;if(j!=null){if(j.ref!==void 0&&(ce=j.ref,ge=G.current),j.key!==void 0&&(le=""+j.key),L.type&&L.type.defaultProps)var pe=L.type.defaultProps;for(Se in j)W.call(j,Se)&&!T.hasOwnProperty(Se)&&(Z[Se]=j[Se]===void 0&&pe!==void 0?pe[Se]:j[Se])}var Se=arguments.length-2;if(Se===1)Z.children=$;else if(1<Se){pe=Array(Se);for(var lt=0;lt<Se;lt++)pe[lt]=arguments[lt+2];Z.children=pe}return{$$typeof:i,type:L.type,key:le,ref:ce,props:Z,_owner:ge}},ue.createContext=function(L){return L={$$typeof:k,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:N,_context:L},L.Consumer=L},ue.createElement=X,ue.createFactory=function(L){var j=X.bind(null,L);return j.type=L,j},ue.createRef=function(){return{current:null}},ue.forwardRef=function(L){return{$$typeof:v,render:L}},ue.isValidElement=oe,ue.lazy=function(L){return{$$typeof:h,_payload:{_status:-1,_result:L},_init:Ne}},ue.memo=function(L,j){return{$$typeof:w,type:L,compare:j===void 0?null:j}},ue.startTransition=function(L){var j=E.transition;E.transition={};try{L()}finally{E.transition=j}},ue.unstable_act=K,ue.useCallback=function(L,j){return ve.current.useCallback(L,j)},ue.useContext=function(L){return ve.current.useContext(L)},ue.useDebugValue=function(){},ue.useDeferredValue=function(L){return ve.current.useDeferredValue(L)},ue.useEffect=function(L,j){return ve.current.useEffect(L,j)},ue.useId=function(){return ve.current.useId()},ue.useImperativeHandle=function(L,j,$){return ve.current.useImperativeHandle(L,j,$)},ue.useInsertionEffect=function(L,j){return ve.current.useInsertionEffect(L,j)},ue.useLayoutEffect=function(L,j){return ve.current.useLayoutEffect(L,j)},ue.useMemo=function(L,j){return ve.current.useMemo(L,j)},ue.useReducer=function(L,j,$){return ve.current.useReducer(L,j,$)},ue.useRef=function(L){return ve.current.useRef(L)},ue.useState=function(L){return ve.current.useState(L)},ue.useSyncExternalStore=function(L,j,$){return ve.current.useSyncExternalStore(L,j,$)},ue.useTransition=function(){return ve.current.useTransition()},ue.version="18.3.1",ue}var jd;function xi(){return jd||(jd=1,ri.exports=Jm()),ri.exports}var bd;function ep(){if(bd)return zs;bd=1;var i=xi(),o=Symbol.for("react.element"),d=Symbol.for("react.fragment"),x=Object.prototype.hasOwnProperty,b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N={key:!0,ref:!0,__self:!0,__source:!0};function k(v,m,w){var h,C={},p=null,O=null;w!==void 0&&(p=""+w),m.key!==void 0&&(p=""+m.key),m.ref!==void 0&&(O=m.ref);for(h in m)x.call(m,h)&&!N.hasOwnProperty(h)&&(C[h]=m[h]);if(v&&v.defaultProps)for(h in m=v.defaultProps,m)C[h]===void 0&&(C[h]=m[h]);return{$$typeof:o,type:v,key:p,ref:O,props:C,_owner:b.current}}return zs.Fragment=d,zs.jsx=k,zs.jsxs=k,zs}var Nd;function tp(){return Nd||(Nd=1,ti.exports=ep()),ti.exports}var t=tp(),g=xi();const gi=Ud(g),rp=Zm({__proto__:null,default:gi},[g]);var ta={},si={exports:{}},nt={},ni={exports:{}},ai={};var wd;function sp(){return wd||(wd=1,(function(i){function o(E,Y){var K=E.length;E.push(Y);e:for(;0<K;){var L=K-1>>>1,j=E[L];if(0<b(j,Y))E[L]=Y,E[K]=j,K=L;else break e}}function d(E){return E.length===0?null:E[0]}function x(E){if(E.length===0)return null;var Y=E[0],K=E.pop();if(K!==Y){E[0]=K;e:for(var L=0,j=E.length,$=j>>>1;L<$;){var Z=2*(L+1)-1,le=E[Z],ce=Z+1,ge=E[ce];if(0>b(le,K))ce<j&&0>b(ge,le)?(E[L]=ge,E[ce]=K,L=ce):(E[L]=le,E[Z]=K,L=Z);else if(ce<j&&0>b(ge,K))E[L]=ge,E[ce]=K,L=ce;else break e}}return Y}function b(E,Y){var K=E.sortIndex-Y.sortIndex;return K!==0?K:E.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var N=performance;i.unstable_now=function(){return N.now()}}else{var k=Date,v=k.now();i.unstable_now=function(){return k.now()-v}}var m=[],w=[],h=1,C=null,p=3,O=!1,y=!1,_=!1,R=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(E){for(var Y=d(w);Y!==null;){if(Y.callback===null)x(w);else if(Y.startTime<=E)x(w),Y.sortIndex=Y.expirationTime,o(m,Y);else break;Y=d(w)}}function U(E){if(_=!1,F(E),!y)if(d(m)!==null)y=!0,Ne(W);else{var Y=d(w);Y!==null&&ve(U,Y.startTime-E)}}function W(E,Y){y=!1,_&&(_=!1,u(X),X=-1),O=!0;var K=p;try{for(F(Y),C=d(m);C!==null&&(!(C.expirationTime>Y)||E&&!be());){var L=C.callback;if(typeof L=="function"){C.callback=null,p=C.priorityLevel;var j=L(C.expirationTime<=Y);Y=i.unstable_now(),typeof j=="function"?C.callback=j:C===d(m)&&x(m),F(Y)}else x(m);C=d(m)}if(C!==null)var $=!0;else{var Z=d(w);Z!==null&&ve(U,Z.startTime-Y),$=!1}return $}finally{C=null,p=K,O=!1}}var G=!1,T=null,X=-1,z=5,oe=-1;function be(){return!(i.unstable_now()-oe<z)}function Me(){if(T!==null){var E=i.unstable_now();oe=E;var Y=!0;try{Y=T(!0,E)}finally{Y?me():(G=!1,T=null)}}else G=!1}var me;if(typeof D=="function")me=function(){D(Me)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,He=xe.port2;xe.port1.onmessage=Me,me=function(){He.postMessage(null)}}else me=function(){R(Me,0)};function Ne(E){T=E,G||(G=!0,me())}function ve(E,Y){X=R(function(){E(i.unstable_now())},Y)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(E){E.callback=null},i.unstable_continueExecution=function(){y||O||(y=!0,Ne(W))},i.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<E?Math.floor(1e3/E):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_getFirstCallbackNode=function(){return d(m)},i.unstable_next=function(E){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var K=p;p=Y;try{return E()}finally{p=K}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(E,Y){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var K=p;p=E;try{return Y()}finally{p=K}},i.unstable_scheduleCallback=function(E,Y,K){var L=i.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?L+K:L):K=L,E){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=K+j,E={id:h++,callback:Y,priorityLevel:E,startTime:K,expirationTime:j,sortIndex:-1},K>L?(E.sortIndex=K,o(w,E),d(m)===null&&E===d(w)&&(_?(u(X),X=-1):_=!0,ve(U,K-L))):(E.sortIndex=j,o(m,E),y||O||(y=!0,Ne(W))),E},i.unstable_shouldYield=be,i.unstable_wrapCallback=function(E){var Y=p;return function(){var K=p;p=Y;try{return E.apply(this,arguments)}finally{p=K}}}})(ai)),ai}var _d;function np(){return _d||(_d=1,ni.exports=sp()),ni.exports}var kd;function ap(){if(kd)return nt;kd=1;var i=xi(),o=np();function d(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x=new Set,b={};function N(e,r){k(e,r),k(e+"Capture",r)}function k(e,r){for(b[e]=r,e=0;e<r.length;e++)x.add(r[e])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},C={};function p(e){return m.call(C,e)?!0:m.call(h,e)?!1:w.test(e)?C[e]=!0:(h[e]=!0,!1)}function O(e,r,s,n){if(s!==null&&s.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function y(e,r,s,n){if(r===null||typeof r>"u"||O(e,r,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function _(e,r,s,n,a,l,c){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=r,this.sanitizeURL=l,this.removeEmptyString=c}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){R[e]=new _(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];R[r]=new _(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){R[e]=new _(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){R[e]=new _(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){R[e]=new _(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){R[e]=new _(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){R[e]=new _(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){R[e]=new _(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){R[e]=new _(e,5,!1,e.toLowerCase(),null,!1,!1)});var u=/[\-:]([a-z])/g;function D(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(u,D);R[r]=new _(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(u,D);R[r]=new _(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(u,D);R[r]=new _(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){R[e]=new _(e,1,!1,e.toLowerCase(),null,!1,!1)}),R.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){R[e]=new _(e,1,!1,e.toLowerCase(),null,!0,!0)});function F(e,r,s,n){var a=R.hasOwnProperty(r)?R[r]:null;(a!==null?a.type!==0:n||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(y(r,s,a,n)&&(s=null),n||a===null?p(r)&&(s===null?e.removeAttribute(r):e.setAttribute(r,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(r=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(r):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,r,s):e.setAttribute(r,s))))}var U=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),G=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),be=Symbol.for("react.context"),Me=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),E=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=E&&e[E]||e["@@iterator"],typeof e=="function"?e:null)}var K=Object.assign,L;function j(e){if(L===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);L=r&&r[1]||""}return`
`+L+e}var $=!1;function Z(e,r){if(!e||$)return"";$=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(I){var n=I}Reflect.construct(e,[],r)}else{try{r.call()}catch(I){n=I}e.call(r.prototype)}else{try{throw Error()}catch(I){n=I}e()}}catch(I){if(I&&n&&typeof I.stack=="string"){for(var a=I.stack.split(`
`),l=n.stack.split(`
`),c=a.length-1,f=l.length-1;1<=c&&0<=f&&a[c]!==l[f];)f--;for(;1<=c&&0<=f;c--,f--)if(a[c]!==l[f]){if(c!==1||f!==1)do if(c--,f--,0>f||a[c]!==l[f]){var S=`
`+a[c].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=c&&0<=f);break}}}finally{$=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?j(e):""}function le(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=Z(e.type,!1),e;case 11:return e=Z(e.type.render,!1),e;case 1:return e=Z(e.type,!0),e;default:return""}}function ce(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case G:return"Portal";case z:return"Profiler";case X:return"StrictMode";case me:return"Suspense";case xe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case be:return(e.displayName||"Context")+".Consumer";case oe:return(e._context.displayName||"Context")+".Provider";case Me:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case He:return r=e.displayName||null,r!==null?r:ce(e.type)||"Memo";case Ne:r=e._payload,e=e._init;try{return ce(e(r))}catch{}}return null}function ge(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(r);case 8:return r===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function pe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Se(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function lt(e){var r=Se(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),n=""+e[r];if(!e.hasOwnProperty(r)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,l=s.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return a.call(this)},set:function(c){n=""+c,l.call(this,c)}}),Object.defineProperty(e,r,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(c){n=""+c},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function $s(e){e._valueTracker||(e._valueTracker=lt(e))}function _i(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var s=r.getValue(),n="";return e&&(n=Se(e)?e.checked?"true":"false":e.value),e=n,e!==s?(r.setValue(e),!0):!1}function Ws(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function oa(e,r){var s=r.checked;return K({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function ki(e,r){var s=r.defaultValue==null?"":r.defaultValue,n=r.checked!=null?r.checked:r.defaultChecked;s=pe(r.value!=null?r.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Si(e,r){r=r.checked,r!=null&&F(e,"checked",r,!1)}function ca(e,r){Si(e,r);var s=pe(r.value),n=r.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?da(e,r.type,s):r.hasOwnProperty("defaultValue")&&da(e,r.type,pe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function Ci(e,r,s){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var n=r.type;if(!(n!=="submit"&&n!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,s||r===e.value||(e.value=r),e.defaultValue=r}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function da(e,r,s){(r!=="number"||Ws(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var es=Array.isArray;function kr(e,r,s,n){if(e=e.options,r){r={};for(var a=0;a<s.length;a++)r["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=r.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+pe(s),r=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}r!==null||e[a].disabled||(r=e[a])}r!==null&&(r.selected=!0)}}function ua(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(d(91));return K({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ei(e,r){var s=r.value;if(s==null){if(s=r.children,r=r.defaultValue,s!=null){if(r!=null)throw Error(d(92));if(es(s)){if(1<s.length)throw Error(d(93));s=s[0]}r=s}r==null&&(r=""),s=r}e._wrapperState={initialValue:pe(s)}}function Pi(e,r){var s=pe(r.value),n=pe(r.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),r.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function Di(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Li(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ma(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Li(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gs,Ri=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(r,s,n,a)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(Gs=Gs||document.createElement("div"),Gs.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Gs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function ts(e,r){if(r){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=r;return}}e.textContent=r}var rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tu=["Webkit","ms","Moz","O"];Object.keys(rs).forEach(function(e){tu.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),rs[r]=rs[e]})});function Ai(e,r,s){return r==null||typeof r=="boolean"||r===""?"":s||typeof r!="number"||r===0||rs.hasOwnProperty(e)&&rs[e]?(""+r).trim():r+"px"}function Ti(e,r){e=e.style;for(var s in r)if(r.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=Ai(s,r[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var ru=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pa(e,r){if(r){if(ru[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(d(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(d(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(d(61))}if(r.style!=null&&typeof r.style!="object")throw Error(d(62))}}function xa(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ga=null;function ha(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fa=null,Sr=null,Cr=null;function Mi(e){if(e=_s(e)){if(typeof fa!="function")throw Error(d(280));var r=e.stateNode;r&&(r=hn(r),fa(e.stateNode,e.type,r))}}function Ii(e){Sr?Cr?Cr.push(e):Cr=[e]:Sr=e}function Oi(){if(Sr){var e=Sr,r=Cr;if(Cr=Sr=null,Mi(e),r)for(e=0;e<r.length;e++)Mi(r[e])}}function Fi(e,r){return e(r)}function zi(){}var ya=!1;function Ui(e,r,s){if(ya)return e(r,s);ya=!0;try{return Fi(e,r,s)}finally{ya=!1,(Sr!==null||Cr!==null)&&(zi(),Oi())}}function ss(e,r){var s=e.stateNode;if(s===null)return null;var n=hn(s);if(n===null)return null;s=n[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(d(231,r,typeof s));return s}var va=!1;if(v)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){va=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{va=!1}function su(e,r,s,n,a,l,c,f,S){var I=Array.prototype.slice.call(arguments,3);try{r.apply(s,I)}catch(q){this.onError(q)}}var as=!1,Vs=null,Ks=!1,ja=null,nu={onError:function(e){as=!0,Vs=e}};function au(e,r,s,n,a,l,c,f,S){as=!1,Vs=null,su.apply(nu,arguments)}function lu(e,r,s,n,a,l,c,f,S){if(au.apply(this,arguments),as){if(as){var I=Vs;as=!1,Vs=null}else throw Error(d(198));Ks||(Ks=!0,ja=I)}}function dr(e){var r=e,s=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(s=r.return),e=r.return;while(e)}return r.tag===3?s:null}function Bi(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function Hi(e){if(dr(e)!==e)throw Error(d(188))}function iu(e){var r=e.alternate;if(!r){if(r=dr(e),r===null)throw Error(d(188));return r!==e?null:e}for(var s=e,n=r;;){var a=s.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===s)return Hi(a),e;if(l===n)return Hi(a),r;l=l.sibling}throw Error(d(188))}if(s.return!==n.return)s=a,n=l;else{for(var c=!1,f=a.child;f;){if(f===s){c=!0,s=a,n=l;break}if(f===n){c=!0,n=a,s=l;break}f=f.sibling}if(!c){for(f=l.child;f;){if(f===s){c=!0,s=l,n=a;break}if(f===n){c=!0,n=l,s=a;break}f=f.sibling}if(!c)throw Error(d(189))}}if(s.alternate!==n)throw Error(d(190))}if(s.tag!==3)throw Error(d(188));return s.stateNode.current===s?e:r}function qi(e){return e=iu(e),e!==null?$i(e):null}function $i(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=$i(e);if(r!==null)return r;e=e.sibling}return null}var Wi=o.unstable_scheduleCallback,Gi=o.unstable_cancelCallback,ou=o.unstable_shouldYield,cu=o.unstable_requestPaint,Le=o.unstable_now,du=o.unstable_getCurrentPriorityLevel,ba=o.unstable_ImmediatePriority,Vi=o.unstable_UserBlockingPriority,Qs=o.unstable_NormalPriority,uu=o.unstable_LowPriority,Ki=o.unstable_IdlePriority,Ys=null,St=null;function mu(e){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(Ys,e,void 0,(e.current.flags&128)===128)}catch{}}var yt=Math.clz32?Math.clz32:gu,pu=Math.log,xu=Math.LN2;function gu(e){return e>>>=0,e===0?32:31-(pu(e)/xu|0)|0}var Xs=64,Zs=4194304;function ls(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Js(e,r){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,c=s&268435455;if(c!==0){var f=c&~a;f!==0?n=ls(f):(l&=c,l!==0&&(n=ls(l)))}else c=s&~a,c!==0?n=ls(c):l!==0&&(n=ls(l));if(n===0)return 0;if(r!==0&&r!==n&&(r&a)===0&&(a=n&-n,l=r&-r,a>=l||a===16&&(l&4194240)!==0))return r;if((n&4)!==0&&(n|=s&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=n;0<r;)s=31-yt(r),a=1<<s,n|=e[s],r&=~a;return n}function hu(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fu(e,r){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var c=31-yt(l),f=1<<c,S=a[c];S===-1?((f&s)===0||(f&n)!==0)&&(a[c]=hu(f,r)):S<=r&&(e.expiredLanes|=f),l&=~f}}function Na(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qi(){var e=Xs;return Xs<<=1,(Xs&4194240)===0&&(Xs=64),e}function wa(e){for(var r=[],s=0;31>s;s++)r.push(e);return r}function is(e,r,s){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-yt(r),e[r]=s}function yu(e,r){var s=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-yt(s),l=1<<a;r[a]=0,n[a]=-1,e[a]=-1,s&=~l}}function _a(e,r){var s=e.entangledLanes|=r;for(e=e.entanglements;s;){var n=31-yt(s),a=1<<n;a&r|e[n]&r&&(e[n]|=r),s&=~a}}var je=0;function Yi(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Xi,ka,Zi,Ji,eo,Sa=!1,en=[],Bt=null,Ht=null,qt=null,os=new Map,cs=new Map,$t=[],vu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function to(e,r){switch(e){case"focusin":case"focusout":Bt=null;break;case"dragenter":case"dragleave":Ht=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":os.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(r.pointerId)}}function ds(e,r,s,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:r,domEventName:s,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},r!==null&&(r=_s(r),r!==null&&ka(r)),e):(e.eventSystemFlags|=n,r=e.targetContainers,a!==null&&r.indexOf(a)===-1&&r.push(a),e)}function ju(e,r,s,n,a){switch(r){case"focusin":return Bt=ds(Bt,e,r,s,n,a),!0;case"dragenter":return Ht=ds(Ht,e,r,s,n,a),!0;case"mouseover":return qt=ds(qt,e,r,s,n,a),!0;case"pointerover":var l=a.pointerId;return os.set(l,ds(os.get(l)||null,e,r,s,n,a)),!0;case"gotpointercapture":return l=a.pointerId,cs.set(l,ds(cs.get(l)||null,e,r,s,n,a)),!0}return!1}function ro(e){var r=ur(e.target);if(r!==null){var s=dr(r);if(s!==null){if(r=s.tag,r===13){if(r=Bi(s),r!==null){e.blockedOn=r,eo(e.priority,function(){Zi(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tn(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var s=Ea(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);ga=n,s.target.dispatchEvent(n),ga=null}else return r=_s(s),r!==null&&ka(r),e.blockedOn=s,!1;r.shift()}return!0}function so(e,r,s){tn(e)&&s.delete(r)}function bu(){Sa=!1,Bt!==null&&tn(Bt)&&(Bt=null),Ht!==null&&tn(Ht)&&(Ht=null),qt!==null&&tn(qt)&&(qt=null),os.forEach(so),cs.forEach(so)}function us(e,r){e.blockedOn===r&&(e.blockedOn=null,Sa||(Sa=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bu)))}function ms(e){function r(a){return us(a,e)}if(0<en.length){us(en[0],e);for(var s=1;s<en.length;s++){var n=en[s];n.blockedOn===e&&(n.blockedOn=null)}}for(Bt!==null&&us(Bt,e),Ht!==null&&us(Ht,e),qt!==null&&us(qt,e),os.forEach(r),cs.forEach(r),s=0;s<$t.length;s++)n=$t[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<$t.length&&(s=$t[0],s.blockedOn===null);)ro(s),s.blockedOn===null&&$t.shift()}var Er=U.ReactCurrentBatchConfig,rn=!0;function Nu(e,r,s,n){var a=je,l=Er.transition;Er.transition=null;try{je=1,Ca(e,r,s,n)}finally{je=a,Er.transition=l}}function wu(e,r,s,n){var a=je,l=Er.transition;Er.transition=null;try{je=4,Ca(e,r,s,n)}finally{je=a,Er.transition=l}}function Ca(e,r,s,n){if(rn){var a=Ea(e,r,s,n);if(a===null)Wa(e,r,n,sn,s),to(e,n);else if(ju(a,e,r,s,n))n.stopPropagation();else if(to(e,n),r&4&&-1<vu.indexOf(e)){for(;a!==null;){var l=_s(a);if(l!==null&&Xi(l),l=Ea(e,r,s,n),l===null&&Wa(e,r,n,sn,s),l===a)break;a=l}a!==null&&n.stopPropagation()}else Wa(e,r,n,null,s)}}var sn=null;function Ea(e,r,s,n){if(sn=null,e=ha(n),e=ur(e),e!==null)if(r=dr(e),r===null)e=null;else if(s=r.tag,s===13){if(e=Bi(r),e!==null)return e;e=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return sn=e,null}function no(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(du()){case ba:return 1;case Vi:return 4;case Qs:case uu:return 16;case Ki:return 536870912;default:return 16}default:return 16}}var Wt=null,Pa=null,nn=null;function ao(){if(nn)return nn;var e,r=Pa,s=r.length,n,a="value"in Wt?Wt.value:Wt.textContent,l=a.length;for(e=0;e<s&&r[e]===a[e];e++);var c=s-e;for(n=1;n<=c&&r[s-n]===a[l-n];n++);return nn=a.slice(e,1<n?1-n:void 0)}function an(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function ln(){return!0}function lo(){return!1}function it(e){function r(s,n,a,l,c){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=c,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(s=e[f],this[f]=s?s(l):l[f]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ln:lo,this.isPropagationStopped=lo,this}return K(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ln)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ln)},persist:function(){},isPersistent:ln}),r}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Da=it(Pr),ps=K({},Pr,{view:0,detail:0}),_u=it(ps),La,Ra,xs,on=K({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ta,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xs&&(xs&&e.type==="mousemove"?(La=e.screenX-xs.screenX,Ra=e.screenY-xs.screenY):Ra=La=0,xs=e),La)},movementY:function(e){return"movementY"in e?e.movementY:Ra}}),io=it(on),ku=K({},on,{dataTransfer:0}),Su=it(ku),Cu=K({},ps,{relatedTarget:0}),Aa=it(Cu),Eu=K({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Pu=it(Eu),Du=K({},Pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lu=it(Du),Ru=K({},Pr,{data:0}),oo=it(Ru),Au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iu(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=Mu[e])?!!r[e]:!1}function Ta(){return Iu}var Ou=K({},ps,{key:function(e){if(e.key){var r=Au[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=an(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Tu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ta,charCode:function(e){return e.type==="keypress"?an(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?an(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fu=it(Ou),zu=K({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),co=it(zu),Uu=K({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ta}),Bu=it(Uu),Hu=K({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),qu=it(Hu),$u=K({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wu=it($u),Gu=[9,13,27,32],Ma=v&&"CompositionEvent"in window,gs=null;v&&"documentMode"in document&&(gs=document.documentMode);var Vu=v&&"TextEvent"in window&&!gs,uo=v&&(!Ma||gs&&8<gs&&11>=gs),mo=" ",po=!1;function xo(e,r){switch(e){case"keyup":return Gu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function go(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dr=!1;function Ku(e,r){switch(e){case"compositionend":return go(r);case"keypress":return r.which!==32?null:(po=!0,mo);case"textInput":return e=r.data,e===mo&&po?null:e;default:return null}}function Qu(e,r){if(Dr)return e==="compositionend"||!Ma&&xo(e,r)?(e=ao(),nn=Pa=Wt=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return uo&&r.locale!=="ko"?null:r.data;default:return null}}var Yu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ho(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Yu[e.type]:r==="textarea"}function fo(e,r,s,n){Ii(n),r=pn(r,"onChange"),0<r.length&&(s=new Da("onChange","change",null,s,n),e.push({event:s,listeners:r}))}var hs=null,fs=null;function Xu(e){Mo(e,0)}function cn(e){var r=Mr(e);if(_i(r))return e}function Zu(e,r){if(e==="change")return r}var yo=!1;if(v){var Ia;if(v){var Oa="oninput"in document;if(!Oa){var vo=document.createElement("div");vo.setAttribute("oninput","return;"),Oa=typeof vo.oninput=="function"}Ia=Oa}else Ia=!1;yo=Ia&&(!document.documentMode||9<document.documentMode)}function jo(){hs&&(hs.detachEvent("onpropertychange",bo),fs=hs=null)}function bo(e){if(e.propertyName==="value"&&cn(fs)){var r=[];fo(r,fs,e,ha(e)),Ui(Xu,r)}}function Ju(e,r,s){e==="focusin"?(jo(),hs=r,fs=s,hs.attachEvent("onpropertychange",bo)):e==="focusout"&&jo()}function em(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cn(fs)}function tm(e,r){if(e==="click")return cn(r)}function rm(e,r){if(e==="input"||e==="change")return cn(r)}function sm(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var vt=typeof Object.is=="function"?Object.is:sm;function ys(e,r){if(vt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var s=Object.keys(e),n=Object.keys(r);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!m.call(r,a)||!vt(e[a],r[a]))return!1}return!0}function No(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wo(e,r){var s=No(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=r&&n>=r)return{node:s,offset:r-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=No(s)}}function _o(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?_o(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function ko(){for(var e=window,r=Ws();r instanceof e.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)e=r.contentWindow;else break;r=Ws(e.document)}return r}function Fa(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function nm(e){var r=ko(),s=e.focusedElem,n=e.selectionRange;if(r!==s&&s&&s.ownerDocument&&_o(s.ownerDocument.documentElement,s)){if(n!==null&&Fa(s)){if(r=n.start,e=n.end,e===void 0&&(e=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(e,s.value.length);else if(e=(r=s.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=wo(s,l);var c=wo(s,n);a&&c&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(r=r.createRange(),r.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(r),e.extend(c.node,c.offset)):(r.setEnd(c.node,c.offset),e.addRange(r)))}}for(r=[],e=s;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)e=r[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var am=v&&"documentMode"in document&&11>=document.documentMode,Lr=null,za=null,vs=null,Ua=!1;function So(e,r,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ua||Lr==null||Lr!==Ws(n)||(n=Lr,"selectionStart"in n&&Fa(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),vs&&ys(vs,n)||(vs=n,n=pn(za,"onSelect"),0<n.length&&(r=new Da("onSelect","select",null,r,s),e.push({event:r,listeners:n}),r.target=Lr)))}function dn(e,r){var s={};return s[e.toLowerCase()]=r.toLowerCase(),s["Webkit"+e]="webkit"+r,s["Moz"+e]="moz"+r,s}var Rr={animationend:dn("Animation","AnimationEnd"),animationiteration:dn("Animation","AnimationIteration"),animationstart:dn("Animation","AnimationStart"),transitionend:dn("Transition","TransitionEnd")},Ba={},Co={};v&&(Co=document.createElement("div").style,"AnimationEvent"in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),"TransitionEvent"in window||delete Rr.transitionend.transition);function un(e){if(Ba[e])return Ba[e];if(!Rr[e])return e;var r=Rr[e],s;for(s in r)if(r.hasOwnProperty(s)&&s in Co)return Ba[e]=r[s];return e}var Eo=un("animationend"),Po=un("animationiteration"),Do=un("animationstart"),Lo=un("transitionend"),Ro=new Map,Ao="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gt(e,r){Ro.set(e,r),N(r,[e])}for(var Ha=0;Ha<Ao.length;Ha++){var qa=Ao[Ha],lm=qa.toLowerCase(),im=qa[0].toUpperCase()+qa.slice(1);Gt(lm,"on"+im)}Gt(Eo,"onAnimationEnd"),Gt(Po,"onAnimationIteration"),Gt(Do,"onAnimationStart"),Gt("dblclick","onDoubleClick"),Gt("focusin","onFocus"),Gt("focusout","onBlur"),Gt(Lo,"onTransitionEnd"),k("onMouseEnter",["mouseout","mouseover"]),k("onMouseLeave",["mouseout","mouseover"]),k("onPointerEnter",["pointerout","pointerover"]),k("onPointerLeave",["pointerout","pointerover"]),N("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),N("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),N("onBeforeInput",["compositionend","keypress","textInput","paste"]),N("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),N("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),N("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),om=new Set("cancel close invalid load scroll toggle".split(" ").concat(js));function To(e,r,s){var n=e.type||"unknown-event";e.currentTarget=s,lu(n,r,void 0,e),e.currentTarget=null}function Mo(e,r){r=(r&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var l=void 0;if(r)for(var c=n.length-1;0<=c;c--){var f=n[c],S=f.instance,I=f.currentTarget;if(f=f.listener,S!==l&&a.isPropagationStopped())break e;To(a,f,I),l=S}else for(c=0;c<n.length;c++){if(f=n[c],S=f.instance,I=f.currentTarget,f=f.listener,S!==l&&a.isPropagationStopped())break e;To(a,f,I),l=S}}}if(Ks)throw e=ja,Ks=!1,ja=null,e}function _e(e,r){var s=r[Xa];s===void 0&&(s=r[Xa]=new Set);var n=e+"__bubble";s.has(n)||(Io(r,e,2,!1),s.add(n))}function $a(e,r,s){var n=0;r&&(n|=4),Io(s,e,n,r)}var mn="_reactListening"+Math.random().toString(36).slice(2);function bs(e){if(!e[mn]){e[mn]=!0,x.forEach(function(s){s!=="selectionchange"&&(om.has(s)||$a(s,!1,e),$a(s,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[mn]||(r[mn]=!0,$a("selectionchange",!1,r))}}function Io(e,r,s,n){switch(no(r)){case 1:var a=Nu;break;case 4:a=wu;break;default:a=Ca}s=a.bind(null,r,s,e),a=void 0,!va||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(r,s,{capture:!0,passive:a}):e.addEventListener(r,s,!0):a!==void 0?e.addEventListener(r,s,{passive:a}):e.addEventListener(r,s,!1)}function Wa(e,r,s,n,a){var l=n;if((r&1)===0&&(r&2)===0&&n!==null)e:for(;;){if(n===null)return;var c=n.tag;if(c===3||c===4){var f=n.stateNode.containerInfo;if(f===a||f.nodeType===8&&f.parentNode===a)break;if(c===4)for(c=n.return;c!==null;){var S=c.tag;if((S===3||S===4)&&(S=c.stateNode.containerInfo,S===a||S.nodeType===8&&S.parentNode===a))return;c=c.return}for(;f!==null;){if(c=ur(f),c===null)return;if(S=c.tag,S===5||S===6){n=l=c;continue e}f=f.parentNode}}n=n.return}Ui(function(){var I=l,q=ha(s),V=[];e:{var B=Ro.get(e);if(B!==void 0){var J=Da,te=e;switch(e){case"keypress":if(an(s)===0)break e;case"keydown":case"keyup":J=Fu;break;case"focusin":te="focus",J=Aa;break;case"focusout":te="blur",J=Aa;break;case"beforeblur":case"afterblur":J=Aa;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Bu;break;case Eo:case Po:case Do:J=Pu;break;case Lo:J=qu;break;case"scroll":J=_u;break;case"wheel":J=Wu;break;case"copy":case"cut":case"paste":J=Lu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=co}var re=(r&4)!==0,Re=!re&&e==="scroll",A=re?B!==null?B+"Capture":null:B;re=[];for(var P=I,M;P!==null;){M=P;var Q=M.stateNode;if(M.tag===5&&Q!==null&&(M=Q,A!==null&&(Q=ss(P,A),Q!=null&&re.push(Ns(P,Q,M)))),Re)break;P=P.return}0<re.length&&(B=new J(B,te,null,s,q),V.push({event:B,listeners:re}))}}if((r&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",B&&s!==ga&&(te=s.relatedTarget||s.fromElement)&&(ur(te)||te[Rt]))break e;if((J||B)&&(B=q.window===q?q:(B=q.ownerDocument)?B.defaultView||B.parentWindow:window,J?(te=s.relatedTarget||s.toElement,J=I,te=te?ur(te):null,te!==null&&(Re=dr(te),te!==Re||te.tag!==5&&te.tag!==6)&&(te=null)):(J=null,te=I),J!==te)){if(re=io,Q="onMouseLeave",A="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(re=co,Q="onPointerLeave",A="onPointerEnter",P="pointer"),Re=J==null?B:Mr(J),M=te==null?B:Mr(te),B=new re(Q,P+"leave",J,s,q),B.target=Re,B.relatedTarget=M,Q=null,ur(q)===I&&(re=new re(A,P+"enter",te,s,q),re.target=M,re.relatedTarget=Re,Q=re),Re=Q,J&&te)t:{for(re=J,A=te,P=0,M=re;M;M=Ar(M))P++;for(M=0,Q=A;Q;Q=Ar(Q))M++;for(;0<P-M;)re=Ar(re),P--;for(;0<M-P;)A=Ar(A),M--;for(;P--;){if(re===A||A!==null&&re===A.alternate)break t;re=Ar(re),A=Ar(A)}re=null}else re=null;J!==null&&Oo(V,B,J,re,!1),te!==null&&Re!==null&&Oo(V,Re,te,re,!0)}}e:{if(B=I?Mr(I):window,J=B.nodeName&&B.nodeName.toLowerCase(),J==="select"||J==="input"&&B.type==="file")var se=Zu;else if(ho(B))if(yo)se=rm;else{se=em;var ne=Ju}else(J=B.nodeName)&&J.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(se=tm);if(se&&(se=se(e,I))){fo(V,se,s,q);break e}ne&&ne(e,B,I),e==="focusout"&&(ne=B._wrapperState)&&ne.controlled&&B.type==="number"&&da(B,"number",B.value)}switch(ne=I?Mr(I):window,e){case"focusin":(ho(ne)||ne.contentEditable==="true")&&(Lr=ne,za=I,vs=null);break;case"focusout":vs=za=Lr=null;break;case"mousedown":Ua=!0;break;case"contextmenu":case"mouseup":case"dragend":Ua=!1,So(V,s,q);break;case"selectionchange":if(am)break;case"keydown":case"keyup":So(V,s,q)}var ae;if(Ma)e:{switch(e){case"compositionstart":var ie="onCompositionStart";break e;case"compositionend":ie="onCompositionEnd";break e;case"compositionupdate":ie="onCompositionUpdate";break e}ie=void 0}else Dr?xo(e,s)&&(ie="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ie="onCompositionStart");ie&&(uo&&s.locale!=="ko"&&(Dr||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&Dr&&(ae=ao()):(Wt=q,Pa="value"in Wt?Wt.value:Wt.textContent,Dr=!0)),ne=pn(I,ie),0<ne.length&&(ie=new oo(ie,e,null,s,q),V.push({event:ie,listeners:ne}),ae?ie.data=ae:(ae=go(s),ae!==null&&(ie.data=ae)))),(ae=Vu?Ku(e,s):Qu(e,s))&&(I=pn(I,"onBeforeInput"),0<I.length&&(q=new oo("onBeforeInput","beforeinput",null,s,q),V.push({event:q,listeners:I}),q.data=ae))}Mo(V,r)})}function Ns(e,r,s){return{instance:e,listener:r,currentTarget:s}}function pn(e,r){for(var s=r+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=ss(e,s),l!=null&&n.unshift(Ns(e,l,a)),l=ss(e,r),l!=null&&n.push(Ns(e,l,a))),e=e.return}return n}function Ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Oo(e,r,s,n,a){for(var l=r._reactName,c=[];s!==null&&s!==n;){var f=s,S=f.alternate,I=f.stateNode;if(S!==null&&S===n)break;f.tag===5&&I!==null&&(f=I,a?(S=ss(s,l),S!=null&&c.unshift(Ns(s,S,f))):a||(S=ss(s,l),S!=null&&c.push(Ns(s,S,f)))),s=s.return}c.length!==0&&e.push({event:r,listeners:c})}var cm=/\r\n?/g,dm=/\u0000|\uFFFD/g;function Fo(e){return(typeof e=="string"?e:""+e).replace(cm,`
`).replace(dm,"")}function xn(e,r,s){if(r=Fo(r),Fo(e)!==r&&s)throw Error(d(425))}function gn(){}var Ga=null,Va=null;function Ka(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Qa=typeof setTimeout=="function"?setTimeout:void 0,um=typeof clearTimeout=="function"?clearTimeout:void 0,zo=typeof Promise=="function"?Promise:void 0,mm=typeof queueMicrotask=="function"?queueMicrotask:typeof zo<"u"?function(e){return zo.resolve(null).then(e).catch(pm)}:Qa;function pm(e){setTimeout(function(){throw e})}function Ya(e,r){var s=r,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),ms(r);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);ms(r)}function Vt(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function Uo(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(r===0)return e;r--}else s==="/$"&&r++}e=e.previousSibling}return null}var Tr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Tr,ws="__reactProps$"+Tr,Rt="__reactContainer$"+Tr,Xa="__reactEvents$"+Tr,xm="__reactListeners$"+Tr,gm="__reactHandles$"+Tr;function ur(e){var r=e[Ct];if(r)return r;for(var s=e.parentNode;s;){if(r=s[Rt]||s[Ct]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(e=Uo(e);e!==null;){if(s=e[Ct])return s;e=Uo(e)}return r}e=s,s=e.parentNode}return null}function _s(e){return e=e[Ct]||e[Rt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(d(33))}function hn(e){return e[ws]||null}var Za=[],Ir=-1;function Kt(e){return{current:e}}function ke(e){0>Ir||(e.current=Za[Ir],Za[Ir]=null,Ir--)}function we(e,r){Ir++,Za[Ir]=e.current,e.current=r}var Qt={},We=Kt(Qt),Je=Kt(!1),mr=Qt;function Or(e,r){var s=e.type.contextTypes;if(!s)return Qt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===r)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in s)a[l]=r[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),a}function et(e){return e=e.childContextTypes,e!=null}function fn(){ke(Je),ke(We)}function Bo(e,r,s){if(We.current!==Qt)throw Error(d(168));we(We,r),we(Je,s)}function Ho(e,r,s){var n=e.stateNode;if(r=r.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in r))throw Error(d(108,ge(e)||"Unknown",a));return K({},s,n)}function yn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qt,mr=We.current,we(We,e),we(Je,Je.current),!0}function qo(e,r,s){var n=e.stateNode;if(!n)throw Error(d(169));s?(e=Ho(e,r,mr),n.__reactInternalMemoizedMergedChildContext=e,ke(Je),ke(We),we(We,e)):ke(Je),we(Je,s)}var At=null,vn=!1,Ja=!1;function $o(e){At===null?At=[e]:At.push(e)}function hm(e){vn=!0,$o(e)}function Yt(){if(!Ja&&At!==null){Ja=!0;var e=0,r=je;try{var s=At;for(je=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}At=null,vn=!1}catch(a){throw At!==null&&(At=At.slice(e+1)),Wi(ba,Yt),a}finally{je=r,Ja=!1}}return null}var Fr=[],zr=0,jn=null,bn=0,ut=[],mt=0,pr=null,Tt=1,Mt="";function xr(e,r){Fr[zr++]=bn,Fr[zr++]=jn,jn=e,bn=r}function Wo(e,r,s){ut[mt++]=Tt,ut[mt++]=Mt,ut[mt++]=pr,pr=e;var n=Tt;e=Mt;var a=32-yt(n)-1;n&=~(1<<a),s+=1;var l=32-yt(r)+a;if(30<l){var c=a-a%5;l=(n&(1<<c)-1).toString(32),n>>=c,a-=c,Tt=1<<32-yt(r)+a|s<<a|n,Mt=l+e}else Tt=1<<l|s<<a|n,Mt=e}function el(e){e.return!==null&&(xr(e,1),Wo(e,1,0))}function tl(e){for(;e===jn;)jn=Fr[--zr],Fr[zr]=null,bn=Fr[--zr],Fr[zr]=null;for(;e===pr;)pr=ut[--mt],ut[mt]=null,Mt=ut[--mt],ut[mt]=null,Tt=ut[--mt],ut[mt]=null}var ot=null,ct=null,Ce=!1,jt=null;function Go(e,r){var s=ht(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=e,r=e.deletions,r===null?(e.deletions=[s],e.flags|=16):r.push(s)}function Vo(e,r){switch(e.tag){case 5:var s=e.type;return r=r.nodeType!==1||s.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,ot=e,ct=Vt(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,ot=e,ct=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(s=pr!==null?{id:Tt,overflow:Mt}:null,e.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=ht(18,null,null,0),s.stateNode=r,s.return=e,e.child=s,ot=e,ct=null,!0):!1;default:return!1}}function rl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sl(e){if(Ce){var r=ct;if(r){var s=r;if(!Vo(e,r)){if(rl(e))throw Error(d(418));r=Vt(s.nextSibling);var n=ot;r&&Vo(e,r)?Go(n,s):(e.flags=e.flags&-4097|2,Ce=!1,ot=e)}}else{if(rl(e))throw Error(d(418));e.flags=e.flags&-4097|2,Ce=!1,ot=e}}}function Ko(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ot=e}function Nn(e){if(e!==ot)return!1;if(!Ce)return Ko(e),Ce=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!Ka(e.type,e.memoizedProps)),r&&(r=ct)){if(rl(e))throw Qo(),Error(d(418));for(;r;)Go(e,r),r=Vt(r.nextSibling)}if(Ko(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(r===0){ct=Vt(e.nextSibling);break e}r--}else s!=="$"&&s!=="$!"&&s!=="$?"||r++}e=e.nextSibling}ct=null}}else ct=ot?Vt(e.stateNode.nextSibling):null;return!0}function Qo(){for(var e=ct;e;)e=Vt(e.nextSibling)}function Ur(){ct=ot=null,Ce=!1}function nl(e){jt===null?jt=[e]:jt.push(e)}var fm=U.ReactCurrentBatchConfig;function ks(e,r,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(d(309));var n=s.stateNode}if(!n)throw Error(d(147,e));var a=n,l=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===l?r.ref:(r=function(c){var f=a.refs;c===null?delete f[l]:f[l]=c},r._stringRef=l,r)}if(typeof e!="string")throw Error(d(284));if(!s._owner)throw Error(d(290,e))}return e}function wn(e,r){throw e=Object.prototype.toString.call(r),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Yo(e){var r=e._init;return r(e._payload)}function Xo(e){function r(A,P){if(e){var M=A.deletions;M===null?(A.deletions=[P],A.flags|=16):M.push(P)}}function s(A,P){if(!e)return null;for(;P!==null;)r(A,P),P=P.sibling;return null}function n(A,P){for(A=new Map;P!==null;)P.key!==null?A.set(P.key,P):A.set(P.index,P),P=P.sibling;return A}function a(A,P){return A=nr(A,P),A.index=0,A.sibling=null,A}function l(A,P,M){return A.index=M,e?(M=A.alternate,M!==null?(M=M.index,M<P?(A.flags|=2,P):M):(A.flags|=2,P)):(A.flags|=1048576,P)}function c(A){return e&&A.alternate===null&&(A.flags|=2),A}function f(A,P,M,Q){return P===null||P.tag!==6?(P=Ql(M,A.mode,Q),P.return=A,P):(P=a(P,M),P.return=A,P)}function S(A,P,M,Q){var se=M.type;return se===T?q(A,P,M.props.children,Q,M.key):P!==null&&(P.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Ne&&Yo(se)===P.type)?(Q=a(P,M.props),Q.ref=ks(A,P,M),Q.return=A,Q):(Q=Vn(M.type,M.key,M.props,null,A.mode,Q),Q.ref=ks(A,P,M),Q.return=A,Q)}function I(A,P,M,Q){return P===null||P.tag!==4||P.stateNode.containerInfo!==M.containerInfo||P.stateNode.implementation!==M.implementation?(P=Yl(M,A.mode,Q),P.return=A,P):(P=a(P,M.children||[]),P.return=A,P)}function q(A,P,M,Q,se){return P===null||P.tag!==7?(P=Nr(M,A.mode,Q,se),P.return=A,P):(P=a(P,M),P.return=A,P)}function V(A,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Ql(""+P,A.mode,M),P.return=A,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case W:return M=Vn(P.type,P.key,P.props,null,A.mode,M),M.ref=ks(A,null,P),M.return=A,M;case G:return P=Yl(P,A.mode,M),P.return=A,P;case Ne:var Q=P._init;return V(A,Q(P._payload),M)}if(es(P)||Y(P))return P=Nr(P,A.mode,M,null),P.return=A,P;wn(A,P)}return null}function B(A,P,M,Q){var se=P!==null?P.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return se!==null?null:f(A,P,""+M,Q);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case W:return M.key===se?S(A,P,M,Q):null;case G:return M.key===se?I(A,P,M,Q):null;case Ne:return se=M._init,B(A,P,se(M._payload),Q)}if(es(M)||Y(M))return se!==null?null:q(A,P,M,Q,null);wn(A,M)}return null}function J(A,P,M,Q,se){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return A=A.get(M)||null,f(P,A,""+Q,se);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case W:return A=A.get(Q.key===null?M:Q.key)||null,S(P,A,Q,se);case G:return A=A.get(Q.key===null?M:Q.key)||null,I(P,A,Q,se);case Ne:var ne=Q._init;return J(A,P,M,ne(Q._payload),se)}if(es(Q)||Y(Q))return A=A.get(M)||null,q(P,A,Q,se,null);wn(P,Q)}return null}function te(A,P,M,Q){for(var se=null,ne=null,ae=P,ie=P=0,Ue=null;ae!==null&&ie<M.length;ie++){ae.index>ie?(Ue=ae,ae=null):Ue=ae.sibling;var ye=B(A,ae,M[ie],Q);if(ye===null){ae===null&&(ae=Ue);break}e&&ae&&ye.alternate===null&&r(A,ae),P=l(ye,P,ie),ne===null?se=ye:ne.sibling=ye,ne=ye,ae=Ue}if(ie===M.length)return s(A,ae),Ce&&xr(A,ie),se;if(ae===null){for(;ie<M.length;ie++)ae=V(A,M[ie],Q),ae!==null&&(P=l(ae,P,ie),ne===null?se=ae:ne.sibling=ae,ne=ae);return Ce&&xr(A,ie),se}for(ae=n(A,ae);ie<M.length;ie++)Ue=J(ae,A,ie,M[ie],Q),Ue!==null&&(e&&Ue.alternate!==null&&ae.delete(Ue.key===null?ie:Ue.key),P=l(Ue,P,ie),ne===null?se=Ue:ne.sibling=Ue,ne=Ue);return e&&ae.forEach(function(ar){return r(A,ar)}),Ce&&xr(A,ie),se}function re(A,P,M,Q){var se=Y(M);if(typeof se!="function")throw Error(d(150));if(M=se.call(M),M==null)throw Error(d(151));for(var ne=se=null,ae=P,ie=P=0,Ue=null,ye=M.next();ae!==null&&!ye.done;ie++,ye=M.next()){ae.index>ie?(Ue=ae,ae=null):Ue=ae.sibling;var ar=B(A,ae,ye.value,Q);if(ar===null){ae===null&&(ae=Ue);break}e&&ae&&ar.alternate===null&&r(A,ae),P=l(ar,P,ie),ne===null?se=ar:ne.sibling=ar,ne=ar,ae=Ue}if(ye.done)return s(A,ae),Ce&&xr(A,ie),se;if(ae===null){for(;!ye.done;ie++,ye=M.next())ye=V(A,ye.value,Q),ye!==null&&(P=l(ye,P,ie),ne===null?se=ye:ne.sibling=ye,ne=ye);return Ce&&xr(A,ie),se}for(ae=n(A,ae);!ye.done;ie++,ye=M.next())ye=J(ae,A,ie,ye.value,Q),ye!==null&&(e&&ye.alternate!==null&&ae.delete(ye.key===null?ie:ye.key),P=l(ye,P,ie),ne===null?se=ye:ne.sibling=ye,ne=ye);return e&&ae.forEach(function(Ym){return r(A,Ym)}),Ce&&xr(A,ie),se}function Re(A,P,M,Q){if(typeof M=="object"&&M!==null&&M.type===T&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case W:e:{for(var se=M.key,ne=P;ne!==null;){if(ne.key===se){if(se=M.type,se===T){if(ne.tag===7){s(A,ne.sibling),P=a(ne,M.props.children),P.return=A,A=P;break e}}else if(ne.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Ne&&Yo(se)===ne.type){s(A,ne.sibling),P=a(ne,M.props),P.ref=ks(A,ne,M),P.return=A,A=P;break e}s(A,ne);break}else r(A,ne);ne=ne.sibling}M.type===T?(P=Nr(M.props.children,A.mode,Q,M.key),P.return=A,A=P):(Q=Vn(M.type,M.key,M.props,null,A.mode,Q),Q.ref=ks(A,P,M),Q.return=A,A=Q)}return c(A);case G:e:{for(ne=M.key;P!==null;){if(P.key===ne)if(P.tag===4&&P.stateNode.containerInfo===M.containerInfo&&P.stateNode.implementation===M.implementation){s(A,P.sibling),P=a(P,M.children||[]),P.return=A,A=P;break e}else{s(A,P);break}else r(A,P);P=P.sibling}P=Yl(M,A.mode,Q),P.return=A,A=P}return c(A);case Ne:return ne=M._init,Re(A,P,ne(M._payload),Q)}if(es(M))return te(A,P,M,Q);if(Y(M))return re(A,P,M,Q);wn(A,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,P!==null&&P.tag===6?(s(A,P.sibling),P=a(P,M),P.return=A,A=P):(s(A,P),P=Ql(M,A.mode,Q),P.return=A,A=P),c(A)):s(A,P)}return Re}var Br=Xo(!0),Zo=Xo(!1),_n=Kt(null),kn=null,Hr=null,al=null;function ll(){al=Hr=kn=null}function il(e){var r=_n.current;ke(_n),e._currentValue=r}function ol(e,r,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,n!==null&&(n.childLanes|=r)):n!==null&&(n.childLanes&r)!==r&&(n.childLanes|=r),e===s)break;e=e.return}}function qr(e,r){kn=e,al=Hr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(tt=!0),e.firstContext=null)}function pt(e){var r=e._currentValue;if(al!==e)if(e={context:e,memoizedValue:r,next:null},Hr===null){if(kn===null)throw Error(d(308));Hr=e,kn.dependencies={lanes:0,firstContext:e}}else Hr=Hr.next=e;return r}var gr=null;function cl(e){gr===null?gr=[e]:gr.push(e)}function Jo(e,r,s,n){var a=r.interleaved;return a===null?(s.next=s,cl(r)):(s.next=a.next,a.next=s),r.interleaved=s,It(e,n)}function It(e,r){e.lanes|=r;var s=e.alternate;for(s!==null&&(s.lanes|=r),s=e,e=e.return;e!==null;)e.childLanes|=r,s=e.alternate,s!==null&&(s.childLanes|=r),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Xt=!1;function dl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ec(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ot(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Zt(e,r,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(fe&2)!==0){var a=n.pending;return a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r,It(e,s)}return a=n.interleaved,a===null?(r.next=r,cl(n)):(r.next=a.next,a.next=r),n.interleaved=r,It(e,s)}function Sn(e,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var n=r.lanes;n&=e.pendingLanes,s|=n,r.lanes=s,_a(e,s)}}function tc(e,r){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var c={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?a=l=c:l=l.next=c,s=s.next}while(s!==null);l===null?a=l=r:l=l.next=r}else a=l=r;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=r:e.next=r,s.lastBaseUpdate=r}function Cn(e,r,s,n){var a=e.updateQueue;Xt=!1;var l=a.firstBaseUpdate,c=a.lastBaseUpdate,f=a.shared.pending;if(f!==null){a.shared.pending=null;var S=f,I=S.next;S.next=null,c===null?l=I:c.next=I,c=S;var q=e.alternate;q!==null&&(q=q.updateQueue,f=q.lastBaseUpdate,f!==c&&(f===null?q.firstBaseUpdate=I:f.next=I,q.lastBaseUpdate=S))}if(l!==null){var V=a.baseState;c=0,q=I=S=null,f=l;do{var B=f.lane,J=f.eventTime;if((n&B)===B){q!==null&&(q=q.next={eventTime:J,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var te=e,re=f;switch(B=r,J=s,re.tag){case 1:if(te=re.payload,typeof te=="function"){V=te.call(J,V,B);break e}V=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=re.payload,B=typeof te=="function"?te.call(J,V,B):te,B==null)break e;V=K({},V,B);break e;case 2:Xt=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,B=a.effects,B===null?a.effects=[f]:B.push(f))}else J={eventTime:J,lane:B,tag:f.tag,payload:f.payload,callback:f.callback,next:null},q===null?(I=q=J,S=V):q=q.next=J,c|=B;if(f=f.next,f===null){if(f=a.shared.pending,f===null)break;B=f,f=B.next,B.next=null,a.lastBaseUpdate=B,a.shared.pending=null}}while(!0);if(q===null&&(S=V),a.baseState=S,a.firstBaseUpdate=I,a.lastBaseUpdate=q,r=a.shared.interleaved,r!==null){a=r;do c|=a.lane,a=a.next;while(a!==r)}else l===null&&(a.shared.lanes=0);yr|=c,e.lanes=c,e.memoizedState=V}}function rc(e,r,s){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var n=e[r],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(d(191,a));a.call(n)}}}var Ss={},Et=Kt(Ss),Cs=Kt(Ss),Es=Kt(Ss);function hr(e){if(e===Ss)throw Error(d(174));return e}function ul(e,r){switch(we(Es,r),we(Cs,e),we(Et,Ss),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ma(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=ma(r,e)}ke(Et),we(Et,r)}function $r(){ke(Et),ke(Cs),ke(Es)}function sc(e){hr(Es.current);var r=hr(Et.current),s=ma(r,e.type);r!==s&&(we(Cs,e),we(Et,s))}function ml(e){Cs.current===e&&(ke(Et),ke(Cs))}var Ee=Kt(0);function En(e){for(var r=e;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var pl=[];function xl(){for(var e=0;e<pl.length;e++)pl[e]._workInProgressVersionPrimary=null;pl.length=0}var Pn=U.ReactCurrentDispatcher,gl=U.ReactCurrentBatchConfig,fr=0,Pe=null,Ie=null,Fe=null,Dn=!1,Ps=!1,Ds=0,ym=0;function Ge(){throw Error(d(321))}function hl(e,r){if(r===null)return!1;for(var s=0;s<r.length&&s<e.length;s++)if(!vt(e[s],r[s]))return!1;return!0}function fl(e,r,s,n,a,l){if(fr=l,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Pn.current=e===null||e.memoizedState===null?Nm:wm,e=s(n,a),Ps){l=0;do{if(Ps=!1,Ds=0,25<=l)throw Error(d(301));l+=1,Fe=Ie=null,r.updateQueue=null,Pn.current=_m,e=s(n,a)}while(Ps)}if(Pn.current=An,r=Ie!==null&&Ie.next!==null,fr=0,Fe=Ie=Pe=null,Dn=!1,r)throw Error(d(300));return e}function yl(){var e=Ds!==0;return Ds=0,e}function Pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Pe.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function xt(){if(Ie===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var r=Fe===null?Pe.memoizedState:Fe.next;if(r!==null)Fe=r,Ie=e;else{if(e===null)throw Error(d(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Fe===null?Pe.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function Ls(e,r){return typeof r=="function"?r(e):r}function vl(e){var r=xt(),s=r.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var n=Ie,a=n.baseQueue,l=s.pending;if(l!==null){if(a!==null){var c=a.next;a.next=l.next,l.next=c}n.baseQueue=a=l,s.pending=null}if(a!==null){l=a.next,n=n.baseState;var f=c=null,S=null,I=l;do{var q=I.lane;if((fr&q)===q)S!==null&&(S=S.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),n=I.hasEagerState?I.eagerState:e(n,I.action);else{var V={lane:q,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};S===null?(f=S=V,c=n):S=S.next=V,Pe.lanes|=q,yr|=q}I=I.next}while(I!==null&&I!==l);S===null?c=n:S.next=f,vt(n,r.memoizedState)||(tt=!0),r.memoizedState=n,r.baseState=c,r.baseQueue=S,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do l=a.lane,Pe.lanes|=l,yr|=l,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function jl(e){var r=xt(),s=r.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,l=r.memoizedState;if(a!==null){s.pending=null;var c=a=a.next;do l=e(l,c.action),c=c.next;while(c!==a);vt(l,r.memoizedState)||(tt=!0),r.memoizedState=l,r.baseQueue===null&&(r.baseState=l),s.lastRenderedState=l}return[l,n]}function nc(){}function ac(e,r){var s=Pe,n=xt(),a=r(),l=!vt(n.memoizedState,a);if(l&&(n.memoizedState=a,tt=!0),n=n.queue,bl(oc.bind(null,s,n,e),[e]),n.getSnapshot!==r||l||Fe!==null&&Fe.memoizedState.tag&1){if(s.flags|=2048,Rs(9,ic.bind(null,s,n,a,r),void 0,null),ze===null)throw Error(d(349));(fr&30)!==0||lc(s,r,a)}return a}function lc(e,r,s){e.flags|=16384,e={getSnapshot:r,value:s},r=Pe.updateQueue,r===null?(r={lastEffect:null,stores:null},Pe.updateQueue=r,r.stores=[e]):(s=r.stores,s===null?r.stores=[e]:s.push(e))}function ic(e,r,s,n){r.value=s,r.getSnapshot=n,cc(r)&&dc(e)}function oc(e,r,s){return s(function(){cc(r)&&dc(e)})}function cc(e){var r=e.getSnapshot;e=e.value;try{var s=r();return!vt(e,s)}catch{return!0}}function dc(e){var r=It(e,1);r!==null&&_t(r,e,1,-1)}function uc(e){var r=Pt();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:e},r.queue=e,e=e.dispatch=bm.bind(null,Pe,e),[r.memoizedState,e]}function Rs(e,r,s,n){return e={tag:e,create:r,destroy:s,deps:n,next:null},r=Pe.updateQueue,r===null?(r={lastEffect:null,stores:null},Pe.updateQueue=r,r.lastEffect=e.next=e):(s=r.lastEffect,s===null?r.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,r.lastEffect=e)),e}function mc(){return xt().memoizedState}function Ln(e,r,s,n){var a=Pt();Pe.flags|=e,a.memoizedState=Rs(1|r,s,void 0,n===void 0?null:n)}function Rn(e,r,s,n){var a=xt();n=n===void 0?null:n;var l=void 0;if(Ie!==null){var c=Ie.memoizedState;if(l=c.destroy,n!==null&&hl(n,c.deps)){a.memoizedState=Rs(r,s,l,n);return}}Pe.flags|=e,a.memoizedState=Rs(1|r,s,l,n)}function pc(e,r){return Ln(8390656,8,e,r)}function bl(e,r){return Rn(2048,8,e,r)}function xc(e,r){return Rn(4,2,e,r)}function gc(e,r){return Rn(4,4,e,r)}function hc(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function fc(e,r,s){return s=s!=null?s.concat([e]):null,Rn(4,4,hc.bind(null,r,e),s)}function Nl(){}function yc(e,r){var s=xt();r=r===void 0?null:r;var n=s.memoizedState;return n!==null&&r!==null&&hl(r,n[1])?n[0]:(s.memoizedState=[e,r],e)}function vc(e,r){var s=xt();r=r===void 0?null:r;var n=s.memoizedState;return n!==null&&r!==null&&hl(r,n[1])?n[0]:(e=e(),s.memoizedState=[e,r],e)}function jc(e,r,s){return(fr&21)===0?(e.baseState&&(e.baseState=!1,tt=!0),e.memoizedState=s):(vt(s,r)||(s=Qi(),Pe.lanes|=s,yr|=s,e.baseState=!0),r)}function vm(e,r){var s=je;je=s!==0&&4>s?s:4,e(!0);var n=gl.transition;gl.transition={};try{e(!1),r()}finally{je=s,gl.transition=n}}function bc(){return xt().memoizedState}function jm(e,r,s){var n=rr(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Nc(e))wc(r,s);else if(s=Jo(e,r,s,n),s!==null){var a=Xe();_t(s,e,n,a),_c(s,r,n)}}function bm(e,r,s){var n=rr(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Nc(e))wc(r,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=r.lastRenderedReducer,l!==null))try{var c=r.lastRenderedState,f=l(c,s);if(a.hasEagerState=!0,a.eagerState=f,vt(f,c)){var S=r.interleaved;S===null?(a.next=a,cl(r)):(a.next=S.next,S.next=a),r.interleaved=a;return}}catch{}s=Jo(e,r,a,n),s!==null&&(a=Xe(),_t(s,e,n,a),_c(s,r,n))}}function Nc(e){var r=e.alternate;return e===Pe||r!==null&&r===Pe}function wc(e,r){Ps=Dn=!0;var s=e.pending;s===null?r.next=r:(r.next=s.next,s.next=r),e.pending=r}function _c(e,r,s){if((s&4194240)!==0){var n=r.lanes;n&=e.pendingLanes,s|=n,r.lanes=s,_a(e,s)}}var An={readContext:pt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},Nm={readContext:pt,useCallback:function(e,r){return Pt().memoizedState=[e,r===void 0?null:r],e},useContext:pt,useEffect:pc,useImperativeHandle:function(e,r,s){return s=s!=null?s.concat([e]):null,Ln(4194308,4,hc.bind(null,r,e),s)},useLayoutEffect:function(e,r){return Ln(4194308,4,e,r)},useInsertionEffect:function(e,r){return Ln(4,2,e,r)},useMemo:function(e,r){var s=Pt();return r=r===void 0?null:r,e=e(),s.memoizedState=[e,r],e},useReducer:function(e,r,s){var n=Pt();return r=s!==void 0?s(r):r,n.memoizedState=n.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},n.queue=e,e=e.dispatch=jm.bind(null,Pe,e),[n.memoizedState,e]},useRef:function(e){var r=Pt();return e={current:e},r.memoizedState=e},useState:uc,useDebugValue:Nl,useDeferredValue:function(e){return Pt().memoizedState=e},useTransition:function(){var e=uc(!1),r=e[0];return e=vm.bind(null,e[1]),Pt().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,s){var n=Pe,a=Pt();if(Ce){if(s===void 0)throw Error(d(407));s=s()}else{if(s=r(),ze===null)throw Error(d(349));(fr&30)!==0||lc(n,r,s)}a.memoizedState=s;var l={value:s,getSnapshot:r};return a.queue=l,pc(oc.bind(null,n,l,e),[e]),n.flags|=2048,Rs(9,ic.bind(null,n,l,s,r),void 0,null),s},useId:function(){var e=Pt(),r=ze.identifierPrefix;if(Ce){var s=Mt,n=Tt;s=(n&~(1<<32-yt(n)-1)).toString(32)+s,r=":"+r+"R"+s,s=Ds++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=ym++,r=":"+r+"r"+s.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},wm={readContext:pt,useCallback:yc,useContext:pt,useEffect:bl,useImperativeHandle:fc,useInsertionEffect:xc,useLayoutEffect:gc,useMemo:vc,useReducer:vl,useRef:mc,useState:function(){return vl(Ls)},useDebugValue:Nl,useDeferredValue:function(e){var r=xt();return jc(r,Ie.memoizedState,e)},useTransition:function(){var e=vl(Ls)[0],r=xt().memoizedState;return[e,r]},useMutableSource:nc,useSyncExternalStore:ac,useId:bc,unstable_isNewReconciler:!1},_m={readContext:pt,useCallback:yc,useContext:pt,useEffect:bl,useImperativeHandle:fc,useInsertionEffect:xc,useLayoutEffect:gc,useMemo:vc,useReducer:jl,useRef:mc,useState:function(){return jl(Ls)},useDebugValue:Nl,useDeferredValue:function(e){var r=xt();return Ie===null?r.memoizedState=e:jc(r,Ie.memoizedState,e)},useTransition:function(){var e=jl(Ls)[0],r=xt().memoizedState;return[e,r]},useMutableSource:nc,useSyncExternalStore:ac,useId:bc,unstable_isNewReconciler:!1};function bt(e,r){if(e&&e.defaultProps){r=K({},r),e=e.defaultProps;for(var s in e)r[s]===void 0&&(r[s]=e[s]);return r}return r}function wl(e,r,s,n){r=e.memoizedState,s=s(n,r),s=s==null?r:K({},r,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Tn={isMounted:function(e){return(e=e._reactInternals)?dr(e)===e:!1},enqueueSetState:function(e,r,s){e=e._reactInternals;var n=Xe(),a=rr(e),l=Ot(n,a);l.payload=r,s!=null&&(l.callback=s),r=Zt(e,l,a),r!==null&&(_t(r,e,a,n),Sn(r,e,a))},enqueueReplaceState:function(e,r,s){e=e._reactInternals;var n=Xe(),a=rr(e),l=Ot(n,a);l.tag=1,l.payload=r,s!=null&&(l.callback=s),r=Zt(e,l,a),r!==null&&(_t(r,e,a,n),Sn(r,e,a))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var s=Xe(),n=rr(e),a=Ot(s,n);a.tag=2,r!=null&&(a.callback=r),r=Zt(e,a,n),r!==null&&(_t(r,e,n,s),Sn(r,e,n))}};function kc(e,r,s,n,a,l,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,c):r.prototype&&r.prototype.isPureReactComponent?!ys(s,n)||!ys(a,l):!0}function Sc(e,r,s){var n=!1,a=Qt,l=r.contextType;return typeof l=="object"&&l!==null?l=pt(l):(a=et(r)?mr:We.current,n=r.contextTypes,l=(n=n!=null)?Or(e,a):Qt),r=new r(s,l),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Tn,e.stateNode=r,r._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),r}function Cc(e,r,s,n){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,n),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,n),r.state!==e&&Tn.enqueueReplaceState(r,r.state,null)}function _l(e,r,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},dl(e);var l=r.contextType;typeof l=="object"&&l!==null?a.context=pt(l):(l=et(r)?mr:We.current,a.context=Or(e,l)),a.state=e.memoizedState,l=r.getDerivedStateFromProps,typeof l=="function"&&(wl(e,r,l,s),a.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(r=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),r!==a.state&&Tn.enqueueReplaceState(a,a.state,null),Cn(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Wr(e,r){try{var s="",n=r;do s+=le(n),n=n.return;while(n);var a=s}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:r,stack:a,digest:null}}function kl(e,r,s){return{value:e,source:null,stack:s??null,digest:r??null}}function Sl(e,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var km=typeof WeakMap=="function"?WeakMap:Map;function Ec(e,r,s){s=Ot(-1,s),s.tag=3,s.payload={element:null};var n=r.value;return s.callback=function(){Bn||(Bn=!0,Bl=n),Sl(e,r)},s}function Pc(e,r,s){s=Ot(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=r.value;s.payload=function(){return n(a)},s.callback=function(){Sl(e,r)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){Sl(e,r),typeof n!="function"&&(er===null?er=new Set([this]):er.add(this));var c=r.stack;this.componentDidCatch(r.value,{componentStack:c!==null?c:""})}),s}function Dc(e,r,s){var n=e.pingCache;if(n===null){n=e.pingCache=new km;var a=new Set;n.set(r,a)}else a=n.get(r),a===void 0&&(a=new Set,n.set(r,a));a.has(s)||(a.add(s),e=zm.bind(null,e,r,s),r.then(e,e))}function Lc(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function Rc(e,r,s,n,a){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=Ot(-1,1),r.tag=2,Zt(s,r,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var Sm=U.ReactCurrentOwner,tt=!1;function Ye(e,r,s,n){r.child=e===null?Zo(r,null,s,n):Br(r,e.child,s,n)}function Ac(e,r,s,n,a){s=s.render;var l=r.ref;return qr(r,a),n=fl(e,r,s,n,l,a),s=yl(),e!==null&&!tt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~a,Ft(e,r,a)):(Ce&&s&&el(r),r.flags|=1,Ye(e,r,n,a),r.child)}function Tc(e,r,s,n,a){if(e===null){var l=s.type;return typeof l=="function"&&!Kl(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=l,Mc(e,r,l,n,a)):(e=Vn(s.type,null,n,r,r.mode,a),e.ref=r.ref,e.return=r,r.child=e)}if(l=e.child,(e.lanes&a)===0){var c=l.memoizedProps;if(s=s.compare,s=s!==null?s:ys,s(c,n)&&e.ref===r.ref)return Ft(e,r,a)}return r.flags|=1,e=nr(l,n),e.ref=r.ref,e.return=r,r.child=e}function Mc(e,r,s,n,a){if(e!==null){var l=e.memoizedProps;if(ys(l,n)&&e.ref===r.ref)if(tt=!1,r.pendingProps=n=l,(e.lanes&a)!==0)(e.flags&131072)!==0&&(tt=!0);else return r.lanes=e.lanes,Ft(e,r,a)}return Cl(e,r,s,n,a)}function Ic(e,r,s){var n=r.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Vr,dt),dt|=s;else{if((s&1073741824)===0)return e=l!==null?l.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,we(Vr,dt),dt|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:s,we(Vr,dt),dt|=n}else l!==null?(n=l.baseLanes|s,r.memoizedState=null):n=s,we(Vr,dt),dt|=n;return Ye(e,r,a,s),r.child}function Oc(e,r){var s=r.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function Cl(e,r,s,n,a){var l=et(s)?mr:We.current;return l=Or(r,l),qr(r,a),s=fl(e,r,s,n,l,a),n=yl(),e!==null&&!tt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~a,Ft(e,r,a)):(Ce&&n&&el(r),r.flags|=1,Ye(e,r,s,a),r.child)}function Fc(e,r,s,n,a){if(et(s)){var l=!0;yn(r)}else l=!1;if(qr(r,a),r.stateNode===null)In(e,r),Sc(r,s,n),_l(r,s,n,a),n=!0;else if(e===null){var c=r.stateNode,f=r.memoizedProps;c.props=f;var S=c.context,I=s.contextType;typeof I=="object"&&I!==null?I=pt(I):(I=et(s)?mr:We.current,I=Or(r,I));var q=s.getDerivedStateFromProps,V=typeof q=="function"||typeof c.getSnapshotBeforeUpdate=="function";V||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==n||S!==I)&&Cc(r,c,n,I),Xt=!1;var B=r.memoizedState;c.state=B,Cn(r,n,c,a),S=r.memoizedState,f!==n||B!==S||Je.current||Xt?(typeof q=="function"&&(wl(r,s,q,n),S=r.memoizedState),(f=Xt||kc(r,s,f,n,B,S,I))?(V||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(r.flags|=4194308)):(typeof c.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=n,r.memoizedState=S),c.props=n,c.state=S,c.context=I,n=f):(typeof c.componentDidMount=="function"&&(r.flags|=4194308),n=!1)}else{c=r.stateNode,ec(e,r),f=r.memoizedProps,I=r.type===r.elementType?f:bt(r.type,f),c.props=I,V=r.pendingProps,B=c.context,S=s.contextType,typeof S=="object"&&S!==null?S=pt(S):(S=et(s)?mr:We.current,S=Or(r,S));var J=s.getDerivedStateFromProps;(q=typeof J=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==V||B!==S)&&Cc(r,c,n,S),Xt=!1,B=r.memoizedState,c.state=B,Cn(r,n,c,a);var te=r.memoizedState;f!==V||B!==te||Je.current||Xt?(typeof J=="function"&&(wl(r,s,J,n),te=r.memoizedState),(I=Xt||kc(r,s,I,n,B,te,S)||!1)?(q||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,te,S),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,te,S)),typeof c.componentDidUpdate=="function"&&(r.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof c.componentDidUpdate!="function"||f===e.memoizedProps&&B===e.memoizedState||(r.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&B===e.memoizedState||(r.flags|=1024),r.memoizedProps=n,r.memoizedState=te),c.props=n,c.state=te,c.context=S,n=I):(typeof c.componentDidUpdate!="function"||f===e.memoizedProps&&B===e.memoizedState||(r.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&B===e.memoizedState||(r.flags|=1024),n=!1)}return El(e,r,s,n,l,a)}function El(e,r,s,n,a,l){Oc(e,r);var c=(r.flags&128)!==0;if(!n&&!c)return a&&qo(r,s,!1),Ft(e,r,l);n=r.stateNode,Sm.current=r;var f=c&&typeof s.getDerivedStateFromError!="function"?null:n.render();return r.flags|=1,e!==null&&c?(r.child=Br(r,e.child,null,l),r.child=Br(r,null,f,l)):Ye(e,r,f,l),r.memoizedState=n.state,a&&qo(r,s,!0),r.child}function zc(e){var r=e.stateNode;r.pendingContext?Bo(e,r.pendingContext,r.pendingContext!==r.context):r.context&&Bo(e,r.context,!1),ul(e,r.containerInfo)}function Uc(e,r,s,n,a){return Ur(),nl(a),r.flags|=256,Ye(e,r,s,n),r.child}var Pl={dehydrated:null,treeContext:null,retryLane:0};function Dl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bc(e,r,s){var n=r.pendingProps,a=Ee.current,l=!1,c=(r.flags&128)!==0,f;if((f=c)||(f=e!==null&&e.memoizedState===null?!1:(a&2)!==0),f?(l=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),we(Ee,a&1),e===null)return sl(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(c=n.children,e=n.fallback,l?(n=r.mode,l=r.child,c={mode:"hidden",children:c},(n&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=c):l=Kn(c,n,0,null),e=Nr(e,n,s,null),l.return=r,e.return=r,l.sibling=e,r.child=l,r.child.memoizedState=Dl(s),r.memoizedState=Pl,e):Ll(r,c));if(a=e.memoizedState,a!==null&&(f=a.dehydrated,f!==null))return Cm(e,r,c,n,f,a,s);if(l){l=n.fallback,c=r.mode,a=e.child,f=a.sibling;var S={mode:"hidden",children:n.children};return(c&1)===0&&r.child!==a?(n=r.child,n.childLanes=0,n.pendingProps=S,r.deletions=null):(n=nr(a,S),n.subtreeFlags=a.subtreeFlags&14680064),f!==null?l=nr(f,l):(l=Nr(l,c,s,null),l.flags|=2),l.return=r,n.return=r,n.sibling=l,r.child=n,n=l,l=r.child,c=e.child.memoizedState,c=c===null?Dl(s):{baseLanes:c.baseLanes|s,cachePool:null,transitions:c.transitions},l.memoizedState=c,l.childLanes=e.childLanes&~s,r.memoizedState=Pl,n}return l=e.child,e=l.sibling,n=nr(l,{mode:"visible",children:n.children}),(r.mode&1)===0&&(n.lanes=s),n.return=r,n.sibling=null,e!==null&&(s=r.deletions,s===null?(r.deletions=[e],r.flags|=16):s.push(e)),r.child=n,r.memoizedState=null,n}function Ll(e,r){return r=Kn({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function Mn(e,r,s,n){return n!==null&&nl(n),Br(r,e.child,null,s),e=Ll(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Cm(e,r,s,n,a,l,c){if(s)return r.flags&256?(r.flags&=-257,n=kl(Error(d(422))),Mn(e,r,c,n)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(l=n.fallback,a=r.mode,n=Kn({mode:"visible",children:n.children},a,0,null),l=Nr(l,a,c,null),l.flags|=2,n.return=r,l.return=r,n.sibling=l,r.child=n,(r.mode&1)!==0&&Br(r,e.child,null,c),r.child.memoizedState=Dl(c),r.memoizedState=Pl,l);if((r.mode&1)===0)return Mn(e,r,c,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var f=n.dgst;return n=f,l=Error(d(419)),n=kl(l,n,void 0),Mn(e,r,c,n)}if(f=(c&e.childLanes)!==0,tt||f){if(n=ze,n!==null){switch(c&-c){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(n.suspendedLanes|c))!==0?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,It(e,a),_t(n,e,a,-1))}return Vl(),n=kl(Error(d(421))),Mn(e,r,c,n)}return a.data==="$?"?(r.flags|=128,r.child=e.child,r=Um.bind(null,e),a._reactRetry=r,null):(e=l.treeContext,ct=Vt(a.nextSibling),ot=r,Ce=!0,jt=null,e!==null&&(ut[mt++]=Tt,ut[mt++]=Mt,ut[mt++]=pr,Tt=e.id,Mt=e.overflow,pr=r),r=Ll(r,n.children),r.flags|=4096,r)}function Hc(e,r,s){e.lanes|=r;var n=e.alternate;n!==null&&(n.lanes|=r),ol(e.return,r,s)}function Rl(e,r,s,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(l.isBackwards=r,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=s,l.tailMode=a)}function qc(e,r,s){var n=r.pendingProps,a=n.revealOrder,l=n.tail;if(Ye(e,r,n.children,s),n=Ee.current,(n&2)!==0)n=n&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hc(e,s,r);else if(e.tag===19)Hc(e,s,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(we(Ee,n),(r.mode&1)===0)r.memoizedState=null;else switch(a){case"forwards":for(s=r.child,a=null;s!==null;)e=s.alternate,e!==null&&En(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=r.child,r.child=null):(a=s.sibling,s.sibling=null),Rl(r,!1,a,s,l);break;case"backwards":for(s=null,a=r.child,r.child=null;a!==null;){if(e=a.alternate,e!==null&&En(e)===null){r.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Rl(r,!0,s,null,l);break;case"together":Rl(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function In(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function Ft(e,r,s){if(e!==null&&(r.dependencies=e.dependencies),yr|=r.lanes,(s&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(d(153));if(r.child!==null){for(e=r.child,s=nr(e,e.pendingProps),r.child=s,s.return=r;e.sibling!==null;)e=e.sibling,s=s.sibling=nr(e,e.pendingProps),s.return=r;s.sibling=null}return r.child}function Em(e,r,s){switch(r.tag){case 3:zc(r),Ur();break;case 5:sc(r);break;case 1:et(r.type)&&yn(r);break;case 4:ul(r,r.stateNode.containerInfo);break;case 10:var n=r.type._context,a=r.memoizedProps.value;we(_n,n._currentValue),n._currentValue=a;break;case 13:if(n=r.memoizedState,n!==null)return n.dehydrated!==null?(we(Ee,Ee.current&1),r.flags|=128,null):(s&r.child.childLanes)!==0?Bc(e,r,s):(we(Ee,Ee.current&1),e=Ft(e,r,s),e!==null?e.sibling:null);we(Ee,Ee.current&1);break;case 19:if(n=(s&r.childLanes)!==0,(e.flags&128)!==0){if(n)return qc(e,r,s);r.flags|=128}if(a=r.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),we(Ee,Ee.current),n)break;return null;case 22:case 23:return r.lanes=0,Ic(e,r,s)}return Ft(e,r,s)}var $c,Al,Wc,Gc;$c=function(e,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Al=function(){},Wc=function(e,r,s,n){var a=e.memoizedProps;if(a!==n){e=r.stateNode,hr(Et.current);var l=null;switch(s){case"input":a=oa(e,a),n=oa(e,n),l=[];break;case"select":a=K({},a,{value:void 0}),n=K({},n,{value:void 0}),l=[];break;case"textarea":a=ua(e,a),n=ua(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=gn)}pa(s,n);var c;s=null;for(I in a)if(!n.hasOwnProperty(I)&&a.hasOwnProperty(I)&&a[I]!=null)if(I==="style"){var f=a[I];for(c in f)f.hasOwnProperty(c)&&(s||(s={}),s[c]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(b.hasOwnProperty(I)?l||(l=[]):(l=l||[]).push(I,null));for(I in n){var S=n[I];if(f=a?.[I],n.hasOwnProperty(I)&&S!==f&&(S!=null||f!=null))if(I==="style")if(f){for(c in f)!f.hasOwnProperty(c)||S&&S.hasOwnProperty(c)||(s||(s={}),s[c]="");for(c in S)S.hasOwnProperty(c)&&f[c]!==S[c]&&(s||(s={}),s[c]=S[c])}else s||(l||(l=[]),l.push(I,s)),s=S;else I==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,f=f?f.__html:void 0,S!=null&&f!==S&&(l=l||[]).push(I,S)):I==="children"?typeof S!="string"&&typeof S!="number"||(l=l||[]).push(I,""+S):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(b.hasOwnProperty(I)?(S!=null&&I==="onScroll"&&_e("scroll",e),l||f===S||(l=[])):(l=l||[]).push(I,S))}s&&(l=l||[]).push("style",s);var I=l;(r.updateQueue=I)&&(r.flags|=4)}},Gc=function(e,r,s,n){s!==n&&(r.flags|=4)};function As(e,r){if(!Ce)switch(e.tailMode){case"hidden":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ve(e){var r=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(r)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,r}function Pm(e,r,s){var n=r.pendingProps;switch(tl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(r),null;case 1:return et(r.type)&&fn(),Ve(r),null;case 3:return n=r.stateNode,$r(),ke(Je),ke(We),xl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Nn(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,jt!==null&&($l(jt),jt=null))),Al(e,r),Ve(r),null;case 5:ml(r);var a=hr(Es.current);if(s=r.type,e!==null&&r.stateNode!=null)Wc(e,r,s,n,a),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!n){if(r.stateNode===null)throw Error(d(166));return Ve(r),null}if(e=hr(Et.current),Nn(r)){n=r.stateNode,s=r.type;var l=r.memoizedProps;switch(n[Ct]=r,n[ws]=l,e=(r.mode&1)!==0,s){case"dialog":_e("cancel",n),_e("close",n);break;case"iframe":case"object":case"embed":_e("load",n);break;case"video":case"audio":for(a=0;a<js.length;a++)_e(js[a],n);break;case"source":_e("error",n);break;case"img":case"image":case"link":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"input":ki(n,l),_e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},_e("invalid",n);break;case"textarea":Ei(n,l),_e("invalid",n)}pa(s,l),a=null;for(var c in l)if(l.hasOwnProperty(c)){var f=l[c];c==="children"?typeof f=="string"?n.textContent!==f&&(l.suppressHydrationWarning!==!0&&xn(n.textContent,f,e),a=["children",f]):typeof f=="number"&&n.textContent!==""+f&&(l.suppressHydrationWarning!==!0&&xn(n.textContent,f,e),a=["children",""+f]):b.hasOwnProperty(c)&&f!=null&&c==="onScroll"&&_e("scroll",n)}switch(s){case"input":$s(n),Ci(n,l,!0);break;case"textarea":$s(n),Di(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=gn)}n=a,r.updateQueue=n,n!==null&&(r.flags|=4)}else{c=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Li(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=c.createElement(s,{is:n.is}):(e=c.createElement(s),s==="select"&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,s),e[Ct]=r,e[ws]=n,$c(e,r,!1,!1),r.stateNode=e;e:{switch(c=xa(s,n),s){case"dialog":_e("cancel",e),_e("close",e),a=n;break;case"iframe":case"object":case"embed":_e("load",e),a=n;break;case"video":case"audio":for(a=0;a<js.length;a++)_e(js[a],e);a=n;break;case"source":_e("error",e),a=n;break;case"img":case"image":case"link":_e("error",e),_e("load",e),a=n;break;case"details":_e("toggle",e),a=n;break;case"input":ki(e,n),a=oa(e,n),_e("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=K({},n,{value:void 0}),_e("invalid",e);break;case"textarea":Ei(e,n),a=ua(e,n),_e("invalid",e);break;default:a=n}pa(s,a),f=a;for(l in f)if(f.hasOwnProperty(l)){var S=f[l];l==="style"?Ti(e,S):l==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&Ri(e,S)):l==="children"?typeof S=="string"?(s!=="textarea"||S!=="")&&ts(e,S):typeof S=="number"&&ts(e,""+S):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(b.hasOwnProperty(l)?S!=null&&l==="onScroll"&&_e("scroll",e):S!=null&&F(e,l,S,c))}switch(s){case"input":$s(e),Ci(e,n,!1);break;case"textarea":$s(e),Di(e);break;case"option":n.value!=null&&e.setAttribute("value",""+pe(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?kr(e,!!n.multiple,l,!1):n.defaultValue!=null&&kr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=gn)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ve(r),null;case 6:if(e&&r.stateNode!=null)Gc(e,r,e.memoizedProps,n);else{if(typeof n!="string"&&r.stateNode===null)throw Error(d(166));if(s=hr(Es.current),hr(Et.current),Nn(r)){if(n=r.stateNode,s=r.memoizedProps,n[Ct]=r,(l=n.nodeValue!==s)&&(e=ot,e!==null))switch(e.tag){case 3:xn(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xn(n.nodeValue,s,(e.mode&1)!==0)}l&&(r.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Ct]=r,r.stateNode=n}return Ve(r),null;case 13:if(ke(Ee),n=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&ct!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Qo(),Ur(),r.flags|=98560,l=!1;else if(l=Nn(r),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(d(318));if(l=r.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(d(317));l[Ct]=r}else Ur(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ve(r),l=!1}else jt!==null&&($l(jt),jt=null),l=!0;if(!l)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=s,r):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(Ee.current&1)!==0?Oe===0&&(Oe=3):Vl())),r.updateQueue!==null&&(r.flags|=4),Ve(r),null);case 4:return $r(),Al(e,r),e===null&&bs(r.stateNode.containerInfo),Ve(r),null;case 10:return il(r.type._context),Ve(r),null;case 17:return et(r.type)&&fn(),Ve(r),null;case 19:if(ke(Ee),l=r.memoizedState,l===null)return Ve(r),null;if(n=(r.flags&128)!==0,c=l.rendering,c===null)if(n)As(l,!1);else{if(Oe!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(c=En(e),c!==null){for(r.flags|=128,As(l,!1),n=c.updateQueue,n!==null&&(r.updateQueue=n,r.flags|=4),r.subtreeFlags=0,n=s,s=r.child;s!==null;)l=s,e=n,l.flags&=14680066,c=l.alternate,c===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=c.childLanes,l.lanes=c.lanes,l.child=c.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=c.memoizedProps,l.memoizedState=c.memoizedState,l.updateQueue=c.updateQueue,l.type=c.type,e=c.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return we(Ee,Ee.current&1|2),r.child}e=e.sibling}l.tail!==null&&Le()>Kr&&(r.flags|=128,n=!0,As(l,!1),r.lanes=4194304)}else{if(!n)if(e=En(c),e!==null){if(r.flags|=128,n=!0,s=e.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),As(l,!0),l.tail===null&&l.tailMode==="hidden"&&!c.alternate&&!Ce)return Ve(r),null}else 2*Le()-l.renderingStartTime>Kr&&s!==1073741824&&(r.flags|=128,n=!0,As(l,!1),r.lanes=4194304);l.isBackwards?(c.sibling=r.child,r.child=c):(s=l.last,s!==null?s.sibling=c:r.child=c,l.last=c)}return l.tail!==null?(r=l.tail,l.rendering=r,l.tail=r.sibling,l.renderingStartTime=Le(),r.sibling=null,s=Ee.current,we(Ee,n?s&1|2:s&1),r):(Ve(r),null);case 22:case 23:return Gl(),n=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(r.flags|=8192),n&&(r.mode&1)!==0?(dt&1073741824)!==0&&(Ve(r),r.subtreeFlags&6&&(r.flags|=8192)):Ve(r),null;case 24:return null;case 25:return null}throw Error(d(156,r.tag))}function Dm(e,r){switch(tl(r),r.tag){case 1:return et(r.type)&&fn(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return $r(),ke(Je),ke(We),xl(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return ml(r),null;case 13:if(ke(Ee),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(d(340));Ur()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return ke(Ee),null;case 4:return $r(),null;case 10:return il(r.type._context),null;case 22:case 23:return Gl(),null;case 24:return null;default:return null}}var On=!1,Ke=!1,Lm=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Gr(e,r){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){De(e,r,n)}else s.current=null}function Tl(e,r,s){try{s()}catch(n){De(e,r,n)}}var Vc=!1;function Rm(e,r){if(Ga=rn,e=ko(),Fa(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var c=0,f=-1,S=-1,I=0,q=0,V=e,B=null;t:for(;;){for(var J;V!==s||a!==0&&V.nodeType!==3||(f=c+a),V!==l||n!==0&&V.nodeType!==3||(S=c+n),V.nodeType===3&&(c+=V.nodeValue.length),(J=V.firstChild)!==null;)B=V,V=J;for(;;){if(V===e)break t;if(B===s&&++I===a&&(f=c),B===l&&++q===n&&(S=c),(J=V.nextSibling)!==null)break;V=B,B=V.parentNode}V=J}s=f===-1||S===-1?null:{start:f,end:S}}else s=null}s=s||{start:0,end:0}}else s=null;for(Va={focusedElem:e,selectionRange:s},rn=!1,ee=r;ee!==null;)if(r=ee,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,ee=e;else for(;ee!==null;){r=ee;try{var te=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var re=te.memoizedProps,Re=te.memoizedState,A=r.stateNode,P=A.getSnapshotBeforeUpdate(r.elementType===r.type?re:bt(r.type,re),Re);A.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var M=r.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(d(163))}}catch(Q){De(r,r.return,Q)}if(e=r.sibling,e!==null){e.return=r.return,ee=e;break}ee=r.return}return te=Vc,Vc=!1,te}function Ts(e,r,s){var n=r.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Tl(r,s,l)}a=a.next}while(a!==n)}}function Fn(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==r)}}function Ml(e){var r=e.ref;if(r!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof r=="function"?r(e):r.current=e}}function Kc(e){var r=e.alternate;r!==null&&(e.alternate=null,Kc(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[Ct],delete r[ws],delete r[Xa],delete r[xm],delete r[gm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Qc(e){return e.tag===5||e.tag===3||e.tag===4}function Yc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Il(e,r,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,r?s.nodeType===8?s.parentNode.insertBefore(e,r):s.insertBefore(e,r):(s.nodeType===8?(r=s.parentNode,r.insertBefore(e,s)):(r=s,r.appendChild(e)),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=gn));else if(n!==4&&(e=e.child,e!==null))for(Il(e,r,s),e=e.sibling;e!==null;)Il(e,r,s),e=e.sibling}function Ol(e,r,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,r?s.insertBefore(e,r):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ol(e,r,s),e=e.sibling;e!==null;)Ol(e,r,s),e=e.sibling}var qe=null,Nt=!1;function Jt(e,r,s){for(s=s.child;s!==null;)Xc(e,r,s),s=s.sibling}function Xc(e,r,s){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(Ys,s)}catch{}switch(s.tag){case 5:Ke||Gr(s,r);case 6:var n=qe,a=Nt;qe=null,Jt(e,r,s),qe=n,Nt=a,qe!==null&&(Nt?(e=qe,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):qe.removeChild(s.stateNode));break;case 18:qe!==null&&(Nt?(e=qe,s=s.stateNode,e.nodeType===8?Ya(e.parentNode,s):e.nodeType===1&&Ya(e,s),ms(e)):Ya(qe,s.stateNode));break;case 4:n=qe,a=Nt,qe=s.stateNode.containerInfo,Nt=!0,Jt(e,r,s),qe=n,Nt=a;break;case 0:case 11:case 14:case 15:if(!Ke&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,c=l.destroy;l=l.tag,c!==void 0&&((l&2)!==0||(l&4)!==0)&&Tl(s,r,c),a=a.next}while(a!==n)}Jt(e,r,s);break;case 1:if(!Ke&&(Gr(s,r),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(f){De(s,r,f)}Jt(e,r,s);break;case 21:Jt(e,r,s);break;case 22:s.mode&1?(Ke=(n=Ke)||s.memoizedState!==null,Jt(e,r,s),Ke=n):Jt(e,r,s);break;default:Jt(e,r,s)}}function Zc(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Lm),r.forEach(function(n){var a=Bm.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function wt(e,r){var s=r.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var l=e,c=r,f=c;e:for(;f!==null;){switch(f.tag){case 5:qe=f.stateNode,Nt=!1;break e;case 3:qe=f.stateNode.containerInfo,Nt=!0;break e;case 4:qe=f.stateNode.containerInfo,Nt=!0;break e}f=f.return}if(qe===null)throw Error(d(160));Xc(l,c,a),qe=null,Nt=!1;var S=a.alternate;S!==null&&(S.return=null),a.return=null}catch(I){De(a,r,I)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Jc(r,e),r=r.sibling}function Jc(e,r){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wt(r,e),Dt(e),n&4){try{Ts(3,e,e.return),Fn(3,e)}catch(re){De(e,e.return,re)}try{Ts(5,e,e.return)}catch(re){De(e,e.return,re)}}break;case 1:wt(r,e),Dt(e),n&512&&s!==null&&Gr(s,s.return);break;case 5:if(wt(r,e),Dt(e),n&512&&s!==null&&Gr(s,s.return),e.flags&32){var a=e.stateNode;try{ts(a,"")}catch(re){De(e,e.return,re)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,c=s!==null?s.memoizedProps:l,f=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{f==="input"&&l.type==="radio"&&l.name!=null&&Si(a,l),xa(f,c);var I=xa(f,l);for(c=0;c<S.length;c+=2){var q=S[c],V=S[c+1];q==="style"?Ti(a,V):q==="dangerouslySetInnerHTML"?Ri(a,V):q==="children"?ts(a,V):F(a,q,V,I)}switch(f){case"input":ca(a,l);break;case"textarea":Pi(a,l);break;case"select":var B=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var J=l.value;J!=null?kr(a,!!l.multiple,J,!1):B!==!!l.multiple&&(l.defaultValue!=null?kr(a,!!l.multiple,l.defaultValue,!0):kr(a,!!l.multiple,l.multiple?[]:"",!1))}a[ws]=l}catch(re){De(e,e.return,re)}}break;case 6:if(wt(r,e),Dt(e),n&4){if(e.stateNode===null)throw Error(d(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(re){De(e,e.return,re)}}break;case 3:if(wt(r,e),Dt(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{ms(r.containerInfo)}catch(re){De(e,e.return,re)}break;case 4:wt(r,e),Dt(e);break;case 13:wt(r,e),Dt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Ul=Le())),n&4&&Zc(e);break;case 22:if(q=s!==null&&s.memoizedState!==null,e.mode&1?(Ke=(I=Ke)||q,wt(r,e),Ke=I):wt(r,e),Dt(e),n&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!q&&(e.mode&1)!==0)for(ee=e,q=e.child;q!==null;){for(V=ee=q;ee!==null;){switch(B=ee,J=B.child,B.tag){case 0:case 11:case 14:case 15:Ts(4,B,B.return);break;case 1:Gr(B,B.return);var te=B.stateNode;if(typeof te.componentWillUnmount=="function"){n=B,s=B.return;try{r=n,te.props=r.memoizedProps,te.state=r.memoizedState,te.componentWillUnmount()}catch(re){De(n,s,re)}}break;case 5:Gr(B,B.return);break;case 22:if(B.memoizedState!==null){rd(V);continue}}J!==null?(J.return=B,ee=J):rd(V)}q=q.sibling}e:for(q=null,V=e;;){if(V.tag===5){if(q===null){q=V;try{a=V.stateNode,I?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(f=V.stateNode,S=V.memoizedProps.style,c=S!=null&&S.hasOwnProperty("display")?S.display:null,f.style.display=Ai("display",c))}catch(re){De(e,e.return,re)}}}else if(V.tag===6){if(q===null)try{V.stateNode.nodeValue=I?"":V.memoizedProps}catch(re){De(e,e.return,re)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===e)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===e)break e;for(;V.sibling===null;){if(V.return===null||V.return===e)break e;q===V&&(q=null),V=V.return}q===V&&(q=null),V.sibling.return=V.return,V=V.sibling}}break;case 19:wt(r,e),Dt(e),n&4&&Zc(e);break;case 21:break;default:wt(r,e),Dt(e)}}function Dt(e){var r=e.flags;if(r&2){try{e:{for(var s=e.return;s!==null;){if(Qc(s)){var n=s;break e}s=s.return}throw Error(d(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(ts(a,""),n.flags&=-33);var l=Yc(e);Ol(e,l,a);break;case 3:case 4:var c=n.stateNode.containerInfo,f=Yc(e);Il(e,f,c);break;default:throw Error(d(161))}}catch(S){De(e,e.return,S)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Am(e,r,s){ee=e,ed(e)}function ed(e,r,s){for(var n=(e.mode&1)!==0;ee!==null;){var a=ee,l=a.child;if(a.tag===22&&n){var c=a.memoizedState!==null||On;if(!c){var f=a.alternate,S=f!==null&&f.memoizedState!==null||Ke;f=On;var I=Ke;if(On=c,(Ke=S)&&!I)for(ee=a;ee!==null;)c=ee,S=c.child,c.tag===22&&c.memoizedState!==null?sd(a):S!==null?(S.return=c,ee=S):sd(a);for(;l!==null;)ee=l,ed(l),l=l.sibling;ee=a,On=f,Ke=I}td(e)}else(a.subtreeFlags&8772)!==0&&l!==null?(l.return=a,ee=l):td(e)}}function td(e){for(;ee!==null;){var r=ee;if((r.flags&8772)!==0){var s=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ke||Fn(5,r);break;case 1:var n=r.stateNode;if(r.flags&4&&!Ke)if(s===null)n.componentDidMount();else{var a=r.elementType===r.type?s.memoizedProps:bt(r.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=r.updateQueue;l!==null&&rc(r,l,n);break;case 3:var c=r.updateQueue;if(c!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}rc(r,c,s)}break;case 5:var f=r.stateNode;if(s===null&&r.flags&4){s=f;var S=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&s.focus();break;case"img":S.src&&(s.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var I=r.alternate;if(I!==null){var q=I.memoizedState;if(q!==null){var V=q.dehydrated;V!==null&&ms(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(d(163))}Ke||r.flags&512&&Ml(r)}catch(B){De(r,r.return,B)}}if(r===e){ee=null;break}if(s=r.sibling,s!==null){s.return=r.return,ee=s;break}ee=r.return}}function rd(e){for(;ee!==null;){var r=ee;if(r===e){ee=null;break}var s=r.sibling;if(s!==null){s.return=r.return,ee=s;break}ee=r.return}}function sd(e){for(;ee!==null;){var r=ee;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{Fn(4,r)}catch(S){De(r,s,S)}break;case 1:var n=r.stateNode;if(typeof n.componentDidMount=="function"){var a=r.return;try{n.componentDidMount()}catch(S){De(r,a,S)}}var l=r.return;try{Ml(r)}catch(S){De(r,l,S)}break;case 5:var c=r.return;try{Ml(r)}catch(S){De(r,c,S)}}}catch(S){De(r,r.return,S)}if(r===e){ee=null;break}var f=r.sibling;if(f!==null){f.return=r.return,ee=f;break}ee=r.return}}var Tm=Math.ceil,zn=U.ReactCurrentDispatcher,Fl=U.ReactCurrentOwner,gt=U.ReactCurrentBatchConfig,fe=0,ze=null,Te=null,$e=0,dt=0,Vr=Kt(0),Oe=0,Ms=null,yr=0,Un=0,zl=0,Is=null,rt=null,Ul=0,Kr=1/0,zt=null,Bn=!1,Bl=null,er=null,Hn=!1,tr=null,qn=0,Os=0,Hl=null,$n=-1,Wn=0;function Xe(){return(fe&6)!==0?Le():$n!==-1?$n:$n=Le()}function rr(e){return(e.mode&1)===0?1:(fe&2)!==0&&$e!==0?$e&-$e:fm.transition!==null?(Wn===0&&(Wn=Qi()),Wn):(e=je,e!==0||(e=window.event,e=e===void 0?16:no(e.type)),e)}function _t(e,r,s,n){if(50<Os)throw Os=0,Hl=null,Error(d(185));is(e,s,n),((fe&2)===0||e!==ze)&&(e===ze&&((fe&2)===0&&(Un|=s),Oe===4&&sr(e,$e)),st(e,n),s===1&&fe===0&&(r.mode&1)===0&&(Kr=Le()+500,vn&&Yt()))}function st(e,r){var s=e.callbackNode;fu(e,r);var n=Js(e,e===ze?$e:0);if(n===0)s!==null&&Gi(s),e.callbackNode=null,e.callbackPriority=0;else if(r=n&-n,e.callbackPriority!==r){if(s!=null&&Gi(s),r===1)e.tag===0?hm(ad.bind(null,e)):$o(ad.bind(null,e)),mm(function(){(fe&6)===0&&Yt()}),s=null;else{switch(Yi(n)){case 1:s=ba;break;case 4:s=Vi;break;case 16:s=Qs;break;case 536870912:s=Ki;break;default:s=Qs}s=pd(s,nd.bind(null,e))}e.callbackPriority=r,e.callbackNode=s}}function nd(e,r){if($n=-1,Wn=0,(fe&6)!==0)throw Error(d(327));var s=e.callbackNode;if(Qr()&&e.callbackNode!==s)return null;var n=Js(e,e===ze?$e:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||r)r=Gn(e,n);else{r=n;var a=fe;fe|=2;var l=id();(ze!==e||$e!==r)&&(zt=null,Kr=Le()+500,jr(e,r));do try{Om();break}catch(f){ld(e,f)}while(!0);ll(),zn.current=l,fe=a,Te!==null?r=0:(ze=null,$e=0,r=Oe)}if(r!==0){if(r===2&&(a=Na(e),a!==0&&(n=a,r=ql(e,a))),r===1)throw s=Ms,jr(e,0),sr(e,n),st(e,Le()),s;if(r===6)sr(e,n);else{if(a=e.current.alternate,(n&30)===0&&!Mm(a)&&(r=Gn(e,n),r===2&&(l=Na(e),l!==0&&(n=l,r=ql(e,l))),r===1))throw s=Ms,jr(e,0),sr(e,n),st(e,Le()),s;switch(e.finishedWork=a,e.finishedLanes=n,r){case 0:case 1:throw Error(d(345));case 2:br(e,rt,zt);break;case 3:if(sr(e,n),(n&130023424)===n&&(r=Ul+500-Le(),10<r)){if(Js(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Xe(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Qa(br.bind(null,e,rt,zt),r);break}br(e,rt,zt);break;case 4:if(sr(e,n),(n&4194240)===n)break;for(r=e.eventTimes,a=-1;0<n;){var c=31-yt(n);l=1<<c,c=r[c],c>a&&(a=c),n&=~l}if(n=a,n=Le()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Tm(n/1960))-n,10<n){e.timeoutHandle=Qa(br.bind(null,e,rt,zt),n);break}br(e,rt,zt);break;case 5:br(e,rt,zt);break;default:throw Error(d(329))}}}return st(e,Le()),e.callbackNode===s?nd.bind(null,e):null}function ql(e,r){var s=Is;return e.current.memoizedState.isDehydrated&&(jr(e,r).flags|=256),e=Gn(e,r),e!==2&&(r=rt,rt=s,r!==null&&$l(r)),e}function $l(e){rt===null?rt=e:rt.push.apply(rt,e)}function Mm(e){for(var r=e;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],l=a.getSnapshot;a=a.value;try{if(!vt(l(),a))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function sr(e,r){for(r&=~zl,r&=~Un,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var s=31-yt(r),n=1<<s;e[s]=-1,r&=~n}}function ad(e){if((fe&6)!==0)throw Error(d(327));Qr();var r=Js(e,0);if((r&1)===0)return st(e,Le()),null;var s=Gn(e,r);if(e.tag!==0&&s===2){var n=Na(e);n!==0&&(r=n,s=ql(e,n))}if(s===1)throw s=Ms,jr(e,0),sr(e,r),st(e,Le()),s;if(s===6)throw Error(d(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,br(e,rt,zt),st(e,Le()),null}function Wl(e,r){var s=fe;fe|=1;try{return e(r)}finally{fe=s,fe===0&&(Kr=Le()+500,vn&&Yt())}}function vr(e){tr!==null&&tr.tag===0&&(fe&6)===0&&Qr();var r=fe;fe|=1;var s=gt.transition,n=je;try{if(gt.transition=null,je=1,e)return e()}finally{je=n,gt.transition=s,fe=r,(fe&6)===0&&Yt()}}function Gl(){dt=Vr.current,ke(Vr)}function jr(e,r){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,um(s)),Te!==null)for(s=Te.return;s!==null;){var n=s;switch(tl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fn();break;case 3:$r(),ke(Je),ke(We),xl();break;case 5:ml(n);break;case 4:$r();break;case 13:ke(Ee);break;case 19:ke(Ee);break;case 10:il(n.type._context);break;case 22:case 23:Gl()}s=s.return}if(ze=e,Te=e=nr(e.current,null),$e=dt=r,Oe=0,Ms=null,zl=Un=yr=0,rt=Is=null,gr!==null){for(r=0;r<gr.length;r++)if(s=gr[r],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,l=s.pending;if(l!==null){var c=l.next;l.next=a,n.next=c}s.pending=n}gr=null}return e}function ld(e,r){do{var s=Te;try{if(ll(),Pn.current=An,Dn){for(var n=Pe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Dn=!1}if(fr=0,Fe=Ie=Pe=null,Ps=!1,Ds=0,Fl.current=null,s===null||s.return===null){Oe=1,Ms=r,Te=null;break}e:{var l=e,c=s.return,f=s,S=r;if(r=$e,f.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var I=S,q=f,V=q.tag;if((q.mode&1)===0&&(V===0||V===11||V===15)){var B=q.alternate;B?(q.updateQueue=B.updateQueue,q.memoizedState=B.memoizedState,q.lanes=B.lanes):(q.updateQueue=null,q.memoizedState=null)}var J=Lc(c);if(J!==null){J.flags&=-257,Rc(J,c,f,l,r),J.mode&1&&Dc(l,I,r),r=J,S=I;var te=r.updateQueue;if(te===null){var re=new Set;re.add(S),r.updateQueue=re}else te.add(S);break e}else{if((r&1)===0){Dc(l,I,r),Vl();break e}S=Error(d(426))}}else if(Ce&&f.mode&1){var Re=Lc(c);if(Re!==null){(Re.flags&65536)===0&&(Re.flags|=256),Rc(Re,c,f,l,r),nl(Wr(S,f));break e}}l=S=Wr(S,f),Oe!==4&&(Oe=2),Is===null?Is=[l]:Is.push(l),l=c;do{switch(l.tag){case 3:l.flags|=65536,r&=-r,l.lanes|=r;var A=Ec(l,S,r);tc(l,A);break e;case 1:f=S;var P=l.type,M=l.stateNode;if((l.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(er===null||!er.has(M)))){l.flags|=65536,r&=-r,l.lanes|=r;var Q=Pc(l,f,r);tc(l,Q);break e}}l=l.return}while(l!==null)}cd(s)}catch(se){r=se,Te===s&&s!==null&&(Te=s=s.return);continue}break}while(!0)}function id(){var e=zn.current;return zn.current=An,e===null?An:e}function Vl(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),ze===null||(yr&268435455)===0&&(Un&268435455)===0||sr(ze,$e)}function Gn(e,r){var s=fe;fe|=2;var n=id();(ze!==e||$e!==r)&&(zt=null,jr(e,r));do try{Im();break}catch(a){ld(e,a)}while(!0);if(ll(),fe=s,zn.current=n,Te!==null)throw Error(d(261));return ze=null,$e=0,Oe}function Im(){for(;Te!==null;)od(Te)}function Om(){for(;Te!==null&&!ou();)od(Te)}function od(e){var r=md(e.alternate,e,dt);e.memoizedProps=e.pendingProps,r===null?cd(e):Te=r,Fl.current=null}function cd(e){var r=e;do{var s=r.alternate;if(e=r.return,(r.flags&32768)===0){if(s=Pm(s,r,dt),s!==null){Te=s;return}}else{if(s=Dm(s,r),s!==null){s.flags&=32767,Te=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Te=null;return}}if(r=r.sibling,r!==null){Te=r;return}Te=r=e}while(r!==null);Oe===0&&(Oe=5)}function br(e,r,s){var n=je,a=gt.transition;try{gt.transition=null,je=1,Fm(e,r,s,n)}finally{gt.transition=a,je=n}return null}function Fm(e,r,s,n){do Qr();while(tr!==null);if((fe&6)!==0)throw Error(d(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(d(177));e.callbackNode=null,e.callbackPriority=0;var l=s.lanes|s.childLanes;if(yu(e,l),e===ze&&(Te=ze=null,$e=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Hn||(Hn=!0,pd(Qs,function(){return Qr(),null})),l=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||l){l=gt.transition,gt.transition=null;var c=je;je=1;var f=fe;fe|=4,Fl.current=null,Rm(e,s),Jc(s,e),nm(Va),rn=!!Ga,Va=Ga=null,e.current=s,Am(s),cu(),fe=f,je=c,gt.transition=l}else e.current=s;if(Hn&&(Hn=!1,tr=e,qn=a),l=e.pendingLanes,l===0&&(er=null),mu(s.stateNode),st(e,Le()),r!==null)for(n=e.onRecoverableError,s=0;s<r.length;s++)a=r[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Bn)throw Bn=!1,e=Bl,Bl=null,e;return(qn&1)!==0&&e.tag!==0&&Qr(),l=e.pendingLanes,(l&1)!==0?e===Hl?Os++:(Os=0,Hl=e):Os=0,Yt(),null}function Qr(){if(tr!==null){var e=Yi(qn),r=gt.transition,s=je;try{if(gt.transition=null,je=16>e?16:e,tr===null)var n=!1;else{if(e=tr,tr=null,qn=0,(fe&6)!==0)throw Error(d(331));var a=fe;for(fe|=4,ee=e.current;ee!==null;){var l=ee,c=l.child;if((ee.flags&16)!==0){var f=l.deletions;if(f!==null){for(var S=0;S<f.length;S++){var I=f[S];for(ee=I;ee!==null;){var q=ee;switch(q.tag){case 0:case 11:case 15:Ts(8,q,l)}var V=q.child;if(V!==null)V.return=q,ee=V;else for(;ee!==null;){q=ee;var B=q.sibling,J=q.return;if(Kc(q),q===I){ee=null;break}if(B!==null){B.return=J,ee=B;break}ee=J}}}var te=l.alternate;if(te!==null){var re=te.child;if(re!==null){te.child=null;do{var Re=re.sibling;re.sibling=null,re=Re}while(re!==null)}}ee=l}}if((l.subtreeFlags&2064)!==0&&c!==null)c.return=l,ee=c;else e:for(;ee!==null;){if(l=ee,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:Ts(9,l,l.return)}var A=l.sibling;if(A!==null){A.return=l.return,ee=A;break e}ee=l.return}}var P=e.current;for(ee=P;ee!==null;){c=ee;var M=c.child;if((c.subtreeFlags&2064)!==0&&M!==null)M.return=c,ee=M;else e:for(c=P;ee!==null;){if(f=ee,(f.flags&2048)!==0)try{switch(f.tag){case 0:case 11:case 15:Fn(9,f)}}catch(se){De(f,f.return,se)}if(f===c){ee=null;break e}var Q=f.sibling;if(Q!==null){Q.return=f.return,ee=Q;break e}ee=f.return}}if(fe=a,Yt(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(Ys,e)}catch{}n=!0}return n}finally{je=s,gt.transition=r}}return!1}function dd(e,r,s){r=Wr(s,r),r=Ec(e,r,1),e=Zt(e,r,1),r=Xe(),e!==null&&(is(e,1,r),st(e,r))}function De(e,r,s){if(e.tag===3)dd(e,e,s);else for(;r!==null;){if(r.tag===3){dd(r,e,s);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(er===null||!er.has(n))){e=Wr(s,e),e=Pc(r,e,1),r=Zt(r,e,1),e=Xe(),r!==null&&(is(r,1,e),st(r,e));break}}r=r.return}}function zm(e,r,s){var n=e.pingCache;n!==null&&n.delete(r),r=Xe(),e.pingedLanes|=e.suspendedLanes&s,ze===e&&($e&s)===s&&(Oe===4||Oe===3&&($e&130023424)===$e&&500>Le()-Ul?jr(e,0):zl|=s),st(e,r)}function ud(e,r){r===0&&((e.mode&1)===0?r=1:(r=Zs,Zs<<=1,(Zs&130023424)===0&&(Zs=4194304)));var s=Xe();e=It(e,r),e!==null&&(is(e,r,s),st(e,s))}function Um(e){var r=e.memoizedState,s=0;r!==null&&(s=r.retryLane),ud(e,s)}function Bm(e,r){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(d(314))}n!==null&&n.delete(r),ud(e,s)}var md;md=function(e,r,s){if(e!==null)if(e.memoizedProps!==r.pendingProps||Je.current)tt=!0;else{if((e.lanes&s)===0&&(r.flags&128)===0)return tt=!1,Em(e,r,s);tt=(e.flags&131072)!==0}else tt=!1,Ce&&(r.flags&1048576)!==0&&Wo(r,bn,r.index);switch(r.lanes=0,r.tag){case 2:var n=r.type;In(e,r),e=r.pendingProps;var a=Or(r,We.current);qr(r,s),a=fl(null,r,n,e,a,s);var l=yl();return r.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,et(n)?(l=!0,yn(r)):l=!1,r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,dl(r),a.updater=Tn,r.stateNode=a,a._reactInternals=r,_l(r,n,e,s),r=El(null,r,n,!0,l,s)):(r.tag=0,Ce&&l&&el(r),Ye(null,r,a,s),r=r.child),r;case 16:n=r.elementType;e:{switch(In(e,r),e=r.pendingProps,a=n._init,n=a(n._payload),r.type=n,a=r.tag=qm(n),e=bt(n,e),a){case 0:r=Cl(null,r,n,e,s);break e;case 1:r=Fc(null,r,n,e,s);break e;case 11:r=Ac(null,r,n,e,s);break e;case 14:r=Tc(null,r,n,bt(n.type,e),s);break e}throw Error(d(306,n,""))}return r;case 0:return n=r.type,a=r.pendingProps,a=r.elementType===n?a:bt(n,a),Cl(e,r,n,a,s);case 1:return n=r.type,a=r.pendingProps,a=r.elementType===n?a:bt(n,a),Fc(e,r,n,a,s);case 3:e:{if(zc(r),e===null)throw Error(d(387));n=r.pendingProps,l=r.memoizedState,a=l.element,ec(e,r),Cn(r,n,null,s);var c=r.memoizedState;if(n=c.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},r.updateQueue.baseState=l,r.memoizedState=l,r.flags&256){a=Wr(Error(d(423)),r),r=Uc(e,r,n,s,a);break e}else if(n!==a){a=Wr(Error(d(424)),r),r=Uc(e,r,n,s,a);break e}else for(ct=Vt(r.stateNode.containerInfo.firstChild),ot=r,Ce=!0,jt=null,s=Zo(r,null,n,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ur(),n===a){r=Ft(e,r,s);break e}Ye(e,r,n,s)}r=r.child}return r;case 5:return sc(r),e===null&&sl(r),n=r.type,a=r.pendingProps,l=e!==null?e.memoizedProps:null,c=a.children,Ka(n,a)?c=null:l!==null&&Ka(n,l)&&(r.flags|=32),Oc(e,r),Ye(e,r,c,s),r.child;case 6:return e===null&&sl(r),null;case 13:return Bc(e,r,s);case 4:return ul(r,r.stateNode.containerInfo),n=r.pendingProps,e===null?r.child=Br(r,null,n,s):Ye(e,r,n,s),r.child;case 11:return n=r.type,a=r.pendingProps,a=r.elementType===n?a:bt(n,a),Ac(e,r,n,a,s);case 7:return Ye(e,r,r.pendingProps,s),r.child;case 8:return Ye(e,r,r.pendingProps.children,s),r.child;case 12:return Ye(e,r,r.pendingProps.children,s),r.child;case 10:e:{if(n=r.type._context,a=r.pendingProps,l=r.memoizedProps,c=a.value,we(_n,n._currentValue),n._currentValue=c,l!==null)if(vt(l.value,c)){if(l.children===a.children&&!Je.current){r=Ft(e,r,s);break e}}else for(l=r.child,l!==null&&(l.return=r);l!==null;){var f=l.dependencies;if(f!==null){c=l.child;for(var S=f.firstContext;S!==null;){if(S.context===n){if(l.tag===1){S=Ot(-1,s&-s),S.tag=2;var I=l.updateQueue;if(I!==null){I=I.shared;var q=I.pending;q===null?S.next=S:(S.next=q.next,q.next=S),I.pending=S}}l.lanes|=s,S=l.alternate,S!==null&&(S.lanes|=s),ol(l.return,s,r),f.lanes|=s;break}S=S.next}}else if(l.tag===10)c=l.type===r.type?null:l.child;else if(l.tag===18){if(c=l.return,c===null)throw Error(d(341));c.lanes|=s,f=c.alternate,f!==null&&(f.lanes|=s),ol(c,s,r),c=l.sibling}else c=l.child;if(c!==null)c.return=l;else for(c=l;c!==null;){if(c===r){c=null;break}if(l=c.sibling,l!==null){l.return=c.return,c=l;break}c=c.return}l=c}Ye(e,r,a.children,s),r=r.child}return r;case 9:return a=r.type,n=r.pendingProps.children,qr(r,s),a=pt(a),n=n(a),r.flags|=1,Ye(e,r,n,s),r.child;case 14:return n=r.type,a=bt(n,r.pendingProps),a=bt(n.type,a),Tc(e,r,n,a,s);case 15:return Mc(e,r,r.type,r.pendingProps,s);case 17:return n=r.type,a=r.pendingProps,a=r.elementType===n?a:bt(n,a),In(e,r),r.tag=1,et(n)?(e=!0,yn(r)):e=!1,qr(r,s),Sc(r,n,a),_l(r,n,a,s),El(null,r,n,!0,e,s);case 19:return qc(e,r,s);case 22:return Ic(e,r,s)}throw Error(d(156,r.tag))};function pd(e,r){return Wi(e,r)}function Hm(e,r,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(e,r,s,n){return new Hm(e,r,s,n)}function Kl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qm(e){if(typeof e=="function")return Kl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Me)return 11;if(e===He)return 14}return 2}function nr(e,r){var s=e.alternate;return s===null?(s=ht(e.tag,r,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=r,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,r=e.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Vn(e,r,s,n,a,l){var c=2;if(n=e,typeof e=="function")Kl(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case T:return Nr(s.children,a,l,r);case X:c=8,a|=8;break;case z:return e=ht(12,s,r,a|2),e.elementType=z,e.lanes=l,e;case me:return e=ht(13,s,r,a),e.elementType=me,e.lanes=l,e;case xe:return e=ht(19,s,r,a),e.elementType=xe,e.lanes=l,e;case ve:return Kn(s,a,l,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oe:c=10;break e;case be:c=9;break e;case Me:c=11;break e;case He:c=14;break e;case Ne:c=16,n=null;break e}throw Error(d(130,e==null?e:typeof e,""))}return r=ht(c,s,r,a),r.elementType=e,r.type=n,r.lanes=l,r}function Nr(e,r,s,n){return e=ht(7,e,n,r),e.lanes=s,e}function Kn(e,r,s,n){return e=ht(22,e,n,r),e.elementType=ve,e.lanes=s,e.stateNode={isHidden:!1},e}function Ql(e,r,s){return e=ht(6,e,null,r),e.lanes=s,e}function Yl(e,r,s){return r=ht(4,e.children!==null?e.children:[],e.key,r),r.lanes=s,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function $m(e,r,s,n,a){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wa(0),this.expirationTimes=wa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wa(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Xl(e,r,s,n,a,l,c,f,S){return e=new $m(e,r,s,f,S),r===1?(r=1,l===!0&&(r|=8)):r=0,l=ht(3,null,null,r),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},dl(l),e}function Wm(e,r,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:n==null?null:""+n,children:e,containerInfo:r,implementation:s}}function xd(e){if(!e)return Qt;e=e._reactInternals;e:{if(dr(e)!==e||e.tag!==1)throw Error(d(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(et(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(d(171))}if(e.tag===1){var s=e.type;if(et(s))return Ho(e,s,r)}return r}function gd(e,r,s,n,a,l,c,f,S){return e=Xl(s,n,!0,e,a,l,c,f,S),e.context=xd(null),s=e.current,n=Xe(),a=rr(s),l=Ot(n,a),l.callback=r??null,Zt(s,l,a),e.current.lanes=a,is(e,a,n),st(e,n),e}function Qn(e,r,s,n){var a=r.current,l=Xe(),c=rr(a);return s=xd(s),r.context===null?r.context=s:r.pendingContext=s,r=Ot(l,c),r.payload={element:e},n=n===void 0?null:n,n!==null&&(r.callback=n),e=Zt(a,r,c),e!==null&&(_t(e,a,c,l),Sn(e,a,c)),c}function Yn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hd(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<r?s:r}}function Zl(e,r){hd(e,r),(e=e.alternate)&&hd(e,r)}function Gm(){return null}var fd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jl(e){this._internalRoot=e}Xn.prototype.render=Jl.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(d(409));Qn(e,r,null,null)},Xn.prototype.unmount=Jl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;vr(function(){Qn(null,e,null,null)}),r[Rt]=null}};function Xn(e){this._internalRoot=e}Xn.prototype.unstable_scheduleHydration=function(e){if(e){var r=Ji();e={blockedOn:null,target:e,priority:r};for(var s=0;s<$t.length&&r!==0&&r<$t[s].priority;s++);$t.splice(s,0,e),s===0&&ro(e)}};function ei(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yd(){}function Vm(e,r,s,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var I=Yn(c);l.call(I)}}var c=gd(r,n,e,0,null,!1,!1,"",yd);return e._reactRootContainer=c,e[Rt]=c.current,bs(e.nodeType===8?e.parentNode:e),vr(),c}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var f=n;n=function(){var I=Yn(S);f.call(I)}}var S=Xl(e,0,!1,null,null,!1,!1,"",yd);return e._reactRootContainer=S,e[Rt]=S.current,bs(e.nodeType===8?e.parentNode:e),vr(function(){Qn(r,S,s,n)}),S}function Jn(e,r,s,n,a){var l=s._reactRootContainer;if(l){var c=l;if(typeof a=="function"){var f=a;a=function(){var S=Yn(c);f.call(S)}}Qn(r,c,e,a)}else c=Vm(s,r,e,a,n);return Yn(c)}Xi=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var s=ls(r.pendingLanes);s!==0&&(_a(r,s|1),st(r,Le()),(fe&6)===0&&(Kr=Le()+500,Yt()))}break;case 13:vr(function(){var n=It(e,1);if(n!==null){var a=Xe();_t(n,e,1,a)}}),Zl(e,1)}},ka=function(e){if(e.tag===13){var r=It(e,134217728);if(r!==null){var s=Xe();_t(r,e,134217728,s)}Zl(e,134217728)}},Zi=function(e){if(e.tag===13){var r=rr(e),s=It(e,r);if(s!==null){var n=Xe();_t(s,e,r,n)}Zl(e,r)}},Ji=function(){return je},eo=function(e,r){var s=je;try{return je=e,r()}finally{je=s}},fa=function(e,r,s){switch(r){case"input":if(ca(e,s),r=s.name,s.type==="radio"&&r!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<s.length;r++){var n=s[r];if(n!==e&&n.form===e.form){var a=hn(n);if(!a)throw Error(d(90));_i(n),ca(n,a)}}}break;case"textarea":Pi(e,s);break;case"select":r=s.value,r!=null&&kr(e,!!s.multiple,r,!1)}},Fi=Wl,zi=vr;var Km={usingClientEntryPoint:!1,Events:[_s,Mr,hn,Ii,Oi,Wl]},Fs={findFiberByHostInstance:ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qm={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qi(e),e===null?null:e.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||Gm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ea.isDisabled&&ea.supportsFiber)try{Ys=ea.inject(Qm),St=ea}catch{}}return nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Km,nt.createPortal=function(e,r){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ei(r))throw Error(d(200));return Wm(e,r,null,s)},nt.createRoot=function(e,r){if(!ei(e))throw Error(d(299));var s=!1,n="",a=fd;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(n=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),r=Xl(e,1,!1,null,null,s,!1,n,a),e[Rt]=r.current,bs(e.nodeType===8?e.parentNode:e),new Jl(r)},nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=qi(r),e=e===null?null:e.stateNode,e},nt.flushSync=function(e){return vr(e)},nt.hydrate=function(e,r,s){if(!Zn(r))throw Error(d(200));return Jn(null,e,r,!0,s)},nt.hydrateRoot=function(e,r,s){if(!ei(e))throw Error(d(405));var n=s!=null&&s.hydratedSources||null,a=!1,l="",c=fd;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(c=s.onRecoverableError)),r=gd(r,null,e,1,s??null,a,!1,l,c),e[Rt]=r.current,bs(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[s,a]:r.mutableSourceEagerHydrationData.push(s,a);return new Xn(r)},nt.render=function(e,r,s){if(!Zn(r))throw Error(d(200));return Jn(null,e,r,!1,s)},nt.unmountComponentAtNode=function(e){if(!Zn(e))throw Error(d(40));return e._reactRootContainer?(vr(function(){Jn(null,null,e,!1,function(){e._reactRootContainer=null,e[Rt]=null})}),!0):!1},nt.unstable_batchedUpdates=Wl,nt.unstable_renderSubtreeIntoContainer=function(e,r,s,n){if(!Zn(s))throw Error(d(200));if(e==null||e._reactInternals===void 0)throw Error(d(38));return Jn(e,r,s,!1,n)},nt.version="18.3.1-next-f1338f8080-20240426",nt}var Sd;function Bd(){if(Sd)return si.exports;Sd=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(o){console.error(o)}}return i(),si.exports=ap(),si.exports}var Cd;function lp(){if(Cd)return ta;Cd=1;var i=Bd();return ta.createRoot=i.createRoot,ta.hydrateRoot=i.hydrateRoot,ta}var ip=lp();const op=Ud(ip);Bd();function Bs(){return Bs=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var d=arguments[o];for(var x in d)Object.prototype.hasOwnProperty.call(d,x)&&(i[x]=d[x])}return i},Bs.apply(this,arguments)}var lr;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(lr||(lr={}));const Ed="popstate";function cp(i){i===void 0&&(i={});function o(x,b){let{pathname:N,search:k,hash:v}=x.location;return ci("",{pathname:N,search:k,hash:v},b.state&&b.state.usr||null,b.state&&b.state.key||"default")}function d(x,b){return typeof b=="string"?b:ra(b)}return up(o,d,null,i)}function Ae(i,o){if(i===!1||i===null||typeof i>"u")throw new Error(o)}function hi(i,o){if(!i){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function dp(){return Math.random().toString(36).substr(2,8)}function Pd(i,o){return{usr:i.state,key:i.key,idx:o}}function ci(i,o,d,x){return d===void 0&&(d=null),Bs({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof o=="string"?Xr(o):o,{state:d,key:o&&o.key||x||dp()})}function ra(i){let{pathname:o="/",search:d="",hash:x=""}=i;return d&&d!=="?"&&(o+=d.charAt(0)==="?"?d:"?"+d),x&&x!=="#"&&(o+=x.charAt(0)==="#"?x:"#"+x),o}function Xr(i){let o={};if(i){let d=i.indexOf("#");d>=0&&(o.hash=i.substr(d),i=i.substr(0,d));let x=i.indexOf("?");x>=0&&(o.search=i.substr(x),i=i.substr(0,x)),i&&(o.pathname=i)}return o}function up(i,o,d,x){x===void 0&&(x={});let{window:b=document.defaultView,v5Compat:N=!1}=x,k=b.history,v=lr.Pop,m=null,w=h();w==null&&(w=0,k.replaceState(Bs({},k.state,{idx:w}),""));function h(){return(k.state||{idx:null}).idx}function C(){v=lr.Pop;let R=h(),u=R==null?null:R-w;w=R,m&&m({action:v,location:_.location,delta:u})}function p(R,u){v=lr.Push;let D=ci(_.location,R,u);w=h()+1;let F=Pd(D,w),U=_.createHref(D);try{k.pushState(F,"",U)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;b.location.assign(U)}N&&m&&m({action:v,location:_.location,delta:1})}function O(R,u){v=lr.Replace;let D=ci(_.location,R,u);w=h();let F=Pd(D,w),U=_.createHref(D);k.replaceState(F,"",U),N&&m&&m({action:v,location:_.location,delta:0})}function y(R){let u=b.location.origin!=="null"?b.location.origin:b.location.href,D=typeof R=="string"?R:ra(R);return D=D.replace(/ $/,"%20"),Ae(u,"No window.location.(origin|href) available to create URL for href: "+D),new URL(D,u)}let _={get action(){return v},get location(){return i(b,k)},listen(R){if(m)throw new Error("A history only accepts one active listener");return b.addEventListener(Ed,C),m=R,()=>{b.removeEventListener(Ed,C),m=null}},createHref(R){return o(b,R)},createURL:y,encodeLocation(R){let u=y(R);return{pathname:u.pathname,search:u.search,hash:u.hash}},push:p,replace:O,go(R){return k.go(R)}};return _}var Dd;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Dd||(Dd={}));function mp(i,o,d){return d===void 0&&(d="/"),pp(i,o,d)}function pp(i,o,d,x){let b=typeof o=="string"?Xr(o):o,N=fi(b.pathname||"/",d);if(N==null)return null;let k=Hd(i);xp(k);let v=null;for(let m=0;v==null&&m<k.length;++m){let w=Sp(N);v=wp(k[m],w)}return v}function Hd(i,o,d,x){o===void 0&&(o=[]),d===void 0&&(d=[]),x===void 0&&(x="");let b=(N,k,v)=>{let m={relativePath:v===void 0?N.path||"":v,caseSensitive:N.caseSensitive===!0,childrenIndex:k,route:N};m.relativePath.startsWith("/")&&(Ae(m.relativePath.startsWith(x),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+x+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(x.length));let w=or([x,m.relativePath]),h=d.concat(m);N.children&&N.children.length>0&&(Ae(N.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),Hd(N.children,o,h,w)),!(N.path==null&&!N.index)&&o.push({path:w,score:bp(w,N.index),routesMeta:h})};return i.forEach((N,k)=>{var v;if(N.path===""||!((v=N.path)!=null&&v.includes("?")))b(N,k);else for(let m of qd(N.path))b(N,k,m)}),o}function qd(i){let o=i.split("/");if(o.length===0)return[];let[d,...x]=o,b=d.endsWith("?"),N=d.replace(/\?$/,"");if(x.length===0)return b?[N,""]:[N];let k=qd(x.join("/")),v=[];return v.push(...k.map(m=>m===""?N:[N,m].join("/"))),b&&v.push(...k),v.map(m=>i.startsWith("/")&&m===""?"/":m)}function xp(i){i.sort((o,d)=>o.score!==d.score?d.score-o.score:Np(o.routesMeta.map(x=>x.childrenIndex),d.routesMeta.map(x=>x.childrenIndex)))}const gp=/^:[\w-]+$/,hp=3,fp=2,yp=1,vp=10,jp=-2,Ld=i=>i==="*";function bp(i,o){let d=i.split("/"),x=d.length;return d.some(Ld)&&(x+=jp),o&&(x+=fp),d.filter(b=>!Ld(b)).reduce((b,N)=>b+(gp.test(N)?hp:N===""?yp:vp),x)}function Np(i,o){return i.length===o.length&&i.slice(0,-1).every((x,b)=>x===o[b])?i[i.length-1]-o[o.length-1]:0}function wp(i,o,d){let{routesMeta:x}=i,b={},N="/",k=[];for(let v=0;v<x.length;++v){let m=x[v],w=v===x.length-1,h=N==="/"?o:o.slice(N.length)||"/",C=_p({path:m.relativePath,caseSensitive:m.caseSensitive,end:w},h),p=m.route;if(!C)return null;Object.assign(b,C.params),k.push({params:b,pathname:or([N,C.pathname]),pathnameBase:Lp(or([N,C.pathnameBase])),route:p}),C.pathnameBase!=="/"&&(N=or([N,C.pathnameBase]))}return k}function _p(i,o){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[d,x]=kp(i.path,i.caseSensitive,i.end),b=o.match(d);if(!b)return null;let N=b[0],k=N.replace(/(.)\/+$/,"$1"),v=b.slice(1);return{params:x.reduce((w,h,C)=>{let{paramName:p,isOptional:O}=h;if(p==="*"){let _=v[C]||"";k=N.slice(0,N.length-_.length).replace(/(.)\/+$/,"$1")}const y=v[C];return O&&!y?w[p]=void 0:w[p]=(y||"").replace(/%2F/g,"/"),w},{}),pathname:N,pathnameBase:k,pattern:i}}function kp(i,o,d){o===void 0&&(o=!1),d===void 0&&(d=!0),hi(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let x=[],b="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(k,v,m)=>(x.push({paramName:v,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(x.push({paramName:"*"}),b+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?b+="\\/*$":i!==""&&i!=="/"&&(b+="(?:(?=\\/|$))"),[new RegExp(b,o?void 0:"i"),x]}function Sp(i){try{return i.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return hi(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),i}}function fi(i,o){if(o==="/")return i;if(!i.toLowerCase().startsWith(o.toLowerCase()))return null;let d=o.endsWith("/")?o.length-1:o.length,x=i.charAt(d);return x&&x!=="/"?null:i.slice(d)||"/"}const Cp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ep=i=>Cp.test(i);function Pp(i,o){o===void 0&&(o="/");let{pathname:d,search:x="",hash:b=""}=typeof i=="string"?Xr(i):i,N;if(d)if(Ep(d))N=d;else{if(d.includes("//")){let k=d;d=d.replace(/\/\/+/g,"/"),hi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(k+" -> "+d))}d.startsWith("/")?N=Rd(d.substring(1),"/"):N=Rd(d,o)}else N=o;return{pathname:N,search:Rp(x),hash:Ap(b)}}function Rd(i,o){let d=o.replace(/\/+$/,"").split("/");return i.split("/").forEach(b=>{b===".."?d.length>1&&d.pop():b!=="."&&d.push(b)}),d.length>1?d.join("/"):"/"}function li(i,o,d,x){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+o+"` field ["+JSON.stringify(x)+"].  Please separate it out to the ")+("`to."+d+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dp(i){return i.filter((o,d)=>d===0||o.route.path&&o.route.path.length>0)}function yi(i,o){let d=Dp(i);return o?d.map((x,b)=>b===d.length-1?x.pathname:x.pathnameBase):d.map(x=>x.pathnameBase)}function vi(i,o,d,x){x===void 0&&(x=!1);let b;typeof i=="string"?b=Xr(i):(b=Bs({},i),Ae(!b.pathname||!b.pathname.includes("?"),li("?","pathname","search",b)),Ae(!b.pathname||!b.pathname.includes("#"),li("#","pathname","hash",b)),Ae(!b.search||!b.search.includes("#"),li("#","search","hash",b)));let N=i===""||b.pathname==="",k=N?"/":b.pathname,v;if(k==null)v=d;else{let C=o.length-1;if(!x&&k.startsWith("..")){let p=k.split("/");for(;p[0]==="..";)p.shift(),C-=1;b.pathname=p.join("/")}v=C>=0?o[C]:"/"}let m=Pp(b,v),w=k&&k!=="/"&&k.endsWith("/"),h=(N||k===".")&&d.endsWith("/");return!m.pathname.endsWith("/")&&(w||h)&&(m.pathname+="/"),m}const or=i=>i.join("/").replace(/\/\/+/g,"/"),Lp=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Rp=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Ap=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Tp(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const $d=["post","put","patch","delete"];new Set($d);const Mp=["get",...$d];new Set(Mp);function Hs(){return Hs=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var d=arguments[o];for(var x in d)Object.prototype.hasOwnProperty.call(d,x)&&(i[x]=d[x])}return i},Hs.apply(this,arguments)}const ji=g.createContext(null),Ip=g.createContext(null),cr=g.createContext(null),na=g.createContext(null),Ut=g.createContext({outlet:null,matches:[],isDataRoute:!1}),Wd=g.createContext(null);function Op(i,o){let{relative:d}=o===void 0?{}:o;Zr()||Ae(!1);let{basename:x,navigator:b}=g.useContext(cr),{hash:N,pathname:k,search:v}=Vd(i,{relative:d}),m=k;return x!=="/"&&(m=k==="/"?x:or([x,k])),b.createHref({pathname:m,search:v,hash:N})}function Zr(){return g.useContext(na)!=null}function Jr(){return Zr()||Ae(!1),g.useContext(na).location}function Gd(i){g.useContext(cr).static||g.useLayoutEffect(i)}function aa(){let{isDataRoute:i}=g.useContext(Ut);return i?Yp():Fp()}function Fp(){Zr()||Ae(!1);let i=g.useContext(ji),{basename:o,future:d,navigator:x}=g.useContext(cr),{matches:b}=g.useContext(Ut),{pathname:N}=Jr(),k=JSON.stringify(yi(b,d.v7_relativeSplatPath)),v=g.useRef(!1);return Gd(()=>{v.current=!0}),g.useCallback(function(w,h){if(h===void 0&&(h={}),!v.current)return;if(typeof w=="number"){x.go(w);return}let C=vi(w,JSON.parse(k),N,h.relative==="path");i==null&&o!=="/"&&(C.pathname=C.pathname==="/"?o:or([o,C.pathname])),(h.replace?x.replace:x.push)(C,h.state,h)},[o,x,k,N,i])}function la(){let{matches:i}=g.useContext(Ut),o=i[i.length-1];return o?o.params:{}}function Vd(i,o){let{relative:d}=o===void 0?{}:o,{future:x}=g.useContext(cr),{matches:b}=g.useContext(Ut),{pathname:N}=Jr(),k=JSON.stringify(yi(b,x.v7_relativeSplatPath));return g.useMemo(()=>vi(i,JSON.parse(k),N,d==="path"),[i,k,N,d])}function zp(i,o){return Up(i,o)}function Up(i,o,d,x){Zr()||Ae(!1);let{navigator:b}=g.useContext(cr),{matches:N}=g.useContext(Ut),k=N[N.length-1],v=k?k.params:{};k&&k.pathname;let m=k?k.pathnameBase:"/";k&&k.route;let w=Jr(),h;if(o){var C;let R=typeof o=="string"?Xr(o):o;m==="/"||(C=R.pathname)!=null&&C.startsWith(m)||Ae(!1),h=R}else h=w;let p=h.pathname||"/",O=p;if(m!=="/"){let R=m.replace(/^\//,"").split("/");O="/"+p.replace(/^\//,"").split("/").slice(R.length).join("/")}let y=mp(i,{pathname:O}),_=Wp(y&&y.map(R=>Object.assign({},R,{params:Object.assign({},v,R.params),pathname:or([m,b.encodeLocation?b.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?m:or([m,b.encodeLocation?b.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),N,d,x);return o&&_?g.createElement(na.Provider,{value:{location:Hs({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:lr.Pop}},_):_}function Bp(){let i=Qp(),o=Tp(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),d=i instanceof Error?i.stack:null,b={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},o),d?g.createElement("pre",{style:b},d):null,null)}const Hp=g.createElement(Bp,null);class qp extends g.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,d){return d.location!==o.location||d.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:d.error,location:d.location,revalidation:o.revalidation||d.revalidation}}componentDidCatch(o,d){console.error("React Router caught the following error during render",o,d)}render(){return this.state.error!==void 0?g.createElement(Ut.Provider,{value:this.props.routeContext},g.createElement(Wd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $p(i){let{routeContext:o,match:d,children:x}=i,b=g.useContext(ji);return b&&b.static&&b.staticContext&&(d.route.errorElement||d.route.ErrorBoundary)&&(b.staticContext._deepestRenderedBoundaryId=d.route.id),g.createElement(Ut.Provider,{value:o},x)}function Wp(i,o,d,x){var b;if(o===void 0&&(o=[]),d===void 0&&(d=null),x===void 0&&(x=null),i==null){var N;if(!d)return null;if(d.errors)i=d.matches;else if((N=x)!=null&&N.v7_partialHydration&&o.length===0&&!d.initialized&&d.matches.length>0)i=d.matches;else return null}let k=i,v=(b=d)==null?void 0:b.errors;if(v!=null){let h=k.findIndex(C=>C.route.id&&v?.[C.route.id]!==void 0);h>=0||Ae(!1),k=k.slice(0,Math.min(k.length,h+1))}let m=!1,w=-1;if(d&&x&&x.v7_partialHydration)for(let h=0;h<k.length;h++){let C=k[h];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(w=h),C.route.id){let{loaderData:p,errors:O}=d,y=C.route.loader&&p[C.route.id]===void 0&&(!O||O[C.route.id]===void 0);if(C.route.lazy||y){m=!0,w>=0?k=k.slice(0,w+1):k=[k[0]];break}}}return k.reduceRight((h,C,p)=>{let O,y=!1,_=null,R=null;d&&(O=v&&C.route.id?v[C.route.id]:void 0,_=C.route.errorElement||Hp,m&&(w<0&&p===0?(Xp("route-fallback"),y=!0,R=null):w===p&&(y=!0,R=C.route.hydrateFallbackElement||null)));let u=o.concat(k.slice(0,p+1)),D=()=>{let F;return O?F=_:y?F=R:C.route.Component?F=g.createElement(C.route.Component,null):C.route.element?F=C.route.element:F=h,g.createElement($p,{match:C,routeContext:{outlet:h,matches:u,isDataRoute:d!=null},children:F})};return d&&(C.route.ErrorBoundary||C.route.errorElement||p===0)?g.createElement(qp,{location:d.location,revalidation:d.revalidation,component:_,error:O,children:D(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):D()},null)}var Kd=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(Kd||{}),Qd=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(Qd||{});function Gp(i){let o=g.useContext(ji);return o||Ae(!1),o}function Vp(i){let o=g.useContext(Ip);return o||Ae(!1),o}function Kp(i){let o=g.useContext(Ut);return o||Ae(!1),o}function Yd(i){let o=Kp(),d=o.matches[o.matches.length-1];return d.route.id||Ae(!1),d.route.id}function Qp(){var i;let o=g.useContext(Wd),d=Vp(),x=Yd();return o!==void 0?o:(i=d.errors)==null?void 0:i[x]}function Yp(){let{router:i}=Gp(Kd.UseNavigateStable),o=Yd(Qd.UseNavigateStable),d=g.useRef(!1);return Gd(()=>{d.current=!0}),g.useCallback(function(b,N){N===void 0&&(N={}),d.current&&(typeof b=="number"?i.navigate(b):i.navigate(b,Hs({fromRouteId:o},N)))},[i,o])}const Ad={};function Xp(i,o,d){Ad[i]||(Ad[i]=!0)}function Zp(i,o){i?.v7_startTransition,i?.v7_relativeSplatPath}function Jp(i){let{to:o,replace:d,state:x,relative:b}=i;Zr()||Ae(!1);let{future:N,static:k}=g.useContext(cr),{matches:v}=g.useContext(Ut),{pathname:m}=Jr(),w=aa(),h=vi(o,yi(v,N.v7_relativeSplatPath),m,b==="path"),C=JSON.stringify(h);return g.useEffect(()=>w(JSON.parse(C),{replace:d,state:x,relative:b}),[w,C,b,d,x]),null}function de(i){Ae(!1)}function ex(i){let{basename:o="/",children:d=null,location:x,navigationType:b=lr.Pop,navigator:N,static:k=!1,future:v}=i;Zr()&&Ae(!1);let m=o.replace(/^\/*/,"/"),w=g.useMemo(()=>({basename:m,navigator:N,static:k,future:Hs({v7_relativeSplatPath:!1},v)}),[m,v,N,k]);typeof x=="string"&&(x=Xr(x));let{pathname:h="/",search:C="",hash:p="",state:O=null,key:y="default"}=x,_=g.useMemo(()=>{let R=fi(h,m);return R==null?null:{location:{pathname:R,search:C,hash:p,state:O,key:y},navigationType:b}},[m,h,C,p,O,y,b]);return _==null?null:g.createElement(cr.Provider,{value:w},g.createElement(na.Provider,{children:d,value:_}))}function Td(i){let{children:o,location:d}=i;return zp(di(o),d)}new Promise(()=>{});function di(i,o){o===void 0&&(o=[]);let d=[];return g.Children.forEach(i,(x,b)=>{if(!g.isValidElement(x))return;let N=[...o,b];if(x.type===g.Fragment){d.push.apply(d,di(x.props.children,N));return}x.type!==de&&Ae(!1),!x.props.index||!x.props.children||Ae(!1);let k={id:x.props.id||N.join("-"),caseSensitive:x.props.caseSensitive,element:x.props.element,Component:x.props.Component,index:x.props.index,path:x.props.path,loader:x.props.loader,action:x.props.action,errorElement:x.props.errorElement,ErrorBoundary:x.props.ErrorBoundary,hasErrorBoundary:x.props.ErrorBoundary!=null||x.props.errorElement!=null,shouldRevalidate:x.props.shouldRevalidate,handle:x.props.handle,lazy:x.props.lazy};x.props.children&&(k.children=di(x.props.children,N)),d.push(k)}),d}function ui(){return ui=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var d=arguments[o];for(var x in d)Object.prototype.hasOwnProperty.call(d,x)&&(i[x]=d[x])}return i},ui.apply(this,arguments)}function tx(i,o){if(i==null)return{};var d={},x=Object.keys(i),b,N;for(N=0;N<x.length;N++)b=x[N],!(o.indexOf(b)>=0)&&(d[b]=i[b]);return d}function rx(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function sx(i,o){return i.button===0&&(!o||o==="_self")&&!rx(i)}const nx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ax="6";try{window.__reactRouterVersion=ax}catch{}const lx="startTransition",Md=rp[lx];function ix(i){let{basename:o,children:d,future:x,window:b}=i,N=g.useRef();N.current==null&&(N.current=cp({window:b,v5Compat:!0}));let k=N.current,[v,m]=g.useState({action:k.action,location:k.location}),{v7_startTransition:w}=x||{},h=g.useCallback(C=>{w&&Md?Md(()=>m(C)):m(C)},[m,w]);return g.useLayoutEffect(()=>k.listen(h),[k,h]),g.useEffect(()=>Zp(x),[x]),g.createElement(ex,{basename:o,children:d,location:v.location,navigationType:v.action,navigator:k,future:x})}const ox=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ze=g.forwardRef(function(o,d){let{onClick:x,relative:b,reloadDocument:N,replace:k,state:v,target:m,to:w,preventScrollReset:h,viewTransition:C}=o,p=tx(o,nx),{basename:O}=g.useContext(cr),y,_=!1;if(typeof w=="string"&&cx.test(w)&&(y=w,ox))try{let F=new URL(window.location.href),U=w.startsWith("//")?new URL(F.protocol+w):new URL(w),W=fi(U.pathname,O);U.origin===F.origin&&W!=null?w=W+U.search+U.hash:_=!0}catch{}let R=Op(w,{relative:b}),u=dx(w,{replace:k,state:v,target:m,preventScrollReset:h,relative:b,viewTransition:C});function D(F){x&&x(F),F.defaultPrevented||u(F)}return g.createElement("a",ui({},p,{href:y||R,onClick:_||N?x:D,ref:d,target:m}))});var Id;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(Id||(Id={}));var Od;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Od||(Od={}));function dx(i,o){let{target:d,replace:x,state:b,preventScrollReset:N,relative:k,viewTransition:v}=o===void 0?{}:o,m=aa(),w=Jr(),h=Vd(i,{relative:k});return g.useCallback(C=>{if(sx(C,d)){C.preventDefault();let p=x!==void 0?x:ra(w)===ra(h);m(i,{replace:p,state:b,preventScrollReset:N,relative:k,viewTransition:v})}},[w,m,h,x,b,d,i,N,k,v])}const H=Xm.create({baseURL:window.location.origin,headers:{"Content-Type":"application/json",Accept:"application/json"}}),Fd=localStorage.getItem("token");Fd&&(H.defaults.headers.common.Authorization=`Bearer ${Fd}`);H.interceptors.response.use(i=>i,i=>(i.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user_email"),window.location.href="/login"),Promise.reject(i)));const Xd=g.createContext(null);function ux({children:i}){const[o,d]=g.useState(null),[x,b]=g.useState(localStorage.getItem("token")),[N,k]=g.useState(!0);g.useEffect(()=>{x?(H.defaults.headers.common.Authorization=`Bearer ${x}`,v()):k(!1)},[x]);const v=async()=>{try{if(!x){k(!1);return}try{const h=await H.get("/api/v1/me"),C=h.data?.data||h.data;d(C),localStorage.setItem("user_email",C.email),localStorage.setItem("user_name",C.name)}catch{const C=localStorage.getItem("user_email"),p=localStorage.getItem("user_name");if(C)d({email:C,name:p||C.split("@")[0]});else{w();return}}k(!1)}catch(h){console.error("Error fetching user:",h),w()}},m=async(h,C)=>{try{const p=await H.post("/api/v1/login",{email:h,password:C}),{token:O,user:y}=p.data;b(O),localStorage.setItem("token",O),H.defaults.headers.common.Authorization=`Bearer ${O}`;try{const _=await H.get("/api/v1/me"),R=_.data?.data||_.data;d(R),localStorage.setItem("user_email",R.email||h),localStorage.setItem("user_name",R.name||h.split("@")[0])}catch{d(y||{email:h,name:h.split("@")[0]}),localStorage.setItem("user_email",y?.email||h),localStorage.setItem("user_name",y?.name||h.split("@")[0])}return{success:!0}}catch(p){return console.error("Login error:",p),{success:!1,message:p.response?.data?.message||p.message||"Login failed"}}},w=()=>{b(null),d(null),localStorage.removeItem("token"),localStorage.removeItem("user_email"),delete H.defaults.headers.common.Authorization};return t.jsx(Xd.Provider,{value:{user:o,token:x,login:m,logout:w,loading:N},children:i})}function bi(){const i=g.useContext(Xd);if(!i)throw new Error("useAuth must be used within AuthProvider");return i}const mx=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zd=(...i)=>i.filter((o,d,x)=>!!o&&x.indexOf(o)===d).join(" ");var px={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const xx=g.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:x,className:b="",children:N,iconNode:k,...v},m)=>g.createElement("svg",{ref:m,...px,width:o,height:o,stroke:i,strokeWidth:x?Number(d)*24/Number(o):d,className:Zd("lucide",b),...v},[...k.map(([w,h])=>g.createElement(w,h)),...Array.isArray(N)?N:[N]]));const he=(i,o)=>{const d=g.forwardRef(({className:x,...b},N)=>g.createElement(xx,{ref:N,iconNode:o,className:Zd(`lucide-${mx(i)}`,x),...b}));return d.displayName=`${i}`,d};const ia=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const gx=he("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Jd=he("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Ni=he("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const hx=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const fx=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const yx=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const vx=he("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const jx=he("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const ir=he("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const bx=he("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);const at=he("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);const Nx=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const wx=he("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const _x=he("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const zd=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const wi=he("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const kx=he("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Qe=he("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Be=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Sx=he("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);const sa=he("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const qs=he("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Yr=he("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const ii=he("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);const Lt=he("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const mi=he("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const wr=he("Tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]]);const _r=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const ft=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Cx=he("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const pi=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Us=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const eu=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ex(){const[i,o]=g.useState(""),[d,x]=g.useState(""),[b,N]=g.useState(""),[k,v]=g.useState(!1),{login:m}=bi(),w=aa(),h=async C=>{C.preventDefault(),N(""),v(!0);const p=await m(i,d);p.success?w("/"):N(p.message||"Invalid credentials"),v(!1)};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-green-100 py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"bg-green-600 p-3 rounded-full",children:t.jsx(wr,{className:"h-12 w-12 text-white"})})}),t.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Farm Management System"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to manage your farm operations"})]}),t.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-lg shadow-lg",onSubmit:h,children:[b&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:b}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),t.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:C=>o(C.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),t.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:d,onChange:C=>x(C.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Enter your password"})]})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:k,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Signing in...":"Sign in"})}),t.jsxs("div",{className:"text-center text-sm text-gray-600",children:[t.jsx("p",{children:"Demo credentials:"}),t.jsx("p",{className:"font-mono text-xs mt-1",children:"admin@fms.test / password"})]})]})]})})}function Px(){const[i,o]=g.useState({totalSales:0,totalExpenses:0,totalRevenue:0,totalMargin:0,crops:{},loading:!0}),[d,x]=g.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});g.useEffect(()=>{b()},[d]);const b=async()=>{try{o(O=>({...O,loading:!0}));const[N,k]=await Promise.all([H.get(`/api/v1/gari-sales/summary?date_from=${d.from}&date_to=${d.to}`).catch(()=>({data:{overall:{}}})),H.get(`/api/v1/gari-production-batches?date_from=${d.from}&date_to=${d.to}`).catch(()=>({data:{data:[]}}))]),v=N.data?.overall||{},m=Array.isArray(k.data?.data)?k.data.data:[],w=Number(v.total_revenue||0),h=Number(v.total_cost||0),C=Number(v.total_margin||0),p=m.reduce((O,y)=>O+Number(y.total_cost||0),0);o({totalSales:Number(v.total_sales||0),totalExpenses:p,totalRevenue:w,totalMargin:C,crops:{gari:{sales:w,expenses:p,margin:C,batches:m.length},bellPepper:{sales:0,expenses:0,margin:0,batches:0},tomatoes:{sales:0,expenses:0,margin:0,batches:0},habaneros:{sales:0,expenses:0,margin:0,batches:0}},loading:!1})}catch(N){console.error("Error fetching consolidated data:",N),o(k=>({...k,loading:!1}))}};return i.loading?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Dashboard"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Overview across all crops and livestock"})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("input",{type:"date",value:d.from,onChange:N=>x({...d,from:N.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),t.jsx("input",{type:"date",value:d.to,onChange:N=>x({...d,to:N.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),t.jsx(ir,{className:"h-5 w-5 text-green-600"})]}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(i.totalRevenue||0).toFixed(2)]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All crops combined"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),t.jsx(Ni,{className:"h-5 w-5 text-red-600"})]}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(i.totalExpenses||0).toFixed(2)]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Production costs"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),t.jsx(ft,{className:"h-5 w-5 text-green-600"})]}),t.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(i.totalMargin||0).toFixed(2)]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.totalRevenue>0?Number(i.totalMargin/i.totalRevenue*100).toFixed(1)+"% margin":"No sales"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Sales"}),t.jsx(Qe,{className:"h-5 w-5 text-blue-600"})]}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.totalSales}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Transactions"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance by Crop"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expenses"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Batches"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(i.crops).map(([N,k])=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:N==="bellPepper"?"Bell Pepper":N}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(k.sales||0).toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(k.expenses||0).toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(k.margin||0).toFixed(2)]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.batches})]},N))})]})})]})]})}function Dx(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState([]),[k,v]=g.useState(!0),[m,w]=g.useState(!1),[h,C]=g.useState({name:"",location_id:"",admin_zone_id:"",description:"",total_area:"",area_unit:"hectares",is_active:!0});g.useEffect(()=>{p()},[]);const p=async()=>{try{const u=await H.get("/api/v1/farms?per_page=1000"),D=u.data?.data||(Array.isArray(u.data)?u.data:[]);o(Array.isArray(D)?D:[])}catch(u){console.error("Error fetching farms:",u)}finally{v(!1)}},O=async()=>{try{const[u,D]=await Promise.all([H.get("/api/v1/locations?per_page=1000&is_active=1"),H.get("/api/v1/admin-zones?per_page=1000&is_active=1")]),F=u.data?.data||(Array.isArray(u.data)?u.data:[]),U=D.data?.data||(Array.isArray(D.data)?D.data:[]);x(Array.isArray(F)?F:[]),N(Array.isArray(U)?U:[])}catch(u){console.error("Error fetching locations/zones:",u)}},y=()=>{O(),C({name:"",location_id:"",admin_zone_id:"",description:"",total_area:"",area_unit:"hectares",is_active:!0}),w(!0)},_=u=>{C({...h,location_id:u,admin_zone_id:""})},R=async u=>{u.preventDefault();try{await H.post("/api/v1/farms",h),w(!1),C({name:"",location_id:"",admin_zone_id:"",description:"",total_area:"",area_unit:"hectares",is_active:!0}),p()}catch(D){alert("Error creating farm: "+(D.response?.data?.message||"Unknown error"))}};return k?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Farms"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your farm locations"})]}),t.jsxs("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[t.jsx(Be,{className:"h-5 w-5 mr-2"}),"Add Farm"]})]}),i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(wr,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No farms yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first farm"}),t.jsx("button",{onClick:()=>w(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Farm"})]}):t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(u=>t.jsxs(Ze,{to:`/farms/${u.id}`,className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx(wr,{className:"h-6 w-6 text-green-600"})}),t.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:u.name})]}),u.is_active?t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded",children:"Active"}):t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:"Inactive"})]}),(u.location||u.admin_zone)&&t.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[t.jsx(wi,{className:"h-4 w-4 mr-1"}),u.location?.name,u.location?.name&&u.admin_zone?.name&&" - ",u.admin_zone?.name]}),u.total_area&&t.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[t.jsx("strong",{children:u.total_area})," ",u.area_unit]}),u.description&&t.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:u.description})]},u.id))}),m&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Farm"}),t.jsxs("form",{onSubmit:R,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm Name *"}),t.jsx("input",{type:"text",required:!0,value:h.name,onChange:u=>C({...h,name:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),t.jsxs("select",{value:h.location_id,onChange:u=>_(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select Location"}),d.map(u=>t.jsx("option",{value:u.id,children:u.name},u.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zone"}),t.jsxs("select",{value:h.admin_zone_id,onChange:u=>C({...h,admin_zone_id:u.target.value}),disabled:!h.location_id,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"Select Zone"}),b.filter(u=>u.location_id==h.location_id).map(u=>t.jsx("option",{value:u.id,children:u.name},u.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:h.description,onChange:u=>C({...h,description:u.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Area"}),t.jsx("input",{type:"number",step:"0.01",value:h.total_area,onChange:u=>C({...h,total_area:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),t.jsxs("select",{value:h.area_unit,onChange:u=>C({...h,area_unit:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"hectares",children:"Hectares"}),t.jsx("option",{value:"acres",children:"Acres"}),t.jsx("option",{value:"square_meters",children:"Square Meters"})]})]})]}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:h.is_active,onChange:u=>C({...h,is_active:u.target.checked})}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),t.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Farm"})]})]})]})})]})}function Lx(){const{id:i}=la(),[o,d]=g.useState(null),[x,b]=g.useState(!0);g.useEffect(()=>{N()},[i]);const N=async()=>{try{const k=await H.get(`/api/v1/farms/${i}`);d(k.data.data||k.data)}catch(k){console.error("Error fetching farm:",k)}finally{b(!1)}};return x?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):o?t.jsxs("div",{children:[t.jsxs(Ze,{to:"/farms",className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[t.jsx(ia,{className:"h-5 w-5 mr-2"}),"Back to Farms"]}),t.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:t.jsx(wr,{className:"h-8 w-8 text-green-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o.name}),o.location&&t.jsxs("div",{className:"flex items-center text-gray-600 mt-1",children:[t.jsx(wi,{className:"h-4 w-4 mr-1"}),o.location]})]})]}),o.is_active?t.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-green-100 text-green-800 rounded",children:"Active"}):t.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-gray-100 text-gray-800 rounded",children:"Inactive"})]})}),t.jsxs("div",{className:"px-6 py-4",children:[o.description&&t.jsx("p",{className:"text-gray-700 mb-4",children:o.description}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.total_area&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Area"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[o.total_area," ",o.area_unit||"hectares"]})]}),o.fields&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Fields"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.fields?.length||0})]}),o.seasons&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Seasons"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.seasons?.length||0})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.fields&&o.fields.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Fields"})}),t.jsx("div",{className:"divide-y divide-gray-200",children:o.fields.map(k=>t.jsxs("div",{className:"px-6 py-4",children:[t.jsx("p",{className:"font-medium text-gray-900",children:k.name}),k.area&&t.jsxs("p",{className:"text-sm text-gray-600",children:[k.area," ",k.area_unit||"hectares"]})]},k.id))})]}),o.seasons&&o.seasons.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Seasons"})}),t.jsx("div",{className:"divide-y divide-gray-200",children:o.seasons.map(k=>t.jsxs("div",{className:"px-6 py-4",children:[t.jsx("p",{className:"font-medium text-gray-900",children:k.name}),t.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(k.start_date).toLocaleDateString()," - ",new Date(k.end_date).toLocaleDateString()]})]},k.id))})]})]})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500",children:"Farm not found"}),t.jsx(Ze,{to:"/farms",className:"text-green-600 hover:text-green-700 mt-4 inline-block",children:" Back to Farms"})]})}function Rx(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState(!0),[k,v]=g.useState(!1),[m,w]=g.useState({farm_id:"",field_id:"",season_id:"",harvested_at:new Date().toISOString().slice(0,16),quality_grade:""});g.useEffect(()=>{h()},[]);const h=async()=>{try{const[p,O]=await Promise.all([H.get("/api/v1/harvest-lots"),H.get("/api/v1/farms")]);o(p.data.data||p.data),x(O.data.data||O.data)}catch(p){console.error("Error fetching data:",p)}finally{N(!1)}},C=async p=>{p.preventDefault();try{await H.post("/api/v1/harvest-lots",m),v(!1),h()}catch(O){alert("Error creating harvest lot: "+(O.response?.data?.message||"Unknown error"))}};return b?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Harvest Lots"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Track your harvest operations"})]}),t.jsxs("button",{onClick:()=>v(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[t.jsx(Be,{className:"h-5 w-5 mr-2"}),"New Harvest Lot"]})]}),i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(Qe,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No harvest lots yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first harvest lot to get started"}),t.jsx("button",{onClick:()=>v(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Harvest Lot"})]}):t.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Field"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weight"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Harvest Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quality"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(p=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(Ze,{to:`/harvest-lots/${p.id}`,className:"text-sm font-medium text-green-600 hover:text-green-700",children:p.code||`#${p.id}`})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.farm?.name||"N/A"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.field?.name||"N/A"}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[p.net_weight||p.gross_weight||"N/A"," ",p.weight_unit||"kg"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(p.harvested_at).toLocaleDateString()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.quality_grade?t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:p.quality_grade}):t.jsx("span",{className:"text-gray-400",children:"-"})})]},p.id))})]})})}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Harvest Lot"}),t.jsxs("form",{onSubmit:C,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),t.jsxs("select",{required:!0,value:m.farm_id,onChange:p=>w({...m,farm_id:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select a farm"}),d.map(p=>t.jsx("option",{value:p.id,children:p.name},p.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Date & Time *"}),t.jsx("input",{type:"datetime-local",required:!0,value:m.harvested_at,onChange:p=>w({...m,harvested_at:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Grade"}),t.jsxs("select",{value:m.quality_grade,onChange:p=>w({...m,quality_grade:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select grade"}),t.jsx("option",{value:"A",children:"Grade A"}),t.jsx("option",{value:"B",children:"Grade B"}),t.jsx("option",{value:"C",children:"Grade C"})]})]})]}),t.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create"})]})]})]})})]})}function Ax(){const{id:i}=la(),[o,d]=g.useState(null),[x,b]=g.useState([]),[N,k]=g.useState(!0),[v,m]=g.useState("");g.useEffect(()=>{w()},[i]);const w=async()=>{try{const[p,O]=await Promise.all([H.get(`/api/v1/harvest-lots/${i}`),H.get("/api/v1/scale-devices")]);d(p.data.data||p.data),b(O.data.data||O.data)}catch(p){console.error("Error fetching data:",p)}finally{k(!1)}},h=async()=>{if(!v){alert("Please select a scale device");return}try{const p=await H.post("/api/v1/scale-readings",{scale_device_id:v,context_type:"App\\Models\\HarvestLot",context_id:i,unit:"kg"});alert(`Weight recorded: ${p.data.data.net_weight} ${p.data.data.unit}`),w()}catch(p){alert("Error reading scale: "+(p.response?.data?.message||"Unknown error"))}},C=async()=>{try{const p=await H.post("/api/v1/labels/print",{label_template_id:null,context_type:"App\\Models\\HarvestLot",context_id:i});alert("Label printed successfully!")}catch(p){alert("Error printing label: "+(p.response?.data?.message||"Unknown error"))}};return N?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):o?t.jsxs("div",{children:[t.jsxs(Ze,{to:"/harvest-lots",className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[t.jsx(ia,{className:"h-5 w-5 mr-2"}),"Back to Harvest Lots"]}),t.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:t.jsx(Qe,{className:"h-8 w-8 text-blue-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o.code||`Harvest Lot #${o.id}`}),t.jsxs("p",{className:"text-gray-600",children:[o.farm?.name,"  ",o.field?.name]})]})]}),o.quality_grade&&t.jsxs("span",{className:"px-3 py-1 text-sm font-medium bg-blue-100 text-blue-800 rounded",children:["Grade ",o.quality_grade]})]})}),t.jsx("div",{className:"px-6 py-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Harvest Date"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Jd,{className:"h-4 w-4 mr-2 text-gray-400"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(o.harvested_at).toLocaleDateString()})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Net Weight"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[o.net_weight||o.gross_weight||"Not weighed"," ",o.weight_unit||"kg"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Season"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.season?.name||"N/A"})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(sa,{className:"h-5 w-5 mr-2 text-green-600"}),"Weigh Harvest"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Scale Device"}),t.jsxs("select",{value:v,onChange:p=>m(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select a scale"}),x.map(p=>t.jsx("option",{value:p.id,children:p.name},p.id))]})]}),t.jsx("button",{onClick:h,disabled:!v,className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Read Weight from Scale"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Sx,{className:"h-5 w-5 mr-2 text-purple-600"}),"Print Label"]}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Print a label with traceability information for this harvest lot."}),t.jsx("button",{onClick:C,className:"w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700",children:"Print Label"})]})]}),o.weighing_records&&o.weighing_records.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Weighing History"})}),t.jsx("div",{className:"divide-y divide-gray-200",children:o.weighing_records.map(p=>t.jsx("div",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium text-gray-900",children:[p.net_weight," ",p.unit]}),t.jsx("p",{className:"text-sm text-gray-500",children:new Date(p.weighed_at).toLocaleString()})]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Gross: ",p.gross_weight," ",p.unit," | Tare: ",p.tare_weight," ",p.unit]})]})},p.id))})]})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500",children:"Harvest lot not found"}),t.jsx(Ze,{to:"/harvest-lots",className:"text-green-600 hover:text-green-700 mt-4 inline-block",children:" Back to Harvest Lots"})]})}function Tx(){const[i,o]=g.useState([]),[d,x]=g.useState(!0),[b,N]=g.useState(!1),[k,v]=g.useState({name:"",connection_type:"MOCK",is_active:!0});g.useEffect(()=>{m()},[]);const m=async()=>{try{const h=await H.get("/api/v1/scale-devices");o(h.data.data||h.data)}catch(h){console.error("Error fetching devices:",h)}finally{x(!1)}},w=async h=>{h.preventDefault();try{await H.post("/api/v1/scale-devices",k),N(!1),v({name:"",connection_type:"MOCK",is_active:!0}),m()}catch(C){alert("Error creating device: "+(C.response?.data?.message||"Unknown error"))}};return d?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Scale Devices"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your weighing scale devices"})]}),t.jsxs("button",{onClick:()=>N(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[t.jsx(Be,{className:"h-5 w-5 mr-2"}),"Add Device"]})]}),i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(sa,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No scale devices yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first scale device to get started"}),t.jsx("button",{onClick:()=>N(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Add Device"})]}):t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(h=>t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:t.jsx(sa,{className:"h-6 w-6 text-purple-600"})}),t.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:h.name})]}),h.is_active?t.jsx(vx,{className:"h-5 w-5 text-green-500"}):t.jsx(jx,{className:"h-5 w-5 text-gray-400"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Connection Type"}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:h.connection_type})]}),h.last_calibration_date&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Last Calibration"}),t.jsx("p",{className:"text-sm text-gray-900",children:new Date(h.last_calibration_date).toLocaleDateString()})]})]})]},h.id))}),b&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Scale Device"}),t.jsxs("form",{onSubmit:w,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Name *"}),t.jsx("input",{type:"text",required:!0,value:k.name,onChange:h=>v({...k,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Main Weighing Scale"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Connection Type"}),t.jsxs("select",{value:k.connection_type,onChange:h=>v({...k,connection_type:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"MOCK",children:"Mock (Testing)"}),t.jsx("option",{value:"SERIAL",children:"Serial Port"}),t.jsx("option",{value:"USB",children:"USB"}),t.jsx("option",{value:"NETWORK",children:"Network"})]})]})]}),t.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Device"})]})]})]})})]})}function Mx(){const[i,o]=g.useState([]),[d,x]=g.useState(!0);g.useEffect(()=>{b()},[]);const b=async()=>{try{const N=await H.get("/api/v1/label-templates");o(N.data.data||N.data)}catch(N){console.error("Error fetching templates:",N)}finally{x(!1)}};return d?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-between items-center mb-8",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Label Templates"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your label printing templates"})]})}),i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(mi,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No label templates yet"}),t.jsx("p",{className:"text-gray-500",children:"Label templates are created through the API. Use the default template for now."})]}):t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(N=>t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:t.jsx(mi,{className:"h-6 w-6 text-orange-600"})}),t.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:N.name})]}),N.is_default&&t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded",children:"Default"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Code"}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.code})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Target Type"}),t.jsx("p",{className:"text-sm text-gray-900",children:N.target_type?.split("\\").pop()||"N/A"})]}),N.template_body&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Template Preview"}),t.jsxs("pre",{className:"text-xs bg-gray-50 p-2 rounded mt-1 overflow-auto max-h-32",children:[N.template_body.substring(0,200),"..."]})]})]})]},N.id))})]})}function Ix(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState(!0),[k,v]=g.useState(!1),[m,w]=g.useState({staff_id:"",crop_type:"GARI",activity_type:"PRODUCTION",farm_id:"",hours:"",date:new Date().toISOString().slice(0,10),notes:""});g.useEffect(()=>{h()},[]);const h=async()=>{try{o([{id:1,name:"John Doe",role:"Operator",email:"john@example.com"},{id:2,name:"Jane Smith",role:"Supervisor",email:"jane@example.com"}]),x([])}catch(p){console.error("Error fetching staff data:",p)}finally{N(!1)}},C=async p=>{p.preventDefault();try{console.log("Allocating staff time:",m),alert("Staff allocation feature coming soon!"),v(!1)}catch(O){alert("Error allocating staff: "+(O.response?.data?.message||"Unknown error"))}};return b?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Staff & Labor Management"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Track staff time allocation across all activities"})]}),t.jsxs("button",{onClick:()=>v(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[t.jsx(Be,{className:"h-5 w-5 mr-2"}),"Allocate Time"]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Staff Members"})}),t.jsx("div",{className:"divide-y divide-gray-200",children:i.map(p=>t.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:p.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:[p.role,"  ",p.email]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"0 hours"}),t.jsx("p",{className:"text-xs text-gray-500",children:"This week"})]})]},p.id))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Time Allocations"})}),t.jsxs("div",{className:"p-6 text-center text-gray-500",children:[t.jsx(Us,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),t.jsx("p",{children:"No time allocations recorded yet"}),t.jsx("p",{className:"text-sm mt-2",children:'Click "Allocate Time" to start tracking staff hours'})]})]}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Allocate Staff Time"}),t.jsxs("form",{onSubmit:C,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Staff Member *"}),t.jsxs("select",{required:!0,value:m.staff_id,onChange:p=>w({...m,staff_id:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select staff member"}),i.map(p=>t.jsx("option",{value:p.id,children:p.name},p.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crop/Activity *"}),t.jsxs("select",{required:!0,value:m.crop_type,onChange:p=>w({...m,crop_type:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"GARI",children:"Gari"}),t.jsx("option",{value:"BELL_PEPPER",children:"Bell Pepper"}),t.jsx("option",{value:"TOMATOES",children:"Tomatoes"}),t.jsx("option",{value:"HABANEROS",children:"Habaneros"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Activity Type *"}),t.jsxs("select",{required:!0,value:m.activity_type,onChange:p=>w({...m,activity_type:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"PRODUCTION",children:"Production"}),t.jsx("option",{value:"HARVESTING",children:"Harvesting"}),t.jsx("option",{value:"PROCESSING",children:"Processing"}),t.jsx("option",{value:"PACKAGING",children:"Packaging"}),t.jsx("option",{value:"SALES",children:"Sales"}),t.jsx("option",{value:"MAINTENANCE",children:"Maintenance"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours *"}),t.jsx("input",{type:"number",step:"0.5",min:"0.5",required:!0,value:m.hours,onChange:p=>w({...m,hours:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),t.jsx("input",{type:"date",required:!0,value:m.date,onChange:p=>w({...m,date:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:m.notes,onChange:p=>w({...m,notes:p.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Allocate Time"})]})]})]})})]})}function Ox(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState(!0),[k,v]=g.useState(!1),[m,w]=g.useState({farm_id:"",processing_date:new Date().toISOString().slice(0,10),cassava_source:"HARVESTED",cassava_quantity_tonnes:"",cassava_cost_per_tonne:"",gari_produced_kg:"",gari_type:"WHITE",gari_grade:"FINE",labour_cost:0,fuel_cost:0,equipment_cost:0,water_cost:0,transport_cost:0,other_costs:0,waste_kg:0,notes:""});g.useEffect(()=>{h()},[]);const h=async()=>{try{const[y,_]=await Promise.all([H.get("/api/v1/gari-production-batches"),H.get("/api/v1/farms")]),R=y.data,u=R?.data||(Array.isArray(R)?R:[]);o(u);const D=_.data,F=D?.data||(Array.isArray(D)?D:[]);x(F)}catch(y){console.error("Error fetching data:",y)}finally{N(!1)}},C=async()=>{try{const y=await H.get("/api/v1/farms");x(y.data.data||y.data)}catch(y){console.error("Error fetching farms:",y)}},p=()=>{v(!0),C()},O=async y=>{y.preventDefault();try{const _=await H.post("/api/v1/gari-production-batches",m);console.log("Created batch response:",_.data),v(!1),w({farm_id:"",processing_date:new Date().toISOString().slice(0,10),cassava_source:"HARVESTED",cassava_quantity_tonnes:"",cassava_cost_per_tonne:"",gari_produced_kg:"",gari_type:"WHITE",gari_grade:"FINE",labour_cost:0,fuel_cost:0,equipment_cost:0,water_cost:0,transport_cost:0,other_costs:0,waste_kg:0,notes:""}),h()}catch(_){alert("Error creating batch: "+(_.response?.data?.message||"Unknown error"))}};return b?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Production Batches"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Track production from cassava to finished gari"})]}),t.jsxs("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[t.jsx(Be,{className:"h-5 w-5 mr-2"}),"New Batch"]})]}),i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(at,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No production batches yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production batch to get started"}),t.jsx("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Batch"})]}):t.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.map(y=>t.jsxs(Ze,{to:`/gari-production-batches/${y.id}`,className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y.batch_code}),t.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(y.processing_date).toLocaleDateString(),"  ",y.farm?.name]})]}),t.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded ${y.status==="COMPLETED"?"bg-green-100 text-green-800":y.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:y.status})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Cassava Input"}),t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y.cassava_quantity_tonnes?`${y.cassava_quantity_tonnes} tonnes`:`${(y.cassava_quantity_kg/1e3).toFixed(3)} tonnes`}),t.jsx("p",{className:"text-xs text-gray-500",children:y.cassava_source==="HARVESTED"?"Harvested":y.cassava_source==="PURCHASED"?"Purchased":"Mixed"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Gari Produced"}),t.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[y.gari_produced_kg," kg"]}),t.jsxs("p",{className:"text-xs text-gray-500",children:[y.gari_type,"  ",y.gari_grade]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Yield"}),t.jsxs("p",{className:"text-sm font-semibold text-green-600",children:[y.conversion_yield_percent!=null?Number(y.conversion_yield_percent).toFixed(1):"N/A","%"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Cost per kg"}),t.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",y.cost_per_kg_gari!=null?Number(y.cost_per_kg_gari).toFixed(2):"N/A"]})]})]})]},y.id))}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create Production Batch"}),t.jsxs("form",{onSubmit:O,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),t.jsxs("select",{required:!0,value:m.farm_id,onChange:y=>w({...m,farm_id:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select farm"}),d.map(y=>t.jsx("option",{value:y.id,children:y.name},y.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Date *"}),t.jsx("input",{type:"date",required:!0,value:m.processing_date,onChange:y=>w({...m,processing_date:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Source *"}),t.jsxs("select",{required:!0,value:m.cassava_source,onChange:y=>w({...m,cassava_source:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"HARVESTED",children:"Harvested"}),t.jsx("option",{value:"PURCHASED",children:"Purchased"}),t.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Quantity (tonnes) *"}),t.jsx("input",{type:"number",step:"0.001",required:!0,value:m.cassava_quantity_tonnes,onChange:y=>w({...m,cassava_quantity_tonnes:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1.5"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1 tonne = 1,000 kg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per tonne ()"}),t.jsx("input",{type:"number",step:"0.01",value:m.cassava_cost_per_tonne,onChange:y=>w({...m,cassava_cost_per_tonne:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 150000"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Produced (kg) *"}),t.jsx("input",{type:"number",step:"0.01",required:!0,value:m.gari_produced_kg,onChange:y=>w({...m,gari_produced_kg:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),t.jsxs("select",{required:!0,value:m.gari_type,onChange:y=>w({...m,gari_type:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"WHITE",children:"White"}),t.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),t.jsxs("select",{required:!0,value:m.gari_grade,onChange:y=>w({...m,gari_grade:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"FINE",children:"Fine"}),t.jsx("option",{value:"COARSE",children:"Coarse"}),t.jsx("option",{value:"MIXED",children:"Mixed"})]})]})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Processing Costs ()"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour"}),t.jsx("input",{type:"number",step:"0.01",value:m.labour_cost,onChange:y=>w({...m,labour_cost:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuel"}),t.jsx("input",{type:"number",step:"0.01",value:m.fuel_cost,onChange:y=>w({...m,fuel_cost:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment"}),t.jsx("input",{type:"number",step:"0.01",value:m.equipment_cost,onChange:y=>w({...m,equipment_cost:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Water"}),t.jsx("input",{type:"number",step:"0.01",value:m.water_cost,onChange:y=>w({...m,water_cost:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport"}),t.jsx("input",{type:"number",step:"0.01",value:m.transport_cost,onChange:y=>w({...m,transport_cost:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other"}),t.jsx("input",{type:"number",step:"0.01",value:m.other_costs,onChange:y=>w({...m,other_costs:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste (kg)"}),t.jsx("input",{type:"number",step:"0.01",value:m.waste_kg,onChange:y=>w({...m,waste_kg:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:m.notes,onChange:y=>w({...m,notes:y.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Batch"})]})]})]})})]})}function Fx(){const{id:i}=la(),[o,d]=g.useState(null),[x,b]=g.useState(!0),[N,k]=g.useState(!1),[v,m]=g.useState(null);g.useEffect(()=>{w()},[i]);const w=async()=>{try{console.log("Fetching batch with ID:",i);const p=await H.get(`/api/v1/gari-production-batches/${i}`);console.log("Full API response:",p),console.log("Response data:",p.data),console.log("Response data.data:",p.data?.data);const O=p.data?.data||p.data;console.log("Extracted batch data:",O),console.log("Batch data type:",typeof O),console.log("Batch data is object:",O&&typeof O=="object"),O&&typeof O=="object"&&!Array.isArray(O)?(console.log("Setting batch:",O),d(O)):(console.error("Invalid batch data structure:",O),console.error("Batch data keys:",O?Object.keys(O):"null"),d(null))}catch(p){console.error("Error fetching batch:",p),console.error("Error response:",p.response),console.error("Error response data:",p.response?.data),console.error("Error status:",p.response?.status),console.error("Error message:",p.message),console.error("Request URL:",p.config?.url),console.error("Batch ID from URL:",i),d(null)}finally{b(!1)}},h=()=>{o&&(m({processing_date:o.processing_date?new Date(o.processing_date).toISOString().slice(0,10):"",cassava_source:o.cassava_source||"HARVESTED",cassava_quantity_tonnes:o.cassava_quantity_tonnes||(o.cassava_quantity_kg?(o.cassava_quantity_kg/1e3).toString():""),cassava_cost_per_tonne:o.cassava_cost_per_tonne||"",gari_produced_kg:o.gari_produced_kg||"",gari_type:o.gari_type||"WHITE",gari_grade:o.gari_grade||"FINE",labour_cost:o.labour_cost||0,fuel_cost:o.fuel_cost||0,equipment_cost:o.equipment_cost||0,water_cost:o.water_cost||0,transport_cost:o.transport_cost||0,other_costs:o.other_costs||0,waste_kg:o.waste_kg||0,status:o.status||"PLANNED",notes:o.notes||""}),k(!0))},C=async p=>{p.preventDefault();try{await H.put(`/api/v1/gari-production-batches/${i}`,v),k(!1),m(null),w()}catch(O){alert("Error updating batch: "+(O.response?.data?.message||"Unknown error"))}};return x?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):!o&&!x?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500 mb-2",children:"Production batch not found"}),t.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["ID: ",i]}),t.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Check the browser console for detailed error information"}),t.jsx(Ze,{to:"/gari-production-batches",className:"text-green-600 hover:text-green-700 mt-4 inline-block",children:" Back to Batches"})]}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs(Ze,{to:"/gari-production-batches",className:"flex items-center text-gray-600 hover:text-gray-900",children:[t.jsx(ia,{className:"h-5 w-5 mr-2"}),"Back to Batches"]}),o.status!=="COMPLETED"&&t.jsxs("button",{onClick:h,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[t.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Edit Batch"]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:t.jsx(at,{className:"h-8 w-8 text-orange-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o.batch_code}),t.jsxs("p",{className:"text-gray-600",children:[o.farm?.name,"  ",new Date(o.processing_date).toLocaleDateString()]})]})]}),t.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded ${o.status==="COMPLETED"?"bg-green-100 text-green-800":o.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:o.status})]})}),t.jsx("div",{className:"px-6 py-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cassava Input"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.cassava_quantity_tonnes?`${o.cassava_quantity_tonnes} tonnes`:`${(o.cassava_quantity_kg/1e3).toFixed(3)} tonnes`}),o.total_cassava_cost&&t.jsxs("p",{className:"text-xs text-gray-500",children:["",Number(o.total_cassava_cost).toFixed(2)," total"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Gari Produced"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[o.gari_produced_kg," kg"]}),t.jsxs("p",{className:"text-xs text-gray-500",children:[o.gari_type,"  ",o.gari_grade]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conversion Yield"}),t.jsxs("p",{className:"text-lg font-semibold text-green-600",children:[o.conversion_yield_percent!=null?Number(o.conversion_yield_percent).toFixed(1):"N/A","%"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cost per kg"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",o.cost_per_kg_gari!=null?Number(o.cost_per_kg_gari).toFixed(2):"N/A"]})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(ir,{className:"h-5 w-5 mr-2 text-green-600"}),"Cost Breakdown"]}),t.jsxs("div",{className:"space-y-3",children:[Number(o.total_cassava_cost||0)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Cassava Cost"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.total_cassava_cost||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Labour"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.labour_cost||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Fuel"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.fuel_cost||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Equipment"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.equipment_cost||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Water"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.water_cost||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Transport"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.transport_cost||0).toFixed(2)]})]}),Number(o.other_costs||0)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Other"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.other_costs||0).toFixed(2)]})]}),t.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Total Processing"}),t.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["",Number(o.total_processing_cost||0).toFixed(2)]})]}),t.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[t.jsx("span",{className:"text-base font-bold text-gray-900",children:"Total Cost"}),t.jsxs("span",{className:"text-base font-bold text-gray-900",children:["",o.total_cost!=null?Number(o.total_cost).toFixed(2):"0.00"]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(ft,{className:"h-5 w-5 mr-2 text-blue-600"}),"Performance Metrics"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conversion Yield"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(Number(o.conversion_yield_percent)||0,100)}%`}})}),t.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[o.conversion_yield_percent!=null?Number(o.conversion_yield_percent).toFixed(1):"0","%"]})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target: 22-30%"})]}),o.waste_kg>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Waste"}),t.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[o.waste_kg," kg (",o.waste_percent!=null?Number(o.waste_percent).toFixed(1):"0","%)"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cost Efficiency"}),t.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",o.cost_per_kg_gari!=null?Number(o.cost_per_kg_gari).toFixed(2):"N/A"," per kg"]})]})]})]})]}),o.cassava_inputs&&o.cassava_inputs.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Cassava Inputs"})}),t.jsx("div",{className:"divide-y divide-gray-200",children:o.cassava_inputs.map(p=>t.jsx("div",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium text-gray-900",children:[p.quantity_kg," kg"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[p.source_type==="HARVESTED"?"Harvested":"Purchased",p.variety&&`  ${p.variety}`,p.harvest_lot&&`  Lot: ${p.harvest_lot.code||p.harvest_lot.id}`]})]}),Number(p.total_cost||0)>0&&t.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",Number(p.total_cost||0).toFixed(2)]})]})},p.id))})]}),o.notes&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Notes"}),t.jsx("p",{className:"text-gray-700",children:o.notes})]}),N&&v&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Production Batch"}),t.jsxs("form",{onSubmit:C,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Date *"}),t.jsx("input",{type:"date",required:!0,value:v.processing_date,onChange:p=>m({...v,processing_date:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{value:v.status,onChange:p=>m({...v,status:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"PLANNED",children:"Planned"}),t.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),t.jsx("option",{value:"COMPLETED",children:"Completed"}),t.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Source *"}),t.jsxs("select",{required:!0,value:v.cassava_source,onChange:p=>m({...v,cassava_source:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"HARVESTED",children:"Harvested"}),t.jsx("option",{value:"PURCHASED",children:"Purchased"}),t.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Quantity (tonnes) *"}),t.jsx("input",{type:"number",step:"0.001",required:!0,value:v.cassava_quantity_tonnes,onChange:p=>m({...v,cassava_quantity_tonnes:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1.5"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1 tonne = 1,000 kg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per tonne ()"}),t.jsx("input",{type:"number",step:"0.01",value:v.cassava_cost_per_tonne,onChange:p=>m({...v,cassava_cost_per_tonne:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 150000"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Produced (kg) *"}),t.jsx("input",{type:"number",step:"0.01",required:!0,value:v.gari_produced_kg,onChange:p=>m({...v,gari_produced_kg:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),t.jsxs("select",{required:!0,value:v.gari_type,onChange:p=>m({...v,gari_type:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"WHITE",children:"White"}),t.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),t.jsxs("select",{required:!0,value:v.gari_grade,onChange:p=>m({...v,gari_grade:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"FINE",children:"Fine"}),t.jsx("option",{value:"COARSE",children:"Coarse"}),t.jsx("option",{value:"MIXED",children:"Mixed"})]})]})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Processing Costs ()"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour"}),t.jsx("input",{type:"number",step:"0.01",value:v.labour_cost,onChange:p=>m({...v,labour_cost:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuel"}),t.jsx("input",{type:"number",step:"0.01",value:v.fuel_cost,onChange:p=>m({...v,fuel_cost:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment"}),t.jsx("input",{type:"number",step:"0.01",value:v.equipment_cost,onChange:p=>m({...v,equipment_cost:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Water"}),t.jsx("input",{type:"number",step:"0.01",value:v.water_cost,onChange:p=>m({...v,water_cost:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport"}),t.jsx("input",{type:"number",step:"0.01",value:v.transport_cost,onChange:p=>m({...v,transport_cost:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other"}),t.jsx("input",{type:"number",step:"0.01",value:v.other_costs,onChange:p=>m({...v,other_costs:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste (kg)"}),t.jsx("input",{type:"number",step:"0.01",value:v.waste_kg,onChange:p=>m({...v,waste_kg:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:v.notes,onChange:p=>m({...v,notes:p.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{k(!1),m(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Update Batch"})]})]})]})})]})}function zx(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState(0),[k,v]=g.useState(!0),[m,w]=g.useState({gari_type:"",packaging_type:"",status:"IN_STOCK"});g.useEffect(()=>{h()},[m]);const h=async()=>{try{const O=new URLSearchParams;m.gari_type&&O.append("gari_type",m.gari_type),m.packaging_type&&O.append("packaging_type",m.packaging_type),m.status&&O.append("status",m.status);const[y,_]=await Promise.all([H.get(`/api/v1/gari-inventory?${O.toString()}`),H.get("/api/v1/gari-inventory/summary")]),R=y.data.data||y.data,u=Array.isArray(R)?R:[];o(u),x(_.data.data||_.data),N(_.data.totalStock||0),console.log("Inventory response:",y.data),console.log("Inventory items:",u)}catch(O){console.error("Error fetching inventory:",O)}finally{v(!1)}};if(k)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const C=i.reduce((O,y)=>O+(y.quantity_kg||0),0),p=i.reduce((O,y)=>O+(y.total_cost||0),0);return t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-between items-center mb-8",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Inventory"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Track finished goods stock"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Stock"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[b>0?b.toFixed(2):C.toFixed(2)," kg"]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Value"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",p.toFixed(2)]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Items in Stock"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(Nx,{className:"h-5 w-5 text-gray-400"}),t.jsxs("select",{value:m.gari_type,onChange:O=>w({...m,gari_type:O.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"All Types"}),t.jsx("option",{value:"WHITE",children:"White"}),t.jsx("option",{value:"YELLOW",children:"Yellow"})]}),t.jsxs("select",{value:m.packaging_type,onChange:O=>w({...m,packaging_type:O.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"All Packaging"}),t.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),t.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),t.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),t.jsx("option",{value:"50KG_BAG",children:"50kg Bag"}),t.jsx("option",{value:"BULK",children:"Bulk"})]}),t.jsxs("select",{value:m.status,onChange:O=>w({...m,status:O.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"IN_STOCK",children:"In Stock"}),t.jsx("option",{value:"RESERVED",children:"Reserved"}),t.jsx("option",{value:"SOLD",children:"Sold"}),t.jsx("option",{value:"SPOILED",children:"Spoiled"}),t.jsx("option",{value:"DAMAGED",children:"Damaged"})]})]})}),i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(Qe,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory items"}),t.jsx("p",{className:"text-gray-500",children:"Inventory will appear here after production batches are created"})]}):t.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Grade"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Packaging"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost per kg"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Value"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(O=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${O.gari_type==="WHITE"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:O.gari_type})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.gari_grade}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.packaging_type?.replace("_"," ").toLowerCase()}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[O.quantity_kg," kg",O.quantity_units>0&&` (${O.quantity_units} units)`]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",O.cost_per_kg?.toFixed(2)||"N/A"]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",O.total_cost?.toFixed(2)||"0.00"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${O.status==="IN_STOCK"?"bg-green-100 text-green-800":O.status==="SOLD"?"bg-blue-100 text-blue-800":O.status==="SPOILED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:O.status})})]},O.id))})]})})})]})}function Ux(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState([]),[k,v]=g.useState([]),[m,w]=g.useState(!1),[h,C]=g.useState(!0),[p,O]=g.useState(!1),[y,_]=g.useState(null),[R,u]=g.useState(null),[D,F]=g.useState({farm_id:"",gari_production_batch_id:"",sale_date:new Date().toISOString().slice(0,10),customer_name:"",customer_type:"RETAIL",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",quantity_kg:"",quantity_units:"",unit_price:"",discount:0,cost_per_kg:"",payment_method:"CASH",amount_paid:"",sales_channel:"",notes:""});g.useEffect(()=>{U()},[]);const U=async()=>{try{const[E,Y,K]=await Promise.all([H.get("/api/v1/gari-sales"),H.get("/api/v1/farms"),H.get("/api/v1/gari-sales/summary")]);o(E.data.data||E.data),N(Y.data.data||Y.data),x(K.data.data||K.data)}catch(E){console.error("Error fetching data:",E)}finally{C(!1)}},W=async()=>{try{const E=await H.get("/api/v1/farms");N(E.data.data||E.data)}catch(E){console.error("Error fetching farms:",E)}},G=()=>{O(!0),W(),F({farm_id:"",gari_production_batch_id:"",sale_date:new Date().toISOString().slice(0,10),customer_name:"",customer_type:"RETAIL",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",quantity_kg:"",quantity_units:"",unit_price:"",discount:0,cost_per_kg:"",payment_method:"CASH",amount_paid:"",sales_channel:"",notes:""}),v([]),v([])},T=async()=>{if(!D.farm_id){v([]),w(!1);return}w(!0);try{const E=new URLSearchParams({farm_id:D.farm_id}),K=(await H.get(`/api/v1/gari-sales/available-batches?${E.toString()}`)).data.data||[];if(v(K),K.length>0&&!D.gari_production_batch_id){const L=K[0];X(L.batch_id)}else K.length===0&&F(L=>({...L,gari_production_batch_id:"",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",cost_per_kg:""}))}catch(E){console.error("Error fetching available batches:",E),v([]),alert("Error loading available batches: "+(E.response?.data?.message||"Unknown error"))}finally{w(!1)}},X=E=>{const Y=k.find(K=>K.batch_id==E);if(Y){const K=Y.packaging_options&&Y.packaging_options.length>0?Y.packaging_options[0].packaging_type:"1KG_POUCH";F(L=>({...L,gari_production_batch_id:E,gari_type:Y.gari_type||L.gari_type,gari_grade:Y.gari_grade||L.gari_grade,packaging_type:K,cost_per_kg:Y.cost_per_kg_gari||L.cost_per_kg,quantity_units:"",quantity_kg:""}))}},z=(E,Y)=>!E||!Y||Y<=0?0:({"1KG_POUCH":1,"2KG_POUCH":2,"5KG_PACK":5,"50KG_BAG":50}[E]||0)*Y,oe=E=>{F(Y=>{const K=z(E,Y.quantity_units||0);return{...Y,packaging_type:E,quantity_kg:K}})},be=E=>{F(Y=>{const K=z(Y.packaging_type,E||0);return{...Y,quantity_units:E,quantity_kg:K}})};g.useEffect(()=>{p&&D.farm_id&&T()},[p,D.farm_id]);const Me=async E=>{E.preventDefault();try{await H.post("/api/v1/gari-sales",D),O(!1),U()}catch(Y){alert("Error creating sale: "+(Y.response?.data?.message||"Unknown error"))}},me=E=>{_(E),u({payment_status:E.payment_status||"PAID",payment_method:E.payment_method||"CASH",amount_paid:E.amount_paid||0,discount:E.discount||0,unit_price:E.unit_price||0,notes:E.notes||""})},xe=async E=>{E.preventDefault();try{console.log("Updating sale with data:",R);const Y=await H.put(`/api/v1/gari-sales/${y.id}`,R);console.log("Update response:",Y.data),_(null),u(null),U()}catch(Y){console.error("Error updating sale:",Y),alert("Error updating sale: "+(Y.response?.data?.message||"Unknown error"))}},He=E=>{const Y=Number(y?.final_amount||0),K=Number(E||0);let L="OUTSTANDING";K>=Y?L="PAID":K>0&&(L="PARTIAL"),u({...R,amount_paid:E,payment_status:L})};if(h)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const Ne=i.reduce((E,Y)=>E+(Number(Y.final_amount)||0),0),ve=i.reduce((E,Y)=>E+(Number(Y.gross_margin)||0),0);return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Sales"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Track sales and revenue"})]}),t.jsxs("button",{onClick:G,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[t.jsx(Be,{className:"h-5 w-5 mr-2"}),"New Sale"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Revenue"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",Number(Ne||0).toFixed(2)]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Margin"}),t.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",Number(ve||0).toFixed(2)]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Sales"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]}),i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(Yr,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sales yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first sale to get started"}),t.jsx("button",{onClick:G,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Sale"})]}):t.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sale Code"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(E=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.sale_code}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(E.sale_date).toLocaleDateString()}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[E.customer_name||E.customer?.name||"Walk-in",t.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",E.customer_type,")"]})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[E.gari_type,"  ",E.packaging_type?.replace("_"," ")]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[E.quantity_kg," kg"]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["",Number(E.final_amount||0).toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(E.gross_margin||0).toFixed(2),t.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",Number(E.gross_margin_percent||0).toFixed(1),"%)"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${E.payment_status==="PAID"?"bg-green-100 text-green-800":E.payment_status==="PARTIAL"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:E.payment_status})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:t.jsxs("button",{onClick:()=>me(E),className:"text-green-600 hover:text-green-700 flex items-center",children:[t.jsx(Lt,{className:"h-4 w-4 mr-1"}),"Edit"]})})]},E.id))})]})})}),p&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Sale"}),t.jsxs("form",{onSubmit:Me,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),t.jsxs("select",{required:!0,value:D.farm_id,onChange:E=>F({...D,farm_id:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select farm"}),b.map(E=>t.jsx("option",{value:E.id,children:E.name},E.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sale Date *"}),t.jsx("input",{type:"date",required:!0,value:D.sale_date,onChange:E=>F({...D,sale_date:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),t.jsx("input",{type:"text",value:D.customer_name,onChange:E=>F({...D,customer_name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Walk-in customer"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Type *"}),t.jsxs("select",{required:!0,value:D.customer_type,onChange:E=>F({...D,customer_type:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"RETAIL",children:"Retail"}),t.jsx("option",{value:"BULK_BUYER",children:"Bulk Buyer"}),t.jsx("option",{value:"DISTRIBUTOR",children:"Distributor"}),t.jsx("option",{value:"CATERING",children:"Catering"}),t.jsx("option",{value:"HOTEL",children:"Hotel"}),t.jsx("option",{value:"OTHER",children:"Other"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Batch (FIFO) *"}),t.jsxs("select",{required:!0,disabled:!D.farm_id||m,value:D.gari_production_batch_id,onChange:E=>X(E.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${!D.farm_id||m?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`,children:[t.jsx("option",{value:"",children:m?"Loading batches...":D.farm_id?k.length===0?"No inventory available for this farm":"Select batch (oldest first - FIFO)":"Select farm first"}),k.map(E=>t.jsxs("option",{value:E.batch_id,children:[E.batch_code," - ",Number(E.total_available_kg||0).toFixed(2)," kg available",E.processing_date&&` (${new Date(E.processing_date).toLocaleDateString()})`,E.gari_type&&` - ${E.gari_type}`,E.gari_grade&&` ${E.gari_grade}`,E.cost_per_kg_gari&&` - ${Number(E.cost_per_kg_gari).toFixed(2)}/kg`]},E.batch_id))]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m?"Loading available batches...":"Batches are sorted by production date (FIFO - First In, First Out). Selecting a batch will auto-fill product details."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),t.jsxs("select",{required:!0,disabled:!D.gari_production_batch_id,value:D.gari_type,onChange:E=>F({...D,gari_type:E.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${D.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[t.jsx("option",{value:"WHITE",children:"White"}),t.jsx("option",{value:"YELLOW",children:"Yellow"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from selected batch"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),t.jsxs("select",{required:!0,disabled:!D.gari_production_batch_id,value:D.gari_grade,onChange:E=>F({...D,gari_grade:E.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${D.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[t.jsx("option",{value:"FINE",children:"Fine"}),t.jsx("option",{value:"COARSE",children:"Coarse"}),t.jsx("option",{value:"MIXED",children:"Mixed"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from selected batch"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packaging *"}),t.jsxs("select",{required:!0,disabled:!D.gari_production_batch_id,value:D.packaging_type,onChange:E=>oe(E.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${D.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[t.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),t.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),t.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),t.jsx("option",{value:"50KG_BAG",children:"50kg Bag"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:D.gari_production_batch_id?"Select packaging size":"Select a batch first"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity (units) *"}),t.jsx("input",{type:"number",step:"1",min:"1",required:!0,disabled:!D.packaging_type,value:D.quantity_units,onChange:E=>be(E.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${D.packaging_type?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,placeholder:"Enter number of units"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Number of ",D.packaging_type?.replace("_"," ").toLowerCase()||"units"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Quantity (kg) *"}),t.jsx("input",{type:"number",step:"0.01",required:!0,readOnly:!0,value:D.quantity_kg||0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 cursor-not-allowed"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated from packaging and quantity"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price () *"}),t.jsx("input",{type:"number",step:"0.01",required:!0,value:D.unit_price,onChange:E=>F({...D,unit_price:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount ()"}),t.jsx("input",{type:"number",step:"0.01",value:D.discount,onChange:E=>F({...D,discount:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ()"}),t.jsx("input",{type:"number",step:"0.01",value:D.cost_per_kg,onChange:E=>F({...D,cost_per_kg:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"From inventory"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method *"}),t.jsxs("select",{required:!0,value:D.payment_method,onChange:E=>F({...D,payment_method:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"CASH",children:"Cash"}),t.jsx("option",{value:"TRANSFER",children:"Transfer"}),t.jsx("option",{value:"POS",children:"POS"}),t.jsx("option",{value:"CHEQUE",children:"Cheque"}),t.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid ()"}),t.jsx("input",{type:"number",step:"0.01",value:D.amount_paid,onChange:E=>F({...D,amount_paid:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sales Channel"}),t.jsx("input",{type:"text",value:D.sales_channel,onChange:E=>F({...D,sales_channel:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Warehouse, Shop, Distributor"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>O(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Sale"})]})]})]})}),y&&R&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[t.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Edit Sale - ",y.sale_code]}),t.jsxs("form",{onSubmit:xe,className:"space-y-4",children:[t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Customer:"}),t.jsx("span",{className:"ml-2 font-medium",children:y.customer_name||"Walk-in"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Product:"}),t.jsxs("span",{className:"ml-2 font-medium",children:[y.gari_type,"  ",y.packaging_type?.replace("_"," ")]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Quantity:"}),t.jsxs("span",{className:"ml-2 font-medium",children:[y.quantity_kg," kg"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),t.jsxs("span",{className:"ml-2 font-medium",children:["",Number(y.final_amount||0).toFixed(2)]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status *"}),t.jsxs("select",{required:!0,value:R.payment_status,onChange:E=>u({...R,payment_status:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"PAID",children:"Paid"}),t.jsx("option",{value:"PARTIAL",children:"Partial"}),t.jsx("option",{value:"OUTSTANDING",children:"Outstanding"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method *"}),t.jsxs("select",{required:!0,value:R.payment_method,onChange:E=>u({...R,payment_method:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"CASH",children:"Cash"}),t.jsx("option",{value:"TRANSFER",children:"Transfer"}),t.jsx("option",{value:"POS",children:"POS"}),t.jsx("option",{value:"CHEQUE",children:"Cheque"}),t.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid () *"}),t.jsx("input",{type:"number",step:"0.01",min:"0",max:Number(y.final_amount||0),required:!0,value:R.amount_paid,onChange:E=>He(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Outstanding: ",Number(Number(y.final_amount||0)-Number(R.amount_paid||0)).toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount ()"}),t.jsx("input",{type:"number",step:"0.01",value:R.discount,onChange:E=>u({...R,discount:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price ()"}),t.jsx("input",{type:"number",step:"0.01",value:R.unit_price,onChange:E=>u({...R,unit_price:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:R.notes,onChange:E=>u({...R,notes:E.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{_(null),u(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Update Sale"})]})]})]})})]})}function Bx(){const[i,o]=g.useState({batches:[],inventory:[],sales:[],summary:null}),[d,x]=g.useState(!0),[b,N]=g.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});g.useEffect(()=>{k()},[b]);const k=async()=>{try{const m=new URLSearchParams({date_from:b.from,date_to:b.to}),w=new URLSearchParams({date_from:b.from,date_to:b.to,per_page:"1000"}),[h,C,p,O]=await Promise.all([H.get(`/api/v1/gari-production-batches?${m.toString()}`),H.get("/api/v1/gari-inventory?status=IN_STOCK"),H.get(`/api/v1/gari-sales?${w.toString()}`),H.get(`/api/v1/gari-sales/summary?${m.toString()}`)]),y=Array.isArray(h.data.data)?h.data.data:Array.isArray(h.data)?h.data:[],_=Array.isArray(C.data.data)?C.data.data:Array.isArray(C.data)?C.data:[];let R=[];p.data.data&&Array.isArray(p.data.data)?R=p.data.data:Array.isArray(p.data)&&(R=p.data),console.log("Summary API Response:",O.data),console.log("Date Range:",b),console.log("Sales Response:",p.data);const u=O.data.overall||{},D=O.data.data||O.data;console.log("Overall Summary:",u),console.log("Sales array length:",R.length),console.log("Sample sale (first):",R[0]);const F=y.reduce((me,xe)=>me+(Number(xe.cassava_quantity_kg)||0),0),U=y.reduce((me,xe)=>me+(Number(xe.gari_produced_kg)||0),0),W=F>0?U/F*100:0,G=y.length>0?y.reduce((me,xe)=>me+(Number(xe.cost_per_kg_gari)||0),0)/y.length:0,T=u.total_revenue!==void 0?u.total_revenue:R.reduce((me,xe)=>me+(Number(xe.final_amount)||0),0),X=u.total_margin!==void 0?u.total_margin:R.reduce((me,xe)=>me+(Number(xe.gross_margin)||0),0),z=u.total_kg_sold!==void 0?u.total_kg_sold:R.reduce((me,xe)=>me+(Number(xe.quantity_kg)||0),0),oe=u.avg_price_per_kg!==void 0?u.avg_price_per_kg:(()=>{let me=0,xe=0;return R.forEach(He=>{const Ne=Number(He.quantity_kg)||0,ve=Number(He.unit_price)||0;Ne>0&&ve>0&&(me+=ve*Ne,xe+=Ne)}),xe>0?me/xe:0})();console.log("Calculated KPIs:",{totalRevenue:T,totalMargin:X,totalSalesVolumeKg:z,avgPricePerKg:oe,totalSales:u.total_sales!==void 0?u.total_sales:R.length});const be=_.reduce((me,xe)=>me+(Number(xe.quantity_kg)||0),0),Me={totalCassava:F,totalGari:U,avgYield:W,avgCostPerKg:G,totalRevenue:T,totalMargin:X,totalStock:be,avgPricePerKg:oe,totalSalesVolumeKg:z,totalBatches:y.length,totalSales:u.total_sales!==void 0?u.total_sales:R.length};console.log("Setting KPIs summary:",Me),o({batches:y,inventory:_,sales:R,summary:Me})}catch(m){console.error("Error fetching KPI data:",m)}finally{x(!1)}};if(d)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const v=i.summary||{};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Production KPIs"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Key performance indicators for gari production"})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("input",{type:"date",value:b.from,onChange:m=>N({...b,from:m.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),t.jsx("input",{type:"date",value:b.to,onChange:m=>N({...b,to:m.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Conversion Yield"}),t.jsx(ft,{className:"h-5 w-5 text-green-600"})]}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(v.avgYield||0).toFixed(1),"%"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target: 22-30%"}),v.avgYield&&t.jsx("div",{className:`mt-2 text-xs ${v.avgYield>=22&&v.avgYield<=30?"text-green-600":v.avgYield<22?"text-red-600":"text-yellow-600"}`,children:v.avgYield<22?" Below target":v.avgYield>30?" Above target":" On target"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Cost per kg"}),t.jsx(ir,{className:"h-5 w-5 text-blue-600"})]}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(v.avgCostPerKg||0).toFixed(2)]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Average production cost"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Stock on Hand"}),t.jsx(Qe,{className:"h-5 w-5 text-purple-600"})]}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(v.totalStock||0).toFixed(2)," kg"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Current inventory"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Sales Volume"}),t.jsx(ft,{className:"h-5 w-5 text-green-600"})]}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(v.totalSalesVolumeKg||0).toFixed(2)," kg"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total kg sold in period"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Avg Selling Price"}),t.jsx(ir,{className:"h-5 w-5 text-green-600"})]}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(v.avgPricePerKg||0).toFixed(2)]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Per kg"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),t.jsx(ir,{className:"h-5 w-5 text-green-600"})]}),t.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(v.totalMargin||0).toFixed(2)]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Number(v.totalRevenue||0)>0?Number(Number(v.totalMargin||0)/Number(v.totalRevenue||1)*100).toFixed(1)+"% margin":"No sales"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(at,{className:"h-5 w-5 mr-2 text-orange-600"}),"Production Summary"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Total Batches"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:v.totalBatches||0})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Cassava Processed"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(v.totalCassava||0).toFixed(2)," kg"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Gari Produced"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(v.totalGari||0).toFixed(2)," kg"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Average Yield"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(v.avgYield||0).toFixed(1),"%"]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(ir,{className:"h-5 w-5 mr-2 text-green-600"}),"Sales Summary"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Total Revenue"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(v.totalRevenue||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Total Margin"}),t.jsxs("span",{className:"text-sm font-medium text-green-600",children:["",Number(v.totalMargin||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Average Price"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(v.avgPricePerKg||0).toFixed(2),"/kg"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Total Sales"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:v.totalSales||0})]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Production Batches"})}),t.jsxs("div",{className:"divide-y divide-gray-200",children:[i.batches.slice(0,5).map(m=>t.jsx("div",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:m.batch_code}),t.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(m.processing_date).toLocaleDateString()," ",m.cassava_quantity_kg," kg cassava  ",m.gari_produced_kg," kg gari"]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-sm font-medium text-green-600",children:[m.conversion_yield_percent!=null?Number(m.conversion_yield_percent).toFixed(1):"0","% yield"]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["",m.cost_per_kg_gari!=null?Number(m.cost_per_kg_gari).toFixed(2):"0","/kg"]})]})]})},m.id)),i.batches.length===0&&t.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No production batches in this period"})]})]})]})}function Hx(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState(!0),[k,v]=g.useState(!1),[m,w]=g.useState({farm_id:"",name:"",material_type:"POUCH",size:"",unit:"pieces",opening_balance:0,quantity_purchased:0,quantity_used:0,cost_per_unit:"",notes:""});g.useEffect(()=>{h()},[]);const h=async()=>{try{const[y,_]=await Promise.all([H.get("/api/v1/packaging-materials"),H.get("/api/v1/farms")]);o(y.data.data||y.data),x(_.data.data||_.data)}catch(y){console.error("Error fetching data:",y)}finally{N(!1)}},C=async()=>{try{const y=await H.get("/api/v1/farms");x(y.data.data||y.data)}catch(y){console.error("Error fetching farms:",y)}},p=()=>{v(!0),C()},O=async y=>{y.preventDefault();try{await H.post("/api/v1/packaging-materials",m),v(!1),h()}catch(_){alert("Error creating material: "+(_.response?.data?.message||"Unknown error"))}};return b?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Packaging Materials"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Track packaging inventory"})]}),t.jsxs("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[t.jsx(Be,{className:"h-5 w-5 mr-2"}),"Add Material"]})]}),i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(gx,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No packaging materials yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first packaging material to get started"}),t.jsx("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Add Material"})]}):t.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Opening"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purchased"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Used"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Closing"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(y=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[y.name,y.size&&t.jsxs("span",{className:"text-gray-500 ml-1",children:["(",y.size,")"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.material_type}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[y.opening_balance," ",y.unit]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[y.quantity_purchased," ",y.unit]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[y.quantity_used," ",y.unit]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:[y.closing_balance," ",y.unit]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.total_cost?`${y.total_cost.toFixed(2)}`:"N/A"})]},y.id))})]})})}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Packaging Material"}),t.jsxs("form",{onSubmit:O,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),t.jsxs("select",{required:!0,value:m.farm_id,onChange:y=>w({...m,farm_id:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select farm"}),d.map(y=>t.jsx("option",{value:y.id,children:y.name},y.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),t.jsx("input",{type:"text",required:!0,value:m.name,onChange:y=>w({...m,name:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1kg Pouch"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),t.jsxs("select",{required:!0,value:m.material_type,onChange:y=>w({...m,material_type:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"POUCH",children:"Pouch"}),t.jsx("option",{value:"SACK",children:"Sack"}),t.jsx("option",{value:"LABEL",children:"Label"}),t.jsx("option",{value:"SEALING_ROLL",children:"Sealing Roll"}),t.jsx("option",{value:"CARTON",children:"Carton"}),t.jsx("option",{value:"OTHER",children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),t.jsx("input",{type:"text",value:m.size,onChange:y=>w({...m,size:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1kg"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opening"}),t.jsx("input",{type:"number",step:"0.01",value:m.opening_balance,onChange:y=>w({...m,opening_balance:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchased"}),t.jsx("input",{type:"number",step:"0.01",value:m.quantity_purchased,onChange:y=>w({...m,quantity_purchased:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Used"}),t.jsx("input",{type:"number",step:"0.01",value:m.quantity_used,onChange:y=>w({...m,quantity_used:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per Unit ()"}),t.jsx("input",{type:"number",step:"0.01",value:m.cost_per_unit,onChange:y=>w({...m,cost_per_unit:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Material"})]})]})]})})]})}function qx(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState(!0),[k,v]=g.useState(!1),[m,w]=g.useState({farm_id:"",loss_date:new Date().toISOString().slice(0,10),loss_type:"SPOILAGE",gari_type:"WHITE",packaging_type:"1KG_POUCH",quantity_kg:"",cost_per_kg:"",description:"",notes:""});g.useEffect(()=>{h()},[]);const h=async()=>{try{const[_,R]=await Promise.all([H.get("/api/v1/gari-waste-losses"),H.get("/api/v1/farms")]);o(_.data.data||_.data),x(R.data.data||R.data)}catch(_){console.error("Error fetching data:",_)}finally{N(!1)}},C=async()=>{try{const _=await H.get("/api/v1/farms");x(_.data.data||_.data)}catch(_){console.error("Error fetching farms:",_)}},p=()=>{v(!0),C()},O=async _=>{_.preventDefault();try{await H.post("/api/v1/gari-waste-losses",m),v(!1),h()}catch(R){alert("Error creating loss record: "+(R.response?.data?.message||"Unknown error"))}};if(b)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const y=i.reduce((_,R)=>_+(R.total_loss_value||0),0);return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Waste & Losses"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Track waste and losses in gari production"})]}),t.jsxs("button",{onClick:p,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center",children:[t.jsx(Be,{className:"h-5 w-5 mr-2"}),"Record Loss"]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Loss Value"}),t.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["",y.toFixed(2)]})]}),i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(Cx,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No waste/loss records yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Record waste and losses to track efficiency"}),t.jsx("button",{onClick:p,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:"Record Loss"})]}):t.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Loss Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Loss Value"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(_=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(_.loss_date).toLocaleDateString()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:_.loss_type.replace("_"," ")})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[_.gari_type,"  ",_.packaging_type?.replace("_"," ")]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[_.quantity_kg," kg"]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600",children:["",_.total_loss_value?.toFixed(2)||"0.00"]}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:_.description||"-"})]},_.id))})]})})}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Record Waste/Loss"}),t.jsxs("form",{onSubmit:O,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),t.jsxs("select",{required:!0,value:m.farm_id,onChange:_=>w({...m,farm_id:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select farm"}),d.map(_=>t.jsx("option",{value:_.id,children:_.name},_.id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loss Date *"}),t.jsx("input",{type:"date",required:!0,value:m.loss_date,onChange:_=>w({...m,loss_date:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loss Type *"}),t.jsxs("select",{required:!0,value:m.loss_type,onChange:_=>w({...m,loss_type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"SPOILAGE",children:"Spoilage"}),t.jsx("option",{value:"MOISTURE_DAMAGE",children:"Moisture Damage"}),t.jsx("option",{value:"SPILLAGE",children:"Spillage"}),t.jsx("option",{value:"REJECTED_BATCH",children:"Rejected Batch"}),t.jsx("option",{value:"CUSTOMER_RETURN",children:"Customer Return"}),t.jsx("option",{value:"THEFT",children:"Theft"}),t.jsx("option",{value:"OTHER",children:"Other"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type"}),t.jsxs("select",{value:m.gari_type,onChange:_=>w({...m,gari_type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"WHITE",children:"White"}),t.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packaging"}),t.jsxs("select",{value:m.packaging_type,onChange:_=>w({...m,packaging_type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),t.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),t.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),t.jsx("option",{value:"50KG_BAG",children:"50kg Bag"}),t.jsx("option",{value:"BULK",children:"Bulk"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity (kg) *"}),t.jsx("input",{type:"number",step:"0.01",required:!0,value:m.quantity_kg,onChange:_=>w({...m,quantity_kg:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ()"}),t.jsx("input",{type:"number",step:"0.01",value:m.cost_per_kg,onChange:_=>w({...m,cost_per_kg:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:m.description,onChange:_=>w({...m,description:_.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Describe the loss..."})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Record Loss"})]})]})]})})]})}function $x(){const[i,o]=g.useState([]),[d,x]=g.useState({totalRevenue:0,totalMargin:0,totalSales:0,byCrop:{}}),[b,N]=g.useState(!0),[k,v]=g.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});g.useEffect(()=>{m()},[k]);const m=async()=>{try{N(!0);const[w]=await Promise.all([H.get(`/api/v1/gari-sales/summary?date_from=${k.from}&date_to=${k.to}`).catch(()=>({data:{overall:{}}}))]),h=w.data?.overall||{};x({totalRevenue:Number(h.total_revenue||0),totalMargin:Number(h.total_margin||0),totalSales:Number(h.total_sales||0),byCrop:{gari:{revenue:Number(h.total_revenue||0),margin:Number(h.total_margin||0),sales:Number(h.total_sales||0)},bellPepper:{revenue:0,margin:0,sales:0},tomatoes:{revenue:0,margin:0,sales:0},habaneros:{revenue:0,margin:0,sales:0}}})}catch(w){console.error("Error fetching sales data:",w)}finally{N(!1)}};return b?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Sales"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Sales across all crops and livestock"})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("input",{type:"date",value:k.from,onChange:w=>v({...k,from:w.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),t.jsx("input",{type:"date",value:k.to,onChange:w=>v({...k,to:w.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),t.jsx(ir,{className:"h-5 w-5 text-green-600"})]}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(d.totalRevenue||0).toFixed(2)]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),t.jsx(ft,{className:"h-5 w-5 text-green-600"})]}),t.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(d.totalMargin||0).toFixed(2)]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Sales"}),t.jsx(Qe,{className:"h-5 w-5 text-blue-600"})]}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:d.totalSales})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Sales by Crop"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sales Count"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(d.byCrop).map(([w,h])=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:w==="bellPepper"?"Bell Pepper":w}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(h.revenue||0).toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(h.margin||0).toFixed(2)]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.sales})]},w))})]})})]})]})}function Wx(){const[i,o]=g.useState({total:0,byCrop:{},byCategory:{}}),[d,x]=g.useState(!0),[b,N]=g.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});g.useEffect(()=>{k()},[b]);const k=async()=>{try{x(!0);const[v]=await Promise.all([H.get(`/api/v1/gari-production-batches?date_from=${b.from}&date_to=${b.to}`).catch(()=>({data:{data:[]}}))]),w=(Array.isArray(v.data?.data)?v.data.data:[]).reduce((h,C)=>h+Number(C.total_cost||0),0);o({total:w,byCrop:{gari:w,bellPepper:0,tomatoes:0,habaneros:0},byCategory:{production:w,labor:0,materials:0,other:0}})}catch(v){console.error("Error fetching expenses data:",v)}finally{x(!1)}};return d?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Expenses"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Expenses across all crops and activities"})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("input",{type:"date",value:b.from,onChange:v=>N({...b,from:v.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),t.jsx("input",{type:"date",value:b.to,onChange:v=>N({...b,to:v.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),t.jsx(Ni,{className:"h-5 w-5 text-red-600"})]}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(i.total||0).toFixed(2)]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Expenses by Crop"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Percentage"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(i.byCrop).map(([v,m])=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:v==="bellPepper"?"Bell Pepper":v}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(m||0).toFixed(2)]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.total>0?Number(m/i.total*100).toFixed(1)+"%":"0%"})]},v))})]})})]})]})}function Gx(){const[i,o]=g.useState([]),[d,x]=g.useState({}),[b,N]=g.useState(!0),[k,v]=g.useState({from:new Date(Date.now()-10080*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});g.useEffect(()=>{m()},[k]);const m=async()=>{try{N(!0),o([]),x({totalHours:0,byStaff:{},byCrop:{}})}catch(w){console.error("Error fetching allocations:",w)}finally{N(!1)}};return b?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Staff Allocation Report"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Time allocation across all activities"})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("input",{type:"date",value:k.from,onChange:w=>v({...k,from:w.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),t.jsx("input",{type:"date",value:k.to,onChange:w=>v({...k,to:w.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center text-gray-500",children:[t.jsx(Us,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),t.jsx("p",{children:"Staff allocation reporting coming soon"}),t.jsx("p",{className:"text-sm mt-2",children:"This will show time allocation by staff, crop, and activity type"})]})]})}function kt({cropName:i,basePath:o}){const d=[{name:"Production",path:`${o}-production`,icon:at},{name:"Inventory",path:`${o}-inventory`,icon:Qe},{name:"Sales",path:`${o}-sales`,icon:Yr},{name:"KPIs",path:`${o}-kpis`,icon:ft}];return t.jsxs("div",{children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[i," Management"]}),t.jsxs("p",{className:"mt-2 text-gray-600",children:["Coming soon - ",i," tracking and management"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map(x=>t.jsxs(Ze,{to:`/${x.path}`,className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[t.jsx(x.icon,{className:"h-8 w-8 text-green-600 mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x.name}),t.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["View ",x.name.toLowerCase()," for ",i]})]},x.path))}),t.jsxs("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Feature Coming Soon"}),t.jsxs("p",{className:"text-yellow-700",children:["The ",i," management module is under development. This will include production tracking, inventory management, sales tracking, and performance KPIs specific to ",i,"."]})]})]})}function Vx(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState([]),[k,v]=g.useState([]),[m,w]=g.useState(!0),[h,C]=g.useState(!1),[p,O]=g.useState(null),[y,_]=g.useState({farm_id:"",name:"",size_sqm:"",built_date:new Date().toISOString().slice(0,10),construction_cost:"",amortization_cycles:6,borehole_ids:[],location_id:"",notes:"",is_active:!0});g.useEffect(()=>{R()},[]);const R=async()=>{try{console.log("Fetching greenhouses and farms...");const[T,X]=await Promise.all([H.get("/api/v1/greenhouses").catch(be=>{throw console.error("Error fetching greenhouses:",be),console.error("URL:",be.config?.url),console.error("Status:",be.response?.status),console.error("Response:",be.response?.data),be}),H.get("/api/v1/farms?per_page=1000").catch(be=>{throw console.error("Error fetching farms:",be),console.error("URL:",be.config?.url),console.error("Status:",be.response?.status),console.error("Response:",be.response?.data),be})]);console.log("Greenhouses response:",T),console.log("Farms response:",X);const z=T.data?.data||(Array.isArray(T.data)?T.data:[]),oe=X.data?.data||(Array.isArray(X.data)?X.data:[]);console.log("Greenhouses data:",z),console.log("Farms data:",oe),o(Array.isArray(z)?z:[]),x(Array.isArray(oe)?oe:[])}catch(T){console.error("Error fetching data:",T),console.error("Error details:",{message:T.message,status:T.response?.status,statusText:T.response?.statusText,data:T.response?.data,url:T.config?.url,method:T.config?.method}),o([]),x([])}finally{w(!1)}},u=async T=>{if(!T){N([]);return}try{const X=await H.get(`/api/v1/boreholes?farm_id=${T}&per_page=1000`),z=X.data?.data||X.data||[];N(Array.isArray(z)?z:[])}catch(X){console.error("Error fetching boreholes:",X),N([])}},D=()=>{console.log("Opening modal, farms available:",d.length),O(null),_({farm_id:"",name:"",size_sqm:"",built_date:new Date().toISOString().slice(0,10),construction_cost:"",amortization_cycles:6,borehole_ids:[],location_id:"",notes:"",is_active:!0}),N([]),C(!0)},F=T=>{_({...y,farm_id:T,borehole_ids:[]}),u(T)},U=async T=>{O(T),_({farm_id:T.farm_id,name:T.name,size_sqm:T.size_sqm,built_date:T.built_date?new Date(T.built_date).toISOString().slice(0,10):"",construction_cost:T.construction_cost||"",amortization_cycles:T.amortization_cycles||6,borehole_ids:T.boreholes?T.boreholes.map(X=>X.id):[],location_id:T.location_id||"",notes:T.notes||"",is_active:T.is_active!==void 0?T.is_active:!0}),await u(T.farm_id),await fetchLocations(),C(!0)},W=async T=>{T.preventDefault(),console.log("Form submitted with data:",y);try{const X={...y,farm_id:parseInt(y.farm_id),size_sqm:parseFloat(y.size_sqm),construction_cost:parseFloat(y.construction_cost),amortization_cycles:parseInt(y.amortization_cycles),borehole_ids:Array.isArray(y.borehole_ids)?y.borehole_ids.map(z=>parseInt(z)):[]};console.log("Sending payload:",X),p?await H.put(`/api/v1/greenhouses/${p.id}`,X):await H.post("/api/v1/greenhouses",X),C(!1),R()}catch(X){console.error("Error saving greenhouse:",X),console.error("Error response:",X.response?.data),alert("Error saving greenhouse: "+(X.response?.data?.message||X.message||"Unknown error"))}},G=async T=>{if(confirm("Are you sure you want to delete this greenhouse?"))try{await H.delete(`/api/v1/greenhouses/${T}`),R()}catch(X){alert("Error deleting greenhouse: "+(X.response?.data?.message||"Unknown error"))}};return m?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Greenhouses"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Manage greenhouse settings and configuration"})]}),t.jsxs("button",{onClick:D,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[t.jsx(Be,{className:"h-5 w-5 mr-2"}),"New Greenhouse"]})]}),i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(at,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No greenhouses yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first greenhouse to get started"}),t.jsx("button",{onClick:D,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Greenhouse"})]}):t.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Farm"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Size (sqm)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Built Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Construction Cost"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(T=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:T.code}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.name}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.farm?.name||"N/A"}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(T.size_sqm||0).toFixed(2)," sqm"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.built_date?new Date(T.built_date).toLocaleDateString():"N/A"}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(T.construction_cost||0).toFixed(2)]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.boreholes&&T.boreholes.length>0?T.boreholes.map(X=>X.name).join(", "):"None"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${T.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:T.is_active?"Active":"Inactive"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>U(T),className:"text-green-600 hover:text-green-700",children:t.jsx(Lt,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>G(T.id),className:"text-red-600 hover:text-red-700",children:t.jsx(_r,{className:"h-4 w-4"})})]})})]},T.id))})]})})}),h&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:p?"Edit Greenhouse":"Create New Greenhouse"}),t.jsxs("form",{onSubmit:W,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),t.jsxs("select",{required:!0,value:y.farm_id,onChange:T=>F(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select farm"}),d.length===0?t.jsx("option",{disabled:!0,children:"No farms available. Create a farm first."}):d.map(T=>t.jsx("option",{value:T.id,children:T.name},T.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),t.jsx("input",{type:"text",required:!0,value:y.name,onChange:T=>_({...y,name:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size (sqm) *"}),t.jsx("input",{type:"number",step:"0.01",required:!0,value:y.size_sqm,onChange:T=>_({...y,size_sqm:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Built Date *"}),t.jsx("input",{type:"date",required:!0,value:y.built_date,onChange:T=>_({...y,built_date:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Construction Cost () *"}),t.jsx("input",{type:"number",step:"0.01",required:!0,value:y.construction_cost,onChange:T=>_({...y,construction_cost:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amortization Cycles"}),t.jsx("input",{type:"number",min:"1",value:y.amortization_cycles,onChange:T=>_({...y,amortization_cycles:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Default: 6 cycles"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Linked Boreholes"}),t.jsx("select",{multiple:!0,disabled:!y.farm_id||b.length===0,value:y.borehole_ids.map(T=>T.toString()),onChange:T=>{const X=Array.from(T.target.selectedOptions,z=>parseInt(z.value));_({...y,borehole_ids:X})},className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${!y.farm_id||b.length===0?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`,size:Math.min(b.length+1,5),children:b.length===0?t.jsx("option",{disabled:!0,children:y.farm_id?"No boreholes available for this farm":"Select farm first"}):b.map(T=>t.jsxs("option",{value:T.id,children:[T.name," (",T.code,") - ",Number(T.installation_cost||0).toFixed(2)]},T.id))}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl/Cmd to select multiple boreholes"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),t.jsxs("select",{value:y.location_id,onChange:T=>_({...y,location_id:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select Location"}),k.map(T=>t.jsx("option",{value:T.id,children:T.name},T.id))]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:y.notes,onChange:T=>_({...y,notes:T.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:y.is_active,onChange:T=>_({...y,is_active:T.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]})})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[p?"Update":"Create"," Greenhouse"]})]})]})]})})]})}function Kx(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState(!0),[k,v]=g.useState(!1),[m,w]=g.useState(null),[h,C]=g.useState({farm_id:"",name:"",installed_date:new Date().toISOString().slice(0,10),installation_cost:"",amortization_cycles:6,location:"",specifications:"",notes:"",is_active:!0});g.useEffect(()=>{p()},[]);const p=async()=>{try{const[u,D]=await Promise.all([H.get("/api/v1/boreholes"),H.get("/api/v1/farms?per_page=1000")]),F=u.data?.data||(Array.isArray(u.data)?u.data:[]),U=D.data?.data||(Array.isArray(D.data)?D.data:[]);o(Array.isArray(F)?F:[]),x(Array.isArray(U)?U:[])}catch(u){console.error("Error fetching data:",u)}finally{N(!1)}},O=()=>{w(null),C({farm_id:"",name:"",installed_date:new Date().toISOString().slice(0,10),installation_cost:"",amortization_cycles:6,location:"",specifications:"",notes:"",is_active:!0}),v(!0)},y=u=>{w(u),C({farm_id:u.farm_id,name:u.name,installed_date:u.installed_date?new Date(u.installed_date).toISOString().slice(0,10):"",installation_cost:u.installation_cost||"",amortization_cycles:u.amortization_cycles||6,location:u.location||"",specifications:u.specifications||"",notes:u.notes||"",is_active:u.is_active!==void 0?u.is_active:!0}),v(!0)},_=async u=>{u.preventDefault();try{m?await H.put(`/api/v1/boreholes/${m.id}`,h):await H.post("/api/v1/boreholes",h),v(!1),p()}catch(D){alert("Error saving borehole: "+(D.response?.data?.message||"Unknown error"))}},R=async u=>{if(confirm("Are you sure you want to delete this borehole?"))try{await H.delete(`/api/v1/boreholes/${u}`),p()}catch(D){alert("Error deleting borehole: "+(D.response?.data?.message||"Unknown error"))}};return b?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Boreholes"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Manage boreholes that can power multiple greenhouses"})]}),t.jsxs("button",{onClick:O,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[t.jsx(Be,{className:"h-5 w-5 mr-2"}),"New Borehole"]})]}),i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(bx,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No boreholes yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first borehole to get started"}),t.jsx("button",{onClick:O,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Borehole"})]}):t.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Farm"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Installed Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Installation Cost"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amortization"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Linked Greenhouses"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(u=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.code}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.name}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.farm?.name||"N/A"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.installed_date?new Date(u.installed_date).toLocaleDateString():"N/A"}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(u.installation_cost||0).toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[u.amortization_cycles," cycles"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.greenhouses&&u.greenhouses.length>0?`${u.greenhouses.length} greenhouse(s)`:"None"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${u.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:u.is_active?"Active":"Inactive"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>y(u),className:"text-green-600 hover:text-green-700",children:t.jsx(Lt,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>R(u.id),className:"text-red-600 hover:text-red-700",children:t.jsx(_r,{className:"h-4 w-4"})})]})})]},u.id))})]})})}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:m?"Edit Borehole":"Create New Borehole"}),t.jsxs("form",{onSubmit:_,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),t.jsxs("select",{required:!0,value:h.farm_id,onChange:u=>C({...h,farm_id:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select farm"}),d.map(u=>t.jsx("option",{value:u.id,children:u.name},u.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),t.jsx("input",{type:"text",required:!0,value:h.name,onChange:u=>C({...h,name:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Installed Date *"}),t.jsx("input",{type:"date",required:!0,value:h.installed_date,onChange:u=>C({...h,installed_date:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Installation Cost () *"}),t.jsx("input",{type:"number",step:"0.01",required:!0,value:h.installation_cost,onChange:u=>C({...h,installation_cost:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amortization Cycles"}),t.jsx("input",{type:"number",min:"1",value:h.amortization_cycles,onChange:u=>C({...h,amortization_cycles:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Default: 6 cycles"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),t.jsx("input",{type:"text",value:h.location,onChange:u=>C({...h,location:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specifications"}),t.jsx("textarea",{value:h.specifications,onChange:u=>C({...h,specifications:u.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Depth, capacity, pump type, etc."})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:h.notes,onChange:u=>C({...h,notes:u.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:h.is_active,onChange:u=>C({...h,is_active:u.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]})})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[m?"Update":"Create"," Borehole"]})]})]})]})})]})}function Qx(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState([]),[k,v]=g.useState(!0),[m,w]=g.useState(!1),[h,C]=g.useState({farm_id:"",greenhouse_id:"",start_date:new Date().toISOString().slice(0,10),expected_end_date:"",expected_yield_kg:"",notes:""});g.useEffect(()=>{p()},[]);const p=async()=>{try{const[u,D]=await Promise.all([H.get("/api/v1/bell-pepper-cycles"),H.get("/api/v1/farms")]),F=u.data?.data||u.data||[],U=D.data?.data||D.data||[];o(Array.isArray(F)?F:[]),x(Array.isArray(U)?U:[])}catch(u){console.error("Error fetching data:",u)}finally{v(!1)}},O=async u=>{if(!u){N([]);return}try{const D=await H.get(`/api/v1/greenhouses?farm_id=${u}`),F=D.data?.data||D.data||[];N(Array.isArray(F)?F:[])}catch(D){console.error("Error fetching greenhouses:",D),N([])}},y=()=>{C({farm_id:"",greenhouse_id:"",start_date:new Date().toISOString().slice(0,10),expected_end_date:"",expected_yield_kg:"",notes:""}),N([]),w(!0)},_=u=>{C({...h,farm_id:u,greenhouse_id:""}),O(u)},R=async u=>{u.preventDefault();try{await H.post("/api/v1/bell-pepper-cycles",h),w(!1),p()}catch(D){alert("Error creating cycle: "+(D.response?.data?.message||"Unknown error"))}};return k?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bell Pepper Production Cycles"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Track production cycles and yield per sqm"})]}),t.jsxs("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[t.jsx(Be,{className:"h-5 w-5 mr-2"}),"New Cycle"]})]}),i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[t.jsx(at,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cycles yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production cycle to get started"}),t.jsx("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Cycle"})]}):t.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cycle Code"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Greenhouse"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Start Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expected Yield"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actual Yield"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Yield/Sqm"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Variance"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(u=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.jsx(Ze,{to:`/bell-pepper-cycles/${u.id}`,className:"text-green-600 hover:text-green-700",children:u.cycle_code})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.greenhouse?.name||"N/A"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(u.start_date).toLocaleDateString()}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(u.expected_yield_kg||0).toFixed(2)," kg"]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(u.actual_yield_kg||0).toFixed(2)," kg"]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(u.actual_yield_per_sqm||0).toFixed(2)," kg/sqm"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:t.jsxs("span",{className:`${Number(u.yield_variance_percent||0)>=0?"text-green-600":"text-red-600"}`,children:[Number(u.yield_variance_percent||0).toFixed(1),"%"]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${u.status==="COMPLETED"?"bg-green-100 text-green-800":u.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:u.status})})]},u.id))})]})})}),m&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Production Cycle"}),t.jsxs("form",{onSubmit:R,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),t.jsxs("select",{required:!0,value:h.farm_id,onChange:u=>_(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select farm"}),d.map(u=>t.jsx("option",{value:u.id,children:u.name},u.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse *"}),t.jsxs("select",{required:!0,disabled:!h.farm_id||b.length===0,value:h.greenhouse_id,onChange:u=>C({...h,greenhouse_id:u.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${!h.farm_id||b.length===0?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`,children:[t.jsx("option",{value:"",children:h.farm_id?b.length===0?"No greenhouses available":"Select greenhouse":"Select farm first"}),b.map(u=>t.jsxs("option",{value:u.id,children:[u.name," (",u.size_sqm," sqm)"]},u.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),t.jsx("input",{type:"date",required:!0,value:h.start_date,onChange:u=>{const D=u.target.value;C({...h,start_date:D,expected_end_date:D?new Date(new Date(D).getTime()+4320*60*60*1e3).toISOString().slice(0,10):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected End Date *"}),t.jsx("input",{type:"date",required:!0,value:h.expected_end_date,onChange:u=>C({...h,expected_end_date:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"6 months from start date"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Yield (kg) *"}),t.jsx("input",{type:"number",step:"0.01",required:!0,value:h.expected_yield_kg,onChange:u=>C({...h,expected_yield_kg:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:h.notes,onChange:u=>C({...h,notes:u.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Cycle"})]})]})]})})]})}function Yx(){const{id:i}=la(),[o,d]=g.useState(null),[x,b]=g.useState([]),[N,k]=g.useState([]),[v,m]=g.useState(!0),[w,h]=g.useState(!1),[C,p]=g.useState(!1),[O,y]=g.useState(null),[_,R]=g.useState({cost_type:"SEEDS",description:"",quantity:"",unit:"",unit_cost:"",total_cost:"",cost_date:new Date().toISOString().slice(0,10),staff_id:"",hours_allocated:"",notes:""}),[u,D]=g.useState({harvest_date:new Date().toISOString().slice(0,10),weight_kg:"",crates_count:"",grade:"MIXED",status:"HARVESTED",notes:""});g.useEffect(()=>{F()},[i]);const F=async()=>{try{const[z,oe,be]=await Promise.all([H.get(`/api/v1/bell-pepper-cycles/${i}`),H.get(`/api/v1/bell-pepper-cycle-costs?bell_pepper_cycle_id=${i}`),H.get(`/api/v1/bell-pepper-harvests?bell_pepper_cycle_id=${i}`)]),Me=z.data?.data||z.data,me=oe.data?.data||oe.data||[],xe=be.data?.data||be.data||[];d(Me),b(Array.isArray(me)?me:[]),k(Array.isArray(xe)?xe:[])}catch(z){console.error("Error fetching cycle data:",z)}finally{m(!1)}},U=async z=>{z.preventDefault();try{const oe={..._,bell_pepper_cycle_id:i,farm_id:o?.farm_id};O?await H.put(`/api/v1/bell-pepper-cycle-costs/${O.id}`,oe):await H.post("/api/v1/bell-pepper-cycle-costs",oe),h(!1),y(null),F()}catch(oe){alert("Error saving cost: "+(oe.response?.data?.message||"Unknown error"))}},W=async z=>{z.preventDefault();try{const oe={...u,farm_id:o?.farm_id,bell_pepper_cycle_id:i,greenhouse_id:o?.greenhouse_id};await H.post("/api/v1/bell-pepper-harvests",oe),p(!1),F()}catch(oe){alert("Error saving harvest: "+(oe.response?.data?.message||"Unknown error"))}},G=async z=>{if(confirm("Are you sure you want to delete this cost?"))try{await H.delete(`/api/v1/bell-pepper-cycle-costs/${z}`),F()}catch(oe){alert("Error deleting cost: "+(oe.response?.data?.message||"Unknown error"))}};if(v)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});if(!o)return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500 mb-2",children:"Cycle not found"}),t.jsx(Ze,{to:"/bell-pepper-production",className:"text-green-600 hover:text-green-700",children:" Back to Cycles"})]});const T=[{value:"SEEDS",label:"Seeds"},{value:"FERTILIZER_CHEMICALS",label:"Fertilizer/Chemicals"},{value:"FUEL_WATER_PUMPING",label:"Fuel (Water Pumping)"},{value:"LABOUR_DEDICATED",label:"Labour (Dedicated)"},{value:"LABOUR_SHARED",label:"Labour (Shared)"},{value:"SPRAY_GUNS",label:"Spray Guns"},{value:"IRRIGATION_EQUIPMENT",label:"Irrigation Equipment"},{value:"PROTECTIVE_CLOTHING",label:"Protective Clothing"},{value:"GREENHOUSE_AMORTIZATION",label:"Greenhouse Amortization"},{value:"BOREHOLE_AMORTIZATION",label:"Borehole Amortization"},{value:"LOGISTICS",label:"Logistics"},{value:"OTHER",label:"Other"}],X=x.reduce((z,oe)=>z+Number(oe.total_cost||0),0);return N.reduce((z,oe)=>z+Number(oe.weight_kg||0),0),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs(Ze,{to:"/bell-pepper-production",className:"flex items-center text-gray-600 hover:text-gray-900",children:[t.jsx(ia,{className:"h-5 w-5 mr-2"}),"Back to Cycles"]}),o.status!=="COMPLETED"&&t.jsxs("button",{onClick:()=>{alert("Cycle update coming soon")},className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[t.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Edit Cycle"]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:t.jsx(at,{className:"h-8 w-8 text-green-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o.cycle_code}),t.jsxs("p",{className:"text-gray-600",children:[o.greenhouse?.name,"  ",o.farm?.name]})]})]}),t.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded ${o.status==="COMPLETED"?"bg-green-100 text-green-800":o.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:o.status})]})}),t.jsx("div",{className:"px-6 py-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Expected Yield"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Number(o.expected_yield_kg||0).toFixed(2)," kg"]}),t.jsxs("p",{className:"text-xs text-gray-500",children:[Number(o.expected_yield_per_sqm||0).toFixed(2)," kg/sqm"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Actual Yield"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Number(o.actual_yield_kg||0).toFixed(2)," kg"]}),t.jsxs("p",{className:"text-xs text-gray-500",children:[Number(o.actual_yield_per_sqm||0).toFixed(2)," kg/sqm"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Yield Variance"}),t.jsxs("p",{className:`text-lg font-semibold ${Number(o.yield_variance_percent||0)>=0?"text-green-600":"text-red-600"}`,children:[Number(o.yield_variance_percent||0).toFixed(1),"%"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Costs"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",Number(X||0).toFixed(2)]})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Costs"}),t.jsxs("button",{onClick:()=>{y(null),R({cost_type:"SEEDS",description:"",quantity:"",unit:"",unit_cost:"",total_cost:"",cost_date:new Date().toISOString().slice(0,10),staff_id:"",hours_allocated:"",notes:""}),h(!0)},className:"bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 flex items-center text-sm",children:[t.jsx(Be,{className:"h-4 w-4 mr-1"}),"Add Cost"]})]}),t.jsxs("div",{className:"divide-y divide-gray-200",children:[x.map(z=>t.jsx("div",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:T.find(oe=>oe.value===z.cost_type)?.label||z.cost_type}),z.description&&t.jsx("p",{className:"text-sm text-gray-600",children:z.description}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(z.cost_date).toLocaleDateString()})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",Number(z.total_cost||0).toFixed(2)]}),t.jsxs("div",{className:"flex space-x-2 mt-2",children:[t.jsx("button",{onClick:()=>{y(z),R({cost_type:z.cost_type,description:z.description||"",quantity:z.quantity||"",unit:z.unit||"",unit_cost:z.unit_cost||"",total_cost:z.total_cost||"",cost_date:z.cost_date?new Date(z.cost_date).toISOString().slice(0,10):new Date().toISOString().slice(0,10),staff_id:z.staff_id||"",hours_allocated:z.hours_allocated||"",notes:z.notes||""}),h(!0)},className:"text-green-600 hover:text-green-700",children:t.jsx(Lt,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>G(z.id),className:"text-red-600 hover:text-red-700",children:t.jsx(_r,{className:"h-4 w-4"})})]})]})]})},z.id)),x.length===0&&t.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No costs recorded yet"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Harvests"}),t.jsxs("button",{onClick:()=>{D({harvest_date:new Date().toISOString().slice(0,10),weight_kg:"",crates_count:"",grade:"MIXED",status:"HARVESTED",notes:""}),p(!0)},className:"bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 flex items-center text-sm",children:[t.jsx(Be,{className:"h-4 w-4 mr-1"}),"Add Harvest"]})]}),t.jsxs("div",{className:"divide-y divide-gray-200",children:[N.map(z=>t.jsx("div",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:z.harvest_code}),t.jsxs("p",{className:"text-sm text-gray-600",children:[Number(z.weight_kg||0).toFixed(2)," kg  ",z.crates_count," crates"]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(z.harvest_date).toLocaleDateString(),"  Grade: ",z.grade]})]}),t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${z.status==="SOLD"?"bg-green-100 text-green-800":z.status==="DELIVERED"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:z.status})]})},z.id)),N.length===0&&t.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No harvests recorded yet"})]})]})]}),w&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:O?"Edit Cost":"Add Cost"}),t.jsxs("form",{onSubmit:U,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Type *"}),t.jsx("select",{required:!0,value:_.cost_type,onChange:z=>R({..._,cost_type:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:T.map(z=>t.jsx("option",{value:z.value,children:z.label},z.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Date *"}),t.jsx("input",{type:"date",required:!0,value:_.cost_date,onChange:z=>R({..._,cost_date:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("input",{type:"text",value:_.description,onChange:z=>R({..._,description:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Cost () *"}),t.jsx("input",{type:"number",step:"0.01",required:!0,value:_.total_cost,onChange:z=>R({..._,total_cost:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),(_.cost_type==="SEEDS"||_.cost_type==="FERTILIZER_CHEMICALS")&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),t.jsx("input",{type:"number",step:"0.01",value:_.quantity,onChange:z=>R({..._,quantity:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),t.jsx("input",{type:"text",value:_.unit,onChange:z=>R({..._,unit:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"kg, litres, etc"})]})]}),(_.cost_type==="LABOUR_DEDICATED"||_.cost_type==="LABOUR_SHARED")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours Allocated"}),t.jsx("input",{type:"number",step:"0.5",value:_.hours_allocated,onChange:z=>R({..._,hours_allocated:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:_.notes,onChange:z=>R({..._,notes:z.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{h(!1),y(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[O?"Update":"Add"," Cost"]})]})]})]})}),C&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Harvest"}),t.jsxs("form",{onSubmit:W,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Date *"}),t.jsx("input",{type:"date",required:!0,value:u.harvest_date,onChange:z=>D({...u,harvest_date:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg) *"}),t.jsx("input",{type:"number",step:"0.01",required:!0,value:u.weight_kg,onChange:z=>{const oe=z.target.value;D({...u,weight_kg:oe,crates_count:oe?Math.ceil(oe/9.5):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crates Count"}),t.jsx("input",{type:"number",value:u.crates_count,onChange:z=>D({...u,crates_count:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated (9-10kg per crate)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade *"}),t.jsxs("select",{required:!0,value:u.grade,onChange:z=>D({...u,grade:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"A",children:"Grade A"}),t.jsx("option",{value:"B",children:"Grade B"}),t.jsx("option",{value:"C",children:"Grade C"}),t.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{value:u.status,onChange:z=>D({...u,status:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"HARVESTED",children:"Harvested"}),t.jsx("option",{value:"PACKED",children:"Packed"}),t.jsx("option",{value:"IN_TRANSIT",children:"In Transit"}),t.jsx("option",{value:"DELIVERED",children:"Delivered"}),t.jsx("option",{value:"SOLD",children:"Sold"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:u.notes,onChange:z=>D({...u,notes:z.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Harvest"})]})]})]})})]})}function Xx(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState([]),[k,v]=g.useState([]),[m,w]=g.useState([]),[h,C]=g.useState(!0),p=(j,$=2)=>{const Z=Number(j);return isNaN(Z)||Z===null||Z===void 0?"0.00":Z.toFixed($)},[O,y]=g.useState(!1),[_,R]=g.useState(!1),[u,D]=g.useState({farm_id:"",bell_pepper_cycle_id:"",greenhouse_id:"",harvest_date:new Date().toISOString().slice(0,10),grade_a_kg:"0",grade_b_kg:"0",grade_c_kg:"0",crates_count:"",notes:""}),[F,U]=g.useState({farm_id:"",cycle_id:"",greenhouse_id:""}),[W,G]=g.useState(null);g.useEffect(()=>{T()},[F]),g.useEffect(()=>{if(W&&W.start_date&&u.harvest_date){const j=Ne(u.harvest_date,W);console.log("useEffect validation:",j,"showPopup:",!j.valid),R(!j.valid)}else R(!1)},[W,u.harvest_date]);const T=async()=>{try{const j=new URLSearchParams;F.farm_id&&j.append("farm_id",F.farm_id),F.cycle_id&&j.append("bell_pepper_cycle_id",F.cycle_id),F.greenhouse_id&&j.append("greenhouse_id",F.greenhouse_id);const[$,Z,le]=await Promise.all([H.get(`/api/v1/bell-pepper-harvests?${j.toString()}`),H.get("/api/v1/bell-pepper-cycles?per_page=1000"),H.get("/api/v1/farms?per_page=1000")]),ce=$.data?.data||(Array.isArray($.data)?$.data:[]),ge=Z.data?.data||(Array.isArray(Z.data)?Z.data:[]),pe=le.data?.data||(Array.isArray(le.data)?le.data:[]);o(Array.isArray(ce)?ce:[]),x(Array.isArray(ge)?ge:[]),v(Array.isArray(pe)?pe:[])}catch(j){console.error("Error fetching data:",j)}finally{C(!1)}},X=async j=>{if(!j){w([]);return}try{const $=await H.get(`/api/v1/greenhouses?farm_id=${j}`),Z=$.data?.data||$.data||[];w(Array.isArray(Z)?Z:[])}catch($){console.error("Error fetching greenhouses:",$),w([])}},z=async j=>{if(!j){N([]);return}try{const $=await H.get(`/api/v1/bell-pepper-cycles?greenhouse_id=${j}&status=IN_PROGRESS&per_page=1000`),Z=$.data?.data||(Array.isArray($.data)?$.data:[]),le=Array.isArray(Z)?Z:[];if(le.length===0){const ce=await H.get(`/api/v1/bell-pepper-cycles?greenhouse_id=${j}&status=PLANNED&per_page=1000`),ge=ce.data?.data||(Array.isArray(ce.data)?ce.data:[]);N(Array.isArray(ge)?ge:[])}else N(le);console.log("Cycles loaded for greenhouse:",j,le.length)}catch($){console.error("Error fetching cycles:",$),N([])}},oe=async()=>{if(D({farm_id:"",bell_pepper_cycle_id:"",greenhouse_id:"",harvest_date:new Date().toISOString().slice(0,10),grade_a_kg:"0",grade_b_kg:"0",grade_c_kg:"0",crates_count:"",notes:""}),w([]),N([]),G(null),R(!1),k.length===0)try{const j=await H.get("/api/v1/farms?per_page=1000"),$=j.data?.data||(Array.isArray(j.data)?j.data:[]);v(Array.isArray($)?$:[])}catch(j){console.error("Error fetching farms:",j)}y(!0)},be=j=>{D({...u,farm_id:j,greenhouse_id:"",bell_pepper_cycle_id:""}),X(j)},Me=j=>{D({...u,greenhouse_id:j,bell_pepper_cycle_id:"",harvest_date:new Date().toISOString().slice(0,10)}),G(null),z(j)},me=j=>{const $=b.find(Z=>String(Z.id)===String(j));if(console.log("handleCycleChange called with cycleId:",j,"cycle:",$,"current harvest_date:",u.harvest_date),G($),D({...u,bell_pepper_cycle_id:j}),$&&$.start_date&&u.harvest_date){const Z=Ne(u.harvest_date,$);console.log("Immediate validation after cycle selection:",{harvestDate:u.harvest_date,cycleStartDate:$.start_date,validation:Z,willShowPopup:!Z.valid}),Z.valid?R(!1):(console.log("Setting popup to true immediately"),R(!0))}else R(!1)},xe=()=>{if(W&&W.start_date){const j=new Date(W.start_date),$=new Date(j);return $.setDate($.getDate()+70),$.toISOString().slice(0,10)}return null},He=()=>{if(W&&W.expected_end_date){const j=new Date(W.expected_end_date),$=new Date;return j<$?j.toISOString().slice(0,10):$.toISOString().slice(0,10)}return new Date().toISOString().slice(0,10)},Ne=(j,$=W)=>{if(!$||!$.start_date||!j)return{valid:!0};const Z=new Date($.start_date),le=new Date(j),ce=new Date(Z);ce.setDate(ce.getDate()+70);const ge=le.getTime()-Z.getTime(),pe=Math.floor(ge/(1e3*60*60*24));return console.log("Validating date:",{harvestDate:j,cycleStartDate:$.start_date,daysDifference:pe,minRequired:70,isValid:pe>=70}),pe<70?{valid:!1,minDate:ce.toISOString().slice(0,10),cycleStartDate:Z.toISOString().slice(0,10),daysDifference:pe}:{valid:!0}},ve=j=>{console.log("handleHarvestDateChange called with:",j,"selectedCycle:",W),D({...u,harvest_date:j})},E=()=>{if(!W||!W.start_date)return;Ne(u.harvest_date).valid||R(!0)},Y=()=>{const j=Number(u.grade_a_kg)||0,$=Number(u.grade_b_kg)||0,Z=Number(u.grade_c_kg)||0,le=j+$+Z;return isNaN(le)?0:le},K=()=>{const j=Y();return j>0?Math.ceil(j/9.5):0},L=async j=>{if(j.preventDefault(),W&&W.start_date&&!Ne(u.harvest_date).valid){R(!0);return}try{const $={...u,grade_a_kg:parseFloat(u.grade_a_kg)||0,grade_b_kg:parseFloat(u.grade_b_kg)||0,grade_c_kg:parseFloat(u.grade_c_kg)||0,crates_count:u.crates_count||K()};await H.post("/api/v1/bell-pepper-harvests",$),y(!1),R(!1),T()}catch($){alert("Error creating harvest: "+($.response?.data?.message||"Unknown error"))}};return h?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Bell Pepper Harvests"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Record and track harvests by grade"})]}),t.jsxs("button",{onClick:oe,className:"w-full md:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[t.jsx(Be,{className:"w-5 h-5"}),"Record Harvest"]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm"}),t.jsxs("select",{value:F.farm_id,onChange:j=>U({...F,farm_id:j.target.value,greenhouse_id:"",cycle_id:""}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"All Farms"}),k.map(j=>t.jsx("option",{value:j.id,children:j.name},j.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse"}),t.jsxs("select",{value:F.greenhouse_id,onChange:j=>U({...F,greenhouse_id:j.target.value,cycle_id:""}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:!F.farm_id,children:[t.jsx("option",{value:"",children:"All Greenhouses"}),m.filter(j=>!F.farm_id||j.farm_id==F.farm_id).map(j=>t.jsx("option",{value:j.id,children:j.name},j.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cycle"}),t.jsxs("select",{value:F.cycle_id,onChange:j=>U({...F,cycle_id:j.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:!F.greenhouse_id,children:[t.jsx("option",{value:"",children:"All Cycles"}),d.filter(j=>!F.greenhouse_id||j.greenhouse_id==F.greenhouse_id).map(j=>t.jsx("option",{value:j.id,children:j.cycle_code},j.id))]})]})]})}),t.jsx("div",{className:"space-y-4",children:i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[t.jsx(Qe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"No harvests found. Record your first harvest!"})]}):i.map(j=>{const $=Number(j.grade_a_kg)||0,Z=Number(j.grade_b_kg)||0,le=Number(j.grade_c_kg)||0,ce=$+Z+le||0;return t.jsxs("div",{className:"bg-white rounded-lg shadow p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Qe,{className:"w-5 h-5 text-green-600"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j.harvest_code}),j.harvest_number&&t.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:["Harvest #",j.harvest_number]})]}),t.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Jd,{className:"w-4 h-4"}),new Date(j.harvest_date).toLocaleDateString()]}),j.greenhouse&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ft,{className:"w-4 h-4"}),j.greenhouse.name]}),j.harvester&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(pi,{className:"w-4 h-4"}),j.harvester.name]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[p(ce)," kg"]}),t.jsxs("div",{className:"text-sm text-gray-600",children:[j.crates_count||0," crates"]})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[t.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[t.jsx("div",{className:"text-xs font-medium text-green-700 mb-1",children:"Grade A"}),t.jsxs("div",{className:"text-lg font-semibold text-green-900",children:[p($)," kg"]})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[t.jsx("div",{className:"text-xs font-medium text-yellow-700 mb-1",children:"Grade B"}),t.jsxs("div",{className:"text-lg font-semibold text-yellow-900",children:[p(Z)," kg"]})]}),t.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[t.jsx("div",{className:"text-xs font-medium text-orange-700 mb-1",children:"Grade C"}),t.jsxs("div",{className:"text-lg font-semibold text-orange-900",children:[p(le)," kg"]})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-2 pt-4 border-t",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${j.status==="HARVESTED"?"bg-blue-100 text-blue-800":j.status==="PACKED"?"bg-purple-100 text-purple-800":j.status==="SOLD"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.status})}),j.cycle&&t.jsx(Ze,{to:`/bell-pepper-cycles/${j.cycle.id}`,className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"View Cycle "})]})]},j.id)})}),_&&W&&W.start_date&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[100]",onClick:j=>{j.target,j.currentTarget},children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",onClick:j=>j.stopPropagation(),children:[t.jsx("div",{className:"p-6 border-b",children:t.jsx("h2",{className:"text-xl font-bold text-red-600",children:"Invalid Harvest Date"})}),t.jsxs("div",{className:"p-6",children:[t.jsx("p",{className:"text-gray-700 mb-4",children:"The selected harvest date is less than 70 days from the cycle start date. This is not possible."}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:t.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Cycle Start Date:"})," ",new Date(W.start_date).toLocaleDateString()]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Selected Harvest Date:"})," ",new Date(u.harvest_date).toLocaleDateString()]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Minimum Harvest Date:"})," ",new Date(new Date(W.start_date).setDate(new Date(W.start_date).getDate()+70)).toLocaleDateString()]})]})}),t.jsx("p",{className:"text-gray-700 mb-4",children:"Please select a date that is at least 70 days after the cycle start date."}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{type:"button",onClick:()=>{R(!1);const j=new Date(W.start_date),$=new Date(j);$.setDate($.getDate()+70),D({...u,harvest_date:$.toISOString().slice(0,10)})},className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Use Minimum Date"}),t.jsx("button",{type:"button",onClick:()=>R(!1),className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Choose Different Date"})]})]})]})}),O&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"p-6 border-b",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Record New Harvest"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Enter harvest details by grade"})]}),t.jsxs("form",{onSubmit:L,className:"p-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),t.jsxs("select",{value:u.farm_id,onChange:j=>be(j.target.value),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select Farm"}),k.length===0?t.jsx("option",{value:"",disabled:!0,children:"Loading farms..."}):k.map(j=>t.jsx("option",{value:String(j.id),children:j.name},j.id))]}),k.length===0&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No farms available. Please create a farm first."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse *"}),t.jsxs("select",{value:u.greenhouse_id,onChange:j=>Me(j.target.value),required:!0,disabled:!u.farm_id,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"Select Greenhouse"}),m.map(j=>t.jsx("option",{value:j.id,children:j.name},j.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Cycle *"}),t.jsxs("select",{value:u.bell_pepper_cycle_id,onChange:j=>me(j.target.value),required:!0,disabled:!u.greenhouse_id||b.length===0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"Select Cycle"}),b.length===0&&u.greenhouse_id?t.jsx("option",{value:"",disabled:!0,children:"No active cycles found for this greenhouse"}):b.map(j=>t.jsxs("option",{value:String(j.id),children:[j.cycle_code," ",j.start_date?`(${new Date(j.start_date).toLocaleDateString()})`:""]},j.id))]}),u.greenhouse_id&&b.length===0&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No in-progress or planned cycles found. Please create a production cycle first."}),W&&W.start_date&&t.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Cycle started: ",new Date(W.start_date).toLocaleDateString(),". First harvest can be recorded from ",new Date(new Date(W.start_date).setDate(new Date(W.start_date).getDate()+70)).toLocaleDateString()]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Date *"}),t.jsx("input",{type:"date",value:u.harvest_date,onChange:j=>{const $=j.target.value;console.log("Date changed to:",$,"Selected cycle:",W),ve($)},onBlur:E,onInput:j=>{const $=j.target.value;if(console.log("Date input event:",$),$&&W&&W.start_date){const Z=Ne($,W);console.log("Validation result:",Z),Z.valid?R(!1):(console.log("Showing validation popup"),R(!0))}},min:xe()||void 0,max:He(),required:!0,className:`w-full border rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ${_?"border-red-500 bg-red-50":"border-gray-300"}`}),W&&W.start_date&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Harvest date must be at least 70 days after cycle start (",new Date(W.start_date).toLocaleDateString(),")"]}),!W&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please select a production cycle first to set date constraints"})]}),t.jsxs("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Harvest by Grade (kg)"}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[t.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Grade A (Premium) *"}),t.jsx("input",{type:"number",step:"0.01",min:"0",value:u.grade_a_kg,onChange:j=>D({...u,grade_a_kg:j.target.value}),required:!0,className:"w-full border border-green-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0.00"})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[t.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-2",children:"Grade B (Standard) *"}),t.jsx("input",{type:"number",step:"0.01",min:"0",value:u.grade_b_kg,onChange:j=>D({...u,grade_b_kg:j.target.value}),required:!0,className:"w-full border border-yellow-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"0.00"})]}),t.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[t.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Grade C (Lower) *"}),t.jsx("input",{type:"number",step:"0.01",min:"0",value:u.grade_c_kg,onChange:j=>D({...u,grade_c_kg:j.target.value}),required:!0,className:"w-full border border-orange-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"0.00"})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total Weight"}),t.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[p(Y())," kg"]}),t.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Estimated crates: ",K()]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crates Count"}),t.jsx("input",{type:"number",min:"0",value:u.crates_count,onChange:j=>D({...u,crates_count:j.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:`Auto: ${K()}`}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to auto-calculate (9.5kg per crate)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:u.notes,onChange:j=>D({...u,notes:j.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Additional notes about this harvest..."})]})]}),t.jsxs("div",{className:"flex gap-4 mt-6",children:[t.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),t.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Record Harvest"})]})]})]})})]})}function Zx(){const[i,o]=g.useState([]),[d,x]=g.useState(!0),[b,N]=g.useState(!1),[k,v]=g.useState(null),[m,w]=g.useState({name:"",code:"",description:"",address:"",latitude:"",longitude:"",notes:"",is_active:!0});g.useEffect(()=>{h()},[]);const h=async()=>{x(!0);try{const _=await H.get("/api/v1/locations?per_page=1000"),R=_.data?.data||(Array.isArray(_.data)?_.data:[]);o(Array.isArray(R)?R:[])}catch(_){console.error("Error fetching locations:",_),o([])}finally{x(!1)}},C=()=>{v(null),w({name:"",code:"",description:"",address:"",latitude:"",longitude:"",notes:"",is_active:!0}),N(!0)},p=_=>{v(_),w({name:_.name||"",code:_.code||"",description:_.description||"",address:_.address||"",latitude:_.latitude||"",longitude:_.longitude||"",notes:_.notes||"",is_active:_.is_active!==void 0?_.is_active:!0}),N(!0)},O=async _=>{_.preventDefault();try{k?await H.put(`/api/v1/locations/${k.id}`,m):await H.post("/api/v1/locations",m),N(!1),h()}catch(R){console.error("Error saving location:",R),alert(R.response?.data?.message||"Error saving location")}},y=async _=>{if(confirm("Are you sure you want to delete this location?"))try{await H.delete(`/api/v1/locations/${_}`),h()}catch(R){console.error("Error deleting location:",R),alert(R.response?.data?.message||"Error deleting location")}};return d?t.jsx("div",{className:"p-6",children:"Loading..."}):t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Locations"}),t.jsxs("button",{onClick:C,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[t.jsx(Be,{size:20}),"Create Location"]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No locations found"})}):i.map(_=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:_.code}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.name}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:_.address||"-"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:_.is_active?"Active":"Inactive"})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[t.jsx("button",{onClick:()=>p(_),className:"text-blue-600 hover:text-blue-900 mr-4",children:t.jsx(Lt,{size:16})}),t.jsx("button",{onClick:()=>y(_.id),className:"text-red-600 hover:text-red-900",children:t.jsx(_r,{size:16})})]})]},_.id))})]})}),b&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:k?"Edit Location":"Create Location"}),t.jsxs("form",{onSubmit:O,children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),t.jsx("input",{type:"text",required:!0,value:m.name,onChange:_=>w({...m,name:_.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),t.jsx("input",{type:"text",value:m.code,onChange:_=>w({...m,code:_.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if empty"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:m.description,onChange:_=>w({...m,description:_.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),t.jsx("textarea",{value:m.address,onChange:_=>w({...m,address:_.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),t.jsx("input",{type:"number",step:"any",value:m.latitude,onChange:_=>w({...m,latitude:_.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),t.jsx("input",{type:"number",step:"any",value:m.longitude,onChange:_=>w({...m,longitude:_.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:m.notes,onChange:_=>w({...m,notes:_.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:m.is_active,onChange:_=>w({...m,is_active:_.target.checked})}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),t.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:k?"Update":"Create"})]})]})]})})]})}function Jx(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState(!0),[k,v]=g.useState(!1),[m,w]=g.useState(null),[h,C]=g.useState({location_id:"",name:"",code:"",description:"",notes:"",is_active:!0});g.useEffect(()=>{p()},[]);const p=async()=>{N(!0);try{const[u,D]=await Promise.all([H.get("/api/v1/admin-zones?per_page=1000"),H.get("/api/v1/locations?per_page=1000&is_active=1")]),F=u.data?.data||(Array.isArray(u.data)?u.data:[]),U=D.data?.data||(Array.isArray(D.data)?D.data:[]);o(Array.isArray(F)?F:[]),x(Array.isArray(U)?U:[])}catch(u){console.error("Error fetching data:",u),o([]),x([])}finally{N(!1)}},O=()=>{w(null),C({location_id:"",name:"",code:"",description:"",notes:"",is_active:!0}),v(!0)},y=u=>{w(u),C({location_id:u.location_id||"",name:u.name||"",code:u.code||"",description:u.description||"",notes:u.notes||"",is_active:u.is_active!==void 0?u.is_active:!0}),v(!0)},_=async u=>{u.preventDefault();try{m?await H.put(`/api/v1/admin-zones/${m.id}`,h):await H.post("/api/v1/admin-zones",h),v(!1),p()}catch(D){console.error("Error saving zone:",D),alert(D.response?.data?.message||"Error saving zone")}},R=async u=>{if(confirm("Are you sure you want to delete this zone?"))try{await H.delete(`/api/v1/admin-zones/${u}`),p()}catch(D){console.error("Error deleting zone:",D),alert(D.response?.data?.message||"Error deleting zone")}};return b?t.jsx("div",{className:"p-6",children:"Loading..."}):t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Admin Zones"}),t.jsxs("button",{onClick:O,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[t.jsx(Be,{size:20}),"Create Zone"]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No zones found"})}):i.map(u=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.code}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.name}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:u.location?.name||"-"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${u.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.is_active?"Active":"Inactive"})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[t.jsx("button",{onClick:()=>y(u),className:"text-blue-600 hover:text-blue-900 mr-4",children:t.jsx(Lt,{size:16})}),t.jsx("button",{onClick:()=>R(u.id),className:"text-red-600 hover:text-red-900",children:t.jsx(_r,{size:16})})]})]},u.id))})]})}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:m?"Edit Zone":"Create Zone"}),t.jsxs("form",{onSubmit:_,children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),t.jsxs("select",{required:!0,value:h.location_id,onChange:u=>C({...h,location_id:u.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[t.jsx("option",{value:"",children:"Select Location"}),d.map(u=>t.jsx("option",{value:u.id,children:u.name},u.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),t.jsx("input",{type:"text",required:!0,value:h.name,onChange:u=>C({...h,name:u.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),t.jsx("input",{type:"text",value:h.code,onChange:u=>C({...h,code:u.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if empty"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:h.description,onChange:u=>C({...h,description:u.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:h.notes,onChange:u=>C({...h,notes:u.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:h.is_active,onChange:u=>C({...h,is_active:u.target.checked})}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),t.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:m?"Update":"Create"})]})]})]})})]})}function eg(){const[i,o]=g.useState([]),[d,x]=g.useState({}),[b,N]=g.useState(!0),[k,v]=g.useState(!1),[m,w]=g.useState(null),[h,C]=g.useState({name:"",permissions:[]});g.useEffect(()=>{p()},[]);const p=async()=>{try{const[U,W]=await Promise.all([H.get("/api/v1/roles"),H.get("/api/v1/roles/menu-permissions")]);o(U.data?.data||U.data||[]),x(W.data?.data||{})}catch(U){console.error("Error fetching data:",U),alert("Error loading roles: "+(U.response?.data?.message||"Unknown error"))}finally{N(!1)}},O=(U=null)=>{if(U)if(w(U),U.name==="ADMIN"){const W=Object.values(d).flatMap(G=>Object.values(G)).flatMap(G=>G.map(T=>[T.menu_key,T.submenu_key,T.permission_type].filter(Boolean).join(".")));C({name:U.name,permissions:W})}else C({name:U.name,permissions:U.permissions?.map(W=>W.name)||[]});else w(null),C({name:"",permissions:[]});v(!0)},y=()=>{v(!1),w(null),C({name:"",permissions:[]})},_=U=>{h.name!=="ADMIN"&&C(W=>({...W,permissions:W.permissions.includes(U)?W.permissions.filter(G=>G!==U):[...W.permissions,U]}))},R=(U,W,G)=>{const T=[U,W,G].filter(Boolean).join(".");_(T)},u=(U,W,G)=>{const T=[U,W,G].filter(Boolean).join(".");return h.permissions.includes(T)},D=async U=>{U.preventDefault();try{const W={...h};if(W.name==="ADMIN"){const G=Object.values(d).flatMap(T=>Object.values(T)).flatMap(T=>T.map(X=>[X.menu_key,X.submenu_key,X.permission_type].filter(Boolean).join(".")));W.permissions=G}m?await H.put(`/api/v1/roles/${m.id}`,W):await H.post("/api/v1/roles",W),y(),p()}catch(W){alert("Error saving role: "+(W.response?.data?.message||"Unknown error"))}},F=async(U,W)=>{if(confirm(`Are you sure you want to delete the role "${W}"?`))try{await H.delete(`/api/v1/roles/${U}`),p()}catch(G){alert("Error deleting role: "+(G.response?.data?.message||"Unknown error"))}};return b?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Roles & Permissions"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Manage user roles and their access permissions"})]}),t.jsxs("button",{onClick:()=>O(),className:"w-full md:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[t.jsx(Be,{className:"w-5 h-5"}),"Create Role"]})]}),t.jsx("div",{className:"space-y-4",children:i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[t.jsx(qs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"No roles found. Create your first role!"})]}):i.map(U=>t.jsxs("div",{className:"bg-white rounded-lg shadow p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(qs,{className:"w-5 h-5 text-green-600"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:U.name})]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[U.permissions?.length||0," permission(s) assigned"]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>O(U),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(Lt,{className:"w-4 h-4"}),"Edit"]}),U.name!=="ADMIN"&&t.jsxs("button",{onClick:()=>F(U.id,U.name),className:"flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[t.jsx(_r,{className:"w-4 h-4"}),"Delete"]})]})]}),U.permissions&&U.permissions.length>0&&t.jsxs("div",{className:"mt-4 pt-4 border-t",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Permissions:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:U.permissions.map(W=>t.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded",children:W.name},W.id))})]})]},U.id))}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b",children:t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Role":"Create New Role"})}),t.jsxs("form",{onSubmit:D,className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Name *"}),t.jsx("input",{type:"text",value:h.name,onChange:U=>{const W=U.target.value;if(C({...h,name:W}),W==="ADMIN"){const G=Object.values(d).flatMap(T=>Object.values(T)).flatMap(T=>T.map(X=>[X.menu_key,X.submenu_key,X.permission_type].filter(Boolean).join(".")));C(T=>({...T,name:W,permissions:G}))}},required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Manager, Worker, Viewer"}),h.name==="ADMIN"&&t.jsx("p",{className:"text-xs text-blue-600 mt-1",children:" ADMIN role automatically has all permissions and cannot be modified."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permissions"}),h.name==="ADMIN"&&t.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Note:"})," The ADMIN role has all permissions automatically. All permissions are selected and cannot be deselected."]})}),t.jsx("div",{className:"space-y-6 max-h-96 overflow-y-auto",children:Object.entries(d).map(([U,W])=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-3 capitalize",children:U.replace("-"," ")}),Object.entries(W).map(([G,T])=>t.jsxs("div",{className:"ml-4 mb-4 last:mb-0",children:[G!=="main"&&t.jsx("h5",{className:"font-medium text-gray-700 mb-2 capitalize",children:G.replace("-"," ")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(X=>t.jsxs("button",{type:"button",onClick:()=>R(X.menu_key,X.submenu_key,X.permission_type),disabled:h.name==="ADMIN",className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${u(X.menu_key,X.submenu_key,X.permission_type)?"bg-green-100 border-green-500 text-green-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"} ${h.name==="ADMIN"?"opacity-75 cursor-not-allowed":"cursor-pointer"}`,children:[u(X.menu_key,X.submenu_key,X.permission_type)?t.jsx(hx,{className:"w-4 h-4"}):t.jsx(eu,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm capitalize",children:X.permission_type})]},X.id))})]},G))]},U))})]}),t.jsxs("div",{className:"flex gap-4 mt-6",children:[t.jsx("button",{type:"button",onClick:y,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),t.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:m?"Update Role":"Create Role"})]})]})]})})]})}function tg(){const[i,o]=g.useState([]),[d,x]=g.useState([]),[b,N]=g.useState(!0),[k,v]=g.useState(!1),[m,w]=g.useState(null),[h,C]=g.useState({name:"",email:"",password:"",roles:[]});g.useEffect(()=>{p()},[]);const p=async()=>{try{const D=await H.get("/api/v1/users"),F=D.data?.data||D.data||[];o(Array.isArray(F)?F:F.data||[]);try{const U=await H.get("/api/v1/roles");x(U.data?.data||U.data||[])}catch(U){console.error("Error fetching roles:",U)}}catch(D){console.error("Error fetching data:",D),alert("Error loading users: "+(D.response?.data?.message||"Unknown error"))}finally{N(!1)}},O=(D=null)=>{D?(w(D),C({name:D.name||"",email:D.email||"",password:"",roles:D.roles?.map(F=>F.name)||[]})):(w(null),C({name:"",email:"",password:"",roles:[]})),v(!0)},y=()=>{v(!1),w(null),C({name:"",email:"",password:"",roles:[]})},_=D=>{C(F=>({...F,roles:F.roles.includes(D)?F.roles.filter(U=>U!==D):[...F.roles,D]}))},R=async D=>{D.preventDefault();try{const F={...h};if(m&&!F.password&&delete F.password,m)await H.put(`/api/v1/users/${m.id}`,F);else{if(!F.password){alert("Password is required for new users");return}await H.post("/api/v1/users",F)}y(),p()}catch(F){alert("Error saving user: "+(F.response?.data?.message||"Unknown error"))}},u=async(D,F)=>{if(confirm(`Are you sure you want to delete the user "${F}"?`))try{await H.delete(`/api/v1/users/${D}`),p()}catch(U){alert("Error deleting user: "+(U.response?.data?.message||"Unknown error"))}};return b?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"User Management"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system users and their roles"})]}),t.jsxs("button",{onClick:()=>O(),className:"w-full md:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[t.jsx(Be,{className:"w-5 h-5"}),"Create User"]})]}),t.jsx("div",{className:"space-y-4",children:i.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[t.jsx(pi,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"No users found. Create your first user!"})]}):i.map(D=>t.jsxs("div",{className:"bg-white rounded-lg shadow p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(pi,{className:"w-5 h-5 text-green-600"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.name})]}),t.jsx("p",{className:"text-sm text-gray-600",children:D.email})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>O(D),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(Lt,{className:"w-4 h-4"}),"Edit"]}),t.jsxs("button",{onClick:()=>u(D.id,D.name),className:"flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[t.jsx(_r,{className:"w-4 h-4"}),"Delete"]})]})]}),D.roles&&D.roles.length>0&&t.jsxs("div",{className:"mt-4 pt-4 border-t",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Roles:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:D.roles.map(F=>t.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:[t.jsx(qs,{className:"w-3 h-3"}),F.name]},F.id))})]})]},D.id))}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b",children:t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:m?"Edit User":"Create New User"})}),t.jsxs("form",{onSubmit:R,className:"p-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),t.jsx("input",{type:"text",value:h.name,onChange:D=>C({...h,name:D.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),t.jsx("input",{type:"email",value:h.email,onChange:D=>C({...h,email:D.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",m?"(leave blank to keep current)":"*"]}),t.jsx("input",{type:"password",value:h.password,onChange:D=>C({...h,password:D.target.value}),required:!m,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roles"}),t.jsx("div",{className:"space-y-2",children:d.map(D=>t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:h.roles.includes(D.name),onChange:()=>_(D.name),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),t.jsx(qs,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-700",children:D.name})]},D.id))})]})]}),t.jsxs("div",{className:"flex gap-4 mt-6",children:[t.jsx("button",{type:"button",onClick:y,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),t.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:m?"Update User":"Create User"})]})]})]})})]})}function rg({children:i}){const{user:o,logout:d}=bi(),x=Jr(),b=aa(),[N,k]=g.useState(!1),[v,m]=g.useState([]),w=()=>{const G=x.pathname;return{gari:G.startsWith("/gari"),bellPepper:G.startsWith("/bell-pepper")||G.startsWith("/greenhouses")||G.startsWith("/boreholes"),tomatoes:G.startsWith("/tomatoes"),habaneros:G.startsWith("/habaneros"),livestock:!1}},[h,C]=g.useState(w());g.useEffect(()=>{const G=x.pathname;C(T=>({...T,gari:G.startsWith("/gari")?!0:T.gari,bellPepper:G.startsWith("/bell-pepper")||G.startsWith("/greenhouses")||G.startsWith("/boreholes")?!0:T.bellPepper,tomatoes:G.startsWith("/tomatoes")?!0:T.tomatoes,habaneros:G.startsWith("/habaneros")?!0:T.habaneros}))},[x.pathname]),g.useEffect(()=>{if(o){const G=o.permissions?.map(T=>T.name)||o.roles?.flatMap(T=>T.permissions?.map(X=>X.name)||[])||[];m(G)}},[o]);const p=()=>{d(),b("/login")},O=G=>{C(T=>({...T,[G]:!T[G]}))},y=[{name:"General",items:[{name:"Dashboard",href:"/",icon:_x},{name:"Farms",href:"/farms",icon:wr},{name:"Harvest Lots",href:"/harvest-lots",icon:Qe},{name:"Scale Devices",href:"/scale-devices",icon:sa},{name:"Label Templates",href:"/label-templates",icon:mi},{name:"Staff & Labor",href:"/staff-labor",icon:Us}]},{name:"Gari",key:"gari",icon:at,items:[{name:"Production Batches",href:"/gari-production-batches",icon:at},{name:"Inventory",href:"/gari-inventory",icon:Qe},{name:"Sales",href:"/gari-sales",icon:Yr},{name:"KPIs",href:"/gari-kpis",icon:ft},{name:"Waste & Losses",href:"/gari-waste-losses",icon:ft},{name:"Packaging Materials",href:"/packaging-materials",icon:Qe}]},{name:"Bell Pepper",key:"bellPepper",icon:ii,items:[{name:"Greenhouses",href:"/greenhouses",icon:at},{name:"Boreholes",href:"/boreholes",icon:at},{name:"Production",href:"/bell-pepper-production",icon:at},{name:"Harvests",href:"/bell-pepper-harvests",icon:Qe},{name:"Inventory",href:"/bell-pepper-inventory",icon:Qe},{name:"Sales",href:"/bell-pepper-sales",icon:Yr},{name:"KPIs",href:"/bell-pepper-kpis",icon:ft}]},{name:"Tomatoes",key:"tomatoes",icon:ii,items:[{name:"Production",href:"/tomatoes-production",icon:at},{name:"Inventory",href:"/tomatoes-inventory",icon:Qe},{name:"Sales",href:"/tomatoes-sales",icon:Yr},{name:"KPIs",href:"/tomatoes-kpis",icon:ft}]},{name:"Habaneros",key:"habaneros",icon:ii,items:[{name:"Production",href:"/habaneros-production",icon:at},{name:"Inventory",href:"/habaneros-inventory",icon:Qe},{name:"Sales",href:"/habaneros-sales",icon:Yr},{name:"KPIs",href:"/habaneros-kpis",icon:ft}]},{name:"Reports",items:[{name:"Consolidated Sales",href:"/reports/consolidated-sales",icon:ir},{name:"Consolidated Expenses",href:"/reports/consolidated-expenses",icon:Ni},{name:"Staff Allocation",href:"/reports/staff-allocation",icon:Us}]},{name:"Admin Settings",items:[{name:"Locations",href:"/admin/locations",icon:wi},{name:"Admin Zones",href:"/admin/admin-zones",icon:wx},{name:"Roles",href:"/admin/roles",icon:qs},{name:"Users",href:"/admin/users",icon:Us}]}],_=(G,T,X="view")=>{if(o?.roles?.some(oe=>oe.name==="ADMIN"))return!0;const z=[G,T,X].filter(Boolean).join(".");return v.includes(z)},R=(G,T)=>_(G,T,"view"),u=G=>G==="/"?x.pathname==="/":x.pathname.startsWith(G),D=G=>G.items.some(T=>u(T.href)),F=G=>({"/":{menu:"general",submenu:null},"/farms":{menu:"general",submenu:"farms"},"/harvest-lots":{menu:"general",submenu:"harvest-lots"},"/scale-devices":{menu:"general",submenu:"scale-devices"},"/label-templates":{menu:"general",submenu:"label-templates"},"/staff-labor":{menu:"general",submenu:"staff-labor"},"/gari-production-batches":{menu:"gari",submenu:"production-batches"},"/gari-inventory":{menu:"gari",submenu:"inventory"},"/gari-sales":{menu:"gari",submenu:"sales"},"/gari-kpis":{menu:"gari",submenu:"kpis"},"/gari-waste-losses":{menu:"gari",submenu:"waste-losses"},"/packaging-materials":{menu:"gari",submenu:"packaging-materials"},"/greenhouses":{menu:"bell-pepper",submenu:"greenhouses"},"/boreholes":{menu:"bell-pepper",submenu:"boreholes"},"/bell-pepper-production":{menu:"bell-pepper",submenu:"production"},"/bell-pepper-harvests":{menu:"bell-pepper",submenu:"harvests"},"/bell-pepper-inventory":{menu:"bell-pepper",submenu:"inventory"},"/bell-pepper-sales":{menu:"bell-pepper",submenu:"sales"},"/bell-pepper-kpis":{menu:"bell-pepper",submenu:"kpis"},"/tomatoes-production":{menu:"tomatoes",submenu:"production"},"/tomatoes-inventory":{menu:"tomatoes",submenu:"inventory"},"/tomatoes-sales":{menu:"tomatoes",submenu:"sales"},"/tomatoes-kpis":{menu:"tomatoes",submenu:"kpis"},"/habaneros-production":{menu:"habaneros",submenu:"production"},"/habaneros-inventory":{menu:"habaneros",submenu:"inventory"},"/habaneros-sales":{menu:"habaneros",submenu:"sales"},"/habaneros-kpis":{menu:"habaneros",submenu:"kpis"},"/reports/consolidated-sales":{menu:"reports",submenu:"consolidated-sales"},"/reports/consolidated-expenses":{menu:"reports",submenu:"consolidated-expenses"},"/reports/staff-allocation":{menu:"reports",submenu:"staff-allocation"},"/admin/locations":{menu:"admin",submenu:"locations"},"/admin/admin-zones":{menu:"admin",submenu:"admin-zones"},"/admin/roles":{menu:"admin",submenu:"roles"},"/admin/users":{menu:"admin",submenu:"users"}})[G]||{menu:null,submenu:null},U=G=>{const{menu:T,submenu:X}=F(G.href);if(G.href!=="/"&&!R(T,X))return null;const z=u(G.href);return t.jsxs(Ze,{to:G.href,onClick:()=>k(!1),className:`flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors ml-4 ${z?"bg-green-50 text-green-700":"text-gray-700 hover:bg-gray-50"}`,children:[t.jsx(G.icon,{className:"mr-3 h-4 w-4"}),G.name]},G.name)},W=G=>{if(G.key){const T=h[G.key],X=D(G);return t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>O(G.key),className:`w-full flex items-center justify-between px-4 py-2.5 text-sm font-semibold rounded-lg transition-colors ${X?"bg-green-50 text-green-700":"text-gray-700 hover:bg-gray-50"}`,children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(G.icon,{className:"mr-3 h-5 w-5"}),G.name]}),T?t.jsx(fx,{className:"h-4 w-4"}):t.jsx(yx,{className:"h-4 w-4"})]}),T&&t.jsx("div",{className:"mt-1 space-y-1",children:G.items.map(U)})]},G.name)}else return t.jsxs("div",{children:[t.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:G.name}),t.jsx("div",{className:"mt-1 space-y-1",children:G.items.map(U)})]},G.name)};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:t.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[t.jsxs("div",{className:"flex items-center flex-shrink-0 px-4 py-6 border-b border-gray-200",children:[t.jsx(wr,{className:"h-8 w-8 text-green-600"}),t.jsx("h1",{className:"ml-2 text-xl font-bold text-gray-900",children:"FMS"})]}),t.jsx("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:t.jsx("nav",{className:"flex-1 px-2 py-4 space-y-2 overflow-y-auto",children:y.map(W)})}),t.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:t.jsx("span",{className:"text-green-600 font-medium",children:o?.email?.charAt(0).toUpperCase()||"U"})})}),t.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:o?.name||o?.email||"User"}),t.jsx("p",{className:"text-xs text-gray-500 truncate",children:o?.email})]}),t.jsx("button",{onClick:p,className:"ml-2 p-2 text-gray-400 hover:text-gray-600",title:"Logout",children:t.jsx(zd,{className:"h-5 w-5"})})]})})]})}),t.jsxs("div",{className:"md:hidden",children:[t.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(wr,{className:"h-6 w-6 text-green-600"}),t.jsx("h1",{className:"ml-2 text-lg font-bold text-gray-900",children:"FMS"})]}),t.jsx("button",{onClick:()=>k(!N),className:"p-2 text-gray-400 hover:text-gray-600",children:N?t.jsx(eu,{className:"h-6 w-6"}):t.jsx(kx,{className:"h-6 w-6"})})]}),N&&t.jsx("div",{className:"bg-white border-b border-gray-200 max-h-[calc(100vh-64px)] overflow-y-auto",children:t.jsxs("nav",{className:"px-2 py-2 space-y-2",children:[y.map(W),t.jsxs("button",{onClick:p,className:"w-full flex items-center px-4 py-3 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg",children:[t.jsx(zd,{className:"mr-3 h-5 w-5"}),"Logout"]})]})})]}),t.jsx("div",{className:"md:pl-64",children:t.jsx("main",{className:"py-6",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i})})})]})}function sg({children:i}){const{user:o,loading:d}=bi();return d?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):o?i:t.jsx(Jp,{to:"/login"})}function ng(){return t.jsx(ux,{children:t.jsxs(Td,{children:[t.jsx(de,{path:"/login",element:t.jsx(Ex,{})}),t.jsx(de,{path:"/*",element:t.jsx(sg,{children:t.jsx(rg,{children:t.jsxs(Td,{children:[t.jsx(de,{path:"/",element:t.jsx(Px,{})}),t.jsx(de,{path:"/farms",element:t.jsx(Dx,{})}),t.jsx(de,{path:"/farms/:id",element:t.jsx(Lx,{})}),t.jsx(de,{path:"/harvest-lots",element:t.jsx(Rx,{})}),t.jsx(de,{path:"/harvest-lots/:id",element:t.jsx(Ax,{})}),t.jsx(de,{path:"/scale-devices",element:t.jsx(Tx,{})}),t.jsx(de,{path:"/label-templates",element:t.jsx(Mx,{})}),t.jsx(de,{path:"/staff-labor",element:t.jsx(Ix,{})}),t.jsx(de,{path:"/gari-production-batches",element:t.jsx(Ox,{})}),t.jsx(de,{path:"/gari-production-batches/:id",element:t.jsx(Fx,{})}),t.jsx(de,{path:"/gari-inventory",element:t.jsx(zx,{})}),t.jsx(de,{path:"/gari-sales",element:t.jsx(Ux,{})}),t.jsx(de,{path:"/gari-kpis",element:t.jsx(Bx,{})}),t.jsx(de,{path:"/packaging-materials",element:t.jsx(Hx,{})}),t.jsx(de,{path:"/gari-waste-losses",element:t.jsx(qx,{})}),t.jsx(de,{path:"/greenhouses",element:t.jsx(Vx,{})}),t.jsx(de,{path:"/boreholes",element:t.jsx(Kx,{})}),t.jsx(de,{path:"/bell-pepper-production",element:t.jsx(Qx,{})}),t.jsx(de,{path:"/bell-pepper-cycles/:id",element:t.jsx(Yx,{})}),t.jsx(de,{path:"/bell-pepper-harvests",element:t.jsx(Xx,{})}),t.jsx(de,{path:"/bell-pepper-inventory",element:t.jsx(kt,{cropName:"Bell Pepper",basePath:"bell-pepper"})}),t.jsx(de,{path:"/bell-pepper-sales",element:t.jsx(kt,{cropName:"Bell Pepper",basePath:"bell-pepper"})}),t.jsx(de,{path:"/bell-pepper-kpis",element:t.jsx(kt,{cropName:"Bell Pepper",basePath:"bell-pepper"})}),t.jsx(de,{path:"/tomatoes-production",element:t.jsx(kt,{cropName:"Tomatoes",basePath:"tomatoes"})}),t.jsx(de,{path:"/tomatoes-inventory",element:t.jsx(kt,{cropName:"Tomatoes",basePath:"tomatoes"})}),t.jsx(de,{path:"/tomatoes-sales",element:t.jsx(kt,{cropName:"Tomatoes",basePath:"tomatoes"})}),t.jsx(de,{path:"/tomatoes-kpis",element:t.jsx(kt,{cropName:"Tomatoes",basePath:"tomatoes"})}),t.jsx(de,{path:"/habaneros-production",element:t.jsx(kt,{cropName:"Habaneros",basePath:"habaneros"})}),t.jsx(de,{path:"/habaneros-inventory",element:t.jsx(kt,{cropName:"Habaneros",basePath:"habaneros"})}),t.jsx(de,{path:"/habaneros-sales",element:t.jsx(kt,{cropName:"Habaneros",basePath:"habaneros"})}),t.jsx(de,{path:"/habaneros-kpis",element:t.jsx(kt,{cropName:"Habaneros",basePath:"habaneros"})}),t.jsx(de,{path:"/reports/consolidated-sales",element:t.jsx($x,{})}),t.jsx(de,{path:"/reports/consolidated-expenses",element:t.jsx(Wx,{})}),t.jsx(de,{path:"/reports/staff-allocation",element:t.jsx(Gx,{})}),t.jsx(de,{path:"/admin/locations",element:t.jsx(Zx,{})}),t.jsx(de,{path:"/admin/admin-zones",element:t.jsx(Jx,{})}),t.jsx(de,{path:"/admin/roles",element:t.jsx(eg,{})}),t.jsx(de,{path:"/admin/users",element:t.jsx(tg,{})})]})})})})]})})}class ag extends gi.Component{constructor(o){super(o),this.state={hasError:!1,error:null}}static getDerivedStateFromError(o){return{hasError:!0,error:o}}componentDidCatch(o,d){console.error("React Error:",o,d)}render(){return this.state.hasError?t.jsxs("div",{style:{padding:"20px",fontFamily:"sans-serif"},children:[t.jsx("h1",{children:"Something went wrong"}),t.jsxs("p",{children:["Error: ",this.state.error?.message||"Unknown error"]}),t.jsx("pre",{style:{background:"#f5f5f5",padding:"10px",overflow:"auto"},children:this.state.error?.stack}),t.jsx("button",{onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}const oi=document.getElementById("app");if(!oi)console.error('App element not found! Make sure <div id="app"></div> exists in the HTML.'),document.body.innerHTML='<div style="padding: 20px;"><h1>Error: App element not found</h1><p>Make sure the HTML includes: &lt;div id="app"&gt;&lt;/div&gt;</p></div>';else try{op.createRoot(oi).render(t.jsx(gi.StrictMode,{children:t.jsx(ag,{children:t.jsx(ix,{children:t.jsx(ng,{})})})}))}catch(i){console.error("Failed to render React app:",i),oi.innerHTML=`
            <div style="padding: 20px; font-family: sans-serif;">
                <h1>Failed to Load Application</h1>
                <p>Error: ${i.message}</p>
                <pre style="background: #f5f5f5; padding: 10px; overflow: auto;">${i.stack}</pre>
                <button onclick="window.location.reload()">Reload Page</button>
            </div>
        `}
