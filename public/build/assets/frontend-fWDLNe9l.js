import{a as Zm}from"./index-B9ygI19o.js";/* empty css            */function Xm(i,c){for(var u=0;u<c.length;u++){const g=c[u];if(typeof g!="string"&&!Array.isArray(g)){for(const N in g)if(N!=="default"&&!(N in i)){const y=Object.getOwnPropertyDescriptor(g,N);y&&Object.defineProperty(i,N,y.get?y:{enumerable:!0,get:()=>g[N]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}function Ud(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ei={exports:{}},Us={},ti={exports:{}},fe={};var vd;function Jm(){if(vd)return fe;vd=1;var i=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.iterator;function _(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,C={};function x(R,f,G){this.props=R,this.context=f,this.refs=C,this.updater=G||M}x.prototype.isReactComponent={},x.prototype.setState=function(R,f){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,f,"setState")},x.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function o(){}o.prototype=x.prototype;function k(R,f,G){this.props=R,this.context=f,this.refs=C,this.updater=G||M}var A=k.prototype=new o;A.constructor=k,D(A,x.prototype),A.isPureReactComponent=!0;var H=Array.isArray,I=Object.prototype.hasOwnProperty,T={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function te(R,f,G){var ee,de={},me=null,ve=null;if(f!=null)for(ee in f.ref!==void 0&&(ve=f.ref),f.key!==void 0&&(me=""+f.key),f)I.call(f,ee)&&!F.hasOwnProperty(ee)&&(de[ee]=f[ee]);var ye=arguments.length-2;if(ye===1)de.children=G;else if(1<ye){for(var Ce=Array(ye),lt=0;lt<ye;lt++)Ce[lt]=arguments[lt+2];de.children=Ce}if(R&&R.defaultProps)for(ee in ye=R.defaultProps,ye)de[ee]===void 0&&(de[ee]=ye[ee]);return{$$typeof:i,type:R,key:me,ref:ve,props:de,_owner:T.current}}function q(R,f){return{$$typeof:i,type:R.type,key:f,ref:R.ref,props:R.props,_owner:R._owner}}function ce(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function Me(R){var f={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(G){return f[G]})}var _e=/\/+/g;function he(R,f){return typeof R=="object"&&R!==null&&R.key!=null?Me(""+R.key):f.toString(36)}function ge(R,f,G,ee,de){var me=typeof R;(me==="undefined"||me==="boolean")&&(R=null);var ve=!1;if(R===null)ve=!0;else switch(me){case"string":case"number":ve=!0;break;case"object":switch(R.$$typeof){case i:case c:ve=!0}}if(ve)return ve=R,de=de(ve),R=ee===""?"."+he(ve,0):ee,H(de)?(G="",R!=null&&(G=R.replace(_e,"$&/")+"/"),ge(de,f,G,"",function(lt){return lt})):de!=null&&(ce(de)&&(de=q(de,G+(!de.key||ve&&ve.key===de.key?"":(""+de.key).replace(_e,"$&/")+"/")+R)),f.push(de)),1;if(ve=0,ee=ee===""?".":ee+":",H(R))for(var ye=0;ye<R.length;ye++){me=R[ye];var Ce=ee+he(me,ye);ve+=ge(me,f,G,Ce,de)}else if(Ce=_(R),typeof Ce=="function")for(R=Ce.call(R),ye=0;!(me=R.next()).done;)me=me.value,Ce=ee+he(me,ye++),ve+=ge(me,f,G,Ce,de);else if(me==="object")throw f=String(R),Error("Objects are not valid as a React child (found: "+(f==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":f)+"). If you meant to render a collection of children, use an array instead.");return ve}function Y(R,f,G){if(R==null)return R;var ee=[],de=0;return ge(R,ee,"","",function(me){return f.call(G,me,de++)}),ee}function X(R){if(R._status===-1){var f=R._result;f=f(),f.then(function(G){(R._status===0||R._status===-1)&&(R._status=1,R._result=G)},function(G){(R._status===0||R._status===-1)&&(R._status=2,R._result=G)}),R._status===-1&&(R._status=0,R._result=f)}if(R._status===1)return R._result.default;throw R._result}var J={current:null},S={transition:null},$={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:S,ReactCurrentOwner:T};function K(){throw Error("act(...) is not supported in production builds of React.")}return fe.Children={map:Y,forEach:function(R,f,G){Y(R,function(){f.apply(this,arguments)},G)},count:function(R){var f=0;return Y(R,function(){f++}),f},toArray:function(R){return Y(R,function(f){return f})||[]},only:function(R){if(!ce(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},fe.Component=x,fe.Fragment=u,fe.Profiler=N,fe.PureComponent=k,fe.StrictMode=g,fe.Suspense=m,fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,fe.act=K,fe.cloneElement=function(R,f,G){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ee=D({},R.props),de=R.key,me=R.ref,ve=R._owner;if(f!=null){if(f.ref!==void 0&&(me=f.ref,ve=T.current),f.key!==void 0&&(de=""+f.key),R.type&&R.type.defaultProps)var ye=R.type.defaultProps;for(Ce in f)I.call(f,Ce)&&!F.hasOwnProperty(Ce)&&(ee[Ce]=f[Ce]===void 0&&ye!==void 0?ye[Ce]:f[Ce])}var Ce=arguments.length-2;if(Ce===1)ee.children=G;else if(1<Ce){ye=Array(Ce);for(var lt=0;lt<Ce;lt++)ye[lt]=arguments[lt+2];ee.children=ye}return{$$typeof:i,type:R.type,key:de,ref:me,props:ee,_owner:ve}},fe.createContext=function(R){return R={$$typeof:w,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:y,_context:R},R.Consumer=R},fe.createElement=te,fe.createFactory=function(R){var f=te.bind(null,R);return f.type=R,f},fe.createRef=function(){return{current:null}},fe.forwardRef=function(R){return{$$typeof:v,render:R}},fe.isValidElement=ce,fe.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:X}},fe.memo=function(R,f){return{$$typeof:E,type:R,compare:f===void 0?null:f}},fe.startTransition=function(R){var f=S.transition;S.transition={};try{R()}finally{S.transition=f}},fe.unstable_act=K,fe.useCallback=function(R,f){return J.current.useCallback(R,f)},fe.useContext=function(R){return J.current.useContext(R)},fe.useDebugValue=function(){},fe.useDeferredValue=function(R){return J.current.useDeferredValue(R)},fe.useEffect=function(R,f){return J.current.useEffect(R,f)},fe.useId=function(){return J.current.useId()},fe.useImperativeHandle=function(R,f,G){return J.current.useImperativeHandle(R,f,G)},fe.useInsertionEffect=function(R,f){return J.current.useInsertionEffect(R,f)},fe.useLayoutEffect=function(R,f){return J.current.useLayoutEffect(R,f)},fe.useMemo=function(R,f){return J.current.useMemo(R,f)},fe.useReducer=function(R,f,G){return J.current.useReducer(R,f,G)},fe.useRef=function(R){return J.current.useRef(R)},fe.useState=function(R){return J.current.useState(R)},fe.useSyncExternalStore=function(R,f,G){return J.current.useSyncExternalStore(R,f,G)},fe.useTransition=function(){return J.current.useTransition()},fe.version="18.3.1",fe}var jd;function xi(){return jd||(jd=1,ti.exports=Jm()),ti.exports}var bd;function ep(){if(bd)return Us;bd=1;var i=xi(),c=Symbol.for("react.element"),u=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,N=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function w(v,m,E){var p,b={},_=null,M=null;E!==void 0&&(_=""+E),m.key!==void 0&&(_=""+m.key),m.ref!==void 0&&(M=m.ref);for(p in m)g.call(m,p)&&!y.hasOwnProperty(p)&&(b[p]=m[p]);if(v&&v.defaultProps)for(p in m=v.defaultProps,m)b[p]===void 0&&(b[p]=m[p]);return{$$typeof:c,type:v,key:_,ref:M,props:b,_owner:N.current}}return Us.Fragment=u,Us.jsx=w,Us.jsxs=w,Us}var Nd;function tp(){return Nd||(Nd=1,ei.exports=ep()),ei.exports}var e=tp(),h=xi();const hi=Ud(h),rp=Xm({__proto__:null,default:hi},[h]);var en={},ri={exports:{}},st={},si={exports:{}},ai={};var wd;function sp(){return wd||(wd=1,(function(i){function c(S,$){var K=S.length;S.push($);e:for(;0<K;){var R=K-1>>>1,f=S[R];if(0<N(f,$))S[R]=$,S[K]=f,K=R;else break e}}function u(S){return S.length===0?null:S[0]}function g(S){if(S.length===0)return null;var $=S[0],K=S.pop();if(K!==$){S[0]=K;e:for(var R=0,f=S.length,G=f>>>1;R<G;){var ee=2*(R+1)-1,de=S[ee],me=ee+1,ve=S[me];if(0>N(de,K))me<f&&0>N(ve,de)?(S[R]=ve,S[me]=K,R=me):(S[R]=de,S[ee]=K,R=ee);else if(me<f&&0>N(ve,K))S[R]=ve,S[me]=K,R=me;else break e}}return $}function N(S,$){var K=S.sortIndex-$.sortIndex;return K!==0?K:S.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var y=performance;i.unstable_now=function(){return y.now()}}else{var w=Date,v=w.now();i.unstable_now=function(){return w.now()-v}}var m=[],E=[],p=1,b=null,_=3,M=!1,D=!1,C=!1,x=typeof setTimeout=="function"?setTimeout:null,o=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(S){for(var $=u(E);$!==null;){if($.callback===null)g(E);else if($.startTime<=S)g(E),$.sortIndex=$.expirationTime,c(m,$);else break;$=u(E)}}function H(S){if(C=!1,A(S),!D)if(u(m)!==null)D=!0,X(I);else{var $=u(E);$!==null&&J(H,$.startTime-S)}}function I(S,$){D=!1,C&&(C=!1,o(te),te=-1),M=!0;var K=_;try{for(A($),b=u(m);b!==null&&(!(b.expirationTime>$)||S&&!Me());){var R=b.callback;if(typeof R=="function"){b.callback=null,_=b.priorityLevel;var f=R(b.expirationTime<=$);$=i.unstable_now(),typeof f=="function"?b.callback=f:b===u(m)&&g(m),A($)}else g(m);b=u(m)}if(b!==null)var G=!0;else{var ee=u(E);ee!==null&&J(H,ee.startTime-$),G=!1}return G}finally{b=null,_=K,M=!1}}var T=!1,F=null,te=-1,q=5,ce=-1;function Me(){return!(i.unstable_now()-ce<q)}function _e(){if(F!==null){var S=i.unstable_now();ce=S;var $=!0;try{$=F(!0,S)}finally{$?he():(T=!1,F=null)}}else T=!1}var he;if(typeof k=="function")he=function(){k(_e)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Y=ge.port2;ge.port1.onmessage=_e,he=function(){Y.postMessage(null)}}else he=function(){x(_e,0)};function X(S){F=S,T||(T=!0,he())}function J(S,$){te=x(function(){S(i.unstable_now())},$)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(S){S.callback=null},i.unstable_continueExecution=function(){D||M||(D=!0,X(I))},i.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<S?Math.floor(1e3/S):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return u(m)},i.unstable_next=function(S){switch(_){case 1:case 2:case 3:var $=3;break;default:$=_}var K=_;_=$;try{return S()}finally{_=K}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(S,$){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var K=_;_=S;try{return $()}finally{_=K}},i.unstable_scheduleCallback=function(S,$,K){var R=i.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?R+K:R):K=R,S){case 1:var f=-1;break;case 2:f=250;break;case 5:f=1073741823;break;case 4:f=1e4;break;default:f=5e3}return f=K+f,S={id:p++,callback:$,priorityLevel:S,startTime:K,expirationTime:f,sortIndex:-1},K>R?(S.sortIndex=K,c(E,S),u(m)===null&&S===u(E)&&(C?(o(te),te=-1):C=!0,J(H,K-R))):(S.sortIndex=f,c(m,S),D||M||(D=!0,X(I))),S},i.unstable_shouldYield=Me,i.unstable_wrapCallback=function(S){var $=_;return function(){var K=_;_=$;try{return S.apply(this,arguments)}finally{_=K}}}})(ai)),ai}var _d;function ap(){return _d||(_d=1,si.exports=sp()),si.exports}var kd;function np(){if(kd)return st;kd=1;var i=xi(),c=ap();function u(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g=new Set,N={};function y(t,r){w(t,r),w(t+"Capture",r)}function w(t,r){for(N[t]=r,t=0;t<r.length;t++)g.add(r[t])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},b={};function _(t){return m.call(b,t)?!0:m.call(p,t)?!1:E.test(t)?b[t]=!0:(p[t]=!0,!1)}function M(t,r,s,a){if(s!==null&&s.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function D(t,r,s,a){if(r===null||typeof r>"u"||M(t,r,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function C(t,r,s,a,n,l,d){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=t,this.type=r,this.sanitizeURL=l,this.removeEmptyString=d}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){x[t]=new C(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];x[r]=new C(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){x[t]=new C(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){x[t]=new C(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){x[t]=new C(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){x[t]=new C(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){x[t]=new C(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){x[t]=new C(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){x[t]=new C(t,5,!1,t.toLowerCase(),null,!1,!1)});var o=/[\-:]([a-z])/g;function k(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(o,k);x[r]=new C(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(o,k);x[r]=new C(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(o,k);x[r]=new C(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){x[t]=new C(t,1,!1,t.toLowerCase(),null,!1,!1)}),x.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){x[t]=new C(t,1,!1,t.toLowerCase(),null,!0,!0)});function A(t,r,s,a){var n=x.hasOwnProperty(r)?x[r]:null;(n!==null?n.type!==0:a||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(D(r,s,n,a)&&(s=null),a||n===null?_(r)&&(s===null?t.removeAttribute(r):t.setAttribute(r,""+s)):n.mustUseProperty?t[n.propertyName]=s===null?n.type===3?!1:"":s:(r=n.attributeName,a=n.attributeNamespace,s===null?t.removeAttribute(r):(n=n.type,s=n===3||n===4&&s===!0?"":""+s,a?t.setAttributeNS(a,r,s):t.setAttribute(r,s))))}var H=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),T=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),Me=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),S=Symbol.iterator;function $(t){return t===null||typeof t!="object"?null:(t=S&&t[S]||t["@@iterator"],typeof t=="function"?t:null)}var K=Object.assign,R;function f(t){if(R===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);R=r&&r[1]||""}return`
`+R+t}var G=!1;function ee(t,r){if(!t||G)return"";G=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var a=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){a=U}t.call(r.prototype)}else{try{throw Error()}catch(U){a=U}t()}}catch(U){if(U&&a&&typeof U.stack=="string"){for(var n=U.stack.split(`
`),l=a.stack.split(`
`),d=n.length-1,j=l.length-1;1<=d&&0<=j&&n[d]!==l[j];)j--;for(;1<=d&&0<=j;d--,j--)if(n[d]!==l[j]){if(d!==1||j!==1)do if(d--,j--,0>j||n[d]!==l[j]){var P=`
`+n[d].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=d&&0<=j);break}}}finally{G=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?f(t):""}function de(t){switch(t.tag){case 5:return f(t.type);case 16:return f("Lazy");case 13:return f("Suspense");case 19:return f("SuspenseList");case 0:case 2:case 15:return t=ee(t.type,!1),t;case 11:return t=ee(t.type.render,!1),t;case 1:return t=ee(t.type,!0),t;default:return""}}function me(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case T:return"Portal";case q:return"Profiler";case te:return"StrictMode";case he:return"Suspense";case ge:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Me:return(t.displayName||"Context")+".Consumer";case ce:return(t._context.displayName||"Context")+".Provider";case _e:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Y:return r=t.displayName||null,r!==null?r:me(t.type)||"Memo";case X:r=t._payload,t=t._init;try{return me(t(r))}catch{}}return null}function ve(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(r);case 8:return r===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function ye(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ce(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function lt(t){var r=Ce(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),a=""+t[r];if(!t.hasOwnProperty(r)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,l=s.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return n.call(this)},set:function(d){a=""+d,l.call(this,d)}}),Object.defineProperty(t,r,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function $s(t){t._valueTracker||(t._valueTracker=lt(t))}function _i(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var s=r.getValue(),a="";return t&&(a=Ce(t)?t.checked?"true":"false":t.value),t=a,t!==s?(r.setValue(t),!0):!1}function Vs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ln(t,r){var s=r.checked;return K({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function ki(t,r){var s=r.defaultValue==null?"":r.defaultValue,a=r.checked!=null?r.checked:r.defaultChecked;s=ye(r.value!=null?r.value:s),t._wrapperState={initialChecked:a,initialValue:s,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Si(t,r){r=r.checked,r!=null&&A(t,"checked",r,!1)}function on(t,r){Si(t,r);var s=ye(r.value),a=r.type;if(s!=null)a==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?cn(t,r.type,s):r.hasOwnProperty("defaultValue")&&cn(t,r.type,ye(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Ci(t,r,s){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var a=r.type;if(!(a!=="submit"&&a!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,s||r===t.value||(t.value=r),t.defaultValue=r}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function cn(t,r,s){(r!=="number"||Vs(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var ts=Array.isArray;function _r(t,r,s,a){if(t=t.options,r){r={};for(var n=0;n<s.length;n++)r["$"+s[n]]=!0;for(s=0;s<t.length;s++)n=r.hasOwnProperty("$"+t[s].value),t[s].selected!==n&&(t[s].selected=n),n&&a&&(t[s].defaultSelected=!0)}else{for(s=""+ye(s),r=null,n=0;n<t.length;n++){if(t[n].value===s){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}r!==null||t[n].disabled||(r=t[n])}r!==null&&(r.selected=!0)}}function dn(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(u(91));return K({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ei(t,r){var s=r.value;if(s==null){if(s=r.children,r=r.defaultValue,s!=null){if(r!=null)throw Error(u(92));if(ts(s)){if(1<s.length)throw Error(u(93));s=s[0]}r=s}r==null&&(r=""),s=r}t._wrapperState={initialValue:ye(s)}}function Di(t,r){var s=ye(r.value),a=ye(r.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),r.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),a!=null&&(t.defaultValue=""+a)}function Ai(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function Pi(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function un(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?Pi(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ws,Ri=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,s,a,n){MSApp.execUnsafeLocalFunction(function(){return t(r,s,a,n)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Ws=Ws||document.createElement("div"),Ws.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ws.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function rs(t,r){if(r){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=r;return}}t.textContent=r}var ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tu=["Webkit","ms","Moz","O"];Object.keys(ss).forEach(function(t){tu.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ss[r]=ss[t]})});function Ti(t,r,s){return r==null||typeof r=="boolean"||r===""?"":s||typeof r!="number"||r===0||ss.hasOwnProperty(t)&&ss[t]?(""+r).trim():r+"px"}function Li(t,r){t=t.style;for(var s in r)if(r.hasOwnProperty(s)){var a=s.indexOf("--")===0,n=Ti(s,r[s],a);s==="float"&&(s="cssFloat"),a?t.setProperty(s,n):t[s]=n}}var ru=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mn(t,r){if(r){if(ru[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(u(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(u(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(u(61))}if(r.style!=null&&typeof r.style!="object")throw Error(u(62))}}function pn(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xn=null;function hn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gn=null,kr=null,Sr=null;function Ii(t){if(t=ks(t)){if(typeof gn!="function")throw Error(u(280));var r=t.stateNode;r&&(r=ha(r),gn(t.stateNode,t.type,r))}}function Mi(t){kr?Sr?Sr.push(t):Sr=[t]:kr=t}function Fi(){if(kr){var t=kr,r=Sr;if(Sr=kr=null,Ii(t),r)for(t=0;t<r.length;t++)Ii(r[t])}}function Oi(t,r){return t(r)}function zi(){}var fn=!1;function Ui(t,r,s){if(fn)return t(r,s);fn=!0;try{return Oi(t,r,s)}finally{fn=!1,(kr!==null||Sr!==null)&&(zi(),Fi())}}function as(t,r){var s=t.stateNode;if(s===null)return null;var a=ha(s);if(a===null)return null;s=a[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(u(231,r,typeof s));return s}var yn=!1;if(v)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){yn=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{yn=!1}function su(t,r,s,a,n,l,d,j,P){var U=Array.prototype.slice.call(arguments,3);try{r.apply(s,U)}catch(W){this.onError(W)}}var ls=!1,Gs=null,Ks=!1,vn=null,au={onError:function(t){ls=!0,Gs=t}};function nu(t,r,s,a,n,l,d,j,P){ls=!1,Gs=null,su.apply(au,arguments)}function lu(t,r,s,a,n,l,d,j,P){if(nu.apply(this,arguments),ls){if(ls){var U=Gs;ls=!1,Gs=null}else throw Error(u(198));Ks||(Ks=!0,vn=U)}}function ur(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function Bi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Hi(t){if(ur(t)!==t)throw Error(u(188))}function iu(t){var r=t.alternate;if(!r){if(r=ur(t),r===null)throw Error(u(188));return r!==t?null:t}for(var s=t,a=r;;){var n=s.return;if(n===null)break;var l=n.alternate;if(l===null){if(a=n.return,a!==null){s=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===s)return Hi(n),t;if(l===a)return Hi(n),r;l=l.sibling}throw Error(u(188))}if(s.return!==a.return)s=n,a=l;else{for(var d=!1,j=n.child;j;){if(j===s){d=!0,s=n,a=l;break}if(j===a){d=!0,a=n,s=l;break}j=j.sibling}if(!d){for(j=l.child;j;){if(j===s){d=!0,s=l,a=n;break}if(j===a){d=!0,a=l,s=n;break}j=j.sibling}if(!d)throw Error(u(189))}}if(s.alternate!==a)throw Error(u(190))}if(s.tag!==3)throw Error(u(188));return s.stateNode.current===s?t:r}function qi(t){return t=iu(t),t!==null?$i(t):null}function $i(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=$i(t);if(r!==null)return r;t=t.sibling}return null}var Vi=c.unstable_scheduleCallback,Wi=c.unstable_cancelCallback,ou=c.unstable_shouldYield,cu=c.unstable_requestPaint,Te=c.unstable_now,du=c.unstable_getCurrentPriorityLevel,jn=c.unstable_ImmediatePriority,Gi=c.unstable_UserBlockingPriority,Qs=c.unstable_NormalPriority,uu=c.unstable_LowPriority,Ki=c.unstable_IdlePriority,Ys=null,Et=null;function mu(t){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Ys,t,void 0,(t.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:hu,pu=Math.log,xu=Math.LN2;function hu(t){return t>>>=0,t===0?32:31-(pu(t)/xu|0)|0}var Zs=64,Xs=4194304;function is(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Js(t,r){var s=t.pendingLanes;if(s===0)return 0;var a=0,n=t.suspendedLanes,l=t.pingedLanes,d=s&268435455;if(d!==0){var j=d&~n;j!==0?a=is(j):(l&=d,l!==0&&(a=is(l)))}else d=s&~n,d!==0?a=is(d):l!==0&&(a=is(l));if(a===0)return 0;if(r!==0&&r!==a&&(r&n)===0&&(n=a&-a,l=r&-r,n>=l||n===16&&(l&4194240)!==0))return r;if((a&4)!==0&&(a|=s&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=a;0<r;)s=31-jt(r),n=1<<s,a|=t[s],r&=~n;return a}function gu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fu(t,r){for(var s=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var d=31-jt(l),j=1<<d,P=n[d];P===-1?((j&s)===0||(j&a)!==0)&&(n[d]=gu(j,r)):P<=r&&(t.expiredLanes|=j),l&=~j}}function bn(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qi(){var t=Zs;return Zs<<=1,(Zs&4194240)===0&&(Zs=64),t}function Nn(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function os(t,r,s){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-jt(r),t[r]=s}function yu(t,r){var s=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<s;){var n=31-jt(s),l=1<<n;r[n]=0,a[n]=-1,t[n]=-1,s&=~l}}function wn(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var a=31-jt(s),n=1<<a;n&r|t[a]&r&&(t[a]|=r),s&=~n}}var Ne=0;function Yi(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Zi,_n,Xi,Ji,eo,kn=!1,ea=[],Ht=null,qt=null,$t=null,cs=new Map,ds=new Map,Vt=[],vu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function to(t,r){switch(t){case"focusin":case"focusout":Ht=null;break;case"dragenter":case"dragleave":qt=null;break;case"mouseover":case"mouseout":$t=null;break;case"pointerover":case"pointerout":cs.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ds.delete(r.pointerId)}}function us(t,r,s,a,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:r,domEventName:s,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},r!==null&&(r=ks(r),r!==null&&_n(r)),t):(t.eventSystemFlags|=a,r=t.targetContainers,n!==null&&r.indexOf(n)===-1&&r.push(n),t)}function ju(t,r,s,a,n){switch(r){case"focusin":return Ht=us(Ht,t,r,s,a,n),!0;case"dragenter":return qt=us(qt,t,r,s,a,n),!0;case"mouseover":return $t=us($t,t,r,s,a,n),!0;case"pointerover":var l=n.pointerId;return cs.set(l,us(cs.get(l)||null,t,r,s,a,n)),!0;case"gotpointercapture":return l=n.pointerId,ds.set(l,us(ds.get(l)||null,t,r,s,a,n)),!0}return!1}function ro(t){var r=mr(t.target);if(r!==null){var s=ur(r);if(s!==null){if(r=s.tag,r===13){if(r=Bi(s),r!==null){t.blockedOn=r,eo(t.priority,function(){Xi(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ta(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var s=Cn(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var a=new s.constructor(s.type,s);xn=a,s.target.dispatchEvent(a),xn=null}else return r=ks(s),r!==null&&_n(r),t.blockedOn=s,!1;r.shift()}return!0}function so(t,r,s){ta(t)&&s.delete(r)}function bu(){kn=!1,Ht!==null&&ta(Ht)&&(Ht=null),qt!==null&&ta(qt)&&(qt=null),$t!==null&&ta($t)&&($t=null),cs.forEach(so),ds.forEach(so)}function ms(t,r){t.blockedOn===r&&(t.blockedOn=null,kn||(kn=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,bu)))}function ps(t){function r(n){return ms(n,t)}if(0<ea.length){ms(ea[0],t);for(var s=1;s<ea.length;s++){var a=ea[s];a.blockedOn===t&&(a.blockedOn=null)}}for(Ht!==null&&ms(Ht,t),qt!==null&&ms(qt,t),$t!==null&&ms($t,t),cs.forEach(r),ds.forEach(r),s=0;s<Vt.length;s++)a=Vt[s],a.blockedOn===t&&(a.blockedOn=null);for(;0<Vt.length&&(s=Vt[0],s.blockedOn===null);)ro(s),s.blockedOn===null&&Vt.shift()}var Cr=H.ReactCurrentBatchConfig,ra=!0;function Nu(t,r,s,a){var n=Ne,l=Cr.transition;Cr.transition=null;try{Ne=1,Sn(t,r,s,a)}finally{Ne=n,Cr.transition=l}}function wu(t,r,s,a){var n=Ne,l=Cr.transition;Cr.transition=null;try{Ne=4,Sn(t,r,s,a)}finally{Ne=n,Cr.transition=l}}function Sn(t,r,s,a){if(ra){var n=Cn(t,r,s,a);if(n===null)$n(t,r,a,sa,s),to(t,a);else if(ju(n,t,r,s,a))a.stopPropagation();else if(to(t,a),r&4&&-1<vu.indexOf(t)){for(;n!==null;){var l=ks(n);if(l!==null&&Zi(l),l=Cn(t,r,s,a),l===null&&$n(t,r,a,sa,s),l===n)break;n=l}n!==null&&a.stopPropagation()}else $n(t,r,a,null,s)}}var sa=null;function Cn(t,r,s,a){if(sa=null,t=hn(a),t=mr(t),t!==null)if(r=ur(t),r===null)t=null;else if(s=r.tag,s===13){if(t=Bi(r),t!==null)return t;t=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return sa=t,null}function ao(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(du()){case jn:return 1;case Gi:return 4;case Qs:case uu:return 16;case Ki:return 536870912;default:return 16}default:return 16}}var Wt=null,En=null,aa=null;function no(){if(aa)return aa;var t,r=En,s=r.length,a,n="value"in Wt?Wt.value:Wt.textContent,l=n.length;for(t=0;t<s&&r[t]===n[t];t++);var d=s-t;for(a=1;a<=d&&r[s-a]===n[l-a];a++);return aa=n.slice(t,1<a?1-a:void 0)}function na(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function la(){return!0}function lo(){return!1}function it(t){function r(s,a,n,l,d){this._reactName=s,this._targetInst=n,this.type=a,this.nativeEvent=l,this.target=d,this.currentTarget=null;for(var j in t)t.hasOwnProperty(j)&&(s=t[j],this[j]=s?s(l):l[j]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?la:lo,this.isPropagationStopped=lo,this}return K(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),r}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dn=it(Er),xs=K({},Er,{view:0,detail:0}),_u=it(xs),An,Pn,hs,ia=K({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hs&&(hs&&t.type==="mousemove"?(An=t.screenX-hs.screenX,Pn=t.screenY-hs.screenY):Pn=An=0,hs=t),An)},movementY:function(t){return"movementY"in t?t.movementY:Pn}}),io=it(ia),ku=K({},ia,{dataTransfer:0}),Su=it(ku),Cu=K({},xs,{relatedTarget:0}),Rn=it(Cu),Eu=K({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),Du=it(Eu),Au=K({},Er,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pu=it(Au),Ru=K({},Er,{data:0}),oo=it(Ru),Tu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Iu[t])?!!r[t]:!1}function Tn(){return Mu}var Fu=K({},xs,{key:function(t){if(t.key){var r=Tu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=na(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(t){return t.type==="keypress"?na(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?na(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ou=it(Fu),zu=K({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),co=it(zu),Uu=K({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn}),Bu=it(Uu),Hu=K({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),qu=it(Hu),$u=K({},ia,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vu=it($u),Wu=[9,13,27,32],Ln=v&&"CompositionEvent"in window,gs=null;v&&"documentMode"in document&&(gs=document.documentMode);var Gu=v&&"TextEvent"in window&&!gs,uo=v&&(!Ln||gs&&8<gs&&11>=gs),mo=" ",po=!1;function xo(t,r){switch(t){case"keyup":return Wu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ho(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dr=!1;function Ku(t,r){switch(t){case"compositionend":return ho(r);case"keypress":return r.which!==32?null:(po=!0,mo);case"textInput":return t=r.data,t===mo&&po?null:t;default:return null}}function Qu(t,r){if(Dr)return t==="compositionend"||!Ln&&xo(t,r)?(t=no(),aa=En=Wt=null,Dr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return uo&&r.locale!=="ko"?null:r.data;default:return null}}var Yu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function go(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Yu[t.type]:r==="textarea"}function fo(t,r,s,a){Mi(a),r=ma(r,"onChange"),0<r.length&&(s=new Dn("onChange","change",null,s,a),t.push({event:s,listeners:r}))}var fs=null,ys=null;function Zu(t){Io(t,0)}function oa(t){var r=Lr(t);if(_i(r))return t}function Xu(t,r){if(t==="change")return r}var yo=!1;if(v){var In;if(v){var Mn="oninput"in document;if(!Mn){var vo=document.createElement("div");vo.setAttribute("oninput","return;"),Mn=typeof vo.oninput=="function"}In=Mn}else In=!1;yo=In&&(!document.documentMode||9<document.documentMode)}function jo(){fs&&(fs.detachEvent("onpropertychange",bo),ys=fs=null)}function bo(t){if(t.propertyName==="value"&&oa(ys)){var r=[];fo(r,ys,t,hn(t)),Ui(Zu,r)}}function Ju(t,r,s){t==="focusin"?(jo(),fs=r,ys=s,fs.attachEvent("onpropertychange",bo)):t==="focusout"&&jo()}function em(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oa(ys)}function tm(t,r){if(t==="click")return oa(r)}function rm(t,r){if(t==="input"||t==="change")return oa(r)}function sm(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var bt=typeof Object.is=="function"?Object.is:sm;function vs(t,r){if(bt(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),a=Object.keys(r);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var n=s[a];if(!m.call(r,n)||!bt(t[n],r[n]))return!1}return!0}function No(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wo(t,r){var s=No(t);t=0;for(var a;s;){if(s.nodeType===3){if(a=t+s.textContent.length,t<=r&&a>=r)return{node:s,offset:r-t};t=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=No(s)}}function _o(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?_o(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function ko(){for(var t=window,r=Vs();r instanceof t.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)t=r.contentWindow;else break;r=Vs(t.document)}return r}function Fn(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function am(t){var r=ko(),s=t.focusedElem,a=t.selectionRange;if(r!==s&&s&&s.ownerDocument&&_o(s.ownerDocument.documentElement,s)){if(a!==null&&Fn(s)){if(r=a.start,t=a.end,t===void 0&&(t=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(t,s.value.length);else if(t=(r=s.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var n=s.textContent.length,l=Math.min(a.start,n);a=a.end===void 0?l:Math.min(a.end,n),!t.extend&&l>a&&(n=a,a=l,l=n),n=wo(s,l);var d=wo(s,a);n&&d&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==d.node||t.focusOffset!==d.offset)&&(r=r.createRange(),r.setStart(n.node,n.offset),t.removeAllRanges(),l>a?(t.addRange(r),t.extend(d.node,d.offset)):(r.setEnd(d.node,d.offset),t.addRange(r)))}}for(r=[],t=s;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)t=r[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nm=v&&"documentMode"in document&&11>=document.documentMode,Ar=null,On=null,js=null,zn=!1;function So(t,r,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;zn||Ar==null||Ar!==Vs(a)||(a=Ar,"selectionStart"in a&&Fn(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),js&&vs(js,a)||(js=a,a=ma(On,"onSelect"),0<a.length&&(r=new Dn("onSelect","select",null,r,s),t.push({event:r,listeners:a}),r.target=Ar)))}function ca(t,r){var s={};return s[t.toLowerCase()]=r.toLowerCase(),s["Webkit"+t]="webkit"+r,s["Moz"+t]="moz"+r,s}var Pr={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionend:ca("Transition","TransitionEnd")},Un={},Co={};v&&(Co=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function da(t){if(Un[t])return Un[t];if(!Pr[t])return t;var r=Pr[t],s;for(s in r)if(r.hasOwnProperty(s)&&s in Co)return Un[t]=r[s];return t}var Eo=da("animationend"),Do=da("animationiteration"),Ao=da("animationstart"),Po=da("transitionend"),Ro=new Map,To="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gt(t,r){Ro.set(t,r),y(r,[t])}for(var Bn=0;Bn<To.length;Bn++){var Hn=To[Bn],lm=Hn.toLowerCase(),im=Hn[0].toUpperCase()+Hn.slice(1);Gt(lm,"on"+im)}Gt(Eo,"onAnimationEnd"),Gt(Do,"onAnimationIteration"),Gt(Ao,"onAnimationStart"),Gt("dblclick","onDoubleClick"),Gt("focusin","onFocus"),Gt("focusout","onBlur"),Gt(Po,"onTransitionEnd"),w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),y("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),y("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),y("onBeforeInput",["compositionend","keypress","textInput","paste"]),y("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),om=new Set("cancel close invalid load scroll toggle".split(" ").concat(bs));function Lo(t,r,s){var a=t.type||"unknown-event";t.currentTarget=s,lu(a,r,void 0,t),t.currentTarget=null}function Io(t,r){r=(r&4)!==0;for(var s=0;s<t.length;s++){var a=t[s],n=a.event;a=a.listeners;e:{var l=void 0;if(r)for(var d=a.length-1;0<=d;d--){var j=a[d],P=j.instance,U=j.currentTarget;if(j=j.listener,P!==l&&n.isPropagationStopped())break e;Lo(n,j,U),l=P}else for(d=0;d<a.length;d++){if(j=a[d],P=j.instance,U=j.currentTarget,j=j.listener,P!==l&&n.isPropagationStopped())break e;Lo(n,j,U),l=P}}}if(Ks)throw t=vn,Ks=!1,vn=null,t}function ke(t,r){var s=r[Yn];s===void 0&&(s=r[Yn]=new Set);var a=t+"__bubble";s.has(a)||(Mo(r,t,2,!1),s.add(a))}function qn(t,r,s){var a=0;r&&(a|=4),Mo(s,t,a,r)}var ua="_reactListening"+Math.random().toString(36).slice(2);function Ns(t){if(!t[ua]){t[ua]=!0,g.forEach(function(s){s!=="selectionchange"&&(om.has(s)||qn(s,!1,t),qn(s,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[ua]||(r[ua]=!0,qn("selectionchange",!1,r))}}function Mo(t,r,s,a){switch(ao(r)){case 1:var n=Nu;break;case 4:n=wu;break;default:n=Sn}s=n.bind(null,r,s,t),n=void 0,!yn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(r,s,{capture:!0,passive:n}):t.addEventListener(r,s,!0):n!==void 0?t.addEventListener(r,s,{passive:n}):t.addEventListener(r,s,!1)}function $n(t,r,s,a,n){var l=a;if((r&1)===0&&(r&2)===0&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var j=a.stateNode.containerInfo;if(j===n||j.nodeType===8&&j.parentNode===n)break;if(d===4)for(d=a.return;d!==null;){var P=d.tag;if((P===3||P===4)&&(P=d.stateNode.containerInfo,P===n||P.nodeType===8&&P.parentNode===n))return;d=d.return}for(;j!==null;){if(d=mr(j),d===null)return;if(P=d.tag,P===5||P===6){a=l=d;continue e}j=j.parentNode}}a=a.return}Ui(function(){var U=l,W=hn(s),Q=[];e:{var V=Ro.get(t);if(V!==void 0){var re=Dn,ae=t;switch(t){case"keypress":if(na(s)===0)break e;case"keydown":case"keyup":re=Ou;break;case"focusin":ae="focus",re=Rn;break;case"focusout":ae="blur",re=Rn;break;case"beforeblur":case"afterblur":re=Rn;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Bu;break;case Eo:case Do:case Ao:re=Du;break;case Po:re=qu;break;case"scroll":re=_u;break;case"wheel":re=Vu;break;case"copy":case"cut":case"paste":re=Pu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=co}var ne=(r&4)!==0,Le=!ne&&t==="scroll",O=ne?V!==null?V+"Capture":null:V;ne=[];for(var L=U,z;L!==null;){z=L;var Z=z.stateNode;if(z.tag===5&&Z!==null&&(z=Z,O!==null&&(Z=as(L,O),Z!=null&&ne.push(ws(L,Z,z)))),Le)break;L=L.return}0<ne.length&&(V=new re(V,ae,null,s,W),Q.push({event:V,listeners:ne}))}}if((r&7)===0){e:{if(V=t==="mouseover"||t==="pointerover",re=t==="mouseout"||t==="pointerout",V&&s!==xn&&(ae=s.relatedTarget||s.fromElement)&&(mr(ae)||ae[Tt]))break e;if((re||V)&&(V=W.window===W?W:(V=W.ownerDocument)?V.defaultView||V.parentWindow:window,re?(ae=s.relatedTarget||s.toElement,re=U,ae=ae?mr(ae):null,ae!==null&&(Le=ur(ae),ae!==Le||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(re=null,ae=U),re!==ae)){if(ne=io,Z="onMouseLeave",O="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(ne=co,Z="onPointerLeave",O="onPointerEnter",L="pointer"),Le=re==null?V:Lr(re),z=ae==null?V:Lr(ae),V=new ne(Z,L+"leave",re,s,W),V.target=Le,V.relatedTarget=z,Z=null,mr(W)===U&&(ne=new ne(O,L+"enter",ae,s,W),ne.target=z,ne.relatedTarget=Le,Z=ne),Le=Z,re&&ae)t:{for(ne=re,O=ae,L=0,z=ne;z;z=Rr(z))L++;for(z=0,Z=O;Z;Z=Rr(Z))z++;for(;0<L-z;)ne=Rr(ne),L--;for(;0<z-L;)O=Rr(O),z--;for(;L--;){if(ne===O||O!==null&&ne===O.alternate)break t;ne=Rr(ne),O=Rr(O)}ne=null}else ne=null;re!==null&&Fo(Q,V,re,ne,!1),ae!==null&&Le!==null&&Fo(Q,Le,ae,ne,!0)}}e:{if(V=U?Lr(U):window,re=V.nodeName&&V.nodeName.toLowerCase(),re==="select"||re==="input"&&V.type==="file")var le=Xu;else if(go(V))if(yo)le=rm;else{le=em;var ie=Ju}else(re=V.nodeName)&&re.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(le=tm);if(le&&(le=le(t,U))){fo(Q,le,s,W);break e}ie&&ie(t,V,U),t==="focusout"&&(ie=V._wrapperState)&&ie.controlled&&V.type==="number"&&cn(V,"number",V.value)}switch(ie=U?Lr(U):window,t){case"focusin":(go(ie)||ie.contentEditable==="true")&&(Ar=ie,On=U,js=null);break;case"focusout":js=On=Ar=null;break;case"mousedown":zn=!0;break;case"contextmenu":case"mouseup":case"dragend":zn=!1,So(Q,s,W);break;case"selectionchange":if(nm)break;case"keydown":case"keyup":So(Q,s,W)}var oe;if(Ln)e:{switch(t){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Dr?xo(t,s)&&(ue="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(ue="onCompositionStart");ue&&(uo&&s.locale!=="ko"&&(Dr||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Dr&&(oe=no()):(Wt=W,En="value"in Wt?Wt.value:Wt.textContent,Dr=!0)),ie=ma(U,ue),0<ie.length&&(ue=new oo(ue,t,null,s,W),Q.push({event:ue,listeners:ie}),oe?ue.data=oe:(oe=ho(s),oe!==null&&(ue.data=oe)))),(oe=Gu?Ku(t,s):Qu(t,s))&&(U=ma(U,"onBeforeInput"),0<U.length&&(W=new oo("onBeforeInput","beforeinput",null,s,W),Q.push({event:W,listeners:U}),W.data=oe))}Io(Q,r)})}function ws(t,r,s){return{instance:t,listener:r,currentTarget:s}}function ma(t,r){for(var s=r+"Capture",a=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=as(t,s),l!=null&&a.unshift(ws(t,l,n)),l=as(t,r),l!=null&&a.push(ws(t,l,n))),t=t.return}return a}function Rr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fo(t,r,s,a,n){for(var l=r._reactName,d=[];s!==null&&s!==a;){var j=s,P=j.alternate,U=j.stateNode;if(P!==null&&P===a)break;j.tag===5&&U!==null&&(j=U,n?(P=as(s,l),P!=null&&d.unshift(ws(s,P,j))):n||(P=as(s,l),P!=null&&d.push(ws(s,P,j)))),s=s.return}d.length!==0&&t.push({event:r,listeners:d})}var cm=/\r\n?/g,dm=/\u0000|\uFFFD/g;function Oo(t){return(typeof t=="string"?t:""+t).replace(cm,`
`).replace(dm,"")}function pa(t,r,s){if(r=Oo(r),Oo(t)!==r&&s)throw Error(u(425))}function xa(){}var Vn=null,Wn=null;function Gn(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Kn=typeof setTimeout=="function"?setTimeout:void 0,um=typeof clearTimeout=="function"?clearTimeout:void 0,zo=typeof Promise=="function"?Promise:void 0,mm=typeof queueMicrotask=="function"?queueMicrotask:typeof zo<"u"?function(t){return zo.resolve(null).then(t).catch(pm)}:Kn;function pm(t){setTimeout(function(){throw t})}function Qn(t,r){var s=r,a=0;do{var n=s.nextSibling;if(t.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(a===0){t.removeChild(n),ps(r);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=n}while(s);ps(r)}function Kt(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Uo(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(r===0)return t;r--}else s==="/$"&&r++}t=t.previousSibling}return null}var Tr=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Tr,_s="__reactProps$"+Tr,Tt="__reactContainer$"+Tr,Yn="__reactEvents$"+Tr,xm="__reactListeners$"+Tr,hm="__reactHandles$"+Tr;function mr(t){var r=t[Dt];if(r)return r;for(var s=t.parentNode;s;){if(r=s[Tt]||s[Dt]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(t=Uo(t);t!==null;){if(s=t[Dt])return s;t=Uo(t)}return r}t=s,s=t.parentNode}return null}function ks(t){return t=t[Dt]||t[Tt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(u(33))}function ha(t){return t[_s]||null}var Zn=[],Ir=-1;function Qt(t){return{current:t}}function Se(t){0>Ir||(t.current=Zn[Ir],Zn[Ir]=null,Ir--)}function we(t,r){Ir++,Zn[Ir]=t.current,t.current=r}var Yt={},We=Qt(Yt),Xe=Qt(!1),pr=Yt;function Mr(t,r){var s=t.type.contextTypes;if(!s)return Yt;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===r)return a.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in s)n[l]=r[l];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=n),n}function Je(t){return t=t.childContextTypes,t!=null}function ga(){Se(Xe),Se(We)}function Bo(t,r,s){if(We.current!==Yt)throw Error(u(168));we(We,r),we(Xe,s)}function Ho(t,r,s){var a=t.stateNode;if(r=r.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var n in a)if(!(n in r))throw Error(u(108,ve(t)||"Unknown",n));return K({},s,a)}function fa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yt,pr=We.current,we(We,t),we(Xe,Xe.current),!0}function qo(t,r,s){var a=t.stateNode;if(!a)throw Error(u(169));s?(t=Ho(t,r,pr),a.__reactInternalMemoizedMergedChildContext=t,Se(Xe),Se(We),we(We,t)):Se(Xe),we(Xe,s)}var Lt=null,ya=!1,Xn=!1;function $o(t){Lt===null?Lt=[t]:Lt.push(t)}function gm(t){ya=!0,$o(t)}function Zt(){if(!Xn&&Lt!==null){Xn=!0;var t=0,r=Ne;try{var s=Lt;for(Ne=1;t<s.length;t++){var a=s[t];do a=a(!0);while(a!==null)}Lt=null,ya=!1}catch(n){throw Lt!==null&&(Lt=Lt.slice(t+1)),Vi(jn,Zt),n}finally{Ne=r,Xn=!1}}return null}var Fr=[],Or=0,va=null,ja=0,mt=[],pt=0,xr=null,It=1,Mt="";function hr(t,r){Fr[Or++]=ja,Fr[Or++]=va,va=t,ja=r}function Vo(t,r,s){mt[pt++]=It,mt[pt++]=Mt,mt[pt++]=xr,xr=t;var a=It;t=Mt;var n=32-jt(a)-1;a&=~(1<<n),s+=1;var l=32-jt(r)+n;if(30<l){var d=n-n%5;l=(a&(1<<d)-1).toString(32),a>>=d,n-=d,It=1<<32-jt(r)+n|s<<n|a,Mt=l+t}else It=1<<l|s<<n|a,Mt=t}function Jn(t){t.return!==null&&(hr(t,1),Vo(t,1,0))}function el(t){for(;t===va;)va=Fr[--Or],Fr[Or]=null,ja=Fr[--Or],Fr[Or]=null;for(;t===xr;)xr=mt[--pt],mt[pt]=null,Mt=mt[--pt],mt[pt]=null,It=mt[--pt],mt[pt]=null}var ot=null,ct=null,Ee=!1,Nt=null;function Wo(t,r){var s=ft(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=t,r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)}function Go(t,r){switch(t.tag){case 5:var s=t.type;return r=r.nodeType!==1||s.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,ot=t,ct=Kt(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,ot=t,ct=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(s=xr!==null?{id:It,overflow:Mt}:null,t.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=ft(18,null,null,0),s.stateNode=r,s.return=t,t.child=s,ot=t,ct=null,!0):!1;default:return!1}}function tl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rl(t){if(Ee){var r=ct;if(r){var s=r;if(!Go(t,r)){if(tl(t))throw Error(u(418));r=Kt(s.nextSibling);var a=ot;r&&Go(t,r)?Wo(a,s):(t.flags=t.flags&-4097|2,Ee=!1,ot=t)}}else{if(tl(t))throw Error(u(418));t.flags=t.flags&-4097|2,Ee=!1,ot=t}}}function Ko(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ot=t}function ba(t){if(t!==ot)return!1;if(!Ee)return Ko(t),Ee=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Gn(t.type,t.memoizedProps)),r&&(r=ct)){if(tl(t))throw Qo(),Error(u(418));for(;r;)Wo(t,r),r=Kt(r.nextSibling)}if(Ko(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(r===0){ct=Kt(t.nextSibling);break e}r--}else s!=="$"&&s!=="$!"&&s!=="$?"||r++}t=t.nextSibling}ct=null}}else ct=ot?Kt(t.stateNode.nextSibling):null;return!0}function Qo(){for(var t=ct;t;)t=Kt(t.nextSibling)}function zr(){ct=ot=null,Ee=!1}function sl(t){Nt===null?Nt=[t]:Nt.push(t)}var fm=H.ReactCurrentBatchConfig;function Ss(t,r,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(u(309));var a=s.stateNode}if(!a)throw Error(u(147,t));var n=a,l=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===l?r.ref:(r=function(d){var j=n.refs;d===null?delete j[l]:j[l]=d},r._stringRef=l,r)}if(typeof t!="string")throw Error(u(284));if(!s._owner)throw Error(u(290,t))}return t}function Na(t,r){throw t=Object.prototype.toString.call(r),Error(u(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Yo(t){var r=t._init;return r(t._payload)}function Zo(t){function r(O,L){if(t){var z=O.deletions;z===null?(O.deletions=[L],O.flags|=16):z.push(L)}}function s(O,L){if(!t)return null;for(;L!==null;)r(O,L),L=L.sibling;return null}function a(O,L){for(O=new Map;L!==null;)L.key!==null?O.set(L.key,L):O.set(L.index,L),L=L.sibling;return O}function n(O,L){return O=nr(O,L),O.index=0,O.sibling=null,O}function l(O,L,z){return O.index=z,t?(z=O.alternate,z!==null?(z=z.index,z<L?(O.flags|=2,L):z):(O.flags|=2,L)):(O.flags|=1048576,L)}function d(O){return t&&O.alternate===null&&(O.flags|=2),O}function j(O,L,z,Z){return L===null||L.tag!==6?(L=Kl(z,O.mode,Z),L.return=O,L):(L=n(L,z),L.return=O,L)}function P(O,L,z,Z){var le=z.type;return le===F?W(O,L,z.props.children,Z,z.key):L!==null&&(L.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===X&&Yo(le)===L.type)?(Z=n(L,z.props),Z.ref=Ss(O,L,z),Z.return=O,Z):(Z=Wa(z.type,z.key,z.props,null,O.mode,Z),Z.ref=Ss(O,L,z),Z.return=O,Z)}function U(O,L,z,Z){return L===null||L.tag!==4||L.stateNode.containerInfo!==z.containerInfo||L.stateNode.implementation!==z.implementation?(L=Ql(z,O.mode,Z),L.return=O,L):(L=n(L,z.children||[]),L.return=O,L)}function W(O,L,z,Z,le){return L===null||L.tag!==7?(L=wr(z,O.mode,Z,le),L.return=O,L):(L=n(L,z),L.return=O,L)}function Q(O,L,z){if(typeof L=="string"&&L!==""||typeof L=="number")return L=Kl(""+L,O.mode,z),L.return=O,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case I:return z=Wa(L.type,L.key,L.props,null,O.mode,z),z.ref=Ss(O,null,L),z.return=O,z;case T:return L=Ql(L,O.mode,z),L.return=O,L;case X:var Z=L._init;return Q(O,Z(L._payload),z)}if(ts(L)||$(L))return L=wr(L,O.mode,z,null),L.return=O,L;Na(O,L)}return null}function V(O,L,z,Z){var le=L!==null?L.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return le!==null?null:j(O,L,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return z.key===le?P(O,L,z,Z):null;case T:return z.key===le?U(O,L,z,Z):null;case X:return le=z._init,V(O,L,le(z._payload),Z)}if(ts(z)||$(z))return le!==null?null:W(O,L,z,Z,null);Na(O,z)}return null}function re(O,L,z,Z,le){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return O=O.get(z)||null,j(L,O,""+Z,le);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case I:return O=O.get(Z.key===null?z:Z.key)||null,P(L,O,Z,le);case T:return O=O.get(Z.key===null?z:Z.key)||null,U(L,O,Z,le);case X:var ie=Z._init;return re(O,L,z,ie(Z._payload),le)}if(ts(Z)||$(Z))return O=O.get(z)||null,W(L,O,Z,le,null);Na(L,Z)}return null}function ae(O,L,z,Z){for(var le=null,ie=null,oe=L,ue=L=0,He=null;oe!==null&&ue<z.length;ue++){oe.index>ue?(He=oe,oe=null):He=oe.sibling;var be=V(O,oe,z[ue],Z);if(be===null){oe===null&&(oe=He);break}t&&oe&&be.alternate===null&&r(O,oe),L=l(be,L,ue),ie===null?le=be:ie.sibling=be,ie=be,oe=He}if(ue===z.length)return s(O,oe),Ee&&hr(O,ue),le;if(oe===null){for(;ue<z.length;ue++)oe=Q(O,z[ue],Z),oe!==null&&(L=l(oe,L,ue),ie===null?le=oe:ie.sibling=oe,ie=oe);return Ee&&hr(O,ue),le}for(oe=a(O,oe);ue<z.length;ue++)He=re(oe,O,ue,z[ue],Z),He!==null&&(t&&He.alternate!==null&&oe.delete(He.key===null?ue:He.key),L=l(He,L,ue),ie===null?le=He:ie.sibling=He,ie=He);return t&&oe.forEach(function(lr){return r(O,lr)}),Ee&&hr(O,ue),le}function ne(O,L,z,Z){var le=$(z);if(typeof le!="function")throw Error(u(150));if(z=le.call(z),z==null)throw Error(u(151));for(var ie=le=null,oe=L,ue=L=0,He=null,be=z.next();oe!==null&&!be.done;ue++,be=z.next()){oe.index>ue?(He=oe,oe=null):He=oe.sibling;var lr=V(O,oe,be.value,Z);if(lr===null){oe===null&&(oe=He);break}t&&oe&&lr.alternate===null&&r(O,oe),L=l(lr,L,ue),ie===null?le=lr:ie.sibling=lr,ie=lr,oe=He}if(be.done)return s(O,oe),Ee&&hr(O,ue),le;if(oe===null){for(;!be.done;ue++,be=z.next())be=Q(O,be.value,Z),be!==null&&(L=l(be,L,ue),ie===null?le=be:ie.sibling=be,ie=be);return Ee&&hr(O,ue),le}for(oe=a(O,oe);!be.done;ue++,be=z.next())be=re(oe,O,ue,be.value,Z),be!==null&&(t&&be.alternate!==null&&oe.delete(be.key===null?ue:be.key),L=l(be,L,ue),ie===null?le=be:ie.sibling=be,ie=be);return t&&oe.forEach(function(Ym){return r(O,Ym)}),Ee&&hr(O,ue),le}function Le(O,L,z,Z){if(typeof z=="object"&&z!==null&&z.type===F&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case I:e:{for(var le=z.key,ie=L;ie!==null;){if(ie.key===le){if(le=z.type,le===F){if(ie.tag===7){s(O,ie.sibling),L=n(ie,z.props.children),L.return=O,O=L;break e}}else if(ie.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===X&&Yo(le)===ie.type){s(O,ie.sibling),L=n(ie,z.props),L.ref=Ss(O,ie,z),L.return=O,O=L;break e}s(O,ie);break}else r(O,ie);ie=ie.sibling}z.type===F?(L=wr(z.props.children,O.mode,Z,z.key),L.return=O,O=L):(Z=Wa(z.type,z.key,z.props,null,O.mode,Z),Z.ref=Ss(O,L,z),Z.return=O,O=Z)}return d(O);case T:e:{for(ie=z.key;L!==null;){if(L.key===ie)if(L.tag===4&&L.stateNode.containerInfo===z.containerInfo&&L.stateNode.implementation===z.implementation){s(O,L.sibling),L=n(L,z.children||[]),L.return=O,O=L;break e}else{s(O,L);break}else r(O,L);L=L.sibling}L=Ql(z,O.mode,Z),L.return=O,O=L}return d(O);case X:return ie=z._init,Le(O,L,ie(z._payload),Z)}if(ts(z))return ae(O,L,z,Z);if($(z))return ne(O,L,z,Z);Na(O,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,L!==null&&L.tag===6?(s(O,L.sibling),L=n(L,z),L.return=O,O=L):(s(O,L),L=Kl(z,O.mode,Z),L.return=O,O=L),d(O)):s(O,L)}return Le}var Ur=Zo(!0),Xo=Zo(!1),wa=Qt(null),_a=null,Br=null,al=null;function nl(){al=Br=_a=null}function ll(t){var r=wa.current;Se(wa),t._currentValue=r}function il(t,r,s){for(;t!==null;){var a=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,a!==null&&(a.childLanes|=r)):a!==null&&(a.childLanes&r)!==r&&(a.childLanes|=r),t===s)break;t=t.return}}function Hr(t,r){_a=t,al=Br=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(et=!0),t.firstContext=null)}function xt(t){var r=t._currentValue;if(al!==t)if(t={context:t,memoizedValue:r,next:null},Br===null){if(_a===null)throw Error(u(308));Br=t,_a.dependencies={lanes:0,firstContext:t}}else Br=Br.next=t;return r}var gr=null;function ol(t){gr===null?gr=[t]:gr.push(t)}function Jo(t,r,s,a){var n=r.interleaved;return n===null?(s.next=s,ol(r)):(s.next=n.next,n.next=s),r.interleaved=s,Ft(t,a)}function Ft(t,r){t.lanes|=r;var s=t.alternate;for(s!==null&&(s.lanes|=r),s=t,t=t.return;t!==null;)t.childLanes|=r,s=t.alternate,s!==null&&(s.childLanes|=r),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Xt=!1;function cl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ec(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ot(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Jt(t,r,s){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(je&2)!==0){var n=a.pending;return n===null?r.next=r:(r.next=n.next,n.next=r),a.pending=r,Ft(t,s)}return n=a.interleaved,n===null?(r.next=r,ol(a)):(r.next=n.next,n.next=r),a.interleaved=r,Ft(t,s)}function ka(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var a=r.lanes;a&=t.pendingLanes,s|=a,r.lanes=s,wn(t,s)}}function tc(t,r){var s=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var n=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var d={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?n=l=d:l=l.next=d,s=s.next}while(s!==null);l===null?n=l=r:l=l.next=r}else n=l=r;s={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}function Sa(t,r,s,a){var n=t.updateQueue;Xt=!1;var l=n.firstBaseUpdate,d=n.lastBaseUpdate,j=n.shared.pending;if(j!==null){n.shared.pending=null;var P=j,U=P.next;P.next=null,d===null?l=U:d.next=U,d=P;var W=t.alternate;W!==null&&(W=W.updateQueue,j=W.lastBaseUpdate,j!==d&&(j===null?W.firstBaseUpdate=U:j.next=U,W.lastBaseUpdate=P))}if(l!==null){var Q=n.baseState;d=0,W=U=P=null,j=l;do{var V=j.lane,re=j.eventTime;if((a&V)===V){W!==null&&(W=W.next={eventTime:re,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var ae=t,ne=j;switch(V=r,re=s,ne.tag){case 1:if(ae=ne.payload,typeof ae=="function"){Q=ae.call(re,Q,V);break e}Q=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ne.payload,V=typeof ae=="function"?ae.call(re,Q,V):ae,V==null)break e;Q=K({},Q,V);break e;case 2:Xt=!0}}j.callback!==null&&j.lane!==0&&(t.flags|=64,V=n.effects,V===null?n.effects=[j]:V.push(j))}else re={eventTime:re,lane:V,tag:j.tag,payload:j.payload,callback:j.callback,next:null},W===null?(U=W=re,P=Q):W=W.next=re,d|=V;if(j=j.next,j===null){if(j=n.shared.pending,j===null)break;V=j,j=V.next,V.next=null,n.lastBaseUpdate=V,n.shared.pending=null}}while(!0);if(W===null&&(P=Q),n.baseState=P,n.firstBaseUpdate=U,n.lastBaseUpdate=W,r=n.shared.interleaved,r!==null){n=r;do d|=n.lane,n=n.next;while(n!==r)}else l===null&&(n.shared.lanes=0);vr|=d,t.lanes=d,t.memoizedState=Q}}function rc(t,r,s){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var a=t[r],n=a.callback;if(n!==null){if(a.callback=null,a=s,typeof n!="function")throw Error(u(191,n));n.call(a)}}}var Cs={},At=Qt(Cs),Es=Qt(Cs),Ds=Qt(Cs);function fr(t){if(t===Cs)throw Error(u(174));return t}function dl(t,r){switch(we(Ds,r),we(Es,t),we(At,Cs),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:un(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=un(r,t)}Se(At),we(At,r)}function qr(){Se(At),Se(Es),Se(Ds)}function sc(t){fr(Ds.current);var r=fr(At.current),s=un(r,t.type);r!==s&&(we(Es,t),we(At,s))}function ul(t){Es.current===t&&(Se(At),Se(Es))}var De=Qt(0);function Ca(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ml=[];function pl(){for(var t=0;t<ml.length;t++)ml[t]._workInProgressVersionPrimary=null;ml.length=0}var Ea=H.ReactCurrentDispatcher,xl=H.ReactCurrentBatchConfig,yr=0,Ae=null,Oe=null,Ue=null,Da=!1,As=!1,Ps=0,ym=0;function Ge(){throw Error(u(321))}function hl(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!bt(t[s],r[s]))return!1;return!0}function gl(t,r,s,a,n,l){if(yr=l,Ae=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ea.current=t===null||t.memoizedState===null?Nm:wm,t=s(a,n),As){l=0;do{if(As=!1,Ps=0,25<=l)throw Error(u(301));l+=1,Ue=Oe=null,r.updateQueue=null,Ea.current=_m,t=s(a,n)}while(As)}if(Ea.current=Ra,r=Oe!==null&&Oe.next!==null,yr=0,Ue=Oe=Ae=null,Da=!1,r)throw Error(u(300));return t}function fl(){var t=Ps!==0;return Ps=0,t}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Ae.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function ht(){if(Oe===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var r=Ue===null?Ae.memoizedState:Ue.next;if(r!==null)Ue=r,Oe=t;else{if(t===null)throw Error(u(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Ue===null?Ae.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function Rs(t,r){return typeof r=="function"?r(t):r}function yl(t){var r=ht(),s=r.queue;if(s===null)throw Error(u(311));s.lastRenderedReducer=t;var a=Oe,n=a.baseQueue,l=s.pending;if(l!==null){if(n!==null){var d=n.next;n.next=l.next,l.next=d}a.baseQueue=n=l,s.pending=null}if(n!==null){l=n.next,a=a.baseState;var j=d=null,P=null,U=l;do{var W=U.lane;if((yr&W)===W)P!==null&&(P=P.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),a=U.hasEagerState?U.eagerState:t(a,U.action);else{var Q={lane:W,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};P===null?(j=P=Q,d=a):P=P.next=Q,Ae.lanes|=W,vr|=W}U=U.next}while(U!==null&&U!==l);P===null?d=a:P.next=j,bt(a,r.memoizedState)||(et=!0),r.memoizedState=a,r.baseState=d,r.baseQueue=P,s.lastRenderedState=a}if(t=s.interleaved,t!==null){n=t;do l=n.lane,Ae.lanes|=l,vr|=l,n=n.next;while(n!==t)}else n===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function vl(t){var r=ht(),s=r.queue;if(s===null)throw Error(u(311));s.lastRenderedReducer=t;var a=s.dispatch,n=s.pending,l=r.memoizedState;if(n!==null){s.pending=null;var d=n=n.next;do l=t(l,d.action),d=d.next;while(d!==n);bt(l,r.memoizedState)||(et=!0),r.memoizedState=l,r.baseQueue===null&&(r.baseState=l),s.lastRenderedState=l}return[l,a]}function ac(){}function nc(t,r){var s=Ae,a=ht(),n=r(),l=!bt(a.memoizedState,n);if(l&&(a.memoizedState=n,et=!0),a=a.queue,jl(oc.bind(null,s,a,t),[t]),a.getSnapshot!==r||l||Ue!==null&&Ue.memoizedState.tag&1){if(s.flags|=2048,Ts(9,ic.bind(null,s,a,n,r),void 0,null),Be===null)throw Error(u(349));(yr&30)!==0||lc(s,r,n)}return n}function lc(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=Ae.updateQueue,r===null?(r={lastEffect:null,stores:null},Ae.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function ic(t,r,s,a){r.value=s,r.getSnapshot=a,cc(r)&&dc(t)}function oc(t,r,s){return s(function(){cc(r)&&dc(t)})}function cc(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!bt(t,s)}catch{return!0}}function dc(t){var r=Ft(t,1);r!==null&&St(r,t,1,-1)}function uc(t){var r=Pt();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:t},r.queue=t,t=t.dispatch=bm.bind(null,Ae,t),[r.memoizedState,t]}function Ts(t,r,s,a){return t={tag:t,create:r,destroy:s,deps:a,next:null},r=Ae.updateQueue,r===null?(r={lastEffect:null,stores:null},Ae.updateQueue=r,r.lastEffect=t.next=t):(s=r.lastEffect,s===null?r.lastEffect=t.next=t:(a=s.next,s.next=t,t.next=a,r.lastEffect=t)),t}function mc(){return ht().memoizedState}function Aa(t,r,s,a){var n=Pt();Ae.flags|=t,n.memoizedState=Ts(1|r,s,void 0,a===void 0?null:a)}function Pa(t,r,s,a){var n=ht();a=a===void 0?null:a;var l=void 0;if(Oe!==null){var d=Oe.memoizedState;if(l=d.destroy,a!==null&&hl(a,d.deps)){n.memoizedState=Ts(r,s,l,a);return}}Ae.flags|=t,n.memoizedState=Ts(1|r,s,l,a)}function pc(t,r){return Aa(8390656,8,t,r)}function jl(t,r){return Pa(2048,8,t,r)}function xc(t,r){return Pa(4,2,t,r)}function hc(t,r){return Pa(4,4,t,r)}function gc(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function fc(t,r,s){return s=s!=null?s.concat([t]):null,Pa(4,4,gc.bind(null,r,t),s)}function bl(){}function yc(t,r){var s=ht();r=r===void 0?null:r;var a=s.memoizedState;return a!==null&&r!==null&&hl(r,a[1])?a[0]:(s.memoizedState=[t,r],t)}function vc(t,r){var s=ht();r=r===void 0?null:r;var a=s.memoizedState;return a!==null&&r!==null&&hl(r,a[1])?a[0]:(t=t(),s.memoizedState=[t,r],t)}function jc(t,r,s){return(yr&21)===0?(t.baseState&&(t.baseState=!1,et=!0),t.memoizedState=s):(bt(s,r)||(s=Qi(),Ae.lanes|=s,vr|=s,t.baseState=!0),r)}function vm(t,r){var s=Ne;Ne=s!==0&&4>s?s:4,t(!0);var a=xl.transition;xl.transition={};try{t(!1),r()}finally{Ne=s,xl.transition=a}}function bc(){return ht().memoizedState}function jm(t,r,s){var a=sr(t);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Nc(t))wc(r,s);else if(s=Jo(t,r,s,a),s!==null){var n=Ze();St(s,t,a,n),_c(s,r,a)}}function bm(t,r,s){var a=sr(t),n={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Nc(t))wc(r,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=r.lastRenderedReducer,l!==null))try{var d=r.lastRenderedState,j=l(d,s);if(n.hasEagerState=!0,n.eagerState=j,bt(j,d)){var P=r.interleaved;P===null?(n.next=n,ol(r)):(n.next=P.next,P.next=n),r.interleaved=n;return}}catch{}s=Jo(t,r,n,a),s!==null&&(n=Ze(),St(s,t,a,n),_c(s,r,a))}}function Nc(t){var r=t.alternate;return t===Ae||r!==null&&r===Ae}function wc(t,r){As=Da=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function _c(t,r,s){if((s&4194240)!==0){var a=r.lanes;a&=t.pendingLanes,s|=a,r.lanes=s,wn(t,s)}}var Ra={readContext:xt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},Nm={readContext:xt,useCallback:function(t,r){return Pt().memoizedState=[t,r===void 0?null:r],t},useContext:xt,useEffect:pc,useImperativeHandle:function(t,r,s){return s=s!=null?s.concat([t]):null,Aa(4194308,4,gc.bind(null,r,t),s)},useLayoutEffect:function(t,r){return Aa(4194308,4,t,r)},useInsertionEffect:function(t,r){return Aa(4,2,t,r)},useMemo:function(t,r){var s=Pt();return r=r===void 0?null:r,t=t(),s.memoizedState=[t,r],t},useReducer:function(t,r,s){var a=Pt();return r=s!==void 0?s(r):r,a.memoizedState=a.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},a.queue=t,t=t.dispatch=jm.bind(null,Ae,t),[a.memoizedState,t]},useRef:function(t){var r=Pt();return t={current:t},r.memoizedState=t},useState:uc,useDebugValue:bl,useDeferredValue:function(t){return Pt().memoizedState=t},useTransition:function(){var t=uc(!1),r=t[0];return t=vm.bind(null,t[1]),Pt().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,s){var a=Ae,n=Pt();if(Ee){if(s===void 0)throw Error(u(407));s=s()}else{if(s=r(),Be===null)throw Error(u(349));(yr&30)!==0||lc(a,r,s)}n.memoizedState=s;var l={value:s,getSnapshot:r};return n.queue=l,pc(oc.bind(null,a,l,t),[t]),a.flags|=2048,Ts(9,ic.bind(null,a,l,s,r),void 0,null),s},useId:function(){var t=Pt(),r=Be.identifierPrefix;if(Ee){var s=Mt,a=It;s=(a&~(1<<32-jt(a)-1)).toString(32)+s,r=":"+r+"R"+s,s=Ps++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=ym++,r=":"+r+"r"+s.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},wm={readContext:xt,useCallback:yc,useContext:xt,useEffect:jl,useImperativeHandle:fc,useInsertionEffect:xc,useLayoutEffect:hc,useMemo:vc,useReducer:yl,useRef:mc,useState:function(){return yl(Rs)},useDebugValue:bl,useDeferredValue:function(t){var r=ht();return jc(r,Oe.memoizedState,t)},useTransition:function(){var t=yl(Rs)[0],r=ht().memoizedState;return[t,r]},useMutableSource:ac,useSyncExternalStore:nc,useId:bc,unstable_isNewReconciler:!1},_m={readContext:xt,useCallback:yc,useContext:xt,useEffect:jl,useImperativeHandle:fc,useInsertionEffect:xc,useLayoutEffect:hc,useMemo:vc,useReducer:vl,useRef:mc,useState:function(){return vl(Rs)},useDebugValue:bl,useDeferredValue:function(t){var r=ht();return Oe===null?r.memoizedState=t:jc(r,Oe.memoizedState,t)},useTransition:function(){var t=vl(Rs)[0],r=ht().memoizedState;return[t,r]},useMutableSource:ac,useSyncExternalStore:nc,useId:bc,unstable_isNewReconciler:!1};function wt(t,r){if(t&&t.defaultProps){r=K({},r),t=t.defaultProps;for(var s in t)r[s]===void 0&&(r[s]=t[s]);return r}return r}function Nl(t,r,s,a){r=t.memoizedState,s=s(a,r),s=s==null?r:K({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Ta={isMounted:function(t){return(t=t._reactInternals)?ur(t)===t:!1},enqueueSetState:function(t,r,s){t=t._reactInternals;var a=Ze(),n=sr(t),l=Ot(a,n);l.payload=r,s!=null&&(l.callback=s),r=Jt(t,l,n),r!==null&&(St(r,t,n,a),ka(r,t,n))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var a=Ze(),n=sr(t),l=Ot(a,n);l.tag=1,l.payload=r,s!=null&&(l.callback=s),r=Jt(t,l,n),r!==null&&(St(r,t,n,a),ka(r,t,n))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=Ze(),a=sr(t),n=Ot(s,a);n.tag=2,r!=null&&(n.callback=r),r=Jt(t,n,a),r!==null&&(St(r,t,a,s),ka(r,t,a))}};function kc(t,r,s,a,n,l,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,l,d):r.prototype&&r.prototype.isPureReactComponent?!vs(s,a)||!vs(n,l):!0}function Sc(t,r,s){var a=!1,n=Yt,l=r.contextType;return typeof l=="object"&&l!==null?l=xt(l):(n=Je(r)?pr:We.current,a=r.contextTypes,l=(a=a!=null)?Mr(t,n):Yt),r=new r(s,l),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Ta,t.stateNode=r,r._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),r}function Cc(t,r,s,a){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,a),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,a),r.state!==t&&Ta.enqueueReplaceState(r,r.state,null)}function wl(t,r,s,a){var n=t.stateNode;n.props=s,n.state=t.memoizedState,n.refs={},cl(t);var l=r.contextType;typeof l=="object"&&l!==null?n.context=xt(l):(l=Je(r)?pr:We.current,n.context=Mr(t,l)),n.state=t.memoizedState,l=r.getDerivedStateFromProps,typeof l=="function"&&(Nl(t,r,l,s),n.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(r=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),r!==n.state&&Ta.enqueueReplaceState(n,n.state,null),Sa(t,s,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function $r(t,r){try{var s="",a=r;do s+=de(a),a=a.return;while(a);var n=s}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:r,stack:n,digest:null}}function _l(t,r,s){return{value:t,source:null,stack:s??null,digest:r??null}}function kl(t,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var km=typeof WeakMap=="function"?WeakMap:Map;function Ec(t,r,s){s=Ot(-1,s),s.tag=3,s.payload={element:null};var a=r.value;return s.callback=function(){Ua||(Ua=!0,Ul=a),kl(t,r)},s}function Dc(t,r,s){s=Ot(-1,s),s.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=r.value;s.payload=function(){return a(n)},s.callback=function(){kl(t,r)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){kl(t,r),typeof a!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var d=r.stack;this.componentDidCatch(r.value,{componentStack:d!==null?d:""})}),s}function Ac(t,r,s){var a=t.pingCache;if(a===null){a=t.pingCache=new km;var n=new Set;a.set(r,n)}else n=a.get(r),n===void 0&&(n=new Set,a.set(r,n));n.has(s)||(n.add(s),t=zm.bind(null,t,r,s),r.then(t,t))}function Pc(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Rc(t,r,s,a,n){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=Ot(-1,1),r.tag=2,Jt(s,r,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=n,t)}var Sm=H.ReactCurrentOwner,et=!1;function Ye(t,r,s,a){r.child=t===null?Xo(r,null,s,a):Ur(r,t.child,s,a)}function Tc(t,r,s,a,n){s=s.render;var l=r.ref;return Hr(r,n),a=gl(t,r,s,a,l,n),s=fl(),t!==null&&!et?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~n,zt(t,r,n)):(Ee&&s&&Jn(r),r.flags|=1,Ye(t,r,a,n),r.child)}function Lc(t,r,s,a,n){if(t===null){var l=s.type;return typeof l=="function"&&!Gl(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=l,Ic(t,r,l,a,n)):(t=Wa(s.type,null,a,r,r.mode,n),t.ref=r.ref,t.return=r,r.child=t)}if(l=t.child,(t.lanes&n)===0){var d=l.memoizedProps;if(s=s.compare,s=s!==null?s:vs,s(d,a)&&t.ref===r.ref)return zt(t,r,n)}return r.flags|=1,t=nr(l,a),t.ref=r.ref,t.return=r,r.child=t}function Ic(t,r,s,a,n){if(t!==null){var l=t.memoizedProps;if(vs(l,a)&&t.ref===r.ref)if(et=!1,r.pendingProps=a=l,(t.lanes&n)!==0)(t.flags&131072)!==0&&(et=!0);else return r.lanes=t.lanes,zt(t,r,n)}return Sl(t,r,s,a,n)}function Mc(t,r,s){var a=r.pendingProps,n=a.children,l=t!==null?t.memoizedState:null;if(a.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Wr,dt),dt|=s;else{if((s&1073741824)===0)return t=l!==null?l.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,we(Wr,dt),dt|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:s,we(Wr,dt),dt|=a}else l!==null?(a=l.baseLanes|s,r.memoizedState=null):a=s,we(Wr,dt),dt|=a;return Ye(t,r,n,s),r.child}function Fc(t,r){var s=r.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function Sl(t,r,s,a,n){var l=Je(s)?pr:We.current;return l=Mr(r,l),Hr(r,n),s=gl(t,r,s,a,l,n),a=fl(),t!==null&&!et?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~n,zt(t,r,n)):(Ee&&a&&Jn(r),r.flags|=1,Ye(t,r,s,n),r.child)}function Oc(t,r,s,a,n){if(Je(s)){var l=!0;fa(r)}else l=!1;if(Hr(r,n),r.stateNode===null)Ia(t,r),Sc(r,s,a),wl(r,s,a,n),a=!0;else if(t===null){var d=r.stateNode,j=r.memoizedProps;d.props=j;var P=d.context,U=s.contextType;typeof U=="object"&&U!==null?U=xt(U):(U=Je(s)?pr:We.current,U=Mr(r,U));var W=s.getDerivedStateFromProps,Q=typeof W=="function"||typeof d.getSnapshotBeforeUpdate=="function";Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(j!==a||P!==U)&&Cc(r,d,a,U),Xt=!1;var V=r.memoizedState;d.state=V,Sa(r,a,d,n),P=r.memoizedState,j!==a||V!==P||Xe.current||Xt?(typeof W=="function"&&(Nl(r,s,W,a),P=r.memoizedState),(j=Xt||kc(r,s,j,a,V,P,U))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=a,r.memoizedState=P),d.props=a,d.state=P,d.context=U,a=j):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),a=!1)}else{d=r.stateNode,ec(t,r),j=r.memoizedProps,U=r.type===r.elementType?j:wt(r.type,j),d.props=U,Q=r.pendingProps,V=d.context,P=s.contextType,typeof P=="object"&&P!==null?P=xt(P):(P=Je(s)?pr:We.current,P=Mr(r,P));var re=s.getDerivedStateFromProps;(W=typeof re=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(j!==Q||V!==P)&&Cc(r,d,a,P),Xt=!1,V=r.memoizedState,d.state=V,Sa(r,a,d,n);var ae=r.memoizedState;j!==Q||V!==ae||Xe.current||Xt?(typeof re=="function"&&(Nl(r,s,re,a),ae=r.memoizedState),(U=Xt||kc(r,s,U,a,V,ae,P)||!1)?(W||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,ae,P),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,ae,P)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||j===t.memoizedProps&&V===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&V===t.memoizedState||(r.flags|=1024),r.memoizedProps=a,r.memoizedState=ae),d.props=a,d.state=ae,d.context=P,a=U):(typeof d.componentDidUpdate!="function"||j===t.memoizedProps&&V===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&V===t.memoizedState||(r.flags|=1024),a=!1)}return Cl(t,r,s,a,l,n)}function Cl(t,r,s,a,n,l){Fc(t,r);var d=(r.flags&128)!==0;if(!a&&!d)return n&&qo(r,s,!1),zt(t,r,l);a=r.stateNode,Sm.current=r;var j=d&&typeof s.getDerivedStateFromError!="function"?null:a.render();return r.flags|=1,t!==null&&d?(r.child=Ur(r,t.child,null,l),r.child=Ur(r,null,j,l)):Ye(t,r,j,l),r.memoizedState=a.state,n&&qo(r,s,!0),r.child}function zc(t){var r=t.stateNode;r.pendingContext?Bo(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Bo(t,r.context,!1),dl(t,r.containerInfo)}function Uc(t,r,s,a,n){return zr(),sl(n),r.flags|=256,Ye(t,r,s,a),r.child}var El={dehydrated:null,treeContext:null,retryLane:0};function Dl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bc(t,r,s){var a=r.pendingProps,n=De.current,l=!1,d=(r.flags&128)!==0,j;if((j=d)||(j=t!==null&&t.memoizedState===null?!1:(n&2)!==0),j?(l=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),we(De,n&1),t===null)return rl(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(d=a.children,t=a.fallback,l?(a=r.mode,l=r.child,d={mode:"hidden",children:d},(a&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=d):l=Ga(d,a,0,null),t=wr(t,a,s,null),l.return=r,t.return=r,l.sibling=t,r.child=l,r.child.memoizedState=Dl(s),r.memoizedState=El,t):Al(r,d));if(n=t.memoizedState,n!==null&&(j=n.dehydrated,j!==null))return Cm(t,r,d,a,j,n,s);if(l){l=a.fallback,d=r.mode,n=t.child,j=n.sibling;var P={mode:"hidden",children:a.children};return(d&1)===0&&r.child!==n?(a=r.child,a.childLanes=0,a.pendingProps=P,r.deletions=null):(a=nr(n,P),a.subtreeFlags=n.subtreeFlags&14680064),j!==null?l=nr(j,l):(l=wr(l,d,s,null),l.flags|=2),l.return=r,a.return=r,a.sibling=l,r.child=a,a=l,l=r.child,d=t.child.memoizedState,d=d===null?Dl(s):{baseLanes:d.baseLanes|s,cachePool:null,transitions:d.transitions},l.memoizedState=d,l.childLanes=t.childLanes&~s,r.memoizedState=El,a}return l=t.child,t=l.sibling,a=nr(l,{mode:"visible",children:a.children}),(r.mode&1)===0&&(a.lanes=s),a.return=r,a.sibling=null,t!==null&&(s=r.deletions,s===null?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=a,r.memoizedState=null,a}function Al(t,r){return r=Ga({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function La(t,r,s,a){return a!==null&&sl(a),Ur(r,t.child,null,s),t=Al(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Cm(t,r,s,a,n,l,d){if(s)return r.flags&256?(r.flags&=-257,a=_l(Error(u(422))),La(t,r,d,a)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(l=a.fallback,n=r.mode,a=Ga({mode:"visible",children:a.children},n,0,null),l=wr(l,n,d,null),l.flags|=2,a.return=r,l.return=r,a.sibling=l,r.child=a,(r.mode&1)!==0&&Ur(r,t.child,null,d),r.child.memoizedState=Dl(d),r.memoizedState=El,l);if((r.mode&1)===0)return La(t,r,d,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var j=a.dgst;return a=j,l=Error(u(419)),a=_l(l,a,void 0),La(t,r,d,a)}if(j=(d&t.childLanes)!==0,et||j){if(a=Be,a!==null){switch(d&-d){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=(n&(a.suspendedLanes|d))!==0?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,Ft(t,n),St(a,t,n,-1))}return Wl(),a=_l(Error(u(421))),La(t,r,d,a)}return n.data==="$?"?(r.flags|=128,r.child=t.child,r=Um.bind(null,t),n._reactRetry=r,null):(t=l.treeContext,ct=Kt(n.nextSibling),ot=r,Ee=!0,Nt=null,t!==null&&(mt[pt++]=It,mt[pt++]=Mt,mt[pt++]=xr,It=t.id,Mt=t.overflow,xr=r),r=Al(r,a.children),r.flags|=4096,r)}function Hc(t,r,s){t.lanes|=r;var a=t.alternate;a!==null&&(a.lanes|=r),il(t.return,r,s)}function Pl(t,r,s,a,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:n}:(l.isBackwards=r,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=s,l.tailMode=n)}function qc(t,r,s){var a=r.pendingProps,n=a.revealOrder,l=a.tail;if(Ye(t,r,a.children,s),a=De.current,(a&2)!==0)a=a&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hc(t,s,r);else if(t.tag===19)Hc(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(we(De,a),(r.mode&1)===0)r.memoizedState=null;else switch(n){case"forwards":for(s=r.child,n=null;s!==null;)t=s.alternate,t!==null&&Ca(t)===null&&(n=s),s=s.sibling;s=n,s===null?(n=r.child,r.child=null):(n=s.sibling,s.sibling=null),Pl(r,!1,n,s,l);break;case"backwards":for(s=null,n=r.child,r.child=null;n!==null;){if(t=n.alternate,t!==null&&Ca(t)===null){r.child=n;break}t=n.sibling,n.sibling=s,s=n,n=t}Pl(r,!0,s,null,l);break;case"together":Pl(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ia(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function zt(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),vr|=r.lanes,(s&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(u(153));if(r.child!==null){for(t=r.child,s=nr(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=nr(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function Em(t,r,s){switch(r.tag){case 3:zc(r),zr();break;case 5:sc(r);break;case 1:Je(r.type)&&fa(r);break;case 4:dl(r,r.stateNode.containerInfo);break;case 10:var a=r.type._context,n=r.memoizedProps.value;we(wa,a._currentValue),a._currentValue=n;break;case 13:if(a=r.memoizedState,a!==null)return a.dehydrated!==null?(we(De,De.current&1),r.flags|=128,null):(s&r.child.childLanes)!==0?Bc(t,r,s):(we(De,De.current&1),t=zt(t,r,s),t!==null?t.sibling:null);we(De,De.current&1);break;case 19:if(a=(s&r.childLanes)!==0,(t.flags&128)!==0){if(a)return qc(t,r,s);r.flags|=128}if(n=r.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),we(De,De.current),a)break;return null;case 22:case 23:return r.lanes=0,Mc(t,r,s)}return zt(t,r,s)}var $c,Rl,Vc,Wc;$c=function(t,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Rl=function(){},Vc=function(t,r,s,a){var n=t.memoizedProps;if(n!==a){t=r.stateNode,fr(At.current);var l=null;switch(s){case"input":n=ln(t,n),a=ln(t,a),l=[];break;case"select":n=K({},n,{value:void 0}),a=K({},a,{value:void 0}),l=[];break;case"textarea":n=dn(t,n),a=dn(t,a),l=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=xa)}mn(s,a);var d;s=null;for(U in n)if(!a.hasOwnProperty(U)&&n.hasOwnProperty(U)&&n[U]!=null)if(U==="style"){var j=n[U];for(d in j)j.hasOwnProperty(d)&&(s||(s={}),s[d]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(N.hasOwnProperty(U)?l||(l=[]):(l=l||[]).push(U,null));for(U in a){var P=a[U];if(j=n?.[U],a.hasOwnProperty(U)&&P!==j&&(P!=null||j!=null))if(U==="style")if(j){for(d in j)!j.hasOwnProperty(d)||P&&P.hasOwnProperty(d)||(s||(s={}),s[d]="");for(d in P)P.hasOwnProperty(d)&&j[d]!==P[d]&&(s||(s={}),s[d]=P[d])}else s||(l||(l=[]),l.push(U,s)),s=P;else U==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,j=j?j.__html:void 0,P!=null&&j!==P&&(l=l||[]).push(U,P)):U==="children"?typeof P!="string"&&typeof P!="number"||(l=l||[]).push(U,""+P):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(N.hasOwnProperty(U)?(P!=null&&U==="onScroll"&&ke("scroll",t),l||j===P||(l=[])):(l=l||[]).push(U,P))}s&&(l=l||[]).push("style",s);var U=l;(r.updateQueue=U)&&(r.flags|=4)}},Wc=function(t,r,s,a){s!==a&&(r.flags|=4)};function Ls(t,r){if(!Ee)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Ke(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,a=0;if(r)for(var n=t.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=s,r}function Dm(t,r,s){var a=r.pendingProps;switch(el(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(r),null;case 1:return Je(r.type)&&ga(),Ke(r),null;case 3:return a=r.stateNode,qr(),Se(Xe),Se(We),pl(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ba(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Nt!==null&&(ql(Nt),Nt=null))),Rl(t,r),Ke(r),null;case 5:ul(r);var n=fr(Ds.current);if(s=r.type,t!==null&&r.stateNode!=null)Vc(t,r,s,a,n),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!a){if(r.stateNode===null)throw Error(u(166));return Ke(r),null}if(t=fr(At.current),ba(r)){a=r.stateNode,s=r.type;var l=r.memoizedProps;switch(a[Dt]=r,a[_s]=l,t=(r.mode&1)!==0,s){case"dialog":ke("cancel",a),ke("close",a);break;case"iframe":case"object":case"embed":ke("load",a);break;case"video":case"audio":for(n=0;n<bs.length;n++)ke(bs[n],a);break;case"source":ke("error",a);break;case"img":case"image":case"link":ke("error",a),ke("load",a);break;case"details":ke("toggle",a);break;case"input":ki(a,l),ke("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},ke("invalid",a);break;case"textarea":Ei(a,l),ke("invalid",a)}mn(s,l),n=null;for(var d in l)if(l.hasOwnProperty(d)){var j=l[d];d==="children"?typeof j=="string"?a.textContent!==j&&(l.suppressHydrationWarning!==!0&&pa(a.textContent,j,t),n=["children",j]):typeof j=="number"&&a.textContent!==""+j&&(l.suppressHydrationWarning!==!0&&pa(a.textContent,j,t),n=["children",""+j]):N.hasOwnProperty(d)&&j!=null&&d==="onScroll"&&ke("scroll",a)}switch(s){case"input":$s(a),Ci(a,l,!0);break;case"textarea":$s(a),Ai(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=xa)}a=n,r.updateQueue=a,a!==null&&(r.flags|=4)}else{d=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pi(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=d.createElement(s,{is:a.is}):(t=d.createElement(s),s==="select"&&(d=t,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):t=d.createElementNS(t,s),t[Dt]=r,t[_s]=a,$c(t,r,!1,!1),r.stateNode=t;e:{switch(d=pn(s,a),s){case"dialog":ke("cancel",t),ke("close",t),n=a;break;case"iframe":case"object":case"embed":ke("load",t),n=a;break;case"video":case"audio":for(n=0;n<bs.length;n++)ke(bs[n],t);n=a;break;case"source":ke("error",t),n=a;break;case"img":case"image":case"link":ke("error",t),ke("load",t),n=a;break;case"details":ke("toggle",t),n=a;break;case"input":ki(t,a),n=ln(t,a),ke("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=K({},a,{value:void 0}),ke("invalid",t);break;case"textarea":Ei(t,a),n=dn(t,a),ke("invalid",t);break;default:n=a}mn(s,n),j=n;for(l in j)if(j.hasOwnProperty(l)){var P=j[l];l==="style"?Li(t,P):l==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Ri(t,P)):l==="children"?typeof P=="string"?(s!=="textarea"||P!=="")&&rs(t,P):typeof P=="number"&&rs(t,""+P):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(N.hasOwnProperty(l)?P!=null&&l==="onScroll"&&ke("scroll",t):P!=null&&A(t,l,P,d))}switch(s){case"input":$s(t),Ci(t,a,!1);break;case"textarea":$s(t),Ai(t);break;case"option":a.value!=null&&t.setAttribute("value",""+ye(a.value));break;case"select":t.multiple=!!a.multiple,l=a.value,l!=null?_r(t,!!a.multiple,l,!1):a.defaultValue!=null&&_r(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=xa)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ke(r),null;case 6:if(t&&r.stateNode!=null)Wc(t,r,t.memoizedProps,a);else{if(typeof a!="string"&&r.stateNode===null)throw Error(u(166));if(s=fr(Ds.current),fr(At.current),ba(r)){if(a=r.stateNode,s=r.memoizedProps,a[Dt]=r,(l=a.nodeValue!==s)&&(t=ot,t!==null))switch(t.tag){case 3:pa(a.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pa(a.nodeValue,s,(t.mode&1)!==0)}l&&(r.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Dt]=r,r.stateNode=a}return Ke(r),null;case 13:if(Se(De),a=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&ct!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Qo(),zr(),r.flags|=98560,l=!1;else if(l=ba(r),a!==null&&a.dehydrated!==null){if(t===null){if(!l)throw Error(u(318));if(l=r.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(u(317));l[Dt]=r}else zr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ke(r),l=!1}else Nt!==null&&(ql(Nt),Nt=null),l=!0;if(!l)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=s,r):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(De.current&1)!==0?ze===0&&(ze=3):Wl())),r.updateQueue!==null&&(r.flags|=4),Ke(r),null);case 4:return qr(),Rl(t,r),t===null&&Ns(r.stateNode.containerInfo),Ke(r),null;case 10:return ll(r.type._context),Ke(r),null;case 17:return Je(r.type)&&ga(),Ke(r),null;case 19:if(Se(De),l=r.memoizedState,l===null)return Ke(r),null;if(a=(r.flags&128)!==0,d=l.rendering,d===null)if(a)Ls(l,!1);else{if(ze!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=Ca(t),d!==null){for(r.flags|=128,Ls(l,!1),a=d.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),r.subtreeFlags=0,a=s,s=r.child;s!==null;)l=s,t=a,l.flags&=14680066,d=l.alternate,d===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,t=d.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return we(De,De.current&1|2),r.child}t=t.sibling}l.tail!==null&&Te()>Gr&&(r.flags|=128,a=!0,Ls(l,!1),r.lanes=4194304)}else{if(!a)if(t=Ca(d),t!==null){if(r.flags|=128,a=!0,s=t.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),Ls(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ee)return Ke(r),null}else 2*Te()-l.renderingStartTime>Gr&&s!==1073741824&&(r.flags|=128,a=!0,Ls(l,!1),r.lanes=4194304);l.isBackwards?(d.sibling=r.child,r.child=d):(s=l.last,s!==null?s.sibling=d:r.child=d,l.last=d)}return l.tail!==null?(r=l.tail,l.rendering=r,l.tail=r.sibling,l.renderingStartTime=Te(),r.sibling=null,s=De.current,we(De,a?s&1|2:s&1),r):(Ke(r),null);case 22:case 23:return Vl(),a=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(r.flags|=8192),a&&(r.mode&1)!==0?(dt&1073741824)!==0&&(Ke(r),r.subtreeFlags&6&&(r.flags|=8192)):Ke(r),null;case 24:return null;case 25:return null}throw Error(u(156,r.tag))}function Am(t,r){switch(el(r),r.tag){case 1:return Je(r.type)&&ga(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return qr(),Se(Xe),Se(We),pl(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return ul(r),null;case 13:if(Se(De),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(u(340));zr()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Se(De),null;case 4:return qr(),null;case 10:return ll(r.type._context),null;case 22:case 23:return Vl(),null;case 24:return null;default:return null}}var Ma=!1,Qe=!1,Pm=typeof WeakSet=="function"?WeakSet:Set,se=null;function Vr(t,r){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){Pe(t,r,a)}else s.current=null}function Tl(t,r,s){try{s()}catch(a){Pe(t,r,a)}}var Gc=!1;function Rm(t,r){if(Vn=ra,t=ko(),Fn(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var d=0,j=-1,P=-1,U=0,W=0,Q=t,V=null;t:for(;;){for(var re;Q!==s||n!==0&&Q.nodeType!==3||(j=d+n),Q!==l||a!==0&&Q.nodeType!==3||(P=d+a),Q.nodeType===3&&(d+=Q.nodeValue.length),(re=Q.firstChild)!==null;)V=Q,Q=re;for(;;){if(Q===t)break t;if(V===s&&++U===n&&(j=d),V===l&&++W===a&&(P=d),(re=Q.nextSibling)!==null)break;Q=V,V=Q.parentNode}Q=re}s=j===-1||P===-1?null:{start:j,end:P}}else s=null}s=s||{start:0,end:0}}else s=null;for(Wn={focusedElem:t,selectionRange:s},ra=!1,se=r;se!==null;)if(r=se,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,se=t;else for(;se!==null;){r=se;try{var ae=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ne=ae.memoizedProps,Le=ae.memoizedState,O=r.stateNode,L=O.getSnapshotBeforeUpdate(r.elementType===r.type?ne:wt(r.type,ne),Le);O.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var z=r.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(Z){Pe(r,r.return,Z)}if(t=r.sibling,t!==null){t.return=r.return,se=t;break}se=r.return}return ae=Gc,Gc=!1,ae}function Is(t,r,s){var a=r.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&Tl(r,s,l)}n=n.next}while(n!==a)}}function Fa(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.create;s.destroy=a()}s=s.next}while(s!==r)}}function Ll(t){var r=t.ref;if(r!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof r=="function"?r(t):r.current=t}}function Kc(t){var r=t.alternate;r!==null&&(t.alternate=null,Kc(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Dt],delete r[_s],delete r[Yn],delete r[xm],delete r[hm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qc(t){return t.tag===5||t.tag===3||t.tag===4}function Yc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qc(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Il(t,r,s){var a=t.tag;if(a===5||a===6)t=t.stateNode,r?s.nodeType===8?s.parentNode.insertBefore(t,r):s.insertBefore(t,r):(s.nodeType===8?(r=s.parentNode,r.insertBefore(t,s)):(r=s,r.appendChild(t)),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=xa));else if(a!==4&&(t=t.child,t!==null))for(Il(t,r,s),t=t.sibling;t!==null;)Il(t,r,s),t=t.sibling}function Ml(t,r,s){var a=t.tag;if(a===5||a===6)t=t.stateNode,r?s.insertBefore(t,r):s.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Ml(t,r,s),t=t.sibling;t!==null;)Ml(t,r,s),t=t.sibling}var qe=null,_t=!1;function er(t,r,s){for(s=s.child;s!==null;)Zc(t,r,s),s=s.sibling}function Zc(t,r,s){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Ys,s)}catch{}switch(s.tag){case 5:Qe||Vr(s,r);case 6:var a=qe,n=_t;qe=null,er(t,r,s),qe=a,_t=n,qe!==null&&(_t?(t=qe,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):qe.removeChild(s.stateNode));break;case 18:qe!==null&&(_t?(t=qe,s=s.stateNode,t.nodeType===8?Qn(t.parentNode,s):t.nodeType===1&&Qn(t,s),ps(t)):Qn(qe,s.stateNode));break;case 4:a=qe,n=_t,qe=s.stateNode.containerInfo,_t=!0,er(t,r,s),qe=a,_t=n;break;case 0:case 11:case 14:case 15:if(!Qe&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var l=n,d=l.destroy;l=l.tag,d!==void 0&&((l&2)!==0||(l&4)!==0)&&Tl(s,r,d),n=n.next}while(n!==a)}er(t,r,s);break;case 1:if(!Qe&&(Vr(s,r),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(j){Pe(s,r,j)}er(t,r,s);break;case 21:er(t,r,s);break;case 22:s.mode&1?(Qe=(a=Qe)||s.memoizedState!==null,er(t,r,s),Qe=a):er(t,r,s);break;default:er(t,r,s)}}function Xc(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Pm),r.forEach(function(a){var n=Bm.bind(null,t,a);s.has(a)||(s.add(a),a.then(n,n))})}}function kt(t,r){var s=r.deletions;if(s!==null)for(var a=0;a<s.length;a++){var n=s[a];try{var l=t,d=r,j=d;e:for(;j!==null;){switch(j.tag){case 5:qe=j.stateNode,_t=!1;break e;case 3:qe=j.stateNode.containerInfo,_t=!0;break e;case 4:qe=j.stateNode.containerInfo,_t=!0;break e}j=j.return}if(qe===null)throw Error(u(160));Zc(l,d,n),qe=null,_t=!1;var P=n.alternate;P!==null&&(P.return=null),n.return=null}catch(U){Pe(n,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Jc(r,t),r=r.sibling}function Jc(t,r){var s=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kt(r,t),Rt(t),a&4){try{Is(3,t,t.return),Fa(3,t)}catch(ne){Pe(t,t.return,ne)}try{Is(5,t,t.return)}catch(ne){Pe(t,t.return,ne)}}break;case 1:kt(r,t),Rt(t),a&512&&s!==null&&Vr(s,s.return);break;case 5:if(kt(r,t),Rt(t),a&512&&s!==null&&Vr(s,s.return),t.flags&32){var n=t.stateNode;try{rs(n,"")}catch(ne){Pe(t,t.return,ne)}}if(a&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,d=s!==null?s.memoizedProps:l,j=t.type,P=t.updateQueue;if(t.updateQueue=null,P!==null)try{j==="input"&&l.type==="radio"&&l.name!=null&&Si(n,l),pn(j,d);var U=pn(j,l);for(d=0;d<P.length;d+=2){var W=P[d],Q=P[d+1];W==="style"?Li(n,Q):W==="dangerouslySetInnerHTML"?Ri(n,Q):W==="children"?rs(n,Q):A(n,W,Q,U)}switch(j){case"input":on(n,l);break;case"textarea":Di(n,l);break;case"select":var V=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var re=l.value;re!=null?_r(n,!!l.multiple,re,!1):V!==!!l.multiple&&(l.defaultValue!=null?_r(n,!!l.multiple,l.defaultValue,!0):_r(n,!!l.multiple,l.multiple?[]:"",!1))}n[_s]=l}catch(ne){Pe(t,t.return,ne)}}break;case 6:if(kt(r,t),Rt(t),a&4){if(t.stateNode===null)throw Error(u(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(ne){Pe(t,t.return,ne)}}break;case 3:if(kt(r,t),Rt(t),a&4&&s!==null&&s.memoizedState.isDehydrated)try{ps(r.containerInfo)}catch(ne){Pe(t,t.return,ne)}break;case 4:kt(r,t),Rt(t);break;case 13:kt(r,t),Rt(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(zl=Te())),a&4&&Xc(t);break;case 22:if(W=s!==null&&s.memoizedState!==null,t.mode&1?(Qe=(U=Qe)||W,kt(r,t),Qe=U):kt(r,t),Rt(t),a&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!W&&(t.mode&1)!==0)for(se=t,W=t.child;W!==null;){for(Q=se=W;se!==null;){switch(V=se,re=V.child,V.tag){case 0:case 11:case 14:case 15:Is(4,V,V.return);break;case 1:Vr(V,V.return);var ae=V.stateNode;if(typeof ae.componentWillUnmount=="function"){a=V,s=V.return;try{r=a,ae.props=r.memoizedProps,ae.state=r.memoizedState,ae.componentWillUnmount()}catch(ne){Pe(a,s,ne)}}break;case 5:Vr(V,V.return);break;case 22:if(V.memoizedState!==null){rd(Q);continue}}re!==null?(re.return=V,se=re):rd(Q)}W=W.sibling}e:for(W=null,Q=t;;){if(Q.tag===5){if(W===null){W=Q;try{n=Q.stateNode,U?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(j=Q.stateNode,P=Q.memoizedProps.style,d=P!=null&&P.hasOwnProperty("display")?P.display:null,j.style.display=Ti("display",d))}catch(ne){Pe(t,t.return,ne)}}}else if(Q.tag===6){if(W===null)try{Q.stateNode.nodeValue=U?"":Q.memoizedProps}catch(ne){Pe(t,t.return,ne)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===t)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===t)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===t)break e;W===Q&&(W=null),Q=Q.return}W===Q&&(W=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:kt(r,t),Rt(t),a&4&&Xc(t);break;case 21:break;default:kt(r,t),Rt(t)}}function Rt(t){var r=t.flags;if(r&2){try{e:{for(var s=t.return;s!==null;){if(Qc(s)){var a=s;break e}s=s.return}throw Error(u(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(rs(n,""),a.flags&=-33);var l=Yc(t);Ml(t,l,n);break;case 3:case 4:var d=a.stateNode.containerInfo,j=Yc(t);Il(t,j,d);break;default:throw Error(u(161))}}catch(P){Pe(t,t.return,P)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Tm(t,r,s){se=t,ed(t)}function ed(t,r,s){for(var a=(t.mode&1)!==0;se!==null;){var n=se,l=n.child;if(n.tag===22&&a){var d=n.memoizedState!==null||Ma;if(!d){var j=n.alternate,P=j!==null&&j.memoizedState!==null||Qe;j=Ma;var U=Qe;if(Ma=d,(Qe=P)&&!U)for(se=n;se!==null;)d=se,P=d.child,d.tag===22&&d.memoizedState!==null?sd(n):P!==null?(P.return=d,se=P):sd(n);for(;l!==null;)se=l,ed(l),l=l.sibling;se=n,Ma=j,Qe=U}td(t)}else(n.subtreeFlags&8772)!==0&&l!==null?(l.return=n,se=l):td(t)}}function td(t){for(;se!==null;){var r=se;if((r.flags&8772)!==0){var s=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Qe||Fa(5,r);break;case 1:var a=r.stateNode;if(r.flags&4&&!Qe)if(s===null)a.componentDidMount();else{var n=r.elementType===r.type?s.memoizedProps:wt(r.type,s.memoizedProps);a.componentDidUpdate(n,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=r.updateQueue;l!==null&&rc(r,l,a);break;case 3:var d=r.updateQueue;if(d!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}rc(r,d,s)}break;case 5:var j=r.stateNode;if(s===null&&r.flags&4){s=j;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&s.focus();break;case"img":P.src&&(s.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var W=U.memoizedState;if(W!==null){var Q=W.dehydrated;Q!==null&&ps(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(u(163))}Qe||r.flags&512&&Ll(r)}catch(V){Pe(r,r.return,V)}}if(r===t){se=null;break}if(s=r.sibling,s!==null){s.return=r.return,se=s;break}se=r.return}}function rd(t){for(;se!==null;){var r=se;if(r===t){se=null;break}var s=r.sibling;if(s!==null){s.return=r.return,se=s;break}se=r.return}}function sd(t){for(;se!==null;){var r=se;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{Fa(4,r)}catch(P){Pe(r,s,P)}break;case 1:var a=r.stateNode;if(typeof a.componentDidMount=="function"){var n=r.return;try{a.componentDidMount()}catch(P){Pe(r,n,P)}}var l=r.return;try{Ll(r)}catch(P){Pe(r,l,P)}break;case 5:var d=r.return;try{Ll(r)}catch(P){Pe(r,d,P)}}}catch(P){Pe(r,r.return,P)}if(r===t){se=null;break}var j=r.sibling;if(j!==null){j.return=r.return,se=j;break}se=r.return}}var Lm=Math.ceil,Oa=H.ReactCurrentDispatcher,Fl=H.ReactCurrentOwner,gt=H.ReactCurrentBatchConfig,je=0,Be=null,Fe=null,$e=0,dt=0,Wr=Qt(0),ze=0,Ms=null,vr=0,za=0,Ol=0,Fs=null,tt=null,zl=0,Gr=1/0,Ut=null,Ua=!1,Ul=null,tr=null,Ba=!1,rr=null,Ha=0,Os=0,Bl=null,qa=-1,$a=0;function Ze(){return(je&6)!==0?Te():qa!==-1?qa:qa=Te()}function sr(t){return(t.mode&1)===0?1:(je&2)!==0&&$e!==0?$e&-$e:fm.transition!==null?($a===0&&($a=Qi()),$a):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:ao(t.type)),t)}function St(t,r,s,a){if(50<Os)throw Os=0,Bl=null,Error(u(185));os(t,s,a),((je&2)===0||t!==Be)&&(t===Be&&((je&2)===0&&(za|=s),ze===4&&ar(t,$e)),rt(t,a),s===1&&je===0&&(r.mode&1)===0&&(Gr=Te()+500,ya&&Zt()))}function rt(t,r){var s=t.callbackNode;fu(t,r);var a=Js(t,t===Be?$e:0);if(a===0)s!==null&&Wi(s),t.callbackNode=null,t.callbackPriority=0;else if(r=a&-a,t.callbackPriority!==r){if(s!=null&&Wi(s),r===1)t.tag===0?gm(nd.bind(null,t)):$o(nd.bind(null,t)),mm(function(){(je&6)===0&&Zt()}),s=null;else{switch(Yi(a)){case 1:s=jn;break;case 4:s=Gi;break;case 16:s=Qs;break;case 536870912:s=Ki;break;default:s=Qs}s=pd(s,ad.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function ad(t,r){if(qa=-1,$a=0,(je&6)!==0)throw Error(u(327));var s=t.callbackNode;if(Kr()&&t.callbackNode!==s)return null;var a=Js(t,t===Be?$e:0);if(a===0)return null;if((a&30)!==0||(a&t.expiredLanes)!==0||r)r=Va(t,a);else{r=a;var n=je;je|=2;var l=id();(Be!==t||$e!==r)&&(Ut=null,Gr=Te()+500,br(t,r));do try{Fm();break}catch(j){ld(t,j)}while(!0);nl(),Oa.current=l,je=n,Fe!==null?r=0:(Be=null,$e=0,r=ze)}if(r!==0){if(r===2&&(n=bn(t),n!==0&&(a=n,r=Hl(t,n))),r===1)throw s=Ms,br(t,0),ar(t,a),rt(t,Te()),s;if(r===6)ar(t,a);else{if(n=t.current.alternate,(a&30)===0&&!Im(n)&&(r=Va(t,a),r===2&&(l=bn(t),l!==0&&(a=l,r=Hl(t,l))),r===1))throw s=Ms,br(t,0),ar(t,a),rt(t,Te()),s;switch(t.finishedWork=n,t.finishedLanes=a,r){case 0:case 1:throw Error(u(345));case 2:Nr(t,tt,Ut);break;case 3:if(ar(t,a),(a&130023424)===a&&(r=zl+500-Te(),10<r)){if(Js(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){Ze(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=Kn(Nr.bind(null,t,tt,Ut),r);break}Nr(t,tt,Ut);break;case 4:if(ar(t,a),(a&4194240)===a)break;for(r=t.eventTimes,n=-1;0<a;){var d=31-jt(a);l=1<<d,d=r[d],d>n&&(n=d),a&=~l}if(a=n,a=Te()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Lm(a/1960))-a,10<a){t.timeoutHandle=Kn(Nr.bind(null,t,tt,Ut),a);break}Nr(t,tt,Ut);break;case 5:Nr(t,tt,Ut);break;default:throw Error(u(329))}}}return rt(t,Te()),t.callbackNode===s?ad.bind(null,t):null}function Hl(t,r){var s=Fs;return t.current.memoizedState.isDehydrated&&(br(t,r).flags|=256),t=Va(t,r),t!==2&&(r=tt,tt=s,r!==null&&ql(r)),t}function ql(t){tt===null?tt=t:tt.push.apply(tt,t)}function Im(t){for(var r=t;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var n=s[a],l=n.getSnapshot;n=n.value;try{if(!bt(l(),n))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ar(t,r){for(r&=~Ol,r&=~za,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var s=31-jt(r),a=1<<s;t[s]=-1,r&=~a}}function nd(t){if((je&6)!==0)throw Error(u(327));Kr();var r=Js(t,0);if((r&1)===0)return rt(t,Te()),null;var s=Va(t,r);if(t.tag!==0&&s===2){var a=bn(t);a!==0&&(r=a,s=Hl(t,a))}if(s===1)throw s=Ms,br(t,0),ar(t,r),rt(t,Te()),s;if(s===6)throw Error(u(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Nr(t,tt,Ut),rt(t,Te()),null}function $l(t,r){var s=je;je|=1;try{return t(r)}finally{je=s,je===0&&(Gr=Te()+500,ya&&Zt())}}function jr(t){rr!==null&&rr.tag===0&&(je&6)===0&&Kr();var r=je;je|=1;var s=gt.transition,a=Ne;try{if(gt.transition=null,Ne=1,t)return t()}finally{Ne=a,gt.transition=s,je=r,(je&6)===0&&Zt()}}function Vl(){dt=Wr.current,Se(Wr)}function br(t,r){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,um(s)),Fe!==null)for(s=Fe.return;s!==null;){var a=s;switch(el(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ga();break;case 3:qr(),Se(Xe),Se(We),pl();break;case 5:ul(a);break;case 4:qr();break;case 13:Se(De);break;case 19:Se(De);break;case 10:ll(a.type._context);break;case 22:case 23:Vl()}s=s.return}if(Be=t,Fe=t=nr(t.current,null),$e=dt=r,ze=0,Ms=null,Ol=za=vr=0,tt=Fs=null,gr!==null){for(r=0;r<gr.length;r++)if(s=gr[r],a=s.interleaved,a!==null){s.interleaved=null;var n=a.next,l=s.pending;if(l!==null){var d=l.next;l.next=n,a.next=d}s.pending=a}gr=null}return t}function ld(t,r){do{var s=Fe;try{if(nl(),Ea.current=Ra,Da){for(var a=Ae.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Da=!1}if(yr=0,Ue=Oe=Ae=null,As=!1,Ps=0,Fl.current=null,s===null||s.return===null){ze=1,Ms=r,Fe=null;break}e:{var l=t,d=s.return,j=s,P=r;if(r=$e,j.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var U=P,W=j,Q=W.tag;if((W.mode&1)===0&&(Q===0||Q===11||Q===15)){var V=W.alternate;V?(W.updateQueue=V.updateQueue,W.memoizedState=V.memoizedState,W.lanes=V.lanes):(W.updateQueue=null,W.memoizedState=null)}var re=Pc(d);if(re!==null){re.flags&=-257,Rc(re,d,j,l,r),re.mode&1&&Ac(l,U,r),r=re,P=U;var ae=r.updateQueue;if(ae===null){var ne=new Set;ne.add(P),r.updateQueue=ne}else ae.add(P);break e}else{if((r&1)===0){Ac(l,U,r),Wl();break e}P=Error(u(426))}}else if(Ee&&j.mode&1){var Le=Pc(d);if(Le!==null){(Le.flags&65536)===0&&(Le.flags|=256),Rc(Le,d,j,l,r),sl($r(P,j));break e}}l=P=$r(P,j),ze!==4&&(ze=2),Fs===null?Fs=[l]:Fs.push(l),l=d;do{switch(l.tag){case 3:l.flags|=65536,r&=-r,l.lanes|=r;var O=Ec(l,P,r);tc(l,O);break e;case 1:j=P;var L=l.type,z=l.stateNode;if((l.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(tr===null||!tr.has(z)))){l.flags|=65536,r&=-r,l.lanes|=r;var Z=Dc(l,j,r);tc(l,Z);break e}}l=l.return}while(l!==null)}cd(s)}catch(le){r=le,Fe===s&&s!==null&&(Fe=s=s.return);continue}break}while(!0)}function id(){var t=Oa.current;return Oa.current=Ra,t===null?Ra:t}function Wl(){(ze===0||ze===3||ze===2)&&(ze=4),Be===null||(vr&268435455)===0&&(za&268435455)===0||ar(Be,$e)}function Va(t,r){var s=je;je|=2;var a=id();(Be!==t||$e!==r)&&(Ut=null,br(t,r));do try{Mm();break}catch(n){ld(t,n)}while(!0);if(nl(),je=s,Oa.current=a,Fe!==null)throw Error(u(261));return Be=null,$e=0,ze}function Mm(){for(;Fe!==null;)od(Fe)}function Fm(){for(;Fe!==null&&!ou();)od(Fe)}function od(t){var r=md(t.alternate,t,dt);t.memoizedProps=t.pendingProps,r===null?cd(t):Fe=r,Fl.current=null}function cd(t){var r=t;do{var s=r.alternate;if(t=r.return,(r.flags&32768)===0){if(s=Dm(s,r,dt),s!==null){Fe=s;return}}else{if(s=Am(s,r),s!==null){s.flags&=32767,Fe=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Fe=null;return}}if(r=r.sibling,r!==null){Fe=r;return}Fe=r=t}while(r!==null);ze===0&&(ze=5)}function Nr(t,r,s){var a=Ne,n=gt.transition;try{gt.transition=null,Ne=1,Om(t,r,s,a)}finally{gt.transition=n,Ne=a}return null}function Om(t,r,s,a){do Kr();while(rr!==null);if((je&6)!==0)throw Error(u(327));s=t.finishedWork;var n=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(u(177));t.callbackNode=null,t.callbackPriority=0;var l=s.lanes|s.childLanes;if(yu(t,l),t===Be&&(Fe=Be=null,$e=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ba||(Ba=!0,pd(Qs,function(){return Kr(),null})),l=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||l){l=gt.transition,gt.transition=null;var d=Ne;Ne=1;var j=je;je|=4,Fl.current=null,Rm(t,s),Jc(s,t),am(Wn),ra=!!Vn,Wn=Vn=null,t.current=s,Tm(s),cu(),je=j,Ne=d,gt.transition=l}else t.current=s;if(Ba&&(Ba=!1,rr=t,Ha=n),l=t.pendingLanes,l===0&&(tr=null),mu(s.stateNode),rt(t,Te()),r!==null)for(a=t.onRecoverableError,s=0;s<r.length;s++)n=r[s],a(n.value,{componentStack:n.stack,digest:n.digest});if(Ua)throw Ua=!1,t=Ul,Ul=null,t;return(Ha&1)!==0&&t.tag!==0&&Kr(),l=t.pendingLanes,(l&1)!==0?t===Bl?Os++:(Os=0,Bl=t):Os=0,Zt(),null}function Kr(){if(rr!==null){var t=Yi(Ha),r=gt.transition,s=Ne;try{if(gt.transition=null,Ne=16>t?16:t,rr===null)var a=!1;else{if(t=rr,rr=null,Ha=0,(je&6)!==0)throw Error(u(331));var n=je;for(je|=4,se=t.current;se!==null;){var l=se,d=l.child;if((se.flags&16)!==0){var j=l.deletions;if(j!==null){for(var P=0;P<j.length;P++){var U=j[P];for(se=U;se!==null;){var W=se;switch(W.tag){case 0:case 11:case 15:Is(8,W,l)}var Q=W.child;if(Q!==null)Q.return=W,se=Q;else for(;se!==null;){W=se;var V=W.sibling,re=W.return;if(Kc(W),W===U){se=null;break}if(V!==null){V.return=re,se=V;break}se=re}}}var ae=l.alternate;if(ae!==null){var ne=ae.child;if(ne!==null){ae.child=null;do{var Le=ne.sibling;ne.sibling=null,ne=Le}while(ne!==null)}}se=l}}if((l.subtreeFlags&2064)!==0&&d!==null)d.return=l,se=d;else e:for(;se!==null;){if(l=se,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:Is(9,l,l.return)}var O=l.sibling;if(O!==null){O.return=l.return,se=O;break e}se=l.return}}var L=t.current;for(se=L;se!==null;){d=se;var z=d.child;if((d.subtreeFlags&2064)!==0&&z!==null)z.return=d,se=z;else e:for(d=L;se!==null;){if(j=se,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:Fa(9,j)}}catch(le){Pe(j,j.return,le)}if(j===d){se=null;break e}var Z=j.sibling;if(Z!==null){Z.return=j.return,se=Z;break e}se=j.return}}if(je=n,Zt(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Ys,t)}catch{}a=!0}return a}finally{Ne=s,gt.transition=r}}return!1}function dd(t,r,s){r=$r(s,r),r=Ec(t,r,1),t=Jt(t,r,1),r=Ze(),t!==null&&(os(t,1,r),rt(t,r))}function Pe(t,r,s){if(t.tag===3)dd(t,t,s);else for(;r!==null;){if(r.tag===3){dd(r,t,s);break}else if(r.tag===1){var a=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(tr===null||!tr.has(a))){t=$r(s,t),t=Dc(r,t,1),r=Jt(r,t,1),t=Ze(),r!==null&&(os(r,1,t),rt(r,t));break}}r=r.return}}function zm(t,r,s){var a=t.pingCache;a!==null&&a.delete(r),r=Ze(),t.pingedLanes|=t.suspendedLanes&s,Be===t&&($e&s)===s&&(ze===4||ze===3&&($e&130023424)===$e&&500>Te()-zl?br(t,0):Ol|=s),rt(t,r)}function ud(t,r){r===0&&((t.mode&1)===0?r=1:(r=Xs,Xs<<=1,(Xs&130023424)===0&&(Xs=4194304)));var s=Ze();t=Ft(t,r),t!==null&&(os(t,r,s),rt(t,s))}function Um(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),ud(t,s)}function Bm(t,r){var s=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(s=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(u(314))}a!==null&&a.delete(r),ud(t,s)}var md;md=function(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps||Xe.current)et=!0;else{if((t.lanes&s)===0&&(r.flags&128)===0)return et=!1,Em(t,r,s);et=(t.flags&131072)!==0}else et=!1,Ee&&(r.flags&1048576)!==0&&Vo(r,ja,r.index);switch(r.lanes=0,r.tag){case 2:var a=r.type;Ia(t,r),t=r.pendingProps;var n=Mr(r,We.current);Hr(r,s),n=gl(null,r,a,t,n,s);var l=fl();return r.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Je(a)?(l=!0,fa(r)):l=!1,r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,cl(r),n.updater=Ta,r.stateNode=n,n._reactInternals=r,wl(r,a,t,s),r=Cl(null,r,a,!0,l,s)):(r.tag=0,Ee&&l&&Jn(r),Ye(null,r,n,s),r=r.child),r;case 16:a=r.elementType;e:{switch(Ia(t,r),t=r.pendingProps,n=a._init,a=n(a._payload),r.type=a,n=r.tag=qm(a),t=wt(a,t),n){case 0:r=Sl(null,r,a,t,s);break e;case 1:r=Oc(null,r,a,t,s);break e;case 11:r=Tc(null,r,a,t,s);break e;case 14:r=Lc(null,r,a,wt(a.type,t),s);break e}throw Error(u(306,a,""))}return r;case 0:return a=r.type,n=r.pendingProps,n=r.elementType===a?n:wt(a,n),Sl(t,r,a,n,s);case 1:return a=r.type,n=r.pendingProps,n=r.elementType===a?n:wt(a,n),Oc(t,r,a,n,s);case 3:e:{if(zc(r),t===null)throw Error(u(387));a=r.pendingProps,l=r.memoizedState,n=l.element,ec(t,r),Sa(r,a,null,s);var d=r.memoizedState;if(a=d.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},r.updateQueue.baseState=l,r.memoizedState=l,r.flags&256){n=$r(Error(u(423)),r),r=Uc(t,r,a,s,n);break e}else if(a!==n){n=$r(Error(u(424)),r),r=Uc(t,r,a,s,n);break e}else for(ct=Kt(r.stateNode.containerInfo.firstChild),ot=r,Ee=!0,Nt=null,s=Xo(r,null,a,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(zr(),a===n){r=zt(t,r,s);break e}Ye(t,r,a,s)}r=r.child}return r;case 5:return sc(r),t===null&&rl(r),a=r.type,n=r.pendingProps,l=t!==null?t.memoizedProps:null,d=n.children,Gn(a,n)?d=null:l!==null&&Gn(a,l)&&(r.flags|=32),Fc(t,r),Ye(t,r,d,s),r.child;case 6:return t===null&&rl(r),null;case 13:return Bc(t,r,s);case 4:return dl(r,r.stateNode.containerInfo),a=r.pendingProps,t===null?r.child=Ur(r,null,a,s):Ye(t,r,a,s),r.child;case 11:return a=r.type,n=r.pendingProps,n=r.elementType===a?n:wt(a,n),Tc(t,r,a,n,s);case 7:return Ye(t,r,r.pendingProps,s),r.child;case 8:return Ye(t,r,r.pendingProps.children,s),r.child;case 12:return Ye(t,r,r.pendingProps.children,s),r.child;case 10:e:{if(a=r.type._context,n=r.pendingProps,l=r.memoizedProps,d=n.value,we(wa,a._currentValue),a._currentValue=d,l!==null)if(bt(l.value,d)){if(l.children===n.children&&!Xe.current){r=zt(t,r,s);break e}}else for(l=r.child,l!==null&&(l.return=r);l!==null;){var j=l.dependencies;if(j!==null){d=l.child;for(var P=j.firstContext;P!==null;){if(P.context===a){if(l.tag===1){P=Ot(-1,s&-s),P.tag=2;var U=l.updateQueue;if(U!==null){U=U.shared;var W=U.pending;W===null?P.next=P:(P.next=W.next,W.next=P),U.pending=P}}l.lanes|=s,P=l.alternate,P!==null&&(P.lanes|=s),il(l.return,s,r),j.lanes|=s;break}P=P.next}}else if(l.tag===10)d=l.type===r.type?null:l.child;else if(l.tag===18){if(d=l.return,d===null)throw Error(u(341));d.lanes|=s,j=d.alternate,j!==null&&(j.lanes|=s),il(d,s,r),d=l.sibling}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===r){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}Ye(t,r,n.children,s),r=r.child}return r;case 9:return n=r.type,a=r.pendingProps.children,Hr(r,s),n=xt(n),a=a(n),r.flags|=1,Ye(t,r,a,s),r.child;case 14:return a=r.type,n=wt(a,r.pendingProps),n=wt(a.type,n),Lc(t,r,a,n,s);case 15:return Ic(t,r,r.type,r.pendingProps,s);case 17:return a=r.type,n=r.pendingProps,n=r.elementType===a?n:wt(a,n),Ia(t,r),r.tag=1,Je(a)?(t=!0,fa(r)):t=!1,Hr(r,s),Sc(r,a,n),wl(r,a,n,s),Cl(null,r,a,!0,t,s);case 19:return qc(t,r,s);case 22:return Mc(t,r,s)}throw Error(u(156,r.tag))};function pd(t,r){return Vi(t,r)}function Hm(t,r,s,a){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(t,r,s,a){return new Hm(t,r,s,a)}function Gl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qm(t){if(typeof t=="function")return Gl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_e)return 11;if(t===Y)return 14}return 2}function nr(t,r){var s=t.alternate;return s===null?(s=ft(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Wa(t,r,s,a,n,l){var d=2;if(a=t,typeof t=="function")Gl(t)&&(d=1);else if(typeof t=="string")d=5;else e:switch(t){case F:return wr(s.children,n,l,r);case te:d=8,n|=8;break;case q:return t=ft(12,s,r,n|2),t.elementType=q,t.lanes=l,t;case he:return t=ft(13,s,r,n),t.elementType=he,t.lanes=l,t;case ge:return t=ft(19,s,r,n),t.elementType=ge,t.lanes=l,t;case J:return Ga(s,n,l,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ce:d=10;break e;case Me:d=9;break e;case _e:d=11;break e;case Y:d=14;break e;case X:d=16,a=null;break e}throw Error(u(130,t==null?t:typeof t,""))}return r=ft(d,s,r,n),r.elementType=t,r.type=a,r.lanes=l,r}function wr(t,r,s,a){return t=ft(7,t,a,r),t.lanes=s,t}function Ga(t,r,s,a){return t=ft(22,t,a,r),t.elementType=J,t.lanes=s,t.stateNode={isHidden:!1},t}function Kl(t,r,s){return t=ft(6,t,null,r),t.lanes=s,t}function Ql(t,r,s){return r=ft(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function $m(t,r,s,a,n){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nn(0),this.expirationTimes=Nn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Yl(t,r,s,a,n,l,d,j,P){return t=new $m(t,r,s,j,P),r===1?(r=1,l===!0&&(r|=8)):r=0,l=ft(3,null,null,r),t.current=l,l.stateNode=t,l.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},cl(l),t}function Vm(t,r,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:a==null?null:""+a,children:t,containerInfo:r,implementation:s}}function xd(t){if(!t)return Yt;t=t._reactInternals;e:{if(ur(t)!==t||t.tag!==1)throw Error(u(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Je(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(u(171))}if(t.tag===1){var s=t.type;if(Je(s))return Ho(t,s,r)}return r}function hd(t,r,s,a,n,l,d,j,P){return t=Yl(s,a,!0,t,n,l,d,j,P),t.context=xd(null),s=t.current,a=Ze(),n=sr(s),l=Ot(a,n),l.callback=r??null,Jt(s,l,n),t.current.lanes=n,os(t,n,a),rt(t,a),t}function Ka(t,r,s,a){var n=r.current,l=Ze(),d=sr(n);return s=xd(s),r.context===null?r.context=s:r.pendingContext=s,r=Ot(l,d),r.payload={element:t},a=a===void 0?null:a,a!==null&&(r.callback=a),t=Jt(n,r,d),t!==null&&(St(t,n,d,l),ka(t,n,d)),d}function Qa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gd(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function Zl(t,r){gd(t,r),(t=t.alternate)&&gd(t,r)}function Wm(){return null}var fd=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xl(t){this._internalRoot=t}Ya.prototype.render=Xl.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(u(409));Ka(t,r,null,null)},Ya.prototype.unmount=Xl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;jr(function(){Ka(null,t,null,null)}),r[Tt]=null}};function Ya(t){this._internalRoot=t}Ya.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ji();t={blockedOn:null,target:t,priority:r};for(var s=0;s<Vt.length&&r!==0&&r<Vt[s].priority;s++);Vt.splice(s,0,t),s===0&&ro(t)}};function Jl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Za(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yd(){}function Gm(t,r,s,a,n){if(n){if(typeof a=="function"){var l=a;a=function(){var U=Qa(d);l.call(U)}}var d=hd(r,a,t,0,null,!1,!1,"",yd);return t._reactRootContainer=d,t[Tt]=d.current,Ns(t.nodeType===8?t.parentNode:t),jr(),d}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var j=a;a=function(){var U=Qa(P);j.call(U)}}var P=Yl(t,0,!1,null,null,!1,!1,"",yd);return t._reactRootContainer=P,t[Tt]=P.current,Ns(t.nodeType===8?t.parentNode:t),jr(function(){Ka(r,P,s,a)}),P}function Xa(t,r,s,a,n){var l=s._reactRootContainer;if(l){var d=l;if(typeof n=="function"){var j=n;n=function(){var P=Qa(d);j.call(P)}}Ka(r,d,t,n)}else d=Gm(s,r,t,n,a);return Qa(d)}Zi=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var s=is(r.pendingLanes);s!==0&&(wn(r,s|1),rt(r,Te()),(je&6)===0&&(Gr=Te()+500,Zt()))}break;case 13:jr(function(){var a=Ft(t,1);if(a!==null){var n=Ze();St(a,t,1,n)}}),Zl(t,1)}},_n=function(t){if(t.tag===13){var r=Ft(t,134217728);if(r!==null){var s=Ze();St(r,t,134217728,s)}Zl(t,134217728)}},Xi=function(t){if(t.tag===13){var r=sr(t),s=Ft(t,r);if(s!==null){var a=Ze();St(s,t,r,a)}Zl(t,r)}},Ji=function(){return Ne},eo=function(t,r){var s=Ne;try{return Ne=t,r()}finally{Ne=s}},gn=function(t,r,s){switch(r){case"input":if(on(t,s),r=s.name,s.type==="radio"&&r!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<s.length;r++){var a=s[r];if(a!==t&&a.form===t.form){var n=ha(a);if(!n)throw Error(u(90));_i(a),on(a,n)}}}break;case"textarea":Di(t,s);break;case"select":r=s.value,r!=null&&_r(t,!!s.multiple,r,!1)}},Oi=$l,zi=jr;var Km={usingClientEntryPoint:!1,Events:[ks,Lr,ha,Mi,Fi,$l]},zs={findFiberByHostInstance:mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qm={bundleType:zs.bundleType,version:zs.version,rendererPackageName:zs.rendererPackageName,rendererConfig:zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qi(t),t===null?null:t.stateNode},findFiberByHostInstance:zs.findFiberByHostInstance||Wm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{Ys=Ja.inject(Qm),Et=Ja}catch{}}return st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Km,st.createPortal=function(t,r){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jl(r))throw Error(u(200));return Vm(t,r,null,s)},st.createRoot=function(t,r){if(!Jl(t))throw Error(u(299));var s=!1,a="",n=fd;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(n=r.onRecoverableError)),r=Yl(t,1,!1,null,null,s,!1,a,n),t[Tt]=r.current,Ns(t.nodeType===8?t.parentNode:t),new Xl(r)},st.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(u(188)):(t=Object.keys(t).join(","),Error(u(268,t)));return t=qi(r),t=t===null?null:t.stateNode,t},st.flushSync=function(t){return jr(t)},st.hydrate=function(t,r,s){if(!Za(r))throw Error(u(200));return Xa(null,t,r,!0,s)},st.hydrateRoot=function(t,r,s){if(!Jl(t))throw Error(u(405));var a=s!=null&&s.hydratedSources||null,n=!1,l="",d=fd;if(s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),r=hd(r,null,t,1,s??null,n,!1,l,d),t[Tt]=r.current,Ns(t),a)for(t=0;t<a.length;t++)s=a[t],n=s._getVersion,n=n(s._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[s,n]:r.mutableSourceEagerHydrationData.push(s,n);return new Ya(r)},st.render=function(t,r,s){if(!Za(r))throw Error(u(200));return Xa(null,t,r,!1,s)},st.unmountComponentAtNode=function(t){if(!Za(t))throw Error(u(40));return t._reactRootContainer?(jr(function(){Xa(null,null,t,!1,function(){t._reactRootContainer=null,t[Tt]=null})}),!0):!1},st.unstable_batchedUpdates=$l,st.unstable_renderSubtreeIntoContainer=function(t,r,s,a){if(!Za(s))throw Error(u(200));if(t==null||t._reactInternals===void 0)throw Error(u(38));return Xa(t,r,s,!1,a)},st.version="18.3.1-next-f1338f8080-20240426",st}var Sd;function Bd(){if(Sd)return ri.exports;Sd=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(c){console.error(c)}}return i(),ri.exports=np(),ri.exports}var Cd;function lp(){if(Cd)return en;Cd=1;var i=Bd();return en.createRoot=i.createRoot,en.hydrateRoot=i.hydrateRoot,en}var ip=lp();const op=Ud(ip);Bd();function Bs(){return Bs=Object.assign?Object.assign.bind():function(i){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(i[g]=u[g])}return i},Bs.apply(this,arguments)}var ir;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(ir||(ir={}));const Ed="popstate";function cp(i){i===void 0&&(i={});function c(g,N){let{pathname:y,search:w,hash:v}=g.location;return ii("",{pathname:y,search:w,hash:v},N.state&&N.state.usr||null,N.state&&N.state.key||"default")}function u(g,N){return typeof N=="string"?N:rn(N)}return up(c,u,null,i)}function Ie(i,c){if(i===!1||i===null||typeof i>"u")throw new Error(c)}function gi(i,c){if(!i){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function dp(){return Math.random().toString(36).substr(2,8)}function Dd(i,c){return{usr:i.state,key:i.key,idx:c}}function ii(i,c,u,g){return u===void 0&&(u=null),Bs({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof c=="string"?Xr(c):c,{state:u,key:c&&c.key||g||dp()})}function rn(i){let{pathname:c="/",search:u="",hash:g=""}=i;return u&&u!=="?"&&(c+=u.charAt(0)==="?"?u:"?"+u),g&&g!=="#"&&(c+=g.charAt(0)==="#"?g:"#"+g),c}function Xr(i){let c={};if(i){let u=i.indexOf("#");u>=0&&(c.hash=i.substr(u),i=i.substr(0,u));let g=i.indexOf("?");g>=0&&(c.search=i.substr(g),i=i.substr(0,g)),i&&(c.pathname=i)}return c}function up(i,c,u,g){g===void 0&&(g={});let{window:N=document.defaultView,v5Compat:y=!1}=g,w=N.history,v=ir.Pop,m=null,E=p();E==null&&(E=0,w.replaceState(Bs({},w.state,{idx:E}),""));function p(){return(w.state||{idx:null}).idx}function b(){v=ir.Pop;let x=p(),o=x==null?null:x-E;E=x,m&&m({action:v,location:C.location,delta:o})}function _(x,o){v=ir.Push;let k=ii(C.location,x,o);E=p()+1;let A=Dd(k,E),H=C.createHref(k);try{w.pushState(A,"",H)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;N.location.assign(H)}y&&m&&m({action:v,location:C.location,delta:1})}function M(x,o){v=ir.Replace;let k=ii(C.location,x,o);E=p();let A=Dd(k,E),H=C.createHref(k);w.replaceState(A,"",H),y&&m&&m({action:v,location:C.location,delta:0})}function D(x){let o=N.location.origin!=="null"?N.location.origin:N.location.href,k=typeof x=="string"?x:rn(x);return k=k.replace(/ $/,"%20"),Ie(o,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,o)}let C={get action(){return v},get location(){return i(N,w)},listen(x){if(m)throw new Error("A history only accepts one active listener");return N.addEventListener(Ed,b),m=x,()=>{N.removeEventListener(Ed,b),m=null}},createHref(x){return c(N,x)},createURL:D,encodeLocation(x){let o=D(x);return{pathname:o.pathname,search:o.search,hash:o.hash}},push:_,replace:M,go(x){return w.go(x)}};return C}var Ad;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Ad||(Ad={}));function mp(i,c,u){return u===void 0&&(u="/"),pp(i,c,u)}function pp(i,c,u,g){let N=typeof c=="string"?Xr(c):c,y=fi(N.pathname||"/",u);if(y==null)return null;let w=Hd(i);xp(w);let v=null;for(let m=0;v==null&&m<w.length;++m){let E=Sp(y);v=wp(w[m],E)}return v}function Hd(i,c,u,g){c===void 0&&(c=[]),u===void 0&&(u=[]),g===void 0&&(g="");let N=(y,w,v)=>{let m={relativePath:v===void 0?y.path||"":v,caseSensitive:y.caseSensitive===!0,childrenIndex:w,route:y};m.relativePath.startsWith("/")&&(Ie(m.relativePath.startsWith(g),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+g+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(g.length));let E=cr([g,m.relativePath]),p=u.concat(m);y.children&&y.children.length>0&&(Ie(y.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),Hd(y.children,c,p,E)),!(y.path==null&&!y.index)&&c.push({path:E,score:bp(E,y.index),routesMeta:p})};return i.forEach((y,w)=>{var v;if(y.path===""||!((v=y.path)!=null&&v.includes("?")))N(y,w);else for(let m of qd(y.path))N(y,w,m)}),c}function qd(i){let c=i.split("/");if(c.length===0)return[];let[u,...g]=c,N=u.endsWith("?"),y=u.replace(/\?$/,"");if(g.length===0)return N?[y,""]:[y];let w=qd(g.join("/")),v=[];return v.push(...w.map(m=>m===""?y:[y,m].join("/"))),N&&v.push(...w),v.map(m=>i.startsWith("/")&&m===""?"/":m)}function xp(i){i.sort((c,u)=>c.score!==u.score?u.score-c.score:Np(c.routesMeta.map(g=>g.childrenIndex),u.routesMeta.map(g=>g.childrenIndex)))}const hp=/^:[\w-]+$/,gp=3,fp=2,yp=1,vp=10,jp=-2,Pd=i=>i==="*";function bp(i,c){let u=i.split("/"),g=u.length;return u.some(Pd)&&(g+=jp),c&&(g+=fp),u.filter(N=>!Pd(N)).reduce((N,y)=>N+(hp.test(y)?gp:y===""?yp:vp),g)}function Np(i,c){return i.length===c.length&&i.slice(0,-1).every((g,N)=>g===c[N])?i[i.length-1]-c[c.length-1]:0}function wp(i,c,u){let{routesMeta:g}=i,N={},y="/",w=[];for(let v=0;v<g.length;++v){let m=g[v],E=v===g.length-1,p=y==="/"?c:c.slice(y.length)||"/",b=_p({path:m.relativePath,caseSensitive:m.caseSensitive,end:E},p),_=m.route;if(!b)return null;Object.assign(N,b.params),w.push({params:N,pathname:cr([y,b.pathname]),pathnameBase:Pp(cr([y,b.pathnameBase])),route:_}),b.pathnameBase!=="/"&&(y=cr([y,b.pathnameBase]))}return w}function _p(i,c){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[u,g]=kp(i.path,i.caseSensitive,i.end),N=c.match(u);if(!N)return null;let y=N[0],w=y.replace(/(.)\/+$/,"$1"),v=N.slice(1);return{params:g.reduce((E,p,b)=>{let{paramName:_,isOptional:M}=p;if(_==="*"){let C=v[b]||"";w=y.slice(0,y.length-C.length).replace(/(.)\/+$/,"$1")}const D=v[b];return M&&!D?E[_]=void 0:E[_]=(D||"").replace(/%2F/g,"/"),E},{}),pathname:y,pathnameBase:w,pattern:i}}function kp(i,c,u){c===void 0&&(c=!1),u===void 0&&(u=!0),gi(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let g=[],N="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,v,m)=>(g.push({paramName:v,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(g.push({paramName:"*"}),N+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):u?N+="\\/*$":i!==""&&i!=="/"&&(N+="(?:(?=\\/|$))"),[new RegExp(N,c?void 0:"i"),g]}function Sp(i){try{return i.split("/").map(c=>decodeURIComponent(c).replace(/\//g,"%2F")).join("/")}catch(c){return gi(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+c+").")),i}}function fi(i,c){if(c==="/")return i;if(!i.toLowerCase().startsWith(c.toLowerCase()))return null;let u=c.endsWith("/")?c.length-1:c.length,g=i.charAt(u);return g&&g!=="/"?null:i.slice(u)||"/"}const Cp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ep=i=>Cp.test(i);function Dp(i,c){c===void 0&&(c="/");let{pathname:u,search:g="",hash:N=""}=typeof i=="string"?Xr(i):i,y;if(u)if(Ep(u))y=u;else{if(u.includes("//")){let w=u;u=u.replace(/\/\/+/g,"/"),gi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(w+" -> "+u))}u.startsWith("/")?y=Rd(u.substring(1),"/"):y=Rd(u,c)}else y=c;return{pathname:y,search:Rp(g),hash:Tp(N)}}function Rd(i,c){let u=c.replace(/\/+$/,"").split("/");return i.split("/").forEach(N=>{N===".."?u.length>1&&u.pop():N!=="."&&u.push(N)}),u.length>1?u.join("/"):"/"}function ni(i,c,u,g){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+c+"` field ["+JSON.stringify(g)+"].  Please separate it out to the ")+("`to."+u+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ap(i){return i.filter((c,u)=>u===0||c.route.path&&c.route.path.length>0)}function yi(i,c){let u=Ap(i);return c?u.map((g,N)=>N===u.length-1?g.pathname:g.pathnameBase):u.map(g=>g.pathnameBase)}function vi(i,c,u,g){g===void 0&&(g=!1);let N;typeof i=="string"?N=Xr(i):(N=Bs({},i),Ie(!N.pathname||!N.pathname.includes("?"),ni("?","pathname","search",N)),Ie(!N.pathname||!N.pathname.includes("#"),ni("#","pathname","hash",N)),Ie(!N.search||!N.search.includes("#"),ni("#","search","hash",N)));let y=i===""||N.pathname==="",w=y?"/":N.pathname,v;if(w==null)v=u;else{let b=c.length-1;if(!g&&w.startsWith("..")){let _=w.split("/");for(;_[0]==="..";)_.shift(),b-=1;N.pathname=_.join("/")}v=b>=0?c[b]:"/"}let m=Dp(N,v),E=w&&w!=="/"&&w.endsWith("/"),p=(y||w===".")&&u.endsWith("/");return!m.pathname.endsWith("/")&&(E||p)&&(m.pathname+="/"),m}const cr=i=>i.join("/").replace(/\/\/+/g,"/"),Pp=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Rp=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Tp=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Lp(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const $d=["post","put","patch","delete"];new Set($d);const Ip=["get",...$d];new Set(Ip);function Hs(){return Hs=Object.assign?Object.assign.bind():function(i){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(i[g]=u[g])}return i},Hs.apply(this,arguments)}const ji=h.createContext(null),Mp=h.createContext(null),dr=h.createContext(null),an=h.createContext(null),Bt=h.createContext({outlet:null,matches:[],isDataRoute:!1}),Vd=h.createContext(null);function Fp(i,c){let{relative:u}=c===void 0?{}:c;Jr()||Ie(!1);let{basename:g,navigator:N}=h.useContext(dr),{hash:y,pathname:w,search:v}=Gd(i,{relative:u}),m=w;return g!=="/"&&(m=w==="/"?g:cr([g,w])),N.createHref({pathname:m,search:v,hash:y})}function Jr(){return h.useContext(an)!=null}function es(){return Jr()||Ie(!1),h.useContext(an).location}function Wd(i){h.useContext(dr).static||h.useLayoutEffect(i)}function qs(){let{isDataRoute:i}=h.useContext(Bt);return i?Yp():Op()}function Op(){Jr()||Ie(!1);let i=h.useContext(ji),{basename:c,future:u,navigator:g}=h.useContext(dr),{matches:N}=h.useContext(Bt),{pathname:y}=es(),w=JSON.stringify(yi(N,u.v7_relativeSplatPath)),v=h.useRef(!1);return Wd(()=>{v.current=!0}),h.useCallback(function(E,p){if(p===void 0&&(p={}),!v.current)return;if(typeof E=="number"){g.go(E);return}let b=vi(E,JSON.parse(w),y,p.relative==="path");i==null&&c!=="/"&&(b.pathname=b.pathname==="/"?c:cr([c,b.pathname])),(p.replace?g.replace:g.push)(b,p.state,p)},[c,g,w,y,i])}function bi(){let{matches:i}=h.useContext(Bt),c=i[i.length-1];return c?c.params:{}}function Gd(i,c){let{relative:u}=c===void 0?{}:c,{future:g}=h.useContext(dr),{matches:N}=h.useContext(Bt),{pathname:y}=es(),w=JSON.stringify(yi(N,g.v7_relativeSplatPath));return h.useMemo(()=>vi(i,JSON.parse(w),y,u==="path"),[i,w,y,u])}function zp(i,c){return Up(i,c)}function Up(i,c,u,g){Jr()||Ie(!1);let{navigator:N}=h.useContext(dr),{matches:y}=h.useContext(Bt),w=y[y.length-1],v=w?w.params:{};w&&w.pathname;let m=w?w.pathnameBase:"/";w&&w.route;let E=es(),p;if(c){var b;let x=typeof c=="string"?Xr(c):c;m==="/"||(b=x.pathname)!=null&&b.startsWith(m)||Ie(!1),p=x}else p=E;let _=p.pathname||"/",M=_;if(m!=="/"){let x=m.replace(/^\//,"").split("/");M="/"+_.replace(/^\//,"").split("/").slice(x.length).join("/")}let D=mp(i,{pathname:M}),C=Vp(D&&D.map(x=>Object.assign({},x,{params:Object.assign({},v,x.params),pathname:cr([m,N.encodeLocation?N.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?m:cr([m,N.encodeLocation?N.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),y,u,g);return c&&C?h.createElement(an.Provider,{value:{location:Hs({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:ir.Pop}},C):C}function Bp(){let i=Qp(),c=Lp(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),u=i instanceof Error?i.stack:null,N={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},c),u?h.createElement("pre",{style:N},u):null,null)}const Hp=h.createElement(Bp,null);class qp extends h.Component{constructor(c){super(c),this.state={location:c.location,revalidation:c.revalidation,error:c.error}}static getDerivedStateFromError(c){return{error:c}}static getDerivedStateFromProps(c,u){return u.location!==c.location||u.revalidation!=="idle"&&c.revalidation==="idle"?{error:c.error,location:c.location,revalidation:c.revalidation}:{error:c.error!==void 0?c.error:u.error,location:u.location,revalidation:c.revalidation||u.revalidation}}componentDidCatch(c,u){console.error("React Router caught the following error during render",c,u)}render(){return this.state.error!==void 0?h.createElement(Bt.Provider,{value:this.props.routeContext},h.createElement(Vd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $p(i){let{routeContext:c,match:u,children:g}=i,N=h.useContext(ji);return N&&N.static&&N.staticContext&&(u.route.errorElement||u.route.ErrorBoundary)&&(N.staticContext._deepestRenderedBoundaryId=u.route.id),h.createElement(Bt.Provider,{value:c},g)}function Vp(i,c,u,g){var N;if(c===void 0&&(c=[]),u===void 0&&(u=null),g===void 0&&(g=null),i==null){var y;if(!u)return null;if(u.errors)i=u.matches;else if((y=g)!=null&&y.v7_partialHydration&&c.length===0&&!u.initialized&&u.matches.length>0)i=u.matches;else return null}let w=i,v=(N=u)==null?void 0:N.errors;if(v!=null){let p=w.findIndex(b=>b.route.id&&v?.[b.route.id]!==void 0);p>=0||Ie(!1),w=w.slice(0,Math.min(w.length,p+1))}let m=!1,E=-1;if(u&&g&&g.v7_partialHydration)for(let p=0;p<w.length;p++){let b=w[p];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(E=p),b.route.id){let{loaderData:_,errors:M}=u,D=b.route.loader&&_[b.route.id]===void 0&&(!M||M[b.route.id]===void 0);if(b.route.lazy||D){m=!0,E>=0?w=w.slice(0,E+1):w=[w[0]];break}}}return w.reduceRight((p,b,_)=>{let M,D=!1,C=null,x=null;u&&(M=v&&b.route.id?v[b.route.id]:void 0,C=b.route.errorElement||Hp,m&&(E<0&&_===0?(Zp("route-fallback"),D=!0,x=null):E===_&&(D=!0,x=b.route.hydrateFallbackElement||null)));let o=c.concat(w.slice(0,_+1)),k=()=>{let A;return M?A=C:D?A=x:b.route.Component?A=h.createElement(b.route.Component,null):b.route.element?A=b.route.element:A=p,h.createElement($p,{match:b,routeContext:{outlet:p,matches:o,isDataRoute:u!=null},children:A})};return u&&(b.route.ErrorBoundary||b.route.errorElement||_===0)?h.createElement(qp,{location:u.location,revalidation:u.revalidation,component:C,error:M,children:k(),routeContext:{outlet:null,matches:o,isDataRoute:!0}}):k()},null)}var Kd=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(Kd||{}),Qd=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(Qd||{});function Wp(i){let c=h.useContext(ji);return c||Ie(!1),c}function Gp(i){let c=h.useContext(Mp);return c||Ie(!1),c}function Kp(i){let c=h.useContext(Bt);return c||Ie(!1),c}function Yd(i){let c=Kp(),u=c.matches[c.matches.length-1];return u.route.id||Ie(!1),u.route.id}function Qp(){var i;let c=h.useContext(Vd),u=Gp(),g=Yd();return c!==void 0?c:(i=u.errors)==null?void 0:i[g]}function Yp(){let{router:i}=Wp(Kd.UseNavigateStable),c=Yd(Qd.UseNavigateStable),u=h.useRef(!1);return Wd(()=>{u.current=!0}),h.useCallback(function(N,y){y===void 0&&(y={}),u.current&&(typeof N=="number"?i.navigate(N):i.navigate(N,Hs({fromRouteId:c},y)))},[i,c])}const Td={};function Zp(i,c,u){Td[i]||(Td[i]=!0)}function Xp(i,c){i?.v7_startTransition,i?.v7_relativeSplatPath}function Qr(i){let{to:c,replace:u,state:g,relative:N}=i;Jr()||Ie(!1);let{future:y,static:w}=h.useContext(dr),{matches:v}=h.useContext(Bt),{pathname:m}=es(),E=qs(),p=vi(c,yi(v,y.v7_relativeSplatPath),m,N==="path"),b=JSON.stringify(p);return h.useEffect(()=>E(JSON.parse(b),{replace:u,state:g,relative:N}),[E,b,N,u,g]),null}function pe(i){Ie(!1)}function Jp(i){let{basename:c="/",children:u=null,location:g,navigationType:N=ir.Pop,navigator:y,static:w=!1,future:v}=i;Jr()&&Ie(!1);let m=c.replace(/^\/*/,"/"),E=h.useMemo(()=>({basename:m,navigator:y,static:w,future:Hs({v7_relativeSplatPath:!1},v)}),[m,v,y,w]);typeof g=="string"&&(g=Xr(g));let{pathname:p="/",search:b="",hash:_="",state:M=null,key:D="default"}=g,C=h.useMemo(()=>{let x=fi(p,m);return x==null?null:{location:{pathname:x,search:b,hash:_,state:M,key:D},navigationType:N}},[m,p,b,_,M,D,N]);return C==null?null:h.createElement(dr.Provider,{value:E},h.createElement(an.Provider,{children:u,value:C}))}function Ld(i){let{children:c,location:u}=i;return zp(oi(c),u)}new Promise(()=>{});function oi(i,c){c===void 0&&(c=[]);let u=[];return h.Children.forEach(i,(g,N)=>{if(!h.isValidElement(g))return;let y=[...c,N];if(g.type===h.Fragment){u.push.apply(u,oi(g.props.children,y));return}g.type!==pe&&Ie(!1),!g.props.index||!g.props.children||Ie(!1);let w={id:g.props.id||y.join("-"),caseSensitive:g.props.caseSensitive,element:g.props.element,Component:g.props.Component,index:g.props.index,path:g.props.path,loader:g.props.loader,action:g.props.action,errorElement:g.props.errorElement,ErrorBoundary:g.props.ErrorBoundary,hasErrorBoundary:g.props.ErrorBoundary!=null||g.props.errorElement!=null,shouldRevalidate:g.props.shouldRevalidate,handle:g.props.handle,lazy:g.props.lazy};g.props.children&&(w.children=oi(g.props.children,y)),u.push(w)}),u}function ci(){return ci=Object.assign?Object.assign.bind():function(i){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(i[g]=u[g])}return i},ci.apply(this,arguments)}function ex(i,c){if(i==null)return{};var u={},g=Object.keys(i),N,y;for(y=0;y<g.length;y++)N=g[y],!(c.indexOf(N)>=0)&&(u[N]=i[N]);return u}function tx(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function rx(i,c){return i.button===0&&(!c||c==="_self")&&!tx(i)}const sx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ax="6";try{window.__reactRouterVersion=ax}catch{}const nx="startTransition",Id=rp[nx];function lx(i){let{basename:c,children:u,future:g,window:N}=i,y=h.useRef();y.current==null&&(y.current=cp({window:N,v5Compat:!0}));let w=y.current,[v,m]=h.useState({action:w.action,location:w.location}),{v7_startTransition:E}=g||{},p=h.useCallback(b=>{E&&Id?Id(()=>m(b)):m(b)},[m,E]);return h.useLayoutEffect(()=>w.listen(p),[w,p]),h.useEffect(()=>Xp(g),[g]),h.createElement(Jp,{basename:c,children:u,location:v.location,navigationType:v.action,navigator:w,future:g})}const ix=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ox=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vt=h.forwardRef(function(c,u){let{onClick:g,relative:N,reloadDocument:y,replace:w,state:v,target:m,to:E,preventScrollReset:p,viewTransition:b}=c,_=ex(c,sx),{basename:M}=h.useContext(dr),D,C=!1;if(typeof E=="string"&&ox.test(E)&&(D=E,ix))try{let A=new URL(window.location.href),H=E.startsWith("//")?new URL(A.protocol+E):new URL(E),I=fi(H.pathname,M);H.origin===A.origin&&I!=null?E=I+H.search+H.hash:C=!0}catch{}let x=Fp(E,{relative:N}),o=cx(E,{replace:w,state:v,target:m,preventScrollReset:p,relative:N,viewTransition:b});function k(A){g&&g(A),A.defaultPrevented||o(A)}return h.createElement("a",ci({},_,{href:D||x,onClick:C||y?g:k,ref:u,target:m}))});var Md;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(Md||(Md={}));var Fd;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Fd||(Fd={}));function cx(i,c){let{target:u,replace:g,state:N,preventScrollReset:y,relative:w,viewTransition:v}=c===void 0?{}:c,m=qs(),E=es(),p=Gd(i,{relative:w});return h.useCallback(b=>{if(rx(b,u)){b.preventDefault();let _=g!==void 0?g:rn(E)===rn(p);m(i,{replace:_,state:N,preventScrollReset:y,relative:w,viewTransition:v})}},[E,m,p,g,N,u,i,y,w,v])}const B=Zm.create({baseURL:window.location.origin,headers:{"Content-Type":"application/json",Accept:"application/json"}}),Od=localStorage.getItem("token");Od&&(B.defaults.headers.common.Authorization=`Bearer ${Od}`);B.interceptors.response.use(i=>i,i=>(i.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user_email"),window.location.href="/login"),Promise.reject(i)));const Zd=h.createContext(null);function dx({children:i}){const[c,u]=h.useState(null),[g,N]=h.useState(localStorage.getItem("token")),[y,w]=h.useState(!0);h.useEffect(()=>{g?(B.defaults.headers.common.Authorization=`Bearer ${g}`,v()):w(!1)},[g]);const v=async()=>{try{if(!g){w(!1);return}try{const p=await B.get("/api/v1/me"),b=p.data?.data||p.data;u(b),localStorage.setItem("user_email",b.email),localStorage.setItem("user_name",b.name)}catch{const b=localStorage.getItem("user_email"),_=localStorage.getItem("user_name");if(b)u({email:b,name:_||b.split("@")[0]});else{E();return}}w(!1)}catch(p){console.error("Error fetching user:",p),E()}},m=async(p,b)=>{try{const _=await B.post("/api/v1/login",{email:p,password:b}),{token:M,user:D}=_.data;N(M),localStorage.setItem("token",M),B.defaults.headers.common.Authorization=`Bearer ${M}`;try{const C=await B.get("/api/v1/me"),x=C.data?.data||C.data;u(x),localStorage.setItem("user_email",x.email||p),localStorage.setItem("user_name",x.name||p.split("@")[0])}catch{u(D||{email:p,name:p.split("@")[0]}),localStorage.setItem("user_email",D?.email||p),localStorage.setItem("user_name",D?.name||p.split("@")[0])}return{success:!0}}catch(_){return console.error("Login error:",_),{success:!1,message:_.response?.data?.message||_.message||"Login failed"}}},E=()=>{N(null),u(null),localStorage.removeItem("token"),localStorage.removeItem("user_email"),delete B.defaults.headers.common.Authorization};return e.jsx(Zd.Provider,{value:{user:c,token:g,login:m,logout:E,loading:y},children:i})}function nn(){const i=h.useContext(Zd);if(!i)throw new Error("useAuth must be used within AuthProvider");return i}const ux=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xd=(...i)=>i.filter((c,u,g)=>!!c&&g.indexOf(c)===u).join(" ");var mx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const px=h.forwardRef(({color:i="currentColor",size:c=24,strokeWidth:u=2,absoluteStrokeWidth:g,className:N="",children:y,iconNode:w,...v},m)=>h.createElement("svg",{ref:m,...mx,width:c,height:c,stroke:i,strokeWidth:g?Number(u)*24/Number(c):u,className:Xd("lucide",N),...v},[...w.map(([E,p])=>h.createElement(E,p)),...Array.isArray(y)?y:[y]]));const xe=(i,c)=>{const u=h.forwardRef(({className:g,...N},y)=>h.createElement(px,{ref:y,iconNode:c,className:Xd(`lucide-${ux(i)}`,g),...N}));return u.displayName=`${i}`,u};const Ni=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const xx=xe("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const hx=xe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const gx=xe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const fx=xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const yx=xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const wi=xe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const vx=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const jx=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const bx=xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Nx=xe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const wx=xe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const or=xe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const _x=xe("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);const kx=xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const at=xe("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);const Sx=xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Cx=xe("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);const Ex=xe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Dx=xe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Ax=xe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const zd=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Jd=xe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Px=xe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const ut=xe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Re=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const di=xe("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Rx=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const ui=xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Yr=xe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const tn=xe("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);const Ve=xe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const mi=xe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const Zr=xe("Tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]]);const nt=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const yt=xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Tx=xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const eu=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const pi=xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Lx=xe("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);const Ix=xe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const sn=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Mx(){const[i,c]=h.useState(""),[u,g]=h.useState(""),[N,y]=h.useState(""),[w,v]=h.useState(!1),{login:m}=nn(),E=qs(),p=async b=>{b.preventDefault(),y(""),v(!0);const _=await m(i,u);_.success?E("/"):y(_.message||"Invalid credentials"),v(!1)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-green-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-green-600 p-3 rounded-full",children:e.jsx(Zr,{className:"h-12 w-12 text-white"})})}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Farm Management System"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to manage your farm operations"})]}),e.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-lg shadow-lg",onSubmit:p,children:[N&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:N}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:b=>c(b.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:u,onChange:b=>g(b.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Enter your password"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:w,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Signing in...":"Sign in"})}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Demo credentials:"}),e.jsx("p",{className:"font-mono text-xs mt-1",children:"admin@fms.test / password"})]})]})]})})}function Fx(){const[i,c]=h.useState({totalSales:0,totalExpenses:0,totalRevenue:0,totalMargin:0,crops:{},loading:!0}),[u,g]=h.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});h.useEffect(()=>{N()},[u]);const N=async()=>{try{c(M=>({...M,loading:!0}));const[y,w]=await Promise.all([B.get(`/api/v1/gari-sales/summary?date_from=${u.from}&date_to=${u.to}`).catch(()=>({data:{overall:{}}})),B.get(`/api/v1/gari-production-batches?date_from=${u.from}&date_to=${u.to}`).catch(()=>({data:{data:[]}}))]),v=y.data?.overall||{},m=Array.isArray(w.data?.data)?w.data.data:[],E=Number(v.total_revenue||0),p=Number(v.total_cost||0),b=Number(v.total_margin||0),_=m.reduce((M,D)=>M+Number(D.total_cost||0),0);c({totalSales:Number(v.total_sales||0),totalExpenses:_,totalRevenue:E,totalMargin:b,crops:{gari:{sales:E,expenses:_,margin:b,batches:m.length},bellPepper:{sales:0,expenses:0,margin:0,batches:0},tomatoes:{sales:0,expenses:0,margin:0,batches:0},habaneros:{sales:0,expenses:0,margin:0,batches:0}},loading:!1})}catch(y){console.error("Error fetching consolidated data:",y),c(w=>({...w,loading:!1}))}};return i.loading?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Dashboard"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Overview across all crops and livestock"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:u.from,onChange:y=>g({...u,from:y.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:u.to,onChange:y=>g({...u,to:y.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx(or,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(i.totalRevenue||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All crops combined"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx(wi,{className:"h-5 w-5 text-red-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(i.totalExpenses||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Production costs"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),e.jsx(yt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(i.totalMargin||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.totalRevenue>0?Number(i.totalMargin/i.totalRevenue*100).toFixed(1)+"% margin":"No sales"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Sales"}),e.jsx(ut,{className:"h-5 w-5 text-blue-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.totalSales}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Transactions"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance by Crop"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expenses"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Batches"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(i.crops).map(([y,w])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:y==="bellPepper"?"Bell Pepper":y}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(w.sales||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(w.expenses||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(w.margin||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.batches})]},y))})]})})]})]})}const Ox=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"];function zx(){const[i,c]=h.useState([]),[u,g]=h.useState(!0),[N,y]=h.useState(!1),[w,v]=h.useState(null),[m,E]=h.useState({name:"",legal_name:"",farm_type:"MIXED",country:"Nigeria",state:"Ondo",town:"",default_currency:"NGN",default_unit_system:"METRIC",default_timezone:"Africa/Lagos",accounting_method:"ACCRUAL",status:"ACTIVE"});h.useEffect(()=>{p()},[]);const p=async()=>{g(!0);try{const o=await B.get("/api/v1/farms?per_page=1000"),k=o.data?.data||(Array.isArray(o.data)?o.data:[]);c(Array.isArray(k)?k:[])}catch(o){console.error("Error fetching farms:",o),c([])}finally{g(!1)}},b=async(o=null)=>{if(v(o),o)try{const A=(await B.get(`/api/v1/farms/${o.id}`)).data?.data||o;E({name:A.name||"",legal_name:A.legal_name||"",farm_type:A.farm_type||"MIXED",country:A.country||"Nigeria",state:A.state||"",town:A.town||"",default_currency:A.default_currency||"NGN",default_unit_system:A.default_unit_system||"METRIC",default_timezone:A.default_timezone||"Africa/Lagos",accounting_method:A.accounting_method||"ACCRUAL",status:A.status||"ACTIVE"})}catch(k){console.error("Error fetching farm:",k),E({name:o.name||"",legal_name:o.legal_name||"",farm_type:o.farm_type||"MIXED",country:o.country||"Nigeria",state:o.state||"",town:o.town||"",default_currency:o.default_currency||"NGN",default_unit_system:o.default_unit_system||"METRIC",default_timezone:o.default_timezone||"Africa/Lagos",accounting_method:o.accounting_method||"ACCRUAL",status:o.status||"ACTIVE"})}else E({name:"",legal_name:"",farm_type:"MIXED",country:"Nigeria",state:"Ondo",town:"",default_currency:"NGN",default_unit_system:"METRIC",default_timezone:"Africa/Lagos",accounting_method:"ACCRUAL",status:"ACTIVE"});y(!0)},_=async o=>{o.preventDefault();try{w?await B.put(`/api/v1/farms/${w.id}`,m):await B.post("/api/v1/farms",m),y(!1),p()}catch(k){console.error("Error saving farm:",k),alert(k.response?.data?.message||"Error saving farm")}},M=async o=>{if(confirm("Are you sure you want to delete this farm?"))try{await B.delete(`/api/v1/farms/${o}`),p()}catch(k){console.error("Error deleting farm:",k),alert(k.response?.data?.message||"Error deleting farm")}},D=o=>({CROP:"Crop",LIVESTOCK:"Livestock",MIXED:"Mixed",AQUACULTURE:"Aquaculture",HORTICULTURE:"Horticulture"})[o]||o,C=o=>({ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",ARCHIVED:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",x=o=>{const k=[o.town,o.state,o.country].filter(Boolean);return k.length>0?k.join(", "):"Location not specified"};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Farms"}),e.jsxs("button",{onClick:()=>b(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Add Farm"]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Zr,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No farms yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first farm"}),e.jsx("button",{onClick:()=>b(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create Farm"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Legal Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(o=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:o.farm_code||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:o.legal_name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D(o.farm_type)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Jd,{size:14,className:"mr-1"}),x(o)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${C(o.status)}`,children:o.status||"ACTIVE"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx(vt,{to:`/farms/${o.id}`,className:"text-blue-600 hover:text-blue-900 mr-4",title:"View Details",children:"View"}),e.jsx("button",{onClick:()=>b(o),className:"text-green-600 hover:text-green-900 mr-4",children:e.jsx(Ve,{size:16,className:"inline"})}),e.jsx("button",{onClick:()=>M(o.id),className:"text-red-600 hover:text-red-900",children:e.jsx(nt,{size:16,className:"inline"})})]})]},o.id))})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:w?"Edit Farm":"Create New Farm"}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:o=>E({...m,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Name"}),e.jsx("input",{type:"text",value:m.legal_name,onChange:o=>E({...m,legal_name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm Type *"}),e.jsxs("select",{required:!0,value:m.farm_type,onChange:o=>E({...m,farm_type:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"CROP",children:"Crop"}),e.jsx("option",{value:"LIVESTOCK",children:"Livestock"}),e.jsx("option",{value:"MIXED",children:"Mixed"}),e.jsx("option",{value:"AQUACULTURE",children:"Aquaculture"}),e.jsx("option",{value:"HORTICULTURE",children:"Horticulture"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:m.status,onChange:o=>E({...m,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"ARCHIVED",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country *"}),e.jsx("input",{type:"text",required:!0,value:m.country,onChange:o=>E({...m,country:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),e.jsx("select",{required:!0,value:m.state,onChange:o=>E({...m,state:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:Ox.map(o=>e.jsx("option",{value:o,children:o},o))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Town *"}),e.jsx("input",{type:"text",required:!0,value:m.town,onChange:o=>E({...m,town:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Currency *"}),e.jsx("input",{type:"text",required:!0,maxLength:"3",value:m.default_currency,onChange:o=>E({...m,default_currency:o.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Unit System *"}),e.jsxs("select",{required:!0,value:m.default_unit_system,onChange:o=>E({...m,default_unit_system:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"METRIC",children:"Metric"}),e.jsx("option",{value:"IMPERIAL",children:"Imperial"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Timezone *"}),e.jsx("input",{type:"text",required:!0,value:m.default_timezone,onChange:o=>E({...m,default_timezone:o.target.value}),placeholder:"Africa/Lagos",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Accounting Method *"}),e.jsxs("select",{required:!0,value:m.accounting_method,onChange:o=>E({...m,accounting_method:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"ACCRUAL",children:"Accrual"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[w?"Update":"Create"," Farm"]})]})]})]})})]})}function Ux(){const{id:i}=bi(),[c,u]=h.useState(null),[g,N]=h.useState(!0);h.useEffect(()=>{y()},[i]);const y=async()=>{try{const w=await B.get(`/api/v1/farms/${i}`);u(w.data.data||w.data)}catch(w){console.error("Error fetching farm:",w)}finally{N(!1)}};return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):c?e.jsxs("div",{children:[e.jsxs(vt,{to:"/farms",className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[e.jsx(Ni,{className:"h-5 w-5 mr-2"}),"Back to Farms"]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(Zr,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:c.name}),c.location&&e.jsxs("div",{className:"flex items-center text-gray-600 mt-1",children:[e.jsx(Jd,{className:"h-4 w-4 mr-1"}),c.location]})]})]}),c.is_active?e.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-green-100 text-green-800 rounded",children:"Active"}):e.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-gray-100 text-gray-800 rounded",children:"Inactive"})]})}),e.jsxs("div",{className:"px-6 py-4",children:[c.description&&e.jsx("p",{className:"text-gray-700 mb-4",children:c.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.total_area&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Area"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[c.total_area," ",c.area_unit||"hectares"]})]}),c.fields&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Fields"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:c.fields?.length||0})]}),c.seasons&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Seasons"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:c.seasons?.length||0})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.fields&&c.fields.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Fields"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:c.fields.map(w=>e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:w.name}),w.area&&e.jsxs("p",{className:"text-sm text-gray-600",children:[w.area," ",w.area_unit||"hectares"]})]},w.id))})]}),c.seasons&&c.seasons.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Seasons"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:c.seasons.map(w=>e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:w.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(w.start_date).toLocaleDateString()," - ",new Date(w.end_date).toLocaleDateString()]})]},w.id))})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Farm not found"}),e.jsx(vt,{to:"/farms",className:"text-green-600 hover:text-green-700 mt-4 inline-block",children:" Back to Farms"})]})}function Bx(){const[i,c]=h.useState([]),[u,g]=h.useState(!0),[N,y]=h.useState(!1),[w,v]=h.useState({name:"",connection_type:"MOCK",is_active:!0});h.useEffect(()=>{m()},[]);const m=async()=>{try{const p=await B.get("/api/v1/scale-devices");c(p.data.data||p.data)}catch(p){console.error("Error fetching devices:",p)}finally{g(!1)}},E=async p=>{p.preventDefault();try{await B.post("/api/v1/scale-devices",w),y(!1),v({name:"",connection_type:"MOCK",is_active:!0}),m()}catch(b){alert("Error creating device: "+(b.response?.data?.message||"Unknown error"))}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Scale Devices"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your weighing scale devices"})]}),e.jsxs("button",{onClick:()=>y(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"Add Device"]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(di,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No scale devices yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first scale device to get started"}),e.jsx("button",{onClick:()=>y(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Add Device"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(p=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:e.jsx(di,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:p.name})]}),p.is_active?e.jsx(Nx,{className:"h-5 w-5 text-green-500"}):e.jsx(wx,{className:"h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Connection Type"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.connection_type})]}),p.last_calibration_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last Calibration"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(p.last_calibration_date).toLocaleDateString()})]})]})]},p.id))}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Scale Device"}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Name *"}),e.jsx("input",{type:"text",required:!0,value:w.name,onChange:p=>v({...w,name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Main Weighing Scale"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Connection Type"}),e.jsxs("select",{value:w.connection_type,onChange:p=>v({...w,connection_type:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"MOCK",children:"Mock (Testing)"}),e.jsx("option",{value:"SERIAL",children:"Serial Port"}),e.jsx("option",{value:"USB",children:"USB"}),e.jsx("option",{value:"NETWORK",children:"Network"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Device"})]})]})]})})]})}function Hx(){const[i,c]=h.useState([]),[u,g]=h.useState(!0);h.useEffect(()=>{N()},[]);const N=async()=>{try{const y=await B.get("/api/v1/label-templates");c(y.data.data||y.data)}catch(y){console.error("Error fetching templates:",y)}finally{g(!1)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Label Templates"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your label printing templates"})]})}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(mi,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No label templates yet"}),e.jsx("p",{className:"text-gray-500",children:"Label templates are created through the API. Use the default template for now."})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(y=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:e.jsx(mi,{className:"h-6 w-6 text-orange-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:y.name})]}),y.is_default&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded",children:"Default"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Code"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Target Type"}),e.jsx("p",{className:"text-sm text-gray-900",children:y.target_type?.split("\\").pop()||"N/A"})]}),y.template_body&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Template Preview"}),e.jsxs("pre",{className:"text-xs bg-gray-50 p-2 rounded mt-1 overflow-auto max-h-32",children:[y.template_body.substring(0,200),"..."]})]})]})]},y.id))})]})}function qx(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState([]),[w,v]=h.useState(!0),[m,E]=h.useState(!1),[p,b]=h.useState({farm_id:"",factory_id:"",processing_date:new Date().toISOString().slice(0,10),cassava_source:"HARVESTED",cassava_quantity_tonnes:"",cassava_cost_per_tonne:"",gari_produced_kg:"",gari_type:"WHITE",gari_grade:"FINE",labour_cost:0,fuel_cost:0,equipment_cost:0,water_cost:0,transport_cost:0,other_costs:0,waste_kg:0,notes:""});h.useEffect(()=>{_()},[]);const _=async()=>{try{const[o,k]=await Promise.all([B.get("/api/v1/gari-production-batches"),B.get("/api/v1/farms")]),A=o.data,H=A?.data||(Array.isArray(A)?A:[]);c(H);const I=k.data,T=I?.data||(Array.isArray(I)?I:[]);g(T)}catch(o){console.error("Error fetching data:",o)}finally{v(!1)}},M=async()=>{try{const o=await B.get("/api/v1/farms");g(o.data.data||o.data)}catch(o){console.error("Error fetching farms:",o)}},D=async o=>{if(!o){y([]);return}try{const A=(await B.get(`/api/v1/factories?farm_id=${o}&production_type=gari`)).data,H=A?.data||(Array.isArray(A)?A:[]);y(H)}catch(k){console.error("Error fetching factories:",k),y([])}},C=()=>{E(!0),M(),b(o=>({...o,factory_id:""})),y([])},x=async o=>{o.preventDefault();try{const k=await B.post("/api/v1/gari-production-batches",p);console.log("Created batch response:",k.data),E(!1),b({farm_id:"",factory_id:"",processing_date:new Date().toISOString().slice(0,10),cassava_source:"HARVESTED",cassava_quantity_tonnes:"",cassava_cost_per_tonne:"",gari_produced_kg:"",gari_type:"WHITE",gari_grade:"FINE",labour_cost:0,fuel_cost:0,equipment_cost:0,water_cost:0,transport_cost:0,other_costs:0,waste_kg:0,notes:""}),_()}catch(k){alert("Error creating batch: "+(k.response?.data?.message||"Unknown error"))}};return w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Production Batches"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track production from cassava to finished gari"})]}),e.jsxs("button",{onClick:C,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"New Batch"]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(at,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No production batches yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production batch to get started"}),e.jsx("button",{onClick:C,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Batch"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.map(o=>e.jsxs(vt,{to:`/gari-production-batches/${o.id}`,className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:o.batch_code}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(o.processing_date).toLocaleDateString(),"  ",o.farm?.name,o.factory&&`  ${o.factory.name}`]})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded ${o.status==="COMPLETED"?"bg-green-100 text-green-800":o.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:o.status})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cassava Input"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:o.cassava_quantity_tonnes?`${o.cassava_quantity_tonnes} tonnes`:`${(o.cassava_quantity_kg/1e3).toFixed(3)} tonnes`}),e.jsx("p",{className:"text-xs text-gray-500",children:o.cassava_source==="HARVESTED"?"Harvested":o.cassava_source==="PURCHASED"?"Purchased":"Mixed"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Gari Produced"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[o.gari_produced_kg," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[o.gari_type,"  ",o.gari_grade]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Yield"}),e.jsxs("p",{className:"text-sm font-semibold text-green-600",children:[o.conversion_yield_percent!=null?Number(o.conversion_yield_percent).toFixed(1):"N/A","%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cost per kg"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",o.cost_per_kg_gari!=null?Number(o.cost_per_kg_gari).toFixed(2):"N/A"]})]})]})]},o.id))}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create Production Batch"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:p.farm_id,onChange:o=>{const k=o.target.value;b({...p,farm_id:k,factory_id:""}),D(k)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Factory *"}),e.jsxs("select",{required:!0,value:p.factory_id,onChange:o=>b({...p,factory_id:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",disabled:!p.farm_id||N.length===0,children:[e.jsx("option",{value:"",children:p.farm_id?N.length===0?"No factories available":"Select factory":"Select farm first"}),N.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Date *"}),e.jsx("input",{type:"date",required:!0,value:p.processing_date,onChange:o=>b({...p,processing_date:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Source *"}),e.jsxs("select",{required:!0,value:p.cassava_source,onChange:o=>b({...p,cassava_source:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"HARVESTED",children:"Harvested"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Quantity (tonnes) *"}),e.jsx("input",{type:"number",step:"0.001",required:!0,value:p.cassava_quantity_tonnes,onChange:o=>b({...p,cassava_quantity_tonnes:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1 tonne = 1,000 kg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per tonne ()"}),e.jsx("input",{type:"number",step:"0.01",value:p.cassava_cost_per_tonne,onChange:o=>b({...p,cassava_cost_per_tonne:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 150000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Produced (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:p.gari_produced_kg,onChange:o=>b({...p,gari_produced_kg:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),e.jsxs("select",{required:!0,value:p.gari_type,onChange:o=>b({...p,gari_type:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),e.jsxs("select",{required:!0,value:p.gari_grade,onChange:o=>b({...p,gari_grade:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"FINE",children:"Fine"}),e.jsx("option",{value:"COARSE",children:"Coarse"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Processing Costs ()"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour"}),e.jsx("input",{type:"number",step:"0.01",value:p.labour_cost,onChange:o=>b({...p,labour_cost:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuel"}),e.jsx("input",{type:"number",step:"0.01",value:p.fuel_cost,onChange:o=>b({...p,fuel_cost:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment"}),e.jsx("input",{type:"number",step:"0.01",value:p.equipment_cost,onChange:o=>b({...p,equipment_cost:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Water"}),e.jsx("input",{type:"number",step:"0.01",value:p.water_cost,onChange:o=>b({...p,water_cost:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport"}),e.jsx("input",{type:"number",step:"0.01",value:p.transport_cost,onChange:o=>b({...p,transport_cost:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other"}),e.jsx("input",{type:"number",step:"0.01",value:p.other_costs,onChange:o=>b({...p,other_costs:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste (kg)"}),e.jsx("input",{type:"number",step:"0.01",value:p.waste_kg,onChange:o=>b({...p,waste_kg:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:p.notes,onChange:o=>b({...p,notes:o.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Batch"})]})]})]})})]})}function $x(){const{id:i}=bi(),[c,u]=h.useState(null),[g,N]=h.useState(!0),[y,w]=h.useState(!1),[v,m]=h.useState(null);h.useEffect(()=>{E()},[i]);const E=async()=>{try{console.log("Fetching batch with ID:",i);const _=await B.get(`/api/v1/gari-production-batches/${i}`);console.log("Full API response:",_),console.log("Response data:",_.data),console.log("Response data.data:",_.data?.data);const M=_.data?.data||_.data;console.log("Extracted batch data:",M),console.log("Batch data type:",typeof M),console.log("Batch data is object:",M&&typeof M=="object"),M&&typeof M=="object"&&!Array.isArray(M)?(console.log("Setting batch:",M),u(M)):(console.error("Invalid batch data structure:",M),console.error("Batch data keys:",M?Object.keys(M):"null"),u(null))}catch(_){console.error("Error fetching batch:",_),console.error("Error response:",_.response),console.error("Error response data:",_.response?.data),console.error("Error status:",_.response?.status),console.error("Error message:",_.message),console.error("Request URL:",_.config?.url),console.error("Batch ID from URL:",i),u(null)}finally{N(!1)}},p=()=>{c&&(m({processing_date:c.processing_date?new Date(c.processing_date).toISOString().slice(0,10):"",cassava_source:c.cassava_source||"HARVESTED",cassava_quantity_tonnes:c.cassava_quantity_tonnes||(c.cassava_quantity_kg?(c.cassava_quantity_kg/1e3).toString():""),cassava_cost_per_tonne:c.cassava_cost_per_tonne||"",gari_produced_kg:c.gari_produced_kg||"",gari_type:c.gari_type||"WHITE",gari_grade:c.gari_grade||"FINE",labour_cost:c.labour_cost||0,fuel_cost:c.fuel_cost||0,equipment_cost:c.equipment_cost||0,water_cost:c.water_cost||0,transport_cost:c.transport_cost||0,other_costs:c.other_costs||0,waste_kg:c.waste_kg||0,status:c.status||"PLANNED",notes:c.notes||""}),w(!0))},b=async _=>{_.preventDefault();try{await B.put(`/api/v1/gari-production-batches/${i}`,v),w(!1),m(null),E()}catch(M){alert("Error updating batch: "+(M.response?.data?.message||"Unknown error"))}};return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):!c&&!g?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Production batch not found"}),e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["ID: ",i]}),e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Check the browser console for detailed error information"}),e.jsx(vt,{to:"/gari-production-batches",className:"text-green-600 hover:text-green-700 mt-4 inline-block",children:" Back to Batches"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(vt,{to:"/gari-production-batches",className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(Ni,{className:"h-5 w-5 mr-2"}),"Back to Batches"]}),c.status!=="COMPLETED"&&e.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Ve,{className:"h-5 w-5 mr-2"}),"Edit Batch"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(at,{className:"h-8 w-8 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:c.batch_code}),e.jsxs("p",{className:"text-gray-600",children:[c.farm?.name,"  ",new Date(c.processing_date).toLocaleDateString()]})]})]}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded ${c.status==="COMPLETED"?"bg-green-100 text-green-800":c.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:c.status})]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cassava Input"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:c.cassava_quantity_tonnes?`${c.cassava_quantity_tonnes} tonnes`:`${(c.cassava_quantity_kg/1e3).toFixed(3)} tonnes`}),c.total_cassava_cost&&e.jsxs("p",{className:"text-xs text-gray-500",children:["",Number(c.total_cassava_cost).toFixed(2)," total"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Gari Produced"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[c.gari_produced_kg," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.gari_type,"  ",c.gari_grade]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conversion Yield"}),e.jsxs("p",{className:"text-lg font-semibold text-green-600",children:[c.conversion_yield_percent!=null?Number(c.conversion_yield_percent).toFixed(1):"N/A","%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cost per kg"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",c.cost_per_kg_gari!=null?Number(c.cost_per_kg_gari).toFixed(2):"N/A"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(or,{className:"h-5 w-5 mr-2 text-green-600"}),"Cost Breakdown"]}),e.jsxs("div",{className:"space-y-3",children:[Number(c.total_cassava_cost||0)>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cassava Cost"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(c.total_cassava_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Labour"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(c.labour_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Fuel"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(c.fuel_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Equipment"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(c.equipment_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Water"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(c.water_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Transport"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(c.transport_cost||0).toFixed(2)]})]}),Number(c.other_costs||0)>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Other"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(c.other_costs||0).toFixed(2)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Total Processing"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["",Number(c.total_processing_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[e.jsx("span",{className:"text-base font-bold text-gray-900",children:"Total Cost"}),e.jsxs("span",{className:"text-base font-bold text-gray-900",children:["",c.total_cost!=null?Number(c.total_cost).toFixed(2):"0.00"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Performance Metrics"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conversion Yield"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(Number(c.conversion_yield_percent)||0,100)}%`}})}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[c.conversion_yield_percent!=null?Number(c.conversion_yield_percent).toFixed(1):"0","%"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target: 22-30%"})]}),c.waste_kg>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Waste"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[c.waste_kg," kg (",c.waste_percent!=null?Number(c.waste_percent).toFixed(1):"0","%)"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cost Efficiency"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",c.cost_per_kg_gari!=null?Number(c.cost_per_kg_gari).toFixed(2):"N/A"," per kg"]})]})]})]})]}),c.cassava_inputs&&c.cassava_inputs.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Cassava Inputs"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:c.cassava_inputs.map(_=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[_.quantity_kg," kg"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[_.source_type==="HARVESTED"?"Harvested":"Purchased",_.variety&&`  ${_.variety}`,_.harvest_lot&&`  Lot: ${_.harvest_lot.code||_.harvest_lot.id}`]})]}),Number(_.total_cost||0)>0&&e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",Number(_.total_cost||0).toFixed(2)]})]})},_.id))})]}),c.notes&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Notes"}),e.jsx("p",{className:"text-gray-700",children:c.notes})]}),y&&v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Production Batch"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Date *"}),e.jsx("input",{type:"date",required:!0,value:v.processing_date,onChange:_=>m({...v,processing_date:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:v.status,onChange:_=>m({...v,status:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"PLANNED",children:"Planned"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Source *"}),e.jsxs("select",{required:!0,value:v.cassava_source,onChange:_=>m({...v,cassava_source:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"HARVESTED",children:"Harvested"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Quantity (tonnes) *"}),e.jsx("input",{type:"number",step:"0.001",required:!0,value:v.cassava_quantity_tonnes,onChange:_=>m({...v,cassava_quantity_tonnes:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1 tonne = 1,000 kg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per tonne ()"}),e.jsx("input",{type:"number",step:"0.01",value:v.cassava_cost_per_tonne,onChange:_=>m({...v,cassava_cost_per_tonne:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 150000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Produced (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:v.gari_produced_kg,onChange:_=>m({...v,gari_produced_kg:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),e.jsxs("select",{required:!0,value:v.gari_type,onChange:_=>m({...v,gari_type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),e.jsxs("select",{required:!0,value:v.gari_grade,onChange:_=>m({...v,gari_grade:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"FINE",children:"Fine"}),e.jsx("option",{value:"COARSE",children:"Coarse"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Processing Costs ()"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour"}),e.jsx("input",{type:"number",step:"0.01",value:v.labour_cost,onChange:_=>m({...v,labour_cost:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuel"}),e.jsx("input",{type:"number",step:"0.01",value:v.fuel_cost,onChange:_=>m({...v,fuel_cost:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment"}),e.jsx("input",{type:"number",step:"0.01",value:v.equipment_cost,onChange:_=>m({...v,equipment_cost:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Water"}),e.jsx("input",{type:"number",step:"0.01",value:v.water_cost,onChange:_=>m({...v,water_cost:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport"}),e.jsx("input",{type:"number",step:"0.01",value:v.transport_cost,onChange:_=>m({...v,transport_cost:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other"}),e.jsx("input",{type:"number",step:"0.01",value:v.other_costs,onChange:_=>m({...v,other_costs:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste (kg)"}),e.jsx("input",{type:"number",step:"0.01",value:v.waste_kg,onChange:_=>m({...v,waste_kg:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:v.notes,onChange:_=>m({...v,notes:_.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{w(!1),m(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Update Batch"})]})]})]})})]})}function Vx(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState(0),[w,v]=h.useState(!0),[m,E]=h.useState({gari_type:"",packaging_type:"",status:"IN_STOCK"});h.useEffect(()=>{p()},[m]);const p=async()=>{try{const M=new URLSearchParams;m.gari_type&&M.append("gari_type",m.gari_type),m.packaging_type&&M.append("packaging_type",m.packaging_type),m.status&&M.append("status",m.status);const[D,C]=await Promise.all([B.get(`/api/v1/gari-inventory?${M.toString()}`),B.get("/api/v1/gari-inventory/summary")]),x=D.data.data||D.data,o=Array.isArray(x)?x:[];c(o),g(C.data.data||C.data),y(C.data.totalStock||0),console.log("Inventory response:",D.data),console.log("Inventory items:",o)}catch(M){console.error("Error fetching inventory:",M)}finally{v(!1)}};if(w)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const b=i.reduce((M,D)=>M+(D.quantity_kg||0),0),_=i.reduce((M,D)=>M+(D.total_cost||0),0);return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Inventory"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track finished goods stock"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Stock"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[N>0?N.toFixed(2):b.toFixed(2)," kg"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",_.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Items in Stock"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Sx,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:m.gari_type,onChange:M=>E({...m,gari_type:M.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]}),e.jsxs("select",{value:m.packaging_type,onChange:M=>E({...m,packaging_type:M.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Packaging"}),e.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),e.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),e.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),e.jsx("option",{value:"50KG_BAG",children:"50kg Bag"}),e.jsx("option",{value:"BULK",children:"Bulk"})]}),e.jsxs("select",{value:m.status,onChange:M=>E({...m,status:M.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"IN_STOCK",children:"In Stock"}),e.jsx("option",{value:"RESERVED",children:"Reserved"}),e.jsx("option",{value:"SOLD",children:"Sold"}),e.jsx("option",{value:"SPOILED",children:"Spoiled"}),e.jsx("option",{value:"DAMAGED",children:"Damaged"})]})]})}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(ut,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory items"}),e.jsx("p",{className:"text-gray-500",children:"Inventory will appear here after production batches are created"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Grade"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Packaging"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost per kg"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(M=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${M.gari_type==="WHITE"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:M.gari_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.gari_grade}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.packaging_type?.replace("_"," ").toLowerCase()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[M.quantity_kg," kg",M.quantity_units>0&&` (${M.quantity_units} units)`]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",M.cost_per_kg?.toFixed(2)||"N/A"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",M.total_cost?.toFixed(2)||"0.00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${M.status==="IN_STOCK"?"bg-green-100 text-green-800":M.status==="SOLD"?"bg-blue-100 text-blue-800":M.status==="SPOILED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:M.status})})]},M.id))})]})})})]})}function Wx(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState([]),[w,v]=h.useState([]),[m,E]=h.useState(!1),[p,b]=h.useState(!0),[_,M]=h.useState(!1),[D,C]=h.useState(null),[x,o]=h.useState(null),[k,A]=h.useState({farm_id:"",gari_production_batch_id:"",sale_date:new Date().toISOString().slice(0,10),customer_name:"",customer_type:"RETAIL",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",quantity_kg:"",quantity_units:"",unit_price:"",discount:0,cost_per_kg:"",payment_method:"CASH",amount_paid:"",sales_channel:"",notes:""});h.useEffect(()=>{H()},[]);const H=async()=>{try{const[S,$,K]=await Promise.all([B.get("/api/v1/gari-sales"),B.get("/api/v1/farms"),B.get("/api/v1/gari-sales/summary")]);c(S.data.data||S.data),y($.data.data||$.data),g(K.data.data||K.data)}catch(S){console.error("Error fetching data:",S)}finally{b(!1)}},I=async()=>{try{const S=await B.get("/api/v1/farms");y(S.data.data||S.data)}catch(S){console.error("Error fetching farms:",S)}},T=()=>{M(!0),I(),A({farm_id:"",gari_production_batch_id:"",sale_date:new Date().toISOString().slice(0,10),customer_name:"",customer_type:"RETAIL",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",quantity_kg:"",quantity_units:"",unit_price:"",discount:0,cost_per_kg:"",payment_method:"CASH",amount_paid:"",sales_channel:"",notes:""}),v([]),v([])},F=async()=>{if(!k.farm_id){v([]),E(!1);return}E(!0);try{const S=new URLSearchParams({farm_id:k.farm_id}),K=(await B.get(`/api/v1/gari-sales/available-batches?${S.toString()}`)).data.data||[];if(v(K),K.length>0&&!k.gari_production_batch_id){const R=K[0];te(R.batch_id)}else K.length===0&&A(R=>({...R,gari_production_batch_id:"",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",cost_per_kg:""}))}catch(S){console.error("Error fetching available batches:",S),v([]),alert("Error loading available batches: "+(S.response?.data?.message||"Unknown error"))}finally{E(!1)}},te=S=>{const $=w.find(K=>K.batch_id==S);if($){const K=$.packaging_options&&$.packaging_options.length>0?$.packaging_options[0].packaging_type:"1KG_POUCH";A(R=>({...R,gari_production_batch_id:S,gari_type:$.gari_type||R.gari_type,gari_grade:$.gari_grade||R.gari_grade,packaging_type:K,cost_per_kg:$.cost_per_kg_gari||R.cost_per_kg,quantity_units:"",quantity_kg:""}))}},q=(S,$)=>!S||!$||$<=0?0:({"1KG_POUCH":1,"2KG_POUCH":2,"5KG_PACK":5,"50KG_BAG":50}[S]||0)*$,ce=S=>{A($=>{const K=q(S,$.quantity_units||0);return{...$,packaging_type:S,quantity_kg:K}})},Me=S=>{A($=>{const K=q($.packaging_type,S||0);return{...$,quantity_units:S,quantity_kg:K}})};h.useEffect(()=>{_&&k.farm_id&&F()},[_,k.farm_id]);const _e=async S=>{S.preventDefault();try{await B.post("/api/v1/gari-sales",k),M(!1),H()}catch($){alert("Error creating sale: "+($.response?.data?.message||"Unknown error"))}},he=S=>{C(S),o({payment_status:S.payment_status||"PAID",payment_method:S.payment_method||"CASH",amount_paid:S.amount_paid||0,discount:S.discount||0,unit_price:S.unit_price||0,notes:S.notes||""})},ge=async S=>{S.preventDefault();try{console.log("Updating sale with data:",x);const $=await B.put(`/api/v1/gari-sales/${D.id}`,x);console.log("Update response:",$.data),C(null),o(null),H()}catch($){console.error("Error updating sale:",$),alert("Error updating sale: "+($.response?.data?.message||"Unknown error"))}},Y=S=>{const $=Number(D?.final_amount||0),K=Number(S||0);let R="OUTSTANDING";K>=$?R="PAID":K>0&&(R="PARTIAL"),o({...x,amount_paid:S,payment_status:R})};if(p)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const X=i.reduce((S,$)=>S+(Number($.final_amount)||0),0),J=i.reduce((S,$)=>S+(Number($.gross_margin)||0),0);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Sales"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track sales and revenue"})]}),e.jsxs("button",{onClick:T,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"New Sale"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",Number(X||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Margin"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",Number(J||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Sales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Yr,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sales yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first sale to get started"}),e.jsx("button",{onClick:T,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Sale"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sale Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:S.sale_code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(S.sale_date).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[S.customer_name||S.customer?.name||"Walk-in",e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",S.customer_type,")"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[S.gari_type,"  ",S.packaging_type?.replace("_"," ")]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[S.quantity_kg," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["",Number(S.final_amount||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(S.gross_margin||0).toFixed(2),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",Number(S.gross_margin_percent||0).toFixed(1),"%)"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${S.payment_status==="PAID"?"bg-green-100 text-green-800":S.payment_status==="PARTIAL"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:S.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("button",{onClick:()=>he(S),className:"text-green-600 hover:text-green-700 flex items-center",children:[e.jsx(Ve,{className:"h-4 w-4 mr-1"}),"Edit"]})})]},S.id))})]})})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Sale"}),e.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:k.farm_id,onChange:S=>A({...k,farm_id:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),N.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sale Date *"}),e.jsx("input",{type:"date",required:!0,value:k.sale_date,onChange:S=>A({...k,sale_date:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",value:k.customer_name,onChange:S=>A({...k,customer_name:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Walk-in customer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Type *"}),e.jsxs("select",{required:!0,value:k.customer_type,onChange:S=>A({...k,customer_type:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"RETAIL",children:"Retail"}),e.jsx("option",{value:"BULK_BUYER",children:"Bulk Buyer"}),e.jsx("option",{value:"DISTRIBUTOR",children:"Distributor"}),e.jsx("option",{value:"CATERING",children:"Catering"}),e.jsx("option",{value:"HOTEL",children:"Hotel"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Batch (FIFO) *"}),e.jsxs("select",{required:!0,disabled:!k.farm_id||m,value:k.gari_production_batch_id,onChange:S=>te(S.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${!k.farm_id||m?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`,children:[e.jsx("option",{value:"",children:m?"Loading batches...":k.farm_id?w.length===0?"No inventory available for this farm":"Select batch (oldest first - FIFO)":"Select farm first"}),w.map(S=>e.jsxs("option",{value:S.batch_id,children:[S.batch_code," - ",Number(S.total_available_kg||0).toFixed(2)," kg available",S.processing_date&&` (${new Date(S.processing_date).toLocaleDateString()})`,S.gari_type&&` - ${S.gari_type}`,S.gari_grade&&` ${S.gari_grade}`,S.cost_per_kg_gari&&` - ${Number(S.cost_per_kg_gari).toFixed(2)}/kg`]},S.batch_id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m?"Loading available batches...":"Batches are sorted by production date (FIFO - First In, First Out). Selecting a batch will auto-fill product details."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),e.jsxs("select",{required:!0,disabled:!k.gari_production_batch_id,value:k.gari_type,onChange:S=>A({...k,gari_type:S.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${k.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from selected batch"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),e.jsxs("select",{required:!0,disabled:!k.gari_production_batch_id,value:k.gari_grade,onChange:S=>A({...k,gari_grade:S.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${k.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("option",{value:"FINE",children:"Fine"}),e.jsx("option",{value:"COARSE",children:"Coarse"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from selected batch"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packaging *"}),e.jsxs("select",{required:!0,disabled:!k.gari_production_batch_id,value:k.packaging_type,onChange:S=>ce(S.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${k.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),e.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),e.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),e.jsx("option",{value:"50KG_BAG",children:"50kg Bag"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:k.gari_production_batch_id?"Select packaging size":"Select a batch first"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity (units) *"}),e.jsx("input",{type:"number",step:"1",min:"1",required:!0,disabled:!k.packaging_type,value:k.quantity_units,onChange:S=>Me(S.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${k.packaging_type?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,placeholder:"Enter number of units"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Number of ",k.packaging_type?.replace("_"," ").toLowerCase()||"units"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Quantity (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,readOnly:!0,value:k.quantity_kg||0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated from packaging and quantity"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price () *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:k.unit_price,onChange:S=>A({...k,unit_price:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount ()"}),e.jsx("input",{type:"number",step:"0.01",value:k.discount,onChange:S=>A({...k,discount:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ()"}),e.jsx("input",{type:"number",step:"0.01",value:k.cost_per_kg,onChange:S=>A({...k,cost_per_kg:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"From inventory"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method *"}),e.jsxs("select",{required:!0,value:k.payment_method,onChange:S=>A({...k,payment_method:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"TRANSFER",children:"Transfer"}),e.jsx("option",{value:"POS",children:"POS"}),e.jsx("option",{value:"CHEQUE",children:"Cheque"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid ()"}),e.jsx("input",{type:"number",step:"0.01",value:k.amount_paid,onChange:S=>A({...k,amount_paid:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sales Channel"}),e.jsx("input",{type:"text",value:k.sales_channel,onChange:S=>A({...k,sales_channel:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Warehouse, Shop, Distributor"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>M(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Sale"})]})]})]})}),D&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Edit Sale - ",D.sale_code]}),e.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("span",{className:"ml-2 font-medium",children:D.customer_name||"Walk-in"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Product:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[D.gari_type,"  ",D.packaging_type?.replace("_"," ")]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Quantity:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[D.quantity_kg," kg"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["",Number(D.final_amount||0).toFixed(2)]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status *"}),e.jsxs("select",{required:!0,value:x.payment_status,onChange:S=>o({...x,payment_status:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"PAID",children:"Paid"}),e.jsx("option",{value:"PARTIAL",children:"Partial"}),e.jsx("option",{value:"OUTSTANDING",children:"Outstanding"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method *"}),e.jsxs("select",{required:!0,value:x.payment_method,onChange:S=>o({...x,payment_method:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"TRANSFER",children:"Transfer"}),e.jsx("option",{value:"POS",children:"POS"}),e.jsx("option",{value:"CHEQUE",children:"Cheque"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid () *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:Number(D.final_amount||0),required:!0,value:x.amount_paid,onChange:S=>Y(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Outstanding: ",Number(Number(D.final_amount||0)-Number(x.amount_paid||0)).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount ()"}),e.jsx("input",{type:"number",step:"0.01",value:x.discount,onChange:S=>o({...x,discount:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price ()"}),e.jsx("input",{type:"number",step:"0.01",value:x.unit_price,onChange:S=>o({...x,unit_price:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:x.notes,onChange:S=>o({...x,notes:S.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{C(null),o(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Update Sale"})]})]})]})})]})}function Gx(){const[i,c]=h.useState({batches:[],inventory:[],sales:[],summary:null}),[u,g]=h.useState(!0),[N,y]=h.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});h.useEffect(()=>{w()},[N]);const w=async()=>{try{const m=new URLSearchParams({date_from:N.from,date_to:N.to}),E=new URLSearchParams({date_from:N.from,date_to:N.to,per_page:"1000"}),[p,b,_,M]=await Promise.all([B.get(`/api/v1/gari-production-batches?${m.toString()}`),B.get("/api/v1/gari-inventory?status=IN_STOCK"),B.get(`/api/v1/gari-sales?${E.toString()}`),B.get(`/api/v1/gari-sales/summary?${m.toString()}`)]),D=Array.isArray(p.data.data)?p.data.data:Array.isArray(p.data)?p.data:[],C=Array.isArray(b.data.data)?b.data.data:Array.isArray(b.data)?b.data:[];let x=[];_.data.data&&Array.isArray(_.data.data)?x=_.data.data:Array.isArray(_.data)&&(x=_.data),console.log("Summary API Response:",M.data),console.log("Date Range:",N),console.log("Sales Response:",_.data);const o=M.data.overall||{},k=M.data.data||M.data;console.log("Overall Summary:",o),console.log("Sales array length:",x.length),console.log("Sample sale (first):",x[0]);const A=D.reduce((he,ge)=>he+(Number(ge.cassava_quantity_kg)||0),0),H=D.reduce((he,ge)=>he+(Number(ge.gari_produced_kg)||0),0),I=A>0?H/A*100:0,T=D.length>0?D.reduce((he,ge)=>he+(Number(ge.cost_per_kg_gari)||0),0)/D.length:0,F=o.total_revenue!==void 0?o.total_revenue:x.reduce((he,ge)=>he+(Number(ge.final_amount)||0),0),te=o.total_margin!==void 0?o.total_margin:x.reduce((he,ge)=>he+(Number(ge.gross_margin)||0),0),q=o.total_kg_sold!==void 0?o.total_kg_sold:x.reduce((he,ge)=>he+(Number(ge.quantity_kg)||0),0),ce=o.avg_price_per_kg!==void 0?o.avg_price_per_kg:(()=>{let he=0,ge=0;return x.forEach(Y=>{const X=Number(Y.quantity_kg)||0,J=Number(Y.unit_price)||0;X>0&&J>0&&(he+=J*X,ge+=X)}),ge>0?he/ge:0})();console.log("Calculated KPIs:",{totalRevenue:F,totalMargin:te,totalSalesVolumeKg:q,avgPricePerKg:ce,totalSales:o.total_sales!==void 0?o.total_sales:x.length});const Me=C.reduce((he,ge)=>he+(Number(ge.quantity_kg)||0),0),_e={totalCassava:A,totalGari:H,avgYield:I,avgCostPerKg:T,totalRevenue:F,totalMargin:te,totalStock:Me,avgPricePerKg:ce,totalSalesVolumeKg:q,totalBatches:D.length,totalSales:o.total_sales!==void 0?o.total_sales:x.length};console.log("Setting KPIs summary:",_e),c({batches:D,inventory:C,sales:x,summary:_e})}catch(m){console.error("Error fetching KPI data:",m)}finally{g(!1)}};if(u)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const v=i.summary||{};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Production KPIs"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Key performance indicators for gari production"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:N.from,onChange:m=>y({...N,from:m.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:N.to,onChange:m=>y({...N,to:m.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conversion Yield"}),e.jsx(yt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(v.avgYield||0).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target: 22-30%"}),v.avgYield&&e.jsx("div",{className:`mt-2 text-xs ${v.avgYield>=22&&v.avgYield<=30?"text-green-600":v.avgYield<22?"text-red-600":"text-yellow-600"}`,children:v.avgYield<22?" Below target":v.avgYield>30?" Above target":" On target"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cost per kg"}),e.jsx(or,{className:"h-5 w-5 text-blue-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(v.avgCostPerKg||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Average production cost"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Stock on Hand"}),e.jsx(ut,{className:"h-5 w-5 text-purple-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(v.totalStock||0).toFixed(2)," kg"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Current inventory"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sales Volume"}),e.jsx(yt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(v.totalSalesVolumeKg||0).toFixed(2)," kg"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total kg sold in period"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Selling Price"}),e.jsx(or,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(v.avgPricePerKg||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Per kg"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),e.jsx(or,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(v.totalMargin||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Number(v.totalRevenue||0)>0?Number(Number(v.totalMargin||0)/Number(v.totalRevenue||1)*100).toFixed(1)+"% margin":"No sales"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(at,{className:"h-5 w-5 mr-2 text-orange-600"}),"Production Summary"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Batches"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:v.totalBatches||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cassava Processed"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(v.totalCassava||0).toFixed(2)," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Gari Produced"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(v.totalGari||0).toFixed(2)," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Yield"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(v.avgYield||0).toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(or,{className:"h-5 w-5 mr-2 text-green-600"}),"Sales Summary"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(v.totalRevenue||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Margin"}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["",Number(v.totalMargin||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Price"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(v.avgPricePerKg||0).toFixed(2),"/kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Sales"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:v.totalSales||0})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Production Batches"})}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[i.batches.slice(0,5).map(m=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.batch_code}),e.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(m.processing_date).toLocaleDateString()," ",m.cassava_quantity_kg," kg cassava  ",m.gari_produced_kg," kg gari"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-green-600",children:[m.conversion_yield_percent!=null?Number(m.conversion_yield_percent).toFixed(1):"0","% yield"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["",m.cost_per_kg_gari!=null?Number(m.cost_per_kg_gari).toFixed(2):"0","/kg"]})]})]})},m.id)),i.batches.length===0&&e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No production batches in this period"})]})]})]})}function Kx(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState(!0),[w,v]=h.useState(!1),[m,E]=h.useState({farm_id:"",name:"",material_type:"POUCH",size:"",unit:"pieces",opening_balance:0,quantity_purchased:0,quantity_used:0,cost_per_unit:"",notes:""});h.useEffect(()=>{p()},[]);const p=async()=>{try{const[D,C]=await Promise.all([B.get("/api/v1/packaging-materials"),B.get("/api/v1/farms")]);c(D.data.data||D.data),g(C.data.data||C.data)}catch(D){console.error("Error fetching data:",D)}finally{y(!1)}},b=async()=>{try{const D=await B.get("/api/v1/farms");g(D.data.data||D.data)}catch(D){console.error("Error fetching farms:",D)}},_=()=>{v(!0),b()},M=async D=>{D.preventDefault();try{await B.post("/api/v1/packaging-materials",m),v(!1),p()}catch(C){alert("Error creating material: "+(C.response?.data?.message||"Unknown error"))}};return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Packaging Materials"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track packaging inventory"})]}),e.jsxs("button",{onClick:_,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"Add Material"]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(xx,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No packaging materials yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first packaging material to get started"}),e.jsx("button",{onClick:_,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Add Material"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Opening"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purchased"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Used"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Closing"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[D.name,D.size&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",D.size,")"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.material_type}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[D.opening_balance," ",D.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[D.quantity_purchased," ",D.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[D.quantity_used," ",D.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:[D.closing_balance," ",D.unit]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.total_cost?`${D.total_cost.toFixed(2)}`:"N/A"})]},D.id))})]})})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Packaging Material"}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:m.farm_id,onChange:D=>E({...m,farm_id:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:D=>E({...m,name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1kg Pouch"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{required:!0,value:m.material_type,onChange:D=>E({...m,material_type:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"POUCH",children:"Pouch"}),e.jsx("option",{value:"SACK",children:"Sack"}),e.jsx("option",{value:"LABEL",children:"Label"}),e.jsx("option",{value:"SEALING_ROLL",children:"Sealing Roll"}),e.jsx("option",{value:"CARTON",children:"Carton"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),e.jsx("input",{type:"text",value:m.size,onChange:D=>E({...m,size:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1kg"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opening"}),e.jsx("input",{type:"number",step:"0.01",value:m.opening_balance,onChange:D=>E({...m,opening_balance:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchased"}),e.jsx("input",{type:"number",step:"0.01",value:m.quantity_purchased,onChange:D=>E({...m,quantity_purchased:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Used"}),e.jsx("input",{type:"number",step:"0.01",value:m.quantity_used,onChange:D=>E({...m,quantity_used:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per Unit ()"}),e.jsx("input",{type:"number",step:"0.01",value:m.cost_per_unit,onChange:D=>E({...m,cost_per_unit:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Material"})]})]})]})})]})}function Qx(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState(!0),[w,v]=h.useState(!1),[m,E]=h.useState({farm_id:"",loss_date:new Date().toISOString().slice(0,10),loss_type:"SPOILAGE",gari_type:"WHITE",packaging_type:"1KG_POUCH",quantity_kg:"",cost_per_kg:"",description:"",notes:""});h.useEffect(()=>{p()},[]);const p=async()=>{try{const[C,x]=await Promise.all([B.get("/api/v1/gari-waste-losses"),B.get("/api/v1/farms")]);c(C.data.data||C.data),g(x.data.data||x.data)}catch(C){console.error("Error fetching data:",C)}finally{y(!1)}},b=async()=>{try{const C=await B.get("/api/v1/farms");g(C.data.data||C.data)}catch(C){console.error("Error fetching farms:",C)}},_=()=>{v(!0),b()},M=async C=>{C.preventDefault();try{await B.post("/api/v1/gari-waste-losses",m),v(!1),p()}catch(x){alert("Error creating loss record: "+(x.response?.data?.message||"Unknown error"))}};if(N)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const D=i.reduce((C,x)=>C+(x.total_loss_value||0),0);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Waste & Losses"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track waste and losses in gari production"})]}),e.jsxs("button",{onClick:_,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"Record Loss"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Loss Value"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["",D.toFixed(2)]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Tx,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No waste/loss records yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Record waste and losses to track efficiency"}),e.jsx("button",{onClick:_,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:"Record Loss"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Loss Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Loss Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(C.loss_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:C.loss_type.replace("_"," ")})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[C.gari_type,"  ",C.packaging_type?.replace("_"," ")]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[C.quantity_kg," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600",children:["",C.total_loss_value?.toFixed(2)||"0.00"]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:C.description||"-"})]},C.id))})]})})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Record Waste/Loss"}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:m.farm_id,onChange:C=>E({...m,farm_id:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loss Date *"}),e.jsx("input",{type:"date",required:!0,value:m.loss_date,onChange:C=>E({...m,loss_date:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loss Type *"}),e.jsxs("select",{required:!0,value:m.loss_type,onChange:C=>E({...m,loss_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"SPOILAGE",children:"Spoilage"}),e.jsx("option",{value:"MOISTURE_DAMAGE",children:"Moisture Damage"}),e.jsx("option",{value:"SPILLAGE",children:"Spillage"}),e.jsx("option",{value:"REJECTED_BATCH",children:"Rejected Batch"}),e.jsx("option",{value:"CUSTOMER_RETURN",children:"Customer Return"}),e.jsx("option",{value:"THEFT",children:"Theft"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type"}),e.jsxs("select",{value:m.gari_type,onChange:C=>E({...m,gari_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packaging"}),e.jsxs("select",{value:m.packaging_type,onChange:C=>E({...m,packaging_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),e.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),e.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),e.jsx("option",{value:"50KG_BAG",children:"50kg Bag"}),e.jsx("option",{value:"BULK",children:"Bulk"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:m.quantity_kg,onChange:C=>E({...m,quantity_kg:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ()"}),e.jsx("input",{type:"number",step:"0.01",value:m.cost_per_kg,onChange:C=>E({...m,cost_per_kg:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:C=>E({...m,description:C.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Describe the loss..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Record Loss"})]})]})]})})]})}function Yx(){const[i,c]=h.useState([]),[u,g]=h.useState({totalRevenue:0,totalMargin:0,totalSales:0,byCrop:{}}),[N,y]=h.useState(!0),[w,v]=h.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});h.useEffect(()=>{m()},[w]);const m=async()=>{try{y(!0);const[E]=await Promise.all([B.get(`/api/v1/gari-sales/summary?date_from=${w.from}&date_to=${w.to}`).catch(()=>({data:{overall:{}}}))]),p=E.data?.overall||{};g({totalRevenue:Number(p.total_revenue||0),totalMargin:Number(p.total_margin||0),totalSales:Number(p.total_sales||0),byCrop:{gari:{revenue:Number(p.total_revenue||0),margin:Number(p.total_margin||0),sales:Number(p.total_sales||0)},bellPepper:{revenue:0,margin:0,sales:0},tomatoes:{revenue:0,margin:0,sales:0},habaneros:{revenue:0,margin:0,sales:0}}})}catch(E){console.error("Error fetching sales data:",E)}finally{y(!1)}};return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Sales"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Sales across all crops and livestock"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:w.from,onChange:E=>v({...w,from:E.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:w.to,onChange:E=>v({...w,to:E.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx(or,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(u.totalRevenue||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),e.jsx(yt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(u.totalMargin||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Sales"}),e.jsx(ut,{className:"h-5 w-5 text-blue-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:u.totalSales})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Sales by Crop"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sales Count"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(u.byCrop).map(([E,p])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:E==="bellPepper"?"Bell Pepper":E}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(p.revenue||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(p.margin||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.sales})]},E))})]})})]})]})}function Zx(){const[i,c]=h.useState({total:0,byCrop:{},byCategory:{}}),[u,g]=h.useState(!0),[N,y]=h.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});h.useEffect(()=>{w()},[N]);const w=async()=>{try{g(!0);const[v]=await Promise.all([B.get(`/api/v1/gari-production-batches?date_from=${N.from}&date_to=${N.to}`).catch(()=>({data:{data:[]}}))]),E=(Array.isArray(v.data?.data)?v.data.data:[]).reduce((p,b)=>p+Number(b.total_cost||0),0);c({total:E,byCrop:{gari:E,bellPepper:0,tomatoes:0,habaneros:0},byCategory:{production:E,labor:0,materials:0,other:0}})}catch(v){console.error("Error fetching expenses data:",v)}finally{g(!1)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Expenses"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Expenses across all crops and activities"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:N.from,onChange:v=>y({...N,from:v.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:N.to,onChange:v=>y({...N,to:v.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx(wi,{className:"h-5 w-5 text-red-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(i.total||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Expenses by Crop"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Percentage"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(i.byCrop).map(([v,m])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:v==="bellPepper"?"Bell Pepper":v}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(m||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.total>0?Number(m/i.total*100).toFixed(1)+"%":"0%"})]},v))})]})})]})]})}function Xx(){const[i,c]=h.useState([]),[u,g]=h.useState({}),[N,y]=h.useState(!0),[w,v]=h.useState({from:new Date(Date.now()-10080*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});h.useEffect(()=>{m()},[w]);const m=async()=>{try{y(!0),c([]),g({totalHours:0,byStaff:{},byCrop:{}})}catch(E){console.error("Error fetching allocations:",E)}finally{y(!1)}};return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Staff Allocation Report"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Time allocation across all activities"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:w.from,onChange:E=>v({...w,from:E.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:w.to,onChange:E=>v({...w,to:E.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center text-gray-500",children:[e.jsx(pi,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"Staff allocation reporting coming soon"}),e.jsx("p",{className:"text-sm mt-2",children:"This will show time allocation by staff, crop, and activity type"})]})]})}function Ct({cropName:i,basePath:c}){const u=[{name:"Production",path:`${c}-production`,icon:at},{name:"Inventory",path:`${c}-inventory`,icon:ut},{name:"Sales",path:`${c}-sales`,icon:Yr},{name:"KPIs",path:`${c}-kpis`,icon:yt}];return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[i," Management"]}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Coming soon - ",i," tracking and management"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map(g=>e.jsxs(vt,{to:`/${g.path}`,className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx(g.icon,{className:"h-8 w-8 text-green-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:g.name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["View ",g.name.toLowerCase()," for ",i]})]},g.path))}),e.jsxs("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Feature Coming Soon"}),e.jsxs("p",{className:"text-yellow-700",children:["The ",i," management module is under development. This will include production tracking, inventory management, sales tracking, and performance KPIs specific to ",i,"."]})]})]})}function Jx(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState(!0),[w,v]=h.useState(!1),[m,E]=h.useState(null),[p,b]=h.useState(""),[_,M]=h.useState(""),[D,C]=h.useState(""),[x,o]=h.useState({site_id:"",name:"",type:"POLYHOUSE",status:"ACTIVE",length:"",width:"",height:"",orientation:"",plant_capacity:"",primary_crop_type:"",cropping_system:"",notes:""});h.useEffect(()=>{k()},[p,_,D]);const k=async()=>{try{const F=new URLSearchParams;p&&F.append("search",p),_&&F.append("status",_),D&&F.append("type",D);const[te,q]=await Promise.all([B.get(`/api/v1/greenhouses?${F.toString()}`),B.get("/api/v1/sites?per_page=1000")]),ce=te.data,Me=ce?.data||(Array.isArray(ce)?ce:[]);c(Me);const _e=q.data,he=_e?.data||(Array.isArray(_e)?_e:[]);g(he)}catch(F){console.error("Error fetching data:",F),alert("Error loading data: "+(F.response?.data?.message||F.message))}finally{y(!1)}},A=()=>{v(!0),E(null),o({site_id:"",name:"",type:"POLYHOUSE",status:"ACTIVE",length:"",width:"",height:"",orientation:"",plant_capacity:"",primary_crop_type:"",cropping_system:"",notes:""})},H=F=>{E(F),o({site_id:F.site?.id||"",name:F.name||"",type:F.type||"POLYHOUSE",status:F.status||(F.is_active?"ACTIVE":"INACTIVE"),length:F.length||"",width:F.width||"",height:F.height||"",orientation:F.orientation||"",plant_capacity:F.plant_capacity||"",primary_crop_type:F.primary_crop_type||"",cropping_system:F.cropping_system||"",notes:F.notes||""}),v(!0)},I=async F=>{F.preventDefault();try{const te={...x};m?await B.patch(`/api/v1/greenhouses/${m.id}`,te):await B.post("/api/v1/greenhouses",te),v(!1),k()}catch(te){const q=te.response?.data?.message||(te.response?.data?.errors?JSON.stringify(te.response.data.errors):"")||te.message;alert("Error saving greenhouse: "+q)}},T=async F=>{if(confirm("Are you sure you want to delete this greenhouse?"))try{await B.delete(`/api/v1/greenhouses/${F}`),k()}catch(te){alert("Error deleting greenhouse: "+(te.response?.data?.message||te.message))}};return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Greenhouse Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage greenhouses across all sites"})]}),e.jsxs("button",{onClick:A,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"New Greenhouse"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Rx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:p,onChange:F=>b(F.target.value),placeholder:"Search by name or code...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:_,onChange:F=>M(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"DECOMMISSIONED",children:"Decommissioned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:D,onChange:F=>C(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"TUNNEL",children:"Tunnel"}),e.jsx("option",{value:"GLASSHOUSE",children:"Glasshouse"}),e.jsx("option",{value:"POLYHOUSE",children:"Polyhouse"}),e.jsx("option",{value:"SHADE_HOUSE",children:"Shade House"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{b(""),M(""),C("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear Filters"})})]})}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(at,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No greenhouses found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first greenhouse to get started"}),e.jsx("button",{onClick:A,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Greenhouse"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area (m)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(F=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:F.greenhouse_code||F.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:F.site?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:F.farm?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:F.type||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${F.status==="ACTIVE"?"bg-green-100 text-green-800":F.status==="MAINTENANCE"?"bg-yellow-100 text-yellow-800":F.status==="DECOMMISSIONED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:F.status||(F.is_active?"ACTIVE":"INACTIVE")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:F.total_area?Number(F.total_area).toFixed(2):F.size_sqm?Number(F.size_sqm).toFixed(2):"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>H(F),className:"text-green-600 hover:text-green-900 mr-4",children:e.jsx(Ve,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(F.id),className:"text-red-600 hover:text-red-900",children:e.jsx(nt,{className:"h-4 w-4"})})]})]},F.id))})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:m?"Edit Greenhouse":"Create Greenhouse"}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site *"}),e.jsxs("select",{required:!0,value:x.site_id,onChange:F=>o({...x,site_id:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select site"}),u.map(F=>e.jsxs("option",{value:F.id,children:[F.name," (",F.farm?.name||"No Farm",")"]},F.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Farm will be automatically set from the selected site. Greenhouse code will be auto-generated."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:F=>o({...x,name:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{required:!0,value:x.type,onChange:F=>o({...x,type:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"TUNNEL",children:"Tunnel"}),e.jsx("option",{value:"GLASSHOUSE",children:"Glasshouse"}),e.jsx("option",{value:"POLYHOUSE",children:"Polyhouse"}),e.jsx("option",{value:"SHADE_HOUSE",children:"Shade House"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:x.status,onChange:F=>o({...x,status:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"DECOMMISSIONED",children:"Decommissioned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Length (m) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:x.length,onChange:F=>o({...x,length:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width (m) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:x.width,onChange:F=>o({...x,width:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height (m)"}),e.jsx("input",{type:"number",step:"0.01",value:x.height,onChange:F=>o({...x,height:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orientation"}),e.jsxs("select",{value:x.orientation,onChange:F=>o({...x,orientation:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select orientation"}),e.jsx("option",{value:"N_S",children:"North-South"}),e.jsx("option",{value:"E_W",children:"East-West"}),e.jsx("option",{value:"NE_SW",children:"Northeast-Southwest"}),e.jsx("option",{value:"NW_SE",children:"Northwest-Southeast"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plant Capacity"}),e.jsx("input",{type:"number",value:x.plant_capacity,onChange:F=>o({...x,plant_capacity:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Crop Type"}),e.jsx("input",{type:"text",value:x.primary_crop_type,onChange:F=>o({...x,primary_crop_type:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Bell Pepper"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cropping System"}),e.jsxs("select",{value:x.cropping_system,onChange:F=>o({...x,cropping_system:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select system"}),e.jsx("option",{value:"SOIL",children:"Soil"}),e.jsx("option",{value:"COCOPEAT",children:"Cocopeat"}),e.jsx("option",{value:"HYDROPONIC",children:"Hydroponic"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:x.notes,onChange:F=>o({...x,notes:F.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:m?"Update":"Create"})]})]})]})})]})}function eh(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState([]),[w,v]=h.useState(!0),[m,E]=h.useState(!1),[p,b]=h.useState({farm_id:"",greenhouse_id:"",start_date:new Date().toISOString().slice(0,10),expected_end_date:"",expected_yield_kg:"",notes:""});h.useEffect(()=>{_()},[]);const _=async()=>{try{const[o,k]=await Promise.all([B.get("/api/v1/bell-pepper-cycles"),B.get("/api/v1/farms")]),A=o.data?.data||o.data||[],H=k.data?.data||k.data||[];c(Array.isArray(A)?A:[]),g(Array.isArray(H)?H:[])}catch(o){console.error("Error fetching data:",o)}finally{v(!1)}},M=async o=>{if(!o){y([]);return}try{const k=await B.get(`/api/v1/greenhouses?farm_id=${o}`),A=k.data?.data||k.data||[];y(Array.isArray(A)?A:[])}catch(k){console.error("Error fetching greenhouses:",k),y([])}},D=()=>{b({farm_id:"",greenhouse_id:"",start_date:new Date().toISOString().slice(0,10),expected_end_date:"",expected_yield_kg:"",notes:""}),y([]),E(!0)},C=o=>{b({...p,farm_id:o,greenhouse_id:""}),M(o)},x=async o=>{o.preventDefault();try{await B.post("/api/v1/bell-pepper-cycles",p),E(!1),_()}catch(k){alert("Error creating cycle: "+(k.response?.data?.message||"Unknown error"))}};return w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bell Pepper Production Cycles"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track production cycles and yield per sqm"})]}),e.jsxs("button",{onClick:D,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"New Cycle"]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(at,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cycles yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production cycle to get started"}),e.jsx("button",{onClick:D,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Cycle"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cycle Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Greenhouse"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Start Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expected Yield"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actual Yield"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Yield/Sqm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Variance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(o=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.jsx(vt,{to:`/bell-pepper-cycles/${o.id}`,className:"text-green-600 hover:text-green-700",children:o.cycle_code})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.greenhouse?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(o.start_date).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(o.expected_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(o.actual_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(o.actual_yield_per_sqm||0).toFixed(2)," kg/sqm"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("span",{className:`${Number(o.yield_variance_percent||0)>=0?"text-green-600":"text-red-600"}`,children:[Number(o.yield_variance_percent||0).toFixed(1),"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${o.status==="COMPLETED"?"bg-green-100 text-green-800":o.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:o.status})})]},o.id))})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Production Cycle"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:p.farm_id,onChange:o=>C(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse *"}),e.jsxs("select",{required:!0,disabled:!p.farm_id||N.length===0,value:p.greenhouse_id,onChange:o=>b({...p,greenhouse_id:o.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${!p.farm_id||N.length===0?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`,children:[e.jsx("option",{value:"",children:p.farm_id?N.length===0?"No greenhouses available":"Select greenhouse":"Select farm first"}),N.map(o=>e.jsxs("option",{value:o.id,children:[o.name," (",o.size_sqm," sqm)"]},o.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),e.jsx("input",{type:"date",required:!0,value:p.start_date,onChange:o=>{const k=o.target.value;b({...p,start_date:k,expected_end_date:k?new Date(new Date(k).getTime()+4320*60*60*1e3).toISOString().slice(0,10):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected End Date *"}),e.jsx("input",{type:"date",required:!0,value:p.expected_end_date,onChange:o=>b({...p,expected_end_date:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"6 months from start date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Yield (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:p.expected_yield_kg,onChange:o=>b({...p,expected_yield_kg:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:p.notes,onChange:o=>b({...p,notes:o.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Cycle"})]})]})]})})]})}function th(){const{id:i}=bi(),[c,u]=h.useState(null),[g,N]=h.useState([]),[y,w]=h.useState([]),[v,m]=h.useState(!0),[E,p]=h.useState(!1),[b,_]=h.useState(!1),[M,D]=h.useState(null),[C,x]=h.useState({cost_type:"SEEDS",description:"",quantity:"",unit:"",unit_cost:"",total_cost:"",cost_date:new Date().toISOString().slice(0,10),staff_id:"",hours_allocated:"",notes:""}),[o,k]=h.useState({harvest_date:new Date().toISOString().slice(0,10),weight_kg:"",crates_count:"",grade:"MIXED",status:"HARVESTED",notes:""});h.useEffect(()=>{A()},[i]);const A=async()=>{try{const[q,ce,Me]=await Promise.all([B.get(`/api/v1/bell-pepper-cycles/${i}`),B.get(`/api/v1/bell-pepper-cycle-costs?bell_pepper_cycle_id=${i}`),B.get(`/api/v1/bell-pepper-harvests?bell_pepper_cycle_id=${i}`)]),_e=q.data?.data||q.data,he=ce.data?.data||ce.data||[],ge=Me.data?.data||Me.data||[];u(_e),N(Array.isArray(he)?he:[]),w(Array.isArray(ge)?ge:[])}catch(q){console.error("Error fetching cycle data:",q)}finally{m(!1)}},H=async q=>{q.preventDefault();try{const ce={...C,bell_pepper_cycle_id:i,farm_id:c?.farm_id};M?await B.put(`/api/v1/bell-pepper-cycle-costs/${M.id}`,ce):await B.post("/api/v1/bell-pepper-cycle-costs",ce),p(!1),D(null),A()}catch(ce){alert("Error saving cost: "+(ce.response?.data?.message||"Unknown error"))}},I=async q=>{q.preventDefault();try{const ce={...o,farm_id:c?.farm_id,bell_pepper_cycle_id:i,greenhouse_id:c?.greenhouse_id};await B.post("/api/v1/bell-pepper-harvests",ce),_(!1),A()}catch(ce){alert("Error saving harvest: "+(ce.response?.data?.message||"Unknown error"))}},T=async q=>{if(confirm("Are you sure you want to delete this cost?"))try{await B.delete(`/api/v1/bell-pepper-cycle-costs/${q}`),A()}catch(ce){alert("Error deleting cost: "+(ce.response?.data?.message||"Unknown error"))}};if(v)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});if(!c)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Cycle not found"}),e.jsx(vt,{to:"/bell-pepper-production",className:"text-green-600 hover:text-green-700",children:" Back to Cycles"})]});const F=[{value:"SEEDS",label:"Seeds"},{value:"FERTILIZER_CHEMICALS",label:"Fertilizer/Chemicals"},{value:"FUEL_WATER_PUMPING",label:"Fuel (Water Pumping)"},{value:"LABOUR_DEDICATED",label:"Labour (Dedicated)"},{value:"LABOUR_SHARED",label:"Labour (Shared)"},{value:"SPRAY_GUNS",label:"Spray Guns"},{value:"IRRIGATION_EQUIPMENT",label:"Irrigation Equipment"},{value:"PROTECTIVE_CLOTHING",label:"Protective Clothing"},{value:"GREENHOUSE_AMORTIZATION",label:"Greenhouse Amortization"},{value:"BOREHOLE_AMORTIZATION",label:"Borehole Amortization"},{value:"LOGISTICS",label:"Logistics"},{value:"OTHER",label:"Other"}],te=g.reduce((q,ce)=>q+Number(ce.total_cost||0),0);return y.reduce((q,ce)=>q+Number(ce.weight_kg||0),0),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(vt,{to:"/bell-pepper-production",className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(Ni,{className:"h-5 w-5 mr-2"}),"Back to Cycles"]}),c.status!=="COMPLETED"&&e.jsxs("button",{onClick:()=>{alert("Cycle update coming soon")},className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Ve,{className:"h-5 w-5 mr-2"}),"Edit Cycle"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(at,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:c.cycle_code}),e.jsxs("p",{className:"text-gray-600",children:[c.greenhouse?.name,"  ",c.farm?.name]})]})]}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded ${c.status==="COMPLETED"?"bg-green-100 text-green-800":c.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:c.status})]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Expected Yield"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Number(c.expected_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Number(c.expected_yield_per_sqm||0).toFixed(2)," kg/sqm"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Actual Yield"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Number(c.actual_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Number(c.actual_yield_per_sqm||0).toFixed(2)," kg/sqm"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Yield Variance"}),e.jsxs("p",{className:`text-lg font-semibold ${Number(c.yield_variance_percent||0)>=0?"text-green-600":"text-red-600"}`,children:[Number(c.yield_variance_percent||0).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Costs"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",Number(te||0).toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Costs"}),e.jsxs("button",{onClick:()=>{D(null),x({cost_type:"SEEDS",description:"",quantity:"",unit:"",unit_cost:"",total_cost:"",cost_date:new Date().toISOString().slice(0,10),staff_id:"",hours_allocated:"",notes:""}),p(!0)},className:"bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 flex items-center text-sm",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),"Add Cost"]})]}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[g.map(q=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:F.find(ce=>ce.value===q.cost_type)?.label||q.cost_type}),q.description&&e.jsx("p",{className:"text-sm text-gray-600",children:q.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(q.cost_date).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",Number(q.total_cost||0).toFixed(2)]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>{D(q),x({cost_type:q.cost_type,description:q.description||"",quantity:q.quantity||"",unit:q.unit||"",unit_cost:q.unit_cost||"",total_cost:q.total_cost||"",cost_date:q.cost_date?new Date(q.cost_date).toISOString().slice(0,10):new Date().toISOString().slice(0,10),staff_id:q.staff_id||"",hours_allocated:q.hours_allocated||"",notes:q.notes||""}),p(!0)},className:"text-green-600 hover:text-green-700",children:e.jsx(Ve,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(q.id),className:"text-red-600 hover:text-red-700",children:e.jsx(nt,{className:"h-4 w-4"})})]})]})]})},q.id)),g.length===0&&e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No costs recorded yet"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Harvests"}),e.jsxs("button",{onClick:()=>{k({harvest_date:new Date().toISOString().slice(0,10),weight_kg:"",crates_count:"",grade:"MIXED",status:"HARVESTED",notes:""}),_(!0)},className:"bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 flex items-center text-sm",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),"Add Harvest"]})]}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[y.map(q=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:q.harvest_code}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Number(q.weight_kg||0).toFixed(2)," kg  ",q.crates_count," crates"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(q.harvest_date).toLocaleDateString(),"  Grade: ",q.grade]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${q.status==="SOLD"?"bg-green-100 text-green-800":q.status==="DELIVERED"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:q.status})]})},q.id)),y.length===0&&e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No harvests recorded yet"})]})]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:M?"Edit Cost":"Add Cost"}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Type *"}),e.jsx("select",{required:!0,value:C.cost_type,onChange:q=>x({...C,cost_type:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:F.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Date *"}),e.jsx("input",{type:"date",required:!0,value:C.cost_date,onChange:q=>x({...C,cost_date:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:C.description,onChange:q=>x({...C,description:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Cost () *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:C.total_cost,onChange:q=>x({...C,total_cost:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),(C.cost_type==="SEEDS"||C.cost_type==="FERTILIZER_CHEMICALS")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",step:"0.01",value:C.quantity,onChange:q=>x({...C,quantity:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("input",{type:"text",value:C.unit,onChange:q=>x({...C,unit:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"kg, litres, etc"})]})]}),(C.cost_type==="LABOUR_DEDICATED"||C.cost_type==="LABOUR_SHARED")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours Allocated"}),e.jsx("input",{type:"number",step:"0.5",value:C.hours_allocated,onChange:q=>x({...C,hours_allocated:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:C.notes,onChange:q=>x({...C,notes:q.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{p(!1),D(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[M?"Update":"Add"," Cost"]})]})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Harvest"}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Date *"}),e.jsx("input",{type:"date",required:!0,value:o.harvest_date,onChange:q=>k({...o,harvest_date:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:o.weight_kg,onChange:q=>{const ce=q.target.value;k({...o,weight_kg:ce,crates_count:ce?Math.ceil(ce/9.5):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crates Count"}),e.jsx("input",{type:"number",value:o.crates_count,onChange:q=>k({...o,crates_count:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated (9-10kg per crate)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade *"}),e.jsxs("select",{required:!0,value:o.grade,onChange:q=>k({...o,grade:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"A",children:"Grade A"}),e.jsx("option",{value:"B",children:"Grade B"}),e.jsx("option",{value:"C",children:"Grade C"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:o.status,onChange:q=>k({...o,status:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"HARVESTED",children:"Harvested"}),e.jsx("option",{value:"PACKED",children:"Packed"}),e.jsx("option",{value:"IN_TRANSIT",children:"In Transit"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"}),e.jsx("option",{value:"SOLD",children:"Sold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:o.notes,onChange:q=>k({...o,notes:q.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>_(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Harvest"})]})]})]})})]})}function rh(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState([]),[w,v]=h.useState([]),[m,E]=h.useState([]),[p,b]=h.useState(!0),_=(f,G=2)=>{const ee=Number(f);return isNaN(ee)||ee===null||ee===void 0?"0.00":ee.toFixed(G)},[M,D]=h.useState(!1),[C,x]=h.useState(!1),[o,k]=h.useState({farm_id:"",bell_pepper_cycle_id:"",greenhouse_id:"",harvest_date:new Date().toISOString().slice(0,10),grade_a_kg:"0",grade_b_kg:"0",grade_c_kg:"0",crates_count:"",notes:""}),[A,H]=h.useState({farm_id:"",cycle_id:"",greenhouse_id:""}),[I,T]=h.useState(null);h.useEffect(()=>{F()},[A]),h.useEffect(()=>{if(I&&I.start_date&&o.harvest_date){const f=X(o.harvest_date,I);console.log("useEffect validation:",f,"showPopup:",!f.valid),x(!f.valid)}else x(!1)},[I,o.harvest_date]);const F=async()=>{try{const f=new URLSearchParams;A.farm_id&&f.append("farm_id",A.farm_id),A.cycle_id&&f.append("bell_pepper_cycle_id",A.cycle_id),A.greenhouse_id&&f.append("greenhouse_id",A.greenhouse_id);const[G,ee,de]=await Promise.all([B.get(`/api/v1/bell-pepper-harvests?${f.toString()}`),B.get("/api/v1/bell-pepper-cycles?per_page=1000"),B.get("/api/v1/farms?per_page=1000")]),me=G.data?.data||(Array.isArray(G.data)?G.data:[]),ve=ee.data?.data||(Array.isArray(ee.data)?ee.data:[]),ye=de.data?.data||(Array.isArray(de.data)?de.data:[]);c(Array.isArray(me)?me:[]),g(Array.isArray(ve)?ve:[]),v(Array.isArray(ye)?ye:[])}catch(f){console.error("Error fetching data:",f)}finally{b(!1)}},te=async f=>{if(!f){E([]);return}try{const G=await B.get(`/api/v1/greenhouses?farm_id=${f}`),ee=G.data?.data||G.data||[];E(Array.isArray(ee)?ee:[])}catch(G){console.error("Error fetching greenhouses:",G),E([])}},q=async f=>{if(!f){y([]);return}try{const G=await B.get(`/api/v1/bell-pepper-cycles?greenhouse_id=${f}&status=IN_PROGRESS&per_page=1000`),ee=G.data?.data||(Array.isArray(G.data)?G.data:[]),de=Array.isArray(ee)?ee:[];if(de.length===0){const me=await B.get(`/api/v1/bell-pepper-cycles?greenhouse_id=${f}&status=PLANNED&per_page=1000`),ve=me.data?.data||(Array.isArray(me.data)?me.data:[]);y(Array.isArray(ve)?ve:[])}else y(de);console.log("Cycles loaded for greenhouse:",f,de.length)}catch(G){console.error("Error fetching cycles:",G),y([])}},ce=async()=>{if(k({farm_id:"",bell_pepper_cycle_id:"",greenhouse_id:"",harvest_date:new Date().toISOString().slice(0,10),grade_a_kg:"0",grade_b_kg:"0",grade_c_kg:"0",crates_count:"",notes:""}),E([]),y([]),T(null),x(!1),w.length===0)try{const f=await B.get("/api/v1/farms?per_page=1000"),G=f.data?.data||(Array.isArray(f.data)?f.data:[]);v(Array.isArray(G)?G:[])}catch(f){console.error("Error fetching farms:",f)}D(!0)},Me=f=>{k({...o,farm_id:f,greenhouse_id:"",bell_pepper_cycle_id:""}),te(f)},_e=f=>{k({...o,greenhouse_id:f,bell_pepper_cycle_id:"",harvest_date:new Date().toISOString().slice(0,10)}),T(null),q(f)},he=f=>{const G=N.find(ee=>String(ee.id)===String(f));if(console.log("handleCycleChange called with cycleId:",f,"cycle:",G,"current harvest_date:",o.harvest_date),T(G),k({...o,bell_pepper_cycle_id:f}),G&&G.start_date&&o.harvest_date){const ee=X(o.harvest_date,G);console.log("Immediate validation after cycle selection:",{harvestDate:o.harvest_date,cycleStartDate:G.start_date,validation:ee,willShowPopup:!ee.valid}),ee.valid?x(!1):(console.log("Setting popup to true immediately"),x(!0))}else x(!1)},ge=()=>{if(I&&I.start_date){const f=new Date(I.start_date),G=new Date(f);return G.setDate(G.getDate()+70),G.toISOString().slice(0,10)}return null},Y=()=>{if(I&&I.expected_end_date){const f=new Date(I.expected_end_date),G=new Date;return f<G?f.toISOString().slice(0,10):G.toISOString().slice(0,10)}return new Date().toISOString().slice(0,10)},X=(f,G=I)=>{if(!G||!G.start_date||!f)return{valid:!0};const ee=new Date(G.start_date),de=new Date(f),me=new Date(ee);me.setDate(me.getDate()+70);const ve=de.getTime()-ee.getTime(),ye=Math.floor(ve/(1e3*60*60*24));return console.log("Validating date:",{harvestDate:f,cycleStartDate:G.start_date,daysDifference:ye,minRequired:70,isValid:ye>=70}),ye<70?{valid:!1,minDate:me.toISOString().slice(0,10),cycleStartDate:ee.toISOString().slice(0,10),daysDifference:ye}:{valid:!0}},J=f=>{console.log("handleHarvestDateChange called with:",f,"selectedCycle:",I),k({...o,harvest_date:f})},S=()=>{if(!I||!I.start_date)return;X(o.harvest_date).valid||x(!0)},$=()=>{const f=Number(o.grade_a_kg)||0,G=Number(o.grade_b_kg)||0,ee=Number(o.grade_c_kg)||0,de=f+G+ee;return isNaN(de)?0:de},K=()=>{const f=$();return f>0?Math.ceil(f/9.5):0},R=async f=>{if(f.preventDefault(),I&&I.start_date&&!X(o.harvest_date).valid){x(!0);return}try{const G={...o,grade_a_kg:parseFloat(o.grade_a_kg)||0,grade_b_kg:parseFloat(o.grade_b_kg)||0,grade_c_kg:parseFloat(o.grade_c_kg)||0,crates_count:o.crates_count||K()};await B.post("/api/v1/bell-pepper-harvests",G),D(!1),x(!1),F()}catch(G){alert("Error creating harvest: "+(G.response?.data?.message||"Unknown error"))}};return p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Bell Pepper Harvests"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Record and track harvests by grade"})]}),e.jsxs("button",{onClick:ce,className:"w-full md:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Re,{className:"w-5 h-5"}),"Record Harvest"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm"}),e.jsxs("select",{value:A.farm_id,onChange:f=>H({...A,farm_id:f.target.value,greenhouse_id:"",cycle_id:""}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Farms"}),w.map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse"}),e.jsxs("select",{value:A.greenhouse_id,onChange:f=>H({...A,greenhouse_id:f.target.value,cycle_id:""}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:!A.farm_id,children:[e.jsx("option",{value:"",children:"All Greenhouses"}),m.filter(f=>!A.farm_id||f.farm_id==A.farm_id).map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cycle"}),e.jsxs("select",{value:A.cycle_id,onChange:f=>H({...A,cycle_id:f.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:!A.greenhouse_id,children:[e.jsx("option",{value:"",children:"All Cycles"}),u.filter(f=>!A.greenhouse_id||f.greenhouse_id==A.greenhouse_id).map(f=>e.jsx("option",{value:f.id,children:f.cycle_code},f.id))]})]})]})}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx(ut,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No harvests found. Record your first harvest!"})]}):i.map(f=>{const G=Number(f.grade_a_kg)||0,ee=Number(f.grade_b_kg)||0,de=Number(f.grade_c_kg)||0,me=G+ee+de||0;return e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ut,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.harvest_code}),f.harvest_number&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:["Harvest #",f.harvest_number]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fx,{className:"w-4 h-4"}),new Date(f.harvest_date).toLocaleDateString()]}),f.greenhouse&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(yt,{className:"w-4 h-4"}),f.greenhouse.name]}),f.harvester&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(eu,{className:"w-4 h-4"}),f.harvester.name]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[_(me)," kg"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[f.crates_count||0," crates"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-green-700 mb-1",children:"Grade A"}),e.jsxs("div",{className:"text-lg font-semibold text-green-900",children:[_(G)," kg"]})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-yellow-700 mb-1",children:"Grade B"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-900",children:[_(ee)," kg"]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-orange-700 mb-1",children:"Grade C"}),e.jsxs("div",{className:"text-lg font-semibold text-orange-900",children:[_(de)," kg"]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-2 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.status==="HARVESTED"?"bg-blue-100 text-blue-800":f.status==="PACKED"?"bg-purple-100 text-purple-800":f.status==="SOLD"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:f.status})}),f.cycle&&e.jsx(vt,{to:`/bell-pepper-cycles/${f.cycle.id}`,className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"View Cycle "})]})]},f.id)})}),C&&I&&I.start_date&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[100]",onClick:f=>{f.target,f.currentTarget},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",onClick:f=>f.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-red-600",children:"Invalid Harvest Date"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"The selected harvest date is less than 70 days from the cycle start date. This is not possible."}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Cycle Start Date:"})," ",new Date(I.start_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Selected Harvest Date:"})," ",new Date(o.harvest_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Minimum Harvest Date:"})," ",new Date(new Date(I.start_date).setDate(new Date(I.start_date).getDate()+70)).toLocaleDateString()]})]})}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Please select a date that is at least 70 days after the cycle start date."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{x(!1);const f=new Date(I.start_date),G=new Date(f);G.setDate(G.getDate()+70),k({...o,harvest_date:G.toISOString().slice(0,10)})},className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Use Minimum Date"}),e.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Choose Different Date"})]})]})]})}),M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Record New Harvest"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Enter harvest details by grade"})]}),e.jsxs("form",{onSubmit:R,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{value:o.farm_id,onChange:f=>Me(f.target.value),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select Farm"}),w.length===0?e.jsx("option",{value:"",disabled:!0,children:"Loading farms..."}):w.map(f=>e.jsx("option",{value:String(f.id),children:f.name},f.id))]}),w.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No farms available. Please create a farm first."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse *"}),e.jsxs("select",{value:o.greenhouse_id,onChange:f=>_e(f.target.value),required:!0,disabled:!o.farm_id,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Select Greenhouse"}),m.map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Cycle *"}),e.jsxs("select",{value:o.bell_pepper_cycle_id,onChange:f=>he(f.target.value),required:!0,disabled:!o.greenhouse_id||N.length===0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Select Cycle"}),N.length===0&&o.greenhouse_id?e.jsx("option",{value:"",disabled:!0,children:"No active cycles found for this greenhouse"}):N.map(f=>e.jsxs("option",{value:String(f.id),children:[f.cycle_code," ",f.start_date?`(${new Date(f.start_date).toLocaleDateString()})`:""]},f.id))]}),o.greenhouse_id&&N.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No in-progress or planned cycles found. Please create a production cycle first."}),I&&I.start_date&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Cycle started: ",new Date(I.start_date).toLocaleDateString(),". First harvest can be recorded from ",new Date(new Date(I.start_date).setDate(new Date(I.start_date).getDate()+70)).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Date *"}),e.jsx("input",{type:"date",value:o.harvest_date,onChange:f=>{const G=f.target.value;console.log("Date changed to:",G,"Selected cycle:",I),J(G)},onBlur:S,onInput:f=>{const G=f.target.value;if(console.log("Date input event:",G),G&&I&&I.start_date){const ee=X(G,I);console.log("Validation result:",ee),ee.valid?x(!1):(console.log("Showing validation popup"),x(!0))}},min:ge()||void 0,max:Y(),required:!0,className:`w-full border rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ${C?"border-red-500 bg-red-50":"border-gray-300"}`}),I&&I.start_date&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Harvest date must be at least 70 days after cycle start (",new Date(I.start_date).toLocaleDateString(),")"]}),!I&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please select a production cycle first to set date constraints"})]}),e.jsxs("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Harvest by Grade (kg)"}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Grade A (Premium) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:o.grade_a_kg,onChange:f=>k({...o,grade_a_kg:f.target.value}),required:!0,className:"w-full border border-green-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-2",children:"Grade B (Standard) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:o.grade_b_kg,onChange:f=>k({...o,grade_b_kg:f.target.value}),required:!0,className:"w-full border border-yellow-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Grade C (Lower) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:o.grade_c_kg,onChange:f=>k({...o,grade_c_kg:f.target.value}),required:!0,className:"w-full border border-orange-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total Weight"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[_($())," kg"]}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Estimated crates: ",K()]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crates Count"}),e.jsx("input",{type:"number",min:"0",value:o.crates_count,onChange:f=>k({...o,crates_count:f.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:`Auto: ${K()}`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to auto-calculate (9.5kg per crate)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:o.notes,onChange:f=>k({...o,notes:f.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Additional notes about this harvest..."})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Record Harvest"})]})]})]})})]})}function sh(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState(!0),[w,v]=h.useState(!1),[m,E]=h.useState(null),[p,b]=h.useState({farm_id:"",name:"",code:"",type:"farmland",description:"",address:"",latitude:"",longitude:"",total_area:"",area_unit:"hectares",notes:"",is_active:!0});h.useEffect(()=>{_(),M()},[]);const _=async()=>{y(!0);try{const A=await B.get("/api/v1/sites?per_page=1000"),H=A.data?.data||(Array.isArray(A.data)?A.data:[]);c(Array.isArray(H)?H:[])}catch(A){console.error("Error fetching sites:",A),c([])}finally{y(!1)}},M=async()=>{try{const A=await B.get("/api/v1/farms?per_page=1000");console.log("Farms API full response:",A),console.log("Farms API response.data:",A.data);let H=[];A.data?.data&&Array.isArray(A.data.data)?H=A.data.data:Array.isArray(A.data)?H=A.data:A.data&&typeof A.data=="object"&&(Object.keys(A.data).includes("data")&&Array.isArray(A.data.data)?H=A.data.data:H=Object.values(A.data).filter(T=>T&&typeof T=="object"&&T.id)),console.log("Farms parsed:",H.length,H),g(H)}catch(A){console.error("Error fetching farms:",A),console.error("Error response:",A.response),g([])}},D=()=>{E(null),b({farm_id:"",name:"",code:"",type:"farmland",description:"",address:"",latitude:"",longitude:"",total_area:"",area_unit:"hectares",notes:"",is_active:!0}),v(!0)},C=A=>{E(A),b({farm_id:A.farm_id||"",name:A.name||"",code:A.code||"",type:A.type||"farmland",description:A.description||"",address:A.address||"",latitude:A.latitude||"",longitude:A.longitude||"",total_area:A.total_area||"",area_unit:A.area_unit||"hectares",notes:A.notes||"",is_active:A.is_active!==void 0?A.is_active:!0}),v(!0)},x=async A=>{A.preventDefault();try{m?await B.put(`/api/v1/sites/${m.id}`,p):await B.post("/api/v1/sites",p),v(!1),_()}catch(H){console.error("Error saving site:",H),alert(H.response?.data?.message||"Error saving site")}},o=async A=>{if(confirm("Are you sure you want to delete this site?"))try{await B.delete(`/api/v1/sites/${A}`),_()}catch(H){console.error("Error deleting site:",H),alert(H.response?.data?.message||"Error deleting site")}},k=A=>({farmland:"Farmland",warehouse:"Warehouse",factory:"Factory",greenhouse:"Greenhouse",estate:"Estate"})[A]||A;return N?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Sites"}),e.jsxs("button",{onClick:D,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Create Site"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No sites found"})}):i.map(A=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k(A.type)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:A.farm?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${A.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>C(A),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ve,{size:16})}),e.jsx("button",{onClick:()=>o(A.id),className:"text-red-600 hover:text-red-900",children:e.jsx(nt,{size:16})})]})]},A.id))})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:m?"Edit Site":"Create Site"}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm"}),e.jsxs("select",{value:p.farm_id,onChange:A=>b({...p,farm_id:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{required:!0,value:p.type,onChange:A=>b({...p,type:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"farmland",children:"Farmland"}),e.jsx("option",{value:"warehouse",children:"Warehouse"}),e.jsx("option",{value:"factory",children:"Factory"}),e.jsx("option",{value:"greenhouse",children:"Greenhouse"}),e.jsx("option",{value:"estate",children:"Estate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:p.name,onChange:A=>b({...p,name:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:p.code,onChange:A=>b({...p,code:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if not provided"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("textarea",{value:p.address,onChange:A=>b({...p,address:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),e.jsx("input",{type:"number",step:"any",value:p.latitude,onChange:A=>b({...p,latitude:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),e.jsx("input",{type:"number",step:"any",value:p.longitude,onChange:A=>b({...p,longitude:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Area"}),e.jsx("input",{type:"number",step:"0.01",value:p.total_area,onChange:A=>b({...p,total_area:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area Unit"}),e.jsxs("select",{value:p.area_unit,onChange:A=>b({...p,area_unit:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"hectares",children:"Hectares"}),e.jsx("option",{value:"acres",children:"Acres"}),e.jsx("option",{value:"sqm",children:"Sqm"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:p.description,onChange:A=>b({...p,description:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:p.notes,onChange:A=>b({...p,notes:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:p.is_active,onChange:A=>b({...p,is_active:A.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:m?"Update":"Create"})]})]})]})})]})}function ah(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState([]),[w,v]=h.useState(!0),[m,E]=h.useState(!1),[p,b]=h.useState(null),[_,M]=h.useState({site_id:"",crop_id:"",name:"",code:"",description:"",area:"",area_unit:"hectares",produce_type:"",soil_type:"",is_active:!0});h.useEffect(()=>{D(),C(),x()},[]);const D=async()=>{v(!0);try{const I=await B.get("/api/v1/farm-zones?per_page=1000"),T=I.data?.data||(Array.isArray(I.data)?I.data:[]);c(Array.isArray(T)?T:[])}catch(I){console.error("Error fetching farm zones:",I),c([])}finally{v(!1)}},C=async()=>{try{const I=await B.get("/api/v1/sites?type=farmland&per_page=1000"),T=I.data?.data||(Array.isArray(I.data)?I.data:[]);g(Array.isArray(T)?T:[])}catch(I){console.error("Error fetching sites:",I)}},x=async()=>{try{const I=await B.get("/api/v1/crops?per_page=1000"),T=I.data?.data||(Array.isArray(I.data)?I.data:[]);y(Array.isArray(T)?T:[])}catch(I){console.error("Error fetching crops:",I)}},o=()=>{b(null),M({site_id:"",crop_id:"",name:"",code:"",description:"",area:"",area_unit:"hectares",produce_type:"",soil_type:"",is_active:!0}),E(!0)},k=I=>{b(I),M({site_id:I.site_id||"",crop_id:I.crop_id||"",name:I.name||"",code:I.code||"",description:I.description||"",area:I.area||"",area_unit:I.area_unit||"hectares",produce_type:I.produce_type||"",soil_type:I.soil_type||"",is_active:I.is_active!==void 0?I.is_active:!0}),E(!0)},A=async I=>{I.preventDefault();try{p?await B.put(`/api/v1/farm-zones/${p.id}`,_):await B.post("/api/v1/farm-zones",_),E(!1),D()}catch(T){console.error("Error saving farm zone:",T),alert(T.response?.data?.message||"Error saving farm zone")}},H=async I=>{if(confirm("Are you sure you want to delete this farm zone?"))try{await B.delete(`/api/v1/farm-zones/${I}`),D()}catch(T){console.error("Error deleting farm zone:",T),alert(T.response?.data?.message||"Error deleting farm zone")}};return w?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Farm Zones"}),e.jsxs("button",{onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Create Farm Zone"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produce Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No farm zones found"})}):i.map(I=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:I.code||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:I.site?.name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:I.produce_type||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:I.area?`${I.area} ${I.area_unit}`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${I.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>k(I),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ve,{size:16})}),e.jsx("button",{onClick:()=>H(I.id),className:"text-red-600 hover:text-red-900",children:e.jsx(nt,{size:16})})]})]},I.id))})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:p?"Edit Farm Zone":"Create Farm Zone"}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site (Farmland) *"}),e.jsxs("select",{required:!0,value:_.site_id,onChange:I=>M({..._,site_id:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Site"}),u.map(I=>e.jsx("option",{value:I.id,children:I.name},I.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crop"}),e.jsxs("select",{value:_.crop_id,onChange:I=>M({..._,crop_id:I.target.value||null}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Crop"}),N.map(I=>e.jsx("option",{value:I.id,children:I.name},I.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:_.name,onChange:I=>M({..._,name:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:_.code,onChange:I=>M({..._,code:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Produce Type"}),e.jsx("input",{type:"text",value:_.produce_type,onChange:I=>M({..._,produce_type:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., tomatoes, corn"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soil Type"}),e.jsx("input",{type:"text",value:_.soil_type,onChange:I=>M({..._,soil_type:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area"}),e.jsx("input",{type:"number",step:"0.01",value:_.area,onChange:I=>M({..._,area:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area Unit"}),e.jsxs("select",{value:_.area_unit,onChange:I=>M({..._,area_unit:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"hectares",children:"Hectares"}),e.jsx("option",{value:"acres",children:"Acres"}),e.jsx("option",{value:"sqm",children:"Sqm"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:_.description,onChange:I=>M({..._,description:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:_.is_active,onChange:I=>M({..._,is_active:I.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:p?"Update":"Create"})]})]})]})})]})}function nh(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState(!0),[w,v]=h.useState(!1),[m,E]=h.useState(null),[p,b]=h.useState({site_id:"",name:"",code:"",production_type:"gari",description:"",area_sqm:"",established_date:"",is_active:!0});h.useEffect(()=>{_(),M()},[]);const _=async()=>{y(!0);try{const k=await B.get("/api/v1/factories?per_page=1000"),A=k.data?.data||(Array.isArray(k.data)?k.data:[]);c(Array.isArray(A)?A:[])}catch(k){console.error("Error fetching factories:",k),c([])}finally{y(!1)}},M=async()=>{try{const k=await B.get("/api/v1/sites?type=factory&per_page=1000"),A=k.data?.data||(Array.isArray(k.data)?k.data:[]);g(Array.isArray(A)?A:[])}catch(k){console.error("Error fetching sites:",k)}},D=()=>{E(null),b({site_id:"",name:"",code:"",production_type:"gari",description:"",area_sqm:"",established_date:"",is_active:!0}),v(!0)},C=k=>{E(k),b({site_id:k.site_id||"",name:k.name||"",code:k.code||"",production_type:k.production_type||"gari",description:k.description||"",area_sqm:k.area_sqm||"",established_date:k.established_date||"",is_active:k.is_active!==void 0?k.is_active:!0}),v(!0)},x=async k=>{k.preventDefault();try{m?await B.put(`/api/v1/factories/${m.id}`,p):await B.post("/api/v1/factories",p),v(!1),_()}catch(A){console.error("Error saving factory:",A),alert(A.response?.data?.message||"Error saving factory")}},o=async k=>{if(confirm("Are you sure you want to delete this factory?"))try{await B.delete(`/api/v1/factories/${k}`),_()}catch(A){console.error("Error deleting factory:",A),alert(A.response?.data?.message||"Error deleting factory")}};return N?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Factories"}),e.jsxs("button",{onClick:D,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Create Factory"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Production Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No factories found"})}):i.map(k=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:k.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:k.site?.name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 capitalize",children:k.production_type||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:k.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>C(k),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ve,{size:16})}),e.jsx("button",{onClick:()=>o(k.id),className:"text-red-600 hover:text-red-900",children:e.jsx(nt,{size:16})})]})]},k.id))})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:m?"Edit Factory":"Create Factory"}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site (Factory Type) *"}),e.jsxs("select",{required:!0,value:p.site_id,onChange:k=>b({...p,site_id:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Site"}),u.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Type *"}),e.jsxs("select",{required:!0,value:p.production_type,onChange:k=>b({...p,production_type:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"gari",children:"Gari"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:p.name,onChange:k=>b({...p,name:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:p.code,onChange:k=>b({...p,code:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area (sqm)"}),e.jsx("input",{type:"number",step:"0.01",value:p.area_sqm,onChange:k=>b({...p,area_sqm:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Established Date"}),e.jsx("input",{type:"date",value:p.established_date,onChange:k=>b({...p,established_date:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:p.description,onChange:k=>b({...p,description:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:p.is_active,onChange:k=>b({...p,is_active:k.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:m?"Update":"Create"})]})]})]})})]})}function lh(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState(!0),[w,v]=h.useState(!1),[m,E]=h.useState(null),[p,b]=h.useState({location_id:"",name:"",code:"",description:"",notes:"",is_active:!0});h.useEffect(()=>{_()},[]);const _=async()=>{y(!0);try{const[o,k]=await Promise.all([B.get("/api/v1/admin-zones?per_page=1000"),B.get("/api/v1/locations?per_page=1000&is_active=1")]),A=o.data?.data||(Array.isArray(o.data)?o.data:[]),H=k.data?.data||(Array.isArray(k.data)?k.data:[]);c(Array.isArray(A)?A:[]),g(Array.isArray(H)?H:[])}catch(o){console.error("Error fetching data:",o),c([]),g([])}finally{y(!1)}},M=()=>{E(null),b({location_id:"",name:"",code:"",description:"",notes:"",is_active:!0}),v(!0)},D=o=>{E(o),b({location_id:o.location_id||"",name:o.name||"",code:o.code||"",description:o.description||"",notes:o.notes||"",is_active:o.is_active!==void 0?o.is_active:!0}),v(!0)},C=async o=>{o.preventDefault();try{m?await B.put(`/api/v1/admin-zones/${m.id}`,p):await B.post("/api/v1/admin-zones",p),v(!1),_()}catch(k){console.error("Error saving zone:",k),alert(k.response?.data?.message||"Error saving zone")}},x=async o=>{if(confirm("Are you sure you want to delete this zone?"))try{await B.delete(`/api/v1/admin-zones/${o}`),_()}catch(k){console.error("Error deleting zone:",k),alert(k.response?.data?.message||"Error deleting zone")}};return N?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Zones"}),e.jsxs("button",{onClick:M,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Create Zone"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No zones found"})}):i.map(o=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:o.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:o.location?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${o.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>D(o),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ve,{size:16})}),e.jsx("button",{onClick:()=>x(o.id),className:"text-red-600 hover:text-red-900",children:e.jsx(nt,{size:16})})]})]},o.id))})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:m?"Edit Zone":"Create Zone"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),e.jsxs("select",{required:!0,value:p.location_id,onChange:o=>b({...p,location_id:o.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Location"}),u.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:p.name,onChange:o=>b({...p,name:o.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:p.code,onChange:o=>b({...p,code:o.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if empty"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:p.description,onChange:o=>b({...p,description:o.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:p.notes,onChange:o=>b({...p,notes:o.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:p.is_active,onChange:o=>b({...p,is_active:o.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:m?"Update":"Create"})]})]})]})})]})}function ih(){const[i,c]=h.useState([]),[u,g]=h.useState({}),[N,y]=h.useState(!0),[w,v]=h.useState(!1),[m,E]=h.useState(null),[p,b]=h.useState({name:"",permissions:[]});h.useEffect(()=>{_()},[]);const _=async()=>{try{const[H,I]=await Promise.all([B.get("/api/v1/roles"),B.get("/api/v1/roles/menu-permissions")]);c(H.data?.data||H.data||[]),g(I.data?.data||{})}catch(H){console.error("Error fetching data:",H),alert("Error loading roles: "+(H.response?.data?.message||"Unknown error"))}finally{y(!1)}},M=(H=null)=>{if(H)if(E(H),H.name==="ADMIN"){const I=Object.values(u).flatMap(T=>Object.values(T)).flatMap(T=>T.map(F=>[F.menu_key,F.submenu_key,F.permission_type].filter(Boolean).join(".")));b({name:H.name,permissions:I})}else b({name:H.name,permissions:H.permissions?.map(I=>I.name)||[]});else E(null),b({name:"",permissions:[]});v(!0)},D=()=>{v(!1),E(null),b({name:"",permissions:[]})},C=H=>{p.name!=="ADMIN"&&b(I=>({...I,permissions:I.permissions.includes(H)?I.permissions.filter(T=>T!==H):[...I.permissions,H]}))},x=(H,I,T)=>{const F=[H,I,T].filter(Boolean).join(".");C(F)},o=(H,I,T)=>{const F=[H,I,T].filter(Boolean).join(".");return p.permissions.includes(F)},k=async H=>{H.preventDefault();try{const I={...p};if(I.name==="ADMIN"){const T=Object.values(u).flatMap(F=>Object.values(F)).flatMap(F=>F.map(te=>[te.menu_key,te.submenu_key,te.permission_type].filter(Boolean).join(".")));I.permissions=T}m?await B.put(`/api/v1/roles/${m.id}`,I):await B.post("/api/v1/roles",I),D(),_()}catch(I){alert("Error saving role: "+(I.response?.data?.message||"Unknown error"))}},A=async(H,I)=>{if(confirm(`Are you sure you want to delete the role "${I}"?`))try{await B.delete(`/api/v1/roles/${H}`),_()}catch(T){alert("Error deleting role: "+(T.response?.data?.message||"Unknown error"))}};return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Roles & Permissions"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage user roles and their access permissions"})]}),e.jsxs("button",{onClick:()=>M(),className:"w-full md:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Re,{className:"w-5 h-5"}),"Create Role"]})]}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx(ui,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No roles found. Create your first role!"})]}):i.map(H=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ui,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:H.name})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[H.permissions?.length||0," permission(s) assigned"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>M(H),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Edit"]}),H.name!=="ADMIN"&&e.jsxs("button",{onClick:()=>A(H.id,H.name),className:"flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(nt,{className:"w-4 h-4"}),"Delete"]})]})]}),H.permissions&&H.permissions.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Permissions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:H.permissions.map(I=>e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded",children:I.name},I.id))})]})]},H.id))}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Role":"Create New Role"})}),e.jsxs("form",{onSubmit:k,className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Name *"}),e.jsx("input",{type:"text",value:p.name,onChange:H=>{const I=H.target.value;if(b({...p,name:I}),I==="ADMIN"){const T=Object.values(u).flatMap(F=>Object.values(F)).flatMap(F=>F.map(te=>[te.menu_key,te.submenu_key,te.permission_type].filter(Boolean).join(".")));b(F=>({...F,name:I,permissions:T}))}},required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Manager, Worker, Viewer"}),p.name==="ADMIN"&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:" ADMIN role automatically has all permissions and cannot be modified."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permissions"}),p.name==="ADMIN"&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," The ADMIN role has all permissions automatically. All permissions are selected and cannot be deselected."]})}),e.jsx("div",{className:"space-y-6 max-h-96 overflow-y-auto",children:Object.entries(u).map(([H,I])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3 capitalize",children:H.replace("-"," ")}),Object.entries(I).map(([T,F])=>e.jsxs("div",{className:"ml-4 mb-4 last:mb-0",children:[T!=="main"&&e.jsx("h5",{className:"font-medium text-gray-700 mb-2 capitalize",children:T.replace("-"," ")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:F.map(te=>e.jsxs("button",{type:"button",onClick:()=>x(te.menu_key,te.submenu_key,te.permission_type),disabled:p.name==="ADMIN",className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${o(te.menu_key,te.submenu_key,te.permission_type)?"bg-green-100 border-green-500 text-green-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"} ${p.name==="ADMIN"?"opacity-75 cursor-not-allowed":"cursor-pointer"}`,children:[o(te.menu_key,te.submenu_key,te.permission_type)?e.jsx(vx,{className:"w-4 h-4"}):e.jsx(sn,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm capitalize",children:te.permission_type})]},te.id))})]},T))]},H))})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:D,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:m?"Update Role":"Create Role"})]})]})]})})]})}function oh(){const[i,c]=h.useState([]),[u,g]=h.useState(!0),[N,y]=h.useState(!1),[w,v]=h.useState(null),[m,E]=h.useState({name:"",category:"",default_maturity_days:"",description:""}),p=["VEGETABLE","FRUIT","GRAIN","LEGUME","ROOT","HERB","SPICE","OTHER"];h.useEffect(()=>{b()},[]);const b=async()=>{g(!0);try{const x=await B.get("/api/v1/crops?per_page=1000"),o=x.data?.data||(Array.isArray(x.data)?x.data:[]);c(Array.isArray(o)?o:[])}catch(x){console.error("Error fetching crops:",x),c([])}finally{g(!1)}},_=()=>{v(null),E({name:"",category:"",default_maturity_days:"",description:""}),y(!0)},M=x=>{v(x),E({name:x.name||"",category:x.category||"",default_maturity_days:x.default_maturity_days||"",description:x.description||""}),y(!0)},D=async x=>{x.preventDefault();try{w?await B.put(`/api/v1/crops/${w.id}`,m):await B.post("/api/v1/crops",m),y(!1),b()}catch(o){console.error("Error saving crop:",o),alert(o.response?.data?.message||"Error saving crop")}},C=async x=>{if(confirm("Are you sure you want to delete this crop? This action cannot be undone."))try{await B.delete(`/api/v1/crops/${x}`),b()}catch(o){console.error("Error deleting crop:",o),alert(o.response?.data?.message||"Error deleting crop")}};return u?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Crops"}),e.jsxs("button",{onClick:_,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Create Crop"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Default Maturity Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No crops found"})}):i.map(x=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.category||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.default_maturity_days||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:x.description||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>M(x),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ve,{size:16})}),e.jsx("button",{onClick:()=>C(x.id),className:"text-red-600 hover:text-red-900",children:e.jsx(nt,{size:16})})]})]},x.id))})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:w?"Edit Crop":"Create Crop"}),e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:x=>E({...m,name:x.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsxs("select",{required:!0,value:m.category,onChange:x=>E({...m,category:x.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Category"}),p.map(x=>e.jsx("option",{value:x,children:x},x))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Maturity Days"}),e.jsx("input",{type:"number",min:"1",value:m.default_maturity_days,onChange:x=>E({...m,default_maturity_days:x.target.value||null}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Days to maturity"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:x=>E({...m,description:x.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:w?"Update":"Create"})]})]})]})})]})}function ch(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState([]),[w,v]=h.useState({}),[m,E]=h.useState(!0),[p,b]=h.useState(!1),[_,M]=h.useState(null),[D,C]=h.useState(null),[x,o]=h.useState({name:"",email:"",phone:"",password:"",photo:null,farms:[],permissions:[],job_roles:[]});h.useEffect(()=>{k()},[]);const k=async()=>{try{const[Y,X,J]=await Promise.all([B.get("/api/v1/users?per_page=1000"),B.get("/api/v1/farms?per_page=1000"),B.get("/api/v1/permissions")]);let S=[];Y.data?.data&&Array.isArray(Y.data.data)?S=Y.data.data:Array.isArray(Y.data)&&(S=Y.data),c(S);const $=X.data?.data||(Array.isArray(X.data)?X.data:[]);g(Array.isArray($)?$:[]);const K=J.data?.data||(Array.isArray(J.data)?J.data:[]);y(Array.isArray(K)?K:[])}catch(Y){console.error("Error fetching data:",Y),alert("Error loading data: "+(Y.response?.data?.message||"Unknown error"))}finally{E(!1)}},A=async()=>{try{const Y=await B.get("/api/v1/worker-job-roles?is_active=1"),X=Y.data?.data||(Array.isArray(Y.data)?Y.data:[]);return Array.isArray(X)?X:[]}catch(Y){return console.error("Error fetching job roles:",Y),[]}},H=async(Y=null)=>{if(Y){M(Y);const J=(await B.get(`/api/v1/users/${Y.id}?include_permissions=1`)).data.data,S=[],$=await A();if(v({global:$}),J.farms&&J.farms.length>0)for(const R of J.farms)try{((await B.get(`/api/v1/users/${Y.id}/farms/${R.id}/job-roles`)).data?.data||[]).forEach(ee=>{ee.ended_at||S.push({farm_id:R.id,worker_job_role_id:ee.worker_job_role_id})})}catch(f){console.error(`Error loading job roles for farm ${R.id}:`,f)}const K=(J.farms||[]).map(R=>({farm_id:R.id,membership_status:R.membership_status||"ACTIVE",employment_category:R.employment_category||"",pay_type:R.pay_type||"",pay_rate:R.pay_rate||"",start_date:R.start_date||"",end_date:R.end_date||"",notes:R.notes||""}));o({name:J.name||"",email:J.email||"",phone:J.phone||"",password:"",photo:null,farms:K,permissions:J.permissions||[],job_roles:S}),C(J.profile_photo_url)}else M(null),o({name:"",email:"",phone:"",password:"",photo:null,farms:[],permissions:[],job_roles:[]}),C(null);b(!0)},I=Y=>{const X=Y.target.files[0];if(X){o({...x,photo:X});const J=new FileReader;J.onloadend=()=>{C(J.result)},J.readAsDataURL(X)}},T=()=>{o({...x,farms:[...x.farms,{farm_id:"",membership_status:"ACTIVE",employment_category:"",pay_type:"",pay_rate:"",start_date:""}]})},F=Y=>{o({...x,farms:x.farms.filter((X,J)=>J!==Y)})},te=async(Y,X,J)=>{const S=[...x.farms];if(S[Y][X]=J,Object.keys(w).length===0){const $=await A();v({global:$})}o({...x,farms:S})},q=Y=>{o({...x,job_roles:[...x.job_roles,{farm_id:parseInt(Y),worker_job_role_id:""}]})},ce=Y=>{o({...x,job_roles:x.job_roles.filter((X,J)=>J!==Y)})},Me=(Y,X,J)=>{const S=[...x.job_roles];S[Y][X]=parseInt(J),o({...x,job_roles:S})},_e=async Y=>{Y.preventDefault();try{const X=new FormData;if(X.append("name",x.name),X.append("email",x.email),x.phone&&X.append("phone",x.phone),x.password&&X.append("password",x.password),x.photo&&X.append("photo",x.photo),x.farms.length>0&&X.append("farms",JSON.stringify(x.farms)),x.permissions.length>0&&X.append("permissions",JSON.stringify(x.permissions)),x.job_roles.length>0&&X.append("job_roles",JSON.stringify(x.job_roles)),_){const J={name:x.name,email:x.email,phone:x.phone};if(x.password&&(J.password=x.password),x.farms.length>0&&(J.farms=x.farms),x.permissions.length>0&&(J.permissions=x.permissions),await B.put(`/api/v1/users/${_.id}`,J),x.photo){const S=new FormData;S.append("photo",x.photo),await B.post(`/api/v1/users/${_.id}/photo`,S,{headers:{"Content-Type":"multipart/form-data"}})}if(x.job_roles.length>0){for(const S of x.farms)if(S.farm_id)try{const K=(await B.get(`/api/v1/users/${_.id}/farms/${S.farm_id}/job-roles`)).data?.data||[];for(const R of K)R.ended_at||await B.post(`/api/v1/users/${_.id}/farms/${S.farm_id}/job-roles/${R.id}/end`)}catch($){console.error("Error ending existing job roles:",$)}for(const S of x.job_roles)if(S.worker_job_role_id&&S.farm_id)try{await B.post(`/api/v1/users/${_.id}/farms/${S.farm_id}/job-roles/assign`,{worker_job_role_id:S.worker_job_role_id})}catch($){console.error("Error assigning job role:",$)}}}else await B.post("/api/v1/users",X,{headers:{"Content-Type":"multipart/form-data"}});b(!1),k()}catch(X){console.error("Error saving user:",X),alert("Error saving user: "+(X.response?.data?.message||"Unknown error"))}},he=async(Y,X)=>{if(confirm(`Are you sure you want to delete the user "${X}"?`))try{await B.delete(`/api/v1/users/${Y}`),k()}catch(J){alert("Error deleting user: "+(J.response?.data?.message||"Unknown error"))}},ge=Y=>{o(X=>({...X,permissions:X.permissions.includes(Y)?X.permissions.filter(J=>J!==Y):[...X.permissions,Y]}))};return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),e.jsxs("button",{onClick:()=>H(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Create User"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Photo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Farms"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):i.map(Y=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:Y.profile_photo_url?e.jsx("img",{src:Y.profile_photo_url,alt:Y.name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(eu,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:Y.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Y.email}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Y.phone||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Y.farms?.length>0?e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:[Y.farms.length," farm(s)"]}):"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>H(Y),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ve,{size:16,className:"inline"})}),e.jsx("button",{onClick:()=>he(Y.id,Y.name),className:"text-red-600 hover:text-red-900",children:e.jsx(nt,{size:16,className:"inline"})})]})]},Y.id))})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:_?"Edit User":"Create New User"}),e.jsxs("form",{onSubmit:_e,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[D&&e.jsx("img",{src:D,alt:"Preview",className:"w-20 h-20 rounded-full object-cover"}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx(yx,{size:20}),D?"Change Photo":"Upload Photo",e.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"hidden"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:Y=>o({...x,name:Y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:x.email,onChange:Y=>o({...x,email:Y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:x.phone,onChange:Y=>o({...x,phone:Y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",_?"(leave blank to keep current)":"*"]}),e.jsx("input",{type:"password",required:!_,value:x.password,onChange:Y=>o({...x,password:Y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Farm Memberships"}),e.jsx("button",{type:"button",onClick:T,className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Add Farm"})]}),x.farms.map((Y,X)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Farm ",X+1]}),e.jsx("button",{type:"button",onClick:()=>F(X),className:"text-red-600 hover:text-red-800",children:e.jsx(sn,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("select",{required:!0,value:Y.farm_id,onChange:J=>te(X,"farm_id",J.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(J=>e.jsx("option",{value:J.id,children:J.name},J.id))]}),e.jsxs("select",{required:!0,value:Y.membership_status,onChange:J=>te(X,"membership_status",J.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]}),e.jsxs("select",{value:Y.employment_category,onChange:J=>te(X,"employment_category",J.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Employment Category"}),e.jsx("option",{value:"PERMANENT",children:"Permanent"}),e.jsx("option",{value:"CASUAL",children:"Casual"}),e.jsx("option",{value:"CONTRACTOR",children:"Contractor"}),e.jsx("option",{value:"SEASONAL",children:"Seasonal"})]}),e.jsxs("select",{value:Y.pay_type,onChange:J=>te(X,"pay_type",J.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Pay Type"}),e.jsx("option",{value:"MONTHLY",children:"Monthly"}),e.jsx("option",{value:"DAILY",children:"Daily"}),e.jsx("option",{value:"HOURLY",children:"Hourly"}),e.jsx("option",{value:"TASK",children:"Task"})]}),e.jsx("input",{type:"number",step:"0.01",placeholder:"Pay Rate",value:Y.pay_rate,onChange:J=>te(X,"pay_rate",J.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"date",placeholder:"Start Date",value:Y.start_date,onChange:J=>te(X,"start_date",J.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"})]})]},X))]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Job Roles (per Farm)"})}),x.farms.map(Y=>{const X=Y.farm_id;if(!X)return null;const J=w.global||[],S=x.job_roles.filter($=>$.farm_id===parseInt(X));return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:u.find($=>$.id===parseInt(X))?.name||`Farm ${X}`}),e.jsx("button",{type:"button",onClick:()=>q(X),className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Add Job Role"})]}),S.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No job roles assigned"}):S.map(($,K)=>{const R=x.job_roles.findIndex(f=>f.farm_id===parseInt(X)&&f.worker_job_role_id===$.worker_job_role_id);return e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("select",{value:$.worker_job_role_id,onChange:f=>Me(R,"worker_job_role_id",f.target.value),className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Select Job Role"}),J.map(f=>e.jsxs("option",{value:f.id,children:[f.name," (",f.code,")"]},f.id))]}),e.jsx("button",{type:"button",onClick:()=>ce(R),className:"text-red-600 hover:text-red-800",children:e.jsx(sn,{size:16})})]},K)})]},X)})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-2",children:N.map(Y=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.permissions.includes(Y.name),onChange:()=>ge(Y.name),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:Y.name})]},Y.id))})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[_?"Update":"Create"," User"]})]})]})]})})]})}function dh(){const i=qs(),[c,u]=h.useState([]),[g,N]=h.useState([]),[y,w]=h.useState([]),[v,m]=h.useState(!0),[E,p]=h.useState(!1),[b,_]=h.useState(null),[M,D]=h.useState({farm_id:"",asset_category_id:"",asset_code:"",name:"",description:"",status:"ACTIVE",acquisition_type:"PURCHASED",purchase_date:"",purchase_cost:"",currency:"NGN",serial_number:"",is_trackable:!0});h.useEffect(()=>{C(),x(),o()},[]);const C=async()=>{m(!0);try{const T=await B.get("/api/v1/assets?per_page=1000"),F=T.data?.data||(Array.isArray(T.data)?T.data:[]);u(Array.isArray(F)?F:[])}catch(T){console.error("Error fetching assets:",T),u([])}finally{m(!1)}},x=async()=>{try{const T=await B.get("/api/v1/asset-categories?per_page=1000"),F=T.data?.data||(Array.isArray(T.data)?T.data:[]);N(Array.isArray(F)?F:[])}catch(T){console.error("Error fetching categories:",T),N([])}},o=async()=>{try{const T=await B.get("/api/v1/farms?per_page=1000"),F=T.data?.data||(Array.isArray(T.data)?T.data:[]);w(Array.isArray(F)?F:[])}catch(T){console.error("Error fetching farms:",T),w([])}},k=(T=null)=>{_(T),D({farm_id:T?.farm_id||"",asset_category_id:T?.asset_category_id||"",asset_code:T?.asset_code||"",name:T?.name||"",description:T?.description||"",status:T?.status||"ACTIVE",acquisition_type:T?.acquisition_type||"PURCHASED",purchase_date:T?.purchase_date||"",purchase_cost:T?.purchase_cost||"",currency:T?.currency||"NGN",serial_number:T?.serial_number||"",is_trackable:T?.is_trackable!==void 0?T?.is_trackable:!0}),p(!0)},A=async T=>{T.preventDefault();try{b?await B.put(`/api/v1/assets/${b.id}`,M):await B.post("/api/v1/assets",M),p(!1),C()}catch(F){console.error("Error saving asset:",F),alert(F.response?.data?.message||"Error saving asset")}},H=async T=>{if(confirm("Are you sure you want to delete this asset?"))try{await B.delete(`/api/v1/assets/${T}`),C()}catch(F){console.error("Error deleting asset:",F),alert(F.response?.data?.message||"Error deleting asset")}},I=T=>({ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",UNDER_REPAIR:"bg-yellow-100 text-yellow-800",DISPOSED:"bg-red-100 text-red-800",SOLD:"bg-blue-100 text-blue-800",LOST:"bg-red-100 text-red-800"})[T]||"bg-gray-100 text-gray-800";return v?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Assets"}),e.jsxs("button",{onClick:()=>k(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Add Asset"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No assets found"})}):c.map(T=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:T.asset_code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:T.category?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${I(T.status)}`,children:T.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:T.farm?.name||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>i(`/admin/assets/${T.id}`),className:"text-green-600 hover:text-green-900 mr-4",title:"View Details",children:e.jsx(kx,{size:16})}),e.jsx("button",{onClick:()=>k(T),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ve,{size:16})}),e.jsx("button",{onClick:()=>H(T.id),className:"text-red-600 hover:text-red-900",children:e.jsx(nt,{size:16})})]})]},T.id))})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:b?"Edit Asset":"Add Asset"}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:M.farm_id,onChange:T=>D({...M,farm_id:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",disabled:!!b,children:[e.jsx("option",{value:"",children:"Select Farm"}),y.map(T=>e.jsx("option",{value:T.id,children:T.name},T.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:M.asset_category_id,onChange:T=>D({...M,asset_category_id:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Category"}),g.filter(T=>T.farm_id===(M.farm_id||b?.farm_id)).map(T=>e.jsx("option",{value:T.id,children:T.name},T.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Code"}),e.jsx("input",{type:"text",value:M.asset_code,onChange:T=>D({...M,asset_code:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if empty"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:M.status,onChange:T=>D({...M,status:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"UNDER_REPAIR",children:"Under Repair"}),e.jsx("option",{value:"DISPOSED",children:"Disposed"}),e.jsx("option",{value:"SOLD",children:"Sold"}),e.jsx("option",{value:"LOST",children:"Lost"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:M.name,onChange:T=>D({...M,name:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:M.description,onChange:T=>D({...M,description:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:M.acquisition_type,onChange:T=>D({...M,acquisition_type:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:M.purchase_date,onChange:T=>D({...M,purchase_date:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:M.purchase_cost,onChange:T=>D({...M,purchase_cost:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",value:M.currency,onChange:T=>D({...M,currency:T.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",maxLength:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:M.serial_number,onChange:T=>D({...M,serial_number:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 mt-6",children:[e.jsx("input",{type:"checkbox",checked:M.is_trackable,onChange:T=>D({...M,is_trackable:T.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Trackable"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:b?"Update":"Create"})]})]})]})})]})}function uh(){const[i,c]=h.useState([]),[u,g]=h.useState(!0),[N,y]=h.useState(!1),[w,v]=h.useState(null),[m,E]=h.useState({code:"",name:"",parent_id:"",is_active:!0});h.useEffect(()=>{p()},[]);const p=async()=>{g(!0);try{const C=await B.get("/api/v1/asset-categories?per_page=1000"),x=C.data?.data||(Array.isArray(C.data)?C.data:[]);c(Array.isArray(x)?x:[])}catch(C){console.error("Error fetching categories:",C),c([])}finally{g(!1)}},b=(C=null)=>{v(C),E({code:C?.code||"",name:C?.name||"",parent_id:C?.parent_id||"",is_active:C?.is_active!==void 0?C?.is_active:!0}),y(!0)},_=async C=>{C.preventDefault();try{w?await B.put(`/api/v1/asset-categories/${w.id}`,m):await B.post("/api/v1/asset-categories",m),y(!1),p()}catch(x){console.error("Error saving category:",x),alert(x.response?.data?.message||"Error saving category")}},M=async C=>{if(confirm("Are you sure you want to delete this category?"))try{await B.delete(`/api/v1/asset-categories/${C}`),p()}catch(x){console.error("Error deleting category:",x),alert(x.response?.data?.message||"Error deleting category")}},D=C=>{if(!C)return"-";const x=i.find(o=>o.id===C);return x?x.name:"-"};return u?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Asset Categories"}),e.jsxs("button",{onClick:()=>b(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Add Category"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No categories found"})}):i.map(C=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:C.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:D(C.parent_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${C.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>b(C),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ve,{size:16})}),e.jsx("button",{onClick:()=>M(C.id),className:"text-red-600 hover:text-red-900",children:e.jsx(nt,{size:16})})]})]},C.id))})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:w?"Edit Category":"Add Category"}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:m.code,onChange:C=>E({...m,code:C.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:C=>E({...m,name:C.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Category"}),e.jsxs("select",{value:m.parent_id,onChange:C=>E({...m,parent_id:C.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"None"}),i.filter(C=>C.id!==w?.id).map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 mt-6",children:[e.jsx("input",{type:"checkbox",checked:m.is_active,onChange:C=>E({...m,is_active:C.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:w?"Update":"Create"})]})]})]})})]})}function mh(){const[i,c]=h.useState([]),[u,g]=h.useState(!0),[N,y]=h.useState(!1),[w,v]=h.useState(null),[m,E]=h.useState({code:"",name:"",description:"",is_active:!0});h.useEffect(()=>{p()},[]);const p=async()=>{g(!0);try{const D=await B.get("/api/v1/worker-job-roles?per_page=1000"),C=D.data?.data||(Array.isArray(D.data)?D.data:[]);c(Array.isArray(C)?C:[])}catch(D){console.error("Error fetching job roles:",D),c([])}finally{g(!1)}},b=(D=null)=>{v(D),E(D?{code:D.code||"",name:D.name||"",description:D.description||"",is_active:D.is_active!==void 0?D.is_active:!0}:{code:"",name:"",description:"",is_active:!0}),y(!0)},_=async D=>{D.preventDefault();try{w?await B.put(`/api/v1/worker-job-roles/${w.id}`,m):await B.post("/api/v1/worker-job-roles",m),y(!1),p()}catch(C){console.error("Error saving job role:",C),alert(C.response?.data?.message||"Error saving job role")}},M=async D=>{if(confirm("Are you sure you want to delete this job role?"))try{await B.delete(`/api/v1/worker-job-roles/${D}`),p()}catch(C){console.error("Error deleting job role:",C),alert(C.response?.data?.message||"Error deleting job role")}};return u?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Worker Job Roles"}),e.jsxs("button",{onClick:()=>b(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Add Job Role"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No job roles found"})}):i.map(D=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:D.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:D.description||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${D.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>b(D),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ve,{size:16})}),e.jsx("button",{onClick:()=>M(D.id),className:"text-red-600 hover:text-red-900",children:e.jsx(nt,{size:16})})]})]},D.id))})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:w?"Edit Job Role":"Add Job Role"}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:m.farm_id,onChange:D=>E({...m,farm_id:D.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",disabled:!!w,children:[e.jsx("option",{value:"",children:"Select Farm"}),farms.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:m.code,onChange:D=>E({...m,code:D.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., FLD_SUP"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:D=>E({...m,name:D.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., Field Supervisor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:D=>E({...m,description:D.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:m.is_active,onChange:D=>E({...m,is_active:D.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:w?"Update":"Create"})]})]})]})})]})}function ph(){const[i,c]=h.useState([]),[u,g]=h.useState([]),[N,y]=h.useState(!0),[w,v]=h.useState(!1),[m,E]=h.useState(null),[p,b]=h.useState({site_id:"",borehole_code:"",name:"",status:"ACTIVE",notes:""});h.useEffect(()=>{_()},[]);const _=async()=>{try{const[o,k]=await Promise.all([B.get("/api/v1/boreholes"),B.get("/api/v1/sites?per_page=1000")]),A=o.data?.data||(Array.isArray(o.data)?o.data:[]),H=k.data?.data||(Array.isArray(k.data)?k.data:[]);c(Array.isArray(A)?A:[]),g(Array.isArray(H)?H:[])}catch(o){console.error("Error fetching data:",o)}finally{y(!1)}},M=()=>{E(null),b({site_id:"",borehole_code:"",name:"",status:"ACTIVE",notes:""}),v(!0)},D=o=>{E(o),b({site_id:o.site?.id||"",borehole_code:o.borehole_code||o.code||"",name:o.name||"",status:o.status||"ACTIVE",notes:o.notes||""}),v(!0)},C=async o=>{o.preventDefault();try{m?await B.patch(`/api/v1/boreholes/${m.id}`,p):await B.post("/api/v1/boreholes",p),v(!1),_()}catch(k){alert("Error saving borehole: "+(k.response?.data?.message||"Unknown error"))}},x=async o=>{if(confirm("Are you sure you want to delete this borehole?"))try{await B.delete(`/api/v1/boreholes/${o}`),_()}catch(k){alert("Error deleting borehole: "+(k.response?.data?.message||"Unknown error"))}};return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Borehole Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage boreholes per Site; Farm is derived from Site"})]}),e.jsxs("button",{onClick:M,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"New Borehole"]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(_x,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No boreholes yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first borehole to get started"}),e.jsx("button",{onClick:M,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Borehole"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(o=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:o.borehole_code||o.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.site?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-gray-100 text-gray-800",children:o.status||"ACTIVE"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>D(o),className:"text-green-600 hover:text-green-700",children:e.jsx(Ve,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>x(o.id),className:"text-red-600 hover:text-red-700",children:e.jsx(nt,{className:"h-4 w-4"})})]})})]},o.id))})]})})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:m?"Edit Borehole":"Create New Borehole"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site *"}),e.jsxs("select",{required:!0,value:p.site_id,onChange:o=>b({...p,site_id:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select site"}),u.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:p.borehole_code,onChange:o=>b({...p,borehole_code:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., BH-01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:p.name,onChange:o=>b({...p,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:p.status,onChange:o=>b({...p,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"ACTIVE",children:"ACTIVE"}),e.jsx("option",{value:"INACTIVE",children:"INACTIVE"}),e.jsx("option",{value:"UNDER_REPAIR",children:"UNDER_REPAIR"}),e.jsx("option",{value:"DECOMMISSIONED",children:"DECOMMISSIONED"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:p.notes,onChange:o=>b({...p,notes:o.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[m?"Update":"Create"," Borehole"]})]})]})]})})]})}function xh({children:i}){const{user:c,logout:u}=nn(),g=es(),N=qs(),[y,w]=h.useState(!1),[v,m]=h.useState([]),E=()=>{const T=g.pathname;return{gari:T.startsWith("/gari"),bellPepper:T.startsWith("/bell-pepper"),tomatoes:T.startsWith("/tomatoes"),habaneros:T.startsWith("/habaneros"),livestock:!1}},[p,b]=h.useState(E());h.useEffect(()=>{const T=g.pathname;b(F=>({...F,gari:T.startsWith("/gari")?!0:F.gari,bellPepper:T.startsWith("/bell-pepper")?!0:F.bellPepper,tomatoes:T.startsWith("/tomatoes")?!0:F.tomatoes,habaneros:T.startsWith("/habaneros")?!0:F.habaneros}))},[g.pathname]),h.useEffect(()=>{if(c){const T=c.permissions?.map(F=>F.name)||c.roles?.flatMap(F=>F.permissions?.map(te=>te.name)||[])||[];m(T)}},[c]);const _=()=>{u(),N("/login")},M=T=>{b(F=>({...F,[T]:!F[T]}))},D=[{name:"Gari",key:"gari",icon:at,items:[{name:"Production Batches",href:"/gari-production-batches",icon:at},{name:"Inventory",href:"/gari-inventory",icon:ut},{name:"Sales",href:"/gari-sales",icon:Yr},{name:"KPIs",href:"/gari-kpis",icon:yt},{name:"Waste & Losses",href:"/gari-waste-losses",icon:yt},{name:"Packaging Materials",href:"/packaging-materials",icon:ut}]},{name:"Bell Pepper",key:"bellPepper",icon:tn,items:[{name:"Production",href:"/bell-pepper-production",icon:at},{name:"Harvests",href:"/bell-pepper-harvests",icon:ut},{name:"Inventory",href:"/bell-pepper-inventory",icon:ut},{name:"Sales",href:"/bell-pepper-sales",icon:Yr},{name:"KPIs",href:"/bell-pepper-kpis",icon:yt}]},{name:"Tomatoes",key:"tomatoes",icon:tn,items:[{name:"Production",href:"/tomatoes-production",icon:at},{name:"Inventory",href:"/tomatoes-inventory",icon:ut},{name:"Sales",href:"/tomatoes-sales",icon:Yr},{name:"KPIs",href:"/tomatoes-kpis",icon:yt}]},{name:"Habaneros",key:"habaneros",icon:tn,items:[{name:"Production",href:"/habaneros-production",icon:at},{name:"Inventory",href:"/habaneros-inventory",icon:ut},{name:"Sales",href:"/habaneros-sales",icon:Yr},{name:"KPIs",href:"/habaneros-kpis",icon:yt}]},{name:"Reports",items:[{name:"Dashboard",href:"/",icon:Ax},{name:"Consolidated Sales",href:"/reports/consolidated-sales",icon:or},{name:"Consolidated Expenses",href:"/reports/consolidated-expenses",icon:wi},{name:"Staff Allocation",href:"/reports/staff-allocation",icon:pi}]},{name:"Admin Settings",items:[{name:"Farms",href:"/farms",icon:Zr},{name:"Sites",href:"/admin/sites",icon:Lx},{name:"Farm Zones",href:"/admin/farm-zones",icon:Ex},{name:"Factories",href:"/admin/factories",icon:gx},{name:"Borehole Management",href:"/admin/boreholes",icon:at},{name:"Greenhouse Management",href:"/admin/greenhouses",icon:at},{name:"Scale Devices",href:"/scale-devices",icon:di},{name:"Label Templates",href:"/label-templates",icon:mi},{name:"Crops",href:"/admin/crops",icon:tn},{name:"Worker Job Roles",href:"/admin/worker-job-roles",icon:hx},{name:"Assets",href:"/admin/assets",icon:Ix},{name:"Asset Categories",href:"/admin/asset-categories",icon:Cx},{name:"Admin Zones",href:"/admin/admin-zones",icon:Dx},{name:"Roles",href:"/admin/roles",icon:ui},{name:"Users",href:"/admin/users",icon:pi}]}],C=(T,F,te="view")=>{if(c?.roles?.some(ce=>ce.name==="ADMIN"))return!0;const q=[T,F,te].filter(Boolean).join(".");return v.includes(q)},x=(T,F)=>C(T,F,"view"),o=T=>T==="/"?g.pathname==="/":g.pathname.startsWith(T),k=T=>T.items.some(F=>o(F.href)),A=T=>({"/":{menu:"reports",submenu:"dashboard"},"/farms":{menu:"admin",submenu:"farms"},"/scale-devices":{menu:"admin",submenu:"scale-devices"},"/label-templates":{menu:"admin",submenu:"label-templates"},"/gari-production-batches":{menu:"gari",submenu:"production-batches"},"/gari-inventory":{menu:"gari",submenu:"inventory"},"/gari-sales":{menu:"gari",submenu:"sales"},"/gari-kpis":{menu:"gari",submenu:"kpis"},"/gari-waste-losses":{menu:"gari",submenu:"waste-losses"},"/packaging-materials":{menu:"gari",submenu:"packaging-materials"},"/admin/boreholes":{menu:"admin",submenu:"boreholes"},"/admin/greenhouses":{menu:"admin",submenu:"greenhouses"},"/bell-pepper-production":{menu:"bell-pepper",submenu:"production"},"/bell-pepper-harvests":{menu:"bell-pepper",submenu:"harvests"},"/bell-pepper-inventory":{menu:"bell-pepper",submenu:"inventory"},"/bell-pepper-sales":{menu:"bell-pepper",submenu:"sales"},"/bell-pepper-kpis":{menu:"bell-pepper",submenu:"kpis"},"/tomatoes-production":{menu:"tomatoes",submenu:"production"},"/tomatoes-inventory":{menu:"tomatoes",submenu:"inventory"},"/tomatoes-sales":{menu:"tomatoes",submenu:"sales"},"/tomatoes-kpis":{menu:"tomatoes",submenu:"kpis"},"/habaneros-production":{menu:"habaneros",submenu:"production"},"/habaneros-inventory":{menu:"habaneros",submenu:"inventory"},"/habaneros-sales":{menu:"habaneros",submenu:"sales"},"/habaneros-kpis":{menu:"habaneros",submenu:"kpis"},"/reports/consolidated-sales":{menu:"reports",submenu:"consolidated-sales"},"/reports/consolidated-expenses":{menu:"reports",submenu:"consolidated-expenses"},"/reports/staff-allocation":{menu:"reports",submenu:"staff-allocation"},"/admin/admin-zones":{menu:"admin",submenu:"admin-zones"},"/admin/sites":{menu:"admin",submenu:"sites"},"/admin/farm-zones":{menu:"admin",submenu:"farm-zones"},"/admin/factories":{menu:"admin",submenu:"factories"},"/admin/crops":{menu:"admin",submenu:"crops"},"/admin/worker-job-roles":{menu:"admin",submenu:"worker-job-roles"},"/admin/assets":{menu:"admin",submenu:"assets"},"/admin/asset-categories":{menu:"admin",submenu:"asset-categories"},"/admin/roles":{menu:"admin",submenu:"roles"},"/admin/users":{menu:"admin",submenu:"users"}})[T]||{menu:null,submenu:null},H=T=>{const{menu:F,submenu:te}=A(T.href);if(!x(F,te))return null;const q=o(T.href);return e.jsxs(vt,{to:T.href,onClick:()=>w(!1),className:`flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors ml-4 ${q?"bg-green-50 text-green-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(T.icon,{className:"mr-3 h-4 w-4"}),T.name]},T.name)},I=T=>{if(T.key){const F=p[T.key]||!1,te=k(T);return e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:q=>{q.preventDefault(),q.stopPropagation(),M(T.key)},className:`w-full flex items-center justify-between px-4 py-2.5 text-sm font-semibold rounded-lg transition-colors ${te?"bg-green-50 text-green-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(T.icon,{className:"mr-3 h-5 w-5"}),T.name]}),F?e.jsx(jx,{className:"h-4 w-4"}):e.jsx(bx,{className:"h-4 w-4"})]}),F&&e.jsx("div",{className:"mt-1 space-y-1",children:T.items.map(H)})]},T.name)}else return e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:T.name}),e.jsx("div",{className:"mt-1 space-y-1",children:T.items.map(H)})]},T.name)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:e.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[e.jsxs("div",{className:"flex items-center flex-shrink-0 px-4 py-6 border-b border-gray-200",children:[e.jsx(Zr,{className:"h-8 w-8 text-green-600"}),e.jsx("h1",{className:"ml-2 text-xl font-bold text-gray-900",children:"FMS"})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-2 overflow-y-auto",children:D.map(I)})}),e.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 font-medium",children:c?.email?.charAt(0).toUpperCase()||"U"})})}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:c?.name||c?.email||"User"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:c?.email})]}),e.jsx("button",{onClick:_,className:"ml-2 p-2 text-gray-400 hover:text-gray-600",title:"Logout",children:e.jsx(zd,{className:"h-5 w-5"})})]})})]})}),e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zr,{className:"h-6 w-6 text-green-600"}),e.jsx("h1",{className:"ml-2 text-lg font-bold text-gray-900",children:"FMS"})]}),e.jsx("button",{onClick:()=>w(!y),className:"p-2 text-gray-400 hover:text-gray-600",children:y?e.jsx(sn,{className:"h-6 w-6"}):e.jsx(Px,{className:"h-6 w-6"})})]}),y&&e.jsx("div",{className:"bg-white border-b border-gray-200 max-h-[calc(100vh-64px)] overflow-y-auto",children:e.jsxs("nav",{className:"px-2 py-2 space-y-2",children:[D.map(I),e.jsxs("button",{onClick:_,className:"w-full flex items-center px-4 py-3 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg",children:[e.jsx(zd,{className:"mr-3 h-5 w-5"}),"Logout"]})]})})]}),e.jsx("div",{className:"md:pl-64",children:e.jsx("main",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i})})})]})}function hh({children:i}){const{user:c,loading:u}=nn();return u?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):c?i:e.jsx(Qr,{to:"/login"})}function gh(){const{user:i,loading:c}=nn();if(c)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})});if(!i)return e.jsx(Qr,{to:"/login"});const u=i?.roles?.some(y=>y.name==="ADMIN"),g=i.permissions?.map(y=>y.name)||i.roles?.flatMap(y=>y.permissions?.map(w=>w.name)||[])||[];return u||g.includes("reports.dashboard.view")?e.jsx(Fx,{}):g.includes("bell-pepper.harvests.view")?e.jsx(Qr,{to:"/bell-pepper-harvests",replace:!0}):g.includes("bell-pepper.inventory.view")?e.jsx(Qr,{to:"/bell-pepper-inventory",replace:!0}):g.includes("gari.production-batches.view")?e.jsx(Qr,{to:"/gari-production-batches",replace:!0}):g.includes("gari.inventory.view")?e.jsx(Qr,{to:"/gari-inventory",replace:!0}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-yellow-800",children:"No Access"}),e.jsx("p",{className:"text-yellow-700",children:"You don't have access to any pages. Please contact your administrator."})]})})}function fh(){return e.jsx(dx,{children:e.jsxs(Ld,{children:[e.jsx(pe,{path:"/login",element:e.jsx(Mx,{})}),e.jsx(pe,{path:"/*",element:e.jsx(hh,{children:e.jsx(xh,{children:e.jsxs(Ld,{children:[e.jsx(pe,{path:"/",element:e.jsx(gh,{})}),e.jsx(pe,{path:"/farms",element:e.jsx(zx,{})}),e.jsx(pe,{path:"/farms/:id",element:e.jsx(Ux,{})}),e.jsx(pe,{path:"/scale-devices",element:e.jsx(Bx,{})}),e.jsx(pe,{path:"/label-templates",element:e.jsx(Hx,{})}),e.jsx(pe,{path:"/gari-production-batches",element:e.jsx(qx,{})}),e.jsx(pe,{path:"/gari-production-batches/:id",element:e.jsx($x,{})}),e.jsx(pe,{path:"/gari-inventory",element:e.jsx(Vx,{})}),e.jsx(pe,{path:"/gari-sales",element:e.jsx(Wx,{})}),e.jsx(pe,{path:"/gari-kpis",element:e.jsx(Gx,{})}),e.jsx(pe,{path:"/packaging-materials",element:e.jsx(Kx,{})}),e.jsx(pe,{path:"/gari-waste-losses",element:e.jsx(Qx,{})}),e.jsx(pe,{path:"/bell-pepper-production",element:e.jsx(eh,{})}),e.jsx(pe,{path:"/bell-pepper-cycles/:id",element:e.jsx(th,{})}),e.jsx(pe,{path:"/bell-pepper-harvests",element:e.jsx(rh,{})}),e.jsx(pe,{path:"/bell-pepper-inventory",element:e.jsx(Ct,{cropName:"Bell Pepper",basePath:"bell-pepper"})}),e.jsx(pe,{path:"/bell-pepper-sales",element:e.jsx(Ct,{cropName:"Bell Pepper",basePath:"bell-pepper"})}),e.jsx(pe,{path:"/bell-pepper-kpis",element:e.jsx(Ct,{cropName:"Bell Pepper",basePath:"bell-pepper"})}),e.jsx(pe,{path:"/tomatoes-production",element:e.jsx(Ct,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(pe,{path:"/tomatoes-inventory",element:e.jsx(Ct,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(pe,{path:"/tomatoes-sales",element:e.jsx(Ct,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(pe,{path:"/tomatoes-kpis",element:e.jsx(Ct,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(pe,{path:"/habaneros-production",element:e.jsx(Ct,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(pe,{path:"/habaneros-inventory",element:e.jsx(Ct,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(pe,{path:"/habaneros-sales",element:e.jsx(Ct,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(pe,{path:"/habaneros-kpis",element:e.jsx(Ct,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(pe,{path:"/reports/consolidated-sales",element:e.jsx(Yx,{})}),e.jsx(pe,{path:"/reports/consolidated-expenses",element:e.jsx(Zx,{})}),e.jsx(pe,{path:"/reports/staff-allocation",element:e.jsx(Xx,{})}),e.jsx(pe,{path:"/admin/admin-zones",element:e.jsx(lh,{})}),e.jsx(pe,{path:"/admin/sites",element:e.jsx(sh,{})}),e.jsx(pe,{path:"/admin/boreholes",element:e.jsx(ph,{})}),e.jsx(pe,{path:"/admin/greenhouses",element:e.jsx(Jx,{})}),e.jsx(pe,{path:"/admin/farm-zones",element:e.jsx(ah,{})}),e.jsx(pe,{path:"/admin/factories",element:e.jsx(nh,{})}),e.jsx(pe,{path:"/admin/crops",element:e.jsx(oh,{})}),e.jsx(pe,{path:"/admin/worker-job-roles",element:e.jsx(mh,{})}),e.jsx(pe,{path:"/admin/assets",element:e.jsx(dh,{})}),e.jsx(pe,{path:"/admin/asset-categories",element:e.jsx(uh,{})}),e.jsx(pe,{path:"/admin/roles",element:e.jsx(ih,{})}),e.jsx(pe,{path:"/admin/users",element:e.jsx(ch,{})})]})})})})]})})}class yh extends hi.Component{constructor(c){super(c),this.state={hasError:!1,error:null}}static getDerivedStateFromError(c){return{hasError:!0,error:c}}componentDidCatch(c,u){console.error("React Error:",c,u)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",fontFamily:"sans-serif"},children:[e.jsx("h1",{children:"Something went wrong"}),e.jsxs("p",{children:["Error: ",this.state.error?.message||"Unknown error"]}),e.jsx("pre",{style:{background:"#f5f5f5",padding:"10px",overflow:"auto"},children:this.state.error?.stack}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}const li=document.getElementById("app");if(!li)console.error('App element not found! Make sure <div id="app"></div> exists in the HTML.'),document.body.innerHTML='<div style="padding: 20px;"><h1>Error: App element not found</h1><p>Make sure the HTML includes: &lt;div id="app"&gt;&lt;/div&gt;</p></div>';else try{op.createRoot(li).render(e.jsx(hi.StrictMode,{children:e.jsx(yh,{children:e.jsx(lx,{children:e.jsx(fh,{})})})}))}catch(i){console.error("Failed to render React app:",i),li.innerHTML=`
            <div style="padding: 20px; font-family: sans-serif;">
                <h1>Failed to Load Application</h1>
                <p>Error: ${i.message}</p>
                <pre style="background: #f5f5f5; padding: 10px; overflow: auto;">${i.stack}</pre>
                <button onclick="window.location.reload()">Reload Page</button>
            </div>
        `}
