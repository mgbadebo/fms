import{a as Zm}from"./index-B9ygI19o.js";/* empty css            */function Jm(i,o){for(var u=0;u<o.length;u++){const v=o[u];if(typeof v!="string"&&!Array.isArray(v)){for(const k in v)if(k!=="default"&&!(k in i)){const N=Object.getOwnPropertyDescriptor(v,k);N&&Object.defineProperty(i,k,N.get?N:{enumerable:!0,get:()=>v[k]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}function qd(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ei={exports:{}},Us={},ti={exports:{}},ve={};var vd;function ep(){if(vd)return ve;vd=1;var i=Symbol.for("react.element"),o=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),D=Symbol.iterator;function C(R){return R===null||typeof R!="object"?null:(R=D&&R[D]||R["@@iterator"],typeof R=="function"?R:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function p(R,j,Q){this.props=R,this.context=j,this.refs=y,this.updater=Q||I}p.prototype.isReactComponent={},p.prototype.setState=function(R,j){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,j,"setState")},p.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function c(){}c.prototype=p.prototype;function O(R,j,Q){this.props=R,this.context=j,this.refs=y,this.updater=Q||I}var V=O.prototype=new c;V.constructor=O,m(V,p.prototype),V.isPureReactComponent=!0;var z=Array.isArray,h=Object.prototype.hasOwnProperty,M={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function $(R,j,Q){var se,xe={},he=null,je=null;if(j!=null)for(se in j.ref!==void 0&&(je=j.ref),j.key!==void 0&&(he=""+j.key),j)h.call(j,se)&&!T.hasOwnProperty(se)&&(xe[se]=j[se]);var be=arguments.length-2;if(be===1)xe.children=Q;else if(1<be){for(var Ee=Array(be),lt=0;lt<be;lt++)Ee[lt]=arguments[lt+2];xe.children=Ee}if(R&&R.defaultProps)for(se in be=R.defaultProps,be)xe[se]===void 0&&(xe[se]=be[se]);return{$$typeof:i,type:R,key:he,ref:je,props:xe,_owner:M.current}}function H(R,j){return{$$typeof:i,type:R.type,key:j,ref:R.ref,props:R.props,_owner:R._owner}}function ce(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function g(R){var j={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(Q){return j[Q]})}var re=/\/+/g;function de(R,j){return typeof R=="object"&&R!==null&&R.key!=null?g(""+R.key):j.toString(36)}function pe(R,j,Q,se,xe){var he=typeof R;(he==="undefined"||he==="boolean")&&(R=null);var je=!1;if(R===null)je=!0;else switch(he){case"string":case"number":je=!0;break;case"object":switch(R.$$typeof){case i:case o:je=!0}}if(je)return je=R,xe=xe(je),R=se===""?"."+de(je,0):se,z(xe)?(Q="",R!=null&&(Q=R.replace(re,"$&/")+"/"),pe(xe,j,Q,"",function(lt){return lt})):xe!=null&&(ce(xe)&&(xe=H(xe,Q+(!xe.key||je&&je.key===xe.key?"":(""+xe.key).replace(re,"$&/")+"/")+R)),j.push(xe)),1;if(je=0,se=se===""?".":se+":",z(R))for(var be=0;be<R.length;be++){he=R[be];var Ee=se+de(he,be);je+=pe(he,j,Q,Ee,xe)}else if(Ee=C(R),typeof Ee=="function")for(R=Ee.call(R),be=0;!(he=R.next()).done;)he=he.value,Ee=se+de(he,be++),je+=pe(he,j,Q,Ee,xe);else if(he==="object")throw j=String(R),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return je}function X(R,j,Q){if(R==null)return R;var se=[],xe=0;return pe(R,se,"","",function(he){return j.call(Q,he,xe++)}),se}function te(R){if(R._status===-1){var j=R._result;j=j(),j.then(function(Q){(R._status===0||R._status===-1)&&(R._status=1,R._result=Q)},function(Q){(R._status===0||R._status===-1)&&(R._status=2,R._result=Q)}),R._status===-1&&(R._status=0,R._result=j)}if(R._status===1)return R._result.default;throw R._result}var ee={current:null},A={transition:null},G={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:A,ReactCurrentOwner:M};function Y(){throw Error("act(...) is not supported in production builds of React.")}return ve.Children={map:X,forEach:function(R,j,Q){X(R,function(){j.apply(this,arguments)},Q)},count:function(R){var j=0;return X(R,function(){j++}),j},toArray:function(R){return X(R,function(j){return j})||[]},only:function(R){if(!ce(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},ve.Component=p,ve.Fragment=u,ve.Profiler=k,ve.PureComponent=O,ve.StrictMode=v,ve.Suspense=x,ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,ve.act=Y,ve.cloneElement=function(R,j,Q){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var se=m({},R.props),xe=R.key,he=R.ref,je=R._owner;if(j!=null){if(j.ref!==void 0&&(he=j.ref,je=M.current),j.key!==void 0&&(xe=""+j.key),R.type&&R.type.defaultProps)var be=R.type.defaultProps;for(Ee in j)h.call(j,Ee)&&!T.hasOwnProperty(Ee)&&(se[Ee]=j[Ee]===void 0&&be!==void 0?be[Ee]:j[Ee])}var Ee=arguments.length-2;if(Ee===1)se.children=Q;else if(1<Ee){be=Array(Ee);for(var lt=0;lt<Ee;lt++)be[lt]=arguments[lt+2];se.children=be}return{$$typeof:i,type:R.type,key:xe,ref:he,props:se,_owner:je}},ve.createContext=function(R){return R={$$typeof:w,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:N,_context:R},R.Consumer=R},ve.createElement=$,ve.createFactory=function(R){var j=$.bind(null,R);return j.type=R,j},ve.createRef=function(){return{current:null}},ve.forwardRef=function(R){return{$$typeof:S,render:R}},ve.isValidElement=ce,ve.lazy=function(R){return{$$typeof:b,_payload:{_status:-1,_result:R},_init:te}},ve.memo=function(R,j){return{$$typeof:E,type:R,compare:j===void 0?null:j}},ve.startTransition=function(R){var j=A.transition;A.transition={};try{R()}finally{A.transition=j}},ve.unstable_act=Y,ve.useCallback=function(R,j){return ee.current.useCallback(R,j)},ve.useContext=function(R){return ee.current.useContext(R)},ve.useDebugValue=function(){},ve.useDeferredValue=function(R){return ee.current.useDeferredValue(R)},ve.useEffect=function(R,j){return ee.current.useEffect(R,j)},ve.useId=function(){return ee.current.useId()},ve.useImperativeHandle=function(R,j,Q){return ee.current.useImperativeHandle(R,j,Q)},ve.useInsertionEffect=function(R,j){return ee.current.useInsertionEffect(R,j)},ve.useLayoutEffect=function(R,j){return ee.current.useLayoutEffect(R,j)},ve.useMemo=function(R,j){return ee.current.useMemo(R,j)},ve.useReducer=function(R,j,Q){return ee.current.useReducer(R,j,Q)},ve.useRef=function(R){return ee.current.useRef(R)},ve.useState=function(R){return ee.current.useState(R)},ve.useSyncExternalStore=function(R,j,Q){return ee.current.useSyncExternalStore(R,j,Q)},ve.useTransition=function(){return ee.current.useTransition()},ve.version="18.3.1",ve}var bd;function xi(){return bd||(bd=1,ti.exports=ep()),ti.exports}var jd;function tp(){if(jd)return Us;jd=1;var i=xi(),o=Symbol.for("react.element"),u=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,k=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N={key:!0,ref:!0,__self:!0,__source:!0};function w(S,x,E){var b,D={},C=null,I=null;E!==void 0&&(C=""+E),x.key!==void 0&&(C=""+x.key),x.ref!==void 0&&(I=x.ref);for(b in x)v.call(x,b)&&!N.hasOwnProperty(b)&&(D[b]=x[b]);if(S&&S.defaultProps)for(b in x=S.defaultProps,x)D[b]===void 0&&(D[b]=x[b]);return{$$typeof:o,type:S,key:C,ref:I,props:D,_owner:k.current}}return Us.Fragment=u,Us.jsx=w,Us.jsxs=w,Us}var Nd;function rp(){return Nd||(Nd=1,ei.exports=tp()),ei.exports}var e=rp(),f=xi();const gi=qd(f),sp=Jm({__proto__:null,default:gi},[f]);var en={},ri={exports:{}},at={},si={exports:{}},ai={};var _d;function ap(){return _d||(_d=1,(function(i){function o(A,G){var Y=A.length;A.push(G);e:for(;0<Y;){var R=Y-1>>>1,j=A[R];if(0<k(j,G))A[R]=G,A[Y]=j,Y=R;else break e}}function u(A){return A.length===0?null:A[0]}function v(A){if(A.length===0)return null;var G=A[0],Y=A.pop();if(Y!==G){A[0]=Y;e:for(var R=0,j=A.length,Q=j>>>1;R<Q;){var se=2*(R+1)-1,xe=A[se],he=se+1,je=A[he];if(0>k(xe,Y))he<j&&0>k(je,xe)?(A[R]=je,A[he]=Y,R=he):(A[R]=xe,A[se]=Y,R=se);else if(he<j&&0>k(je,Y))A[R]=je,A[he]=Y,R=he;else break e}}return G}function k(A,G){var Y=A.sortIndex-G.sortIndex;return Y!==0?Y:A.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var N=performance;i.unstable_now=function(){return N.now()}}else{var w=Date,S=w.now();i.unstable_now=function(){return w.now()-S}}var x=[],E=[],b=1,D=null,C=3,I=!1,m=!1,y=!1,p=typeof setTimeout=="function"?setTimeout:null,c=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(A){for(var G=u(E);G!==null;){if(G.callback===null)v(E);else if(G.startTime<=A)v(E),G.sortIndex=G.expirationTime,o(x,G);else break;G=u(E)}}function z(A){if(y=!1,V(A),!m)if(u(x)!==null)m=!0,te(h);else{var G=u(E);G!==null&&ee(z,G.startTime-A)}}function h(A,G){m=!1,y&&(y=!1,c($),$=-1),I=!0;var Y=C;try{for(V(G),D=u(x);D!==null&&(!(D.expirationTime>G)||A&&!g());){var R=D.callback;if(typeof R=="function"){D.callback=null,C=D.priorityLevel;var j=R(D.expirationTime<=G);G=i.unstable_now(),typeof j=="function"?D.callback=j:D===u(x)&&v(x),V(G)}else v(x);D=u(x)}if(D!==null)var Q=!0;else{var se=u(E);se!==null&&ee(z,se.startTime-G),Q=!1}return Q}finally{D=null,C=Y,I=!1}}var M=!1,T=null,$=-1,H=5,ce=-1;function g(){return!(i.unstable_now()-ce<H)}function re(){if(T!==null){var A=i.unstable_now();ce=A;var G=!0;try{G=T(!0,A)}finally{G?de():(M=!1,T=null)}}else M=!1}var de;if(typeof O=="function")de=function(){O(re)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,X=pe.port2;pe.port1.onmessage=re,de=function(){X.postMessage(null)}}else de=function(){p(re,0)};function te(A){T=A,M||(M=!0,de())}function ee(A,G){$=p(function(){A(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(A){A.callback=null},i.unstable_continueExecution=function(){m||I||(m=!0,te(h))},i.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<A?Math.floor(1e3/A):5},i.unstable_getCurrentPriorityLevel=function(){return C},i.unstable_getFirstCallbackNode=function(){return u(x)},i.unstable_next=function(A){switch(C){case 1:case 2:case 3:var G=3;break;default:G=C}var Y=C;C=G;try{return A()}finally{C=Y}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(A,G){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var Y=C;C=A;try{return G()}finally{C=Y}},i.unstable_scheduleCallback=function(A,G,Y){var R=i.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?R+Y:R):Y=R,A){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=Y+j,A={id:b++,callback:G,priorityLevel:A,startTime:Y,expirationTime:j,sortIndex:-1},Y>R?(A.sortIndex=Y,o(E,A),u(x)===null&&A===u(E)&&(y?(c($),$=-1):y=!0,ee(z,Y-R))):(A.sortIndex=j,o(x,A),m||I||(m=!0,te(h))),A},i.unstable_shouldYield=g,i.unstable_wrapCallback=function(A){var G=C;return function(){var Y=C;C=G;try{return A.apply(this,arguments)}finally{C=Y}}}})(ai)),ai}var wd;function np(){return wd||(wd=1,si.exports=ap()),si.exports}var kd;function lp(){if(kd)return at;kd=1;var i=xi(),o=np();function u(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v=new Set,k={};function N(t,r){w(t,r),w(t+"Capture",r)}function w(t,r){for(k[t]=r,t=0;t<r.length;t++)v.add(r[t])}var S=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},D={};function C(t){return x.call(D,t)?!0:x.call(b,t)?!1:E.test(t)?D[t]=!0:(b[t]=!0,!1)}function I(t,r,s,a){if(s!==null&&s.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function m(t,r,s,a){if(r===null||typeof r>"u"||I(t,r,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function y(t,r,s,a,n,l,d){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=t,this.type=r,this.sanitizeURL=l,this.removeEmptyString=d}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){p[t]=new y(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];p[r]=new y(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){p[t]=new y(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){p[t]=new y(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){p[t]=new y(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){p[t]=new y(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){p[t]=new y(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){p[t]=new y(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){p[t]=new y(t,5,!1,t.toLowerCase(),null,!1,!1)});var c=/[\-:]([a-z])/g;function O(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(c,O);p[r]=new y(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(c,O);p[r]=new y(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(c,O);p[r]=new y(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){p[t]=new y(t,1,!1,t.toLowerCase(),null,!1,!1)}),p.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){p[t]=new y(t,1,!1,t.toLowerCase(),null,!0,!0)});function V(t,r,s,a){var n=p.hasOwnProperty(r)?p[r]:null;(n!==null?n.type!==0:a||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(m(r,s,n,a)&&(s=null),a||n===null?C(r)&&(s===null?t.removeAttribute(r):t.setAttribute(r,""+s)):n.mustUseProperty?t[n.propertyName]=s===null?n.type===3?!1:"":s:(r=n.attributeName,a=n.attributeNamespace,s===null?t.removeAttribute(r):(n=n.type,s=n===3||n===4&&s===!0?"":""+s,a?t.setAttributeNS(a,r,s):t.setAttribute(r,s))))}var z=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=Symbol.for("react.element"),M=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),g=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),A=Symbol.iterator;function G(t){return t===null||typeof t!="object"?null:(t=A&&t[A]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Object.assign,R;function j(t){if(R===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);R=r&&r[1]||""}return`
`+R+t}var Q=!1;function se(t,r){if(!t||Q)return"";Q=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(q){var a=q}Reflect.construct(t,[],r)}else{try{r.call()}catch(q){a=q}t.call(r.prototype)}else{try{throw Error()}catch(q){a=q}t()}}catch(q){if(q&&a&&typeof q.stack=="string"){for(var n=q.stack.split(`
`),l=a.stack.split(`
`),d=n.length-1,_=l.length-1;1<=d&&0<=_&&n[d]!==l[_];)_--;for(;1<=d&&0<=_;d--,_--)if(n[d]!==l[_]){if(d!==1||_!==1)do if(d--,_--,0>_||n[d]!==l[_]){var P=`
`+n[d].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=d&&0<=_);break}}}finally{Q=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?j(t):""}function xe(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=se(t.type,!1),t;case 11:return t=se(t.type.render,!1),t;case 1:return t=se(t.type,!0),t;default:return""}}function he(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case T:return"Fragment";case M:return"Portal";case H:return"Profiler";case $:return"StrictMode";case de:return"Suspense";case pe:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case g:return(t.displayName||"Context")+".Consumer";case ce:return(t._context.displayName||"Context")+".Provider";case re:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case X:return r=t.displayName||null,r!==null?r:he(t.type)||"Memo";case te:r=t._payload,t=t._init;try{return he(t(r))}catch{}}return null}function je(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(r);case 8:return r===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function be(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ee(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function lt(t){var r=Ee(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),a=""+t[r];if(!t.hasOwnProperty(r)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,l=s.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return n.call(this)},set:function(d){a=""+d,l.call(this,d)}}),Object.defineProperty(t,r,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function $s(t){t._valueTracker||(t._valueTracker=lt(t))}function wi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var s=r.getValue(),a="";return t&&(a=Ee(t)?t.checked?"true":"false":t.value),t=a,t!==s?(r.setValue(t),!0):!1}function Vs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ln(t,r){var s=r.checked;return Y({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function ki(t,r){var s=r.defaultValue==null?"":r.defaultValue,a=r.checked!=null?r.checked:r.defaultChecked;s=be(r.value!=null?r.value:s),t._wrapperState={initialChecked:a,initialValue:s,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Si(t,r){r=r.checked,r!=null&&V(t,"checked",r,!1)}function on(t,r){Si(t,r);var s=be(r.value),a=r.type;if(s!=null)a==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?cn(t,r.type,s):r.hasOwnProperty("defaultValue")&&cn(t,r.type,be(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Ci(t,r,s){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var a=r.type;if(!(a!=="submit"&&a!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,s||r===t.value||(t.value=r),t.defaultValue=r}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function cn(t,r,s){(r!=="number"||Vs(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var ts=Array.isArray;function wr(t,r,s,a){if(t=t.options,r){r={};for(var n=0;n<s.length;n++)r["$"+s[n]]=!0;for(s=0;s<t.length;s++)n=r.hasOwnProperty("$"+t[s].value),t[s].selected!==n&&(t[s].selected=n),n&&a&&(t[s].defaultSelected=!0)}else{for(s=""+be(s),r=null,n=0;n<t.length;n++){if(t[n].value===s){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}r!==null||t[n].disabled||(r=t[n])}r!==null&&(r.selected=!0)}}function dn(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(u(91));return Y({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ei(t,r){var s=r.value;if(s==null){if(s=r.children,r=r.defaultValue,s!=null){if(r!=null)throw Error(u(92));if(ts(s)){if(1<s.length)throw Error(u(93));s=s[0]}r=s}r==null&&(r=""),s=r}t._wrapperState={initialValue:be(s)}}function Ai(t,r){var s=be(r.value),a=be(r.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),r.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),a!=null&&(t.defaultValue=""+a)}function Di(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function Pi(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function un(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?Pi(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gs,Ri=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,s,a,n){MSApp.execUnsafeLocalFunction(function(){return t(r,s,a,n)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Gs=Gs||document.createElement("div"),Gs.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Gs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function rs(t,r){if(r){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=r;return}}t.textContent=r}var ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ru=["Webkit","ms","Moz","O"];Object.keys(ss).forEach(function(t){ru.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ss[r]=ss[t]})});function Ti(t,r,s){return r==null||typeof r=="boolean"||r===""?"":s||typeof r!="number"||r===0||ss.hasOwnProperty(t)&&ss[t]?(""+r).trim():r+"px"}function Li(t,r){t=t.style;for(var s in r)if(r.hasOwnProperty(s)){var a=s.indexOf("--")===0,n=Ti(s,r[s],a);s==="float"&&(s="cssFloat"),a?t.setProperty(s,n):t[s]=n}}var su=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mn(t,r){if(r){if(su[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(u(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(u(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(u(61))}if(r.style!=null&&typeof r.style!="object")throw Error(u(62))}}function pn(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xn=null;function gn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hn=null,kr=null,Sr=null;function Ii(t){if(t=ks(t)){if(typeof hn!="function")throw Error(u(280));var r=t.stateNode;r&&(r=ga(r),hn(t.stateNode,t.type,r))}}function Mi(t){kr?Sr?Sr.push(t):Sr=[t]:kr=t}function Oi(){if(kr){var t=kr,r=Sr;if(Sr=kr=null,Ii(t),r)for(t=0;t<r.length;t++)Ii(r[t])}}function Fi(t,r){return t(r)}function zi(){}var fn=!1;function Ui(t,r,s){if(fn)return t(r,s);fn=!0;try{return Fi(t,r,s)}finally{fn=!1,(kr!==null||Sr!==null)&&(zi(),Oi())}}function as(t,r){var s=t.stateNode;if(s===null)return null;var a=ga(s);if(a===null)return null;s=a[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(u(231,r,typeof s));return s}var yn=!1;if(S)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){yn=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{yn=!1}function au(t,r,s,a,n,l,d,_,P){var q=Array.prototype.slice.call(arguments,3);try{r.apply(s,q)}catch(K){this.onError(K)}}var ls=!1,Ws=null,Ks=!1,vn=null,nu={onError:function(t){ls=!0,Ws=t}};function lu(t,r,s,a,n,l,d,_,P){ls=!1,Ws=null,au.apply(nu,arguments)}function iu(t,r,s,a,n,l,d,_,P){if(lu.apply(this,arguments),ls){if(ls){var q=Ws;ls=!1,Ws=null}else throw Error(u(198));Ks||(Ks=!0,vn=q)}}function ur(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function qi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Bi(t){if(ur(t)!==t)throw Error(u(188))}function ou(t){var r=t.alternate;if(!r){if(r=ur(t),r===null)throw Error(u(188));return r!==t?null:t}for(var s=t,a=r;;){var n=s.return;if(n===null)break;var l=n.alternate;if(l===null){if(a=n.return,a!==null){s=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===s)return Bi(n),t;if(l===a)return Bi(n),r;l=l.sibling}throw Error(u(188))}if(s.return!==a.return)s=n,a=l;else{for(var d=!1,_=n.child;_;){if(_===s){d=!0,s=n,a=l;break}if(_===a){d=!0,a=n,s=l;break}_=_.sibling}if(!d){for(_=l.child;_;){if(_===s){d=!0,s=l,a=n;break}if(_===a){d=!0,a=l,s=n;break}_=_.sibling}if(!d)throw Error(u(189))}}if(s.alternate!==a)throw Error(u(190))}if(s.tag!==3)throw Error(u(188));return s.stateNode.current===s?t:r}function Hi(t){return t=ou(t),t!==null?$i(t):null}function $i(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=$i(t);if(r!==null)return r;t=t.sibling}return null}var Vi=o.unstable_scheduleCallback,Gi=o.unstable_cancelCallback,cu=o.unstable_shouldYield,du=o.unstable_requestPaint,Le=o.unstable_now,uu=o.unstable_getCurrentPriorityLevel,bn=o.unstable_ImmediatePriority,Wi=o.unstable_UserBlockingPriority,Qs=o.unstable_NormalPriority,mu=o.unstable_LowPriority,Ki=o.unstable_IdlePriority,Ys=null,Et=null;function pu(t){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Ys,t,void 0,(t.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:hu,xu=Math.log,gu=Math.LN2;function hu(t){return t>>>=0,t===0?32:31-(xu(t)/gu|0)|0}var Xs=64,Zs=4194304;function is(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Js(t,r){var s=t.pendingLanes;if(s===0)return 0;var a=0,n=t.suspendedLanes,l=t.pingedLanes,d=s&268435455;if(d!==0){var _=d&~n;_!==0?a=is(_):(l&=d,l!==0&&(a=is(l)))}else d=s&~n,d!==0?a=is(d):l!==0&&(a=is(l));if(a===0)return 0;if(r!==0&&r!==a&&(r&n)===0&&(n=a&-a,l=r&-r,n>=l||n===16&&(l&4194240)!==0))return r;if((a&4)!==0&&(a|=s&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=a;0<r;)s=31-bt(r),n=1<<s,a|=t[s],r&=~n;return a}function fu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yu(t,r){for(var s=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var d=31-bt(l),_=1<<d,P=n[d];P===-1?((_&s)===0||(_&a)!==0)&&(n[d]=fu(_,r)):P<=r&&(t.expiredLanes|=_),l&=~_}}function jn(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qi(){var t=Xs;return Xs<<=1,(Xs&4194240)===0&&(Xs=64),t}function Nn(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function os(t,r,s){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-bt(r),t[r]=s}function vu(t,r){var s=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<s;){var n=31-bt(s),l=1<<n;r[n]=0,a[n]=-1,t[n]=-1,s&=~l}}function _n(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var a=31-bt(s),n=1<<a;n&r|t[a]&r&&(t[a]|=r),s&=~n}}var we=0;function Yi(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Xi,wn,Zi,Ji,eo,kn=!1,ea=[],Bt=null,Ht=null,$t=null,cs=new Map,ds=new Map,Vt=[],bu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function to(t,r){switch(t){case"focusin":case"focusout":Bt=null;break;case"dragenter":case"dragleave":Ht=null;break;case"mouseover":case"mouseout":$t=null;break;case"pointerover":case"pointerout":cs.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ds.delete(r.pointerId)}}function us(t,r,s,a,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:r,domEventName:s,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},r!==null&&(r=ks(r),r!==null&&wn(r)),t):(t.eventSystemFlags|=a,r=t.targetContainers,n!==null&&r.indexOf(n)===-1&&r.push(n),t)}function ju(t,r,s,a,n){switch(r){case"focusin":return Bt=us(Bt,t,r,s,a,n),!0;case"dragenter":return Ht=us(Ht,t,r,s,a,n),!0;case"mouseover":return $t=us($t,t,r,s,a,n),!0;case"pointerover":var l=n.pointerId;return cs.set(l,us(cs.get(l)||null,t,r,s,a,n)),!0;case"gotpointercapture":return l=n.pointerId,ds.set(l,us(ds.get(l)||null,t,r,s,a,n)),!0}return!1}function ro(t){var r=mr(t.target);if(r!==null){var s=ur(r);if(s!==null){if(r=s.tag,r===13){if(r=qi(s),r!==null){t.blockedOn=r,eo(t.priority,function(){Zi(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ta(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var s=Cn(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var a=new s.constructor(s.type,s);xn=a,s.target.dispatchEvent(a),xn=null}else return r=ks(s),r!==null&&wn(r),t.blockedOn=s,!1;r.shift()}return!0}function so(t,r,s){ta(t)&&s.delete(r)}function Nu(){kn=!1,Bt!==null&&ta(Bt)&&(Bt=null),Ht!==null&&ta(Ht)&&(Ht=null),$t!==null&&ta($t)&&($t=null),cs.forEach(so),ds.forEach(so)}function ms(t,r){t.blockedOn===r&&(t.blockedOn=null,kn||(kn=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Nu)))}function ps(t){function r(n){return ms(n,t)}if(0<ea.length){ms(ea[0],t);for(var s=1;s<ea.length;s++){var a=ea[s];a.blockedOn===t&&(a.blockedOn=null)}}for(Bt!==null&&ms(Bt,t),Ht!==null&&ms(Ht,t),$t!==null&&ms($t,t),cs.forEach(r),ds.forEach(r),s=0;s<Vt.length;s++)a=Vt[s],a.blockedOn===t&&(a.blockedOn=null);for(;0<Vt.length&&(s=Vt[0],s.blockedOn===null);)ro(s),s.blockedOn===null&&Vt.shift()}var Cr=z.ReactCurrentBatchConfig,ra=!0;function _u(t,r,s,a){var n=we,l=Cr.transition;Cr.transition=null;try{we=1,Sn(t,r,s,a)}finally{we=n,Cr.transition=l}}function wu(t,r,s,a){var n=we,l=Cr.transition;Cr.transition=null;try{we=4,Sn(t,r,s,a)}finally{we=n,Cr.transition=l}}function Sn(t,r,s,a){if(ra){var n=Cn(t,r,s,a);if(n===null)$n(t,r,a,sa,s),to(t,a);else if(ju(n,t,r,s,a))a.stopPropagation();else if(to(t,a),r&4&&-1<bu.indexOf(t)){for(;n!==null;){var l=ks(n);if(l!==null&&Xi(l),l=Cn(t,r,s,a),l===null&&$n(t,r,a,sa,s),l===n)break;n=l}n!==null&&a.stopPropagation()}else $n(t,r,a,null,s)}}var sa=null;function Cn(t,r,s,a){if(sa=null,t=gn(a),t=mr(t),t!==null)if(r=ur(t),r===null)t=null;else if(s=r.tag,s===13){if(t=qi(r),t!==null)return t;t=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return sa=t,null}function ao(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uu()){case bn:return 1;case Wi:return 4;case Qs:case mu:return 16;case Ki:return 536870912;default:return 16}default:return 16}}var Gt=null,En=null,aa=null;function no(){if(aa)return aa;var t,r=En,s=r.length,a,n="value"in Gt?Gt.value:Gt.textContent,l=n.length;for(t=0;t<s&&r[t]===n[t];t++);var d=s-t;for(a=1;a<=d&&r[s-a]===n[l-a];a++);return aa=n.slice(t,1<a?1-a:void 0)}function na(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function la(){return!0}function lo(){return!1}function it(t){function r(s,a,n,l,d){this._reactName=s,this._targetInst=n,this.type=a,this.nativeEvent=l,this.target=d,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(s=t[_],this[_]=s?s(l):l[_]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?la:lo,this.isPropagationStopped=lo,this}return Y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),r}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},An=it(Er),xs=Y({},Er,{view:0,detail:0}),ku=it(xs),Dn,Pn,gs,ia=Y({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gs&&(gs&&t.type==="mousemove"?(Dn=t.screenX-gs.screenX,Pn=t.screenY-gs.screenY):Pn=Dn=0,gs=t),Dn)},movementY:function(t){return"movementY"in t?t.movementY:Pn}}),io=it(ia),Su=Y({},ia,{dataTransfer:0}),Cu=it(Su),Eu=Y({},xs,{relatedTarget:0}),Rn=it(Eu),Au=Y({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),Du=it(Au),Pu=Y({},Er,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ru=it(Pu),Tu=Y({},Er,{data:0}),oo=it(Tu),Lu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ou(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Mu[t])?!!r[t]:!1}function Tn(){return Ou}var Fu=Y({},xs,{key:function(t){if(t.key){var r=Lu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=na(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Iu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(t){return t.type==="keypress"?na(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?na(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zu=it(Fu),Uu=Y({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),co=it(Uu),qu=Y({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn}),Bu=it(qu),Hu=Y({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),$u=it(Hu),Vu=Y({},ia,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gu=it(Vu),Wu=[9,13,27,32],Ln=S&&"CompositionEvent"in window,hs=null;S&&"documentMode"in document&&(hs=document.documentMode);var Ku=S&&"TextEvent"in window&&!hs,uo=S&&(!Ln||hs&&8<hs&&11>=hs),mo=" ",po=!1;function xo(t,r){switch(t){case"keyup":return Wu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function go(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ar=!1;function Qu(t,r){switch(t){case"compositionend":return go(r);case"keypress":return r.which!==32?null:(po=!0,mo);case"textInput":return t=r.data,t===mo&&po?null:t;default:return null}}function Yu(t,r){if(Ar)return t==="compositionend"||!Ln&&xo(t,r)?(t=no(),aa=En=Gt=null,Ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return uo&&r.locale!=="ko"?null:r.data;default:return null}}var Xu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ho(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Xu[t.type]:r==="textarea"}function fo(t,r,s,a){Mi(a),r=ma(r,"onChange"),0<r.length&&(s=new An("onChange","change",null,s,a),t.push({event:s,listeners:r}))}var fs=null,ys=null;function Zu(t){Io(t,0)}function oa(t){var r=Lr(t);if(wi(r))return t}function Ju(t,r){if(t==="change")return r}var yo=!1;if(S){var In;if(S){var Mn="oninput"in document;if(!Mn){var vo=document.createElement("div");vo.setAttribute("oninput","return;"),Mn=typeof vo.oninput=="function"}In=Mn}else In=!1;yo=In&&(!document.documentMode||9<document.documentMode)}function bo(){fs&&(fs.detachEvent("onpropertychange",jo),ys=fs=null)}function jo(t){if(t.propertyName==="value"&&oa(ys)){var r=[];fo(r,ys,t,gn(t)),Ui(Zu,r)}}function em(t,r,s){t==="focusin"?(bo(),fs=r,ys=s,fs.attachEvent("onpropertychange",jo)):t==="focusout"&&bo()}function tm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oa(ys)}function rm(t,r){if(t==="click")return oa(r)}function sm(t,r){if(t==="input"||t==="change")return oa(r)}function am(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var jt=typeof Object.is=="function"?Object.is:am;function vs(t,r){if(jt(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),a=Object.keys(r);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var n=s[a];if(!x.call(r,n)||!jt(t[n],r[n]))return!1}return!0}function No(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _o(t,r){var s=No(t);t=0;for(var a;s;){if(s.nodeType===3){if(a=t+s.textContent.length,t<=r&&a>=r)return{node:s,offset:r-t};t=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=No(s)}}function wo(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?wo(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function ko(){for(var t=window,r=Vs();r instanceof t.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)t=r.contentWindow;else break;r=Vs(t.document)}return r}function On(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function nm(t){var r=ko(),s=t.focusedElem,a=t.selectionRange;if(r!==s&&s&&s.ownerDocument&&wo(s.ownerDocument.documentElement,s)){if(a!==null&&On(s)){if(r=a.start,t=a.end,t===void 0&&(t=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(t,s.value.length);else if(t=(r=s.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var n=s.textContent.length,l=Math.min(a.start,n);a=a.end===void 0?l:Math.min(a.end,n),!t.extend&&l>a&&(n=a,a=l,l=n),n=_o(s,l);var d=_o(s,a);n&&d&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==d.node||t.focusOffset!==d.offset)&&(r=r.createRange(),r.setStart(n.node,n.offset),t.removeAllRanges(),l>a?(t.addRange(r),t.extend(d.node,d.offset)):(r.setEnd(d.node,d.offset),t.addRange(r)))}}for(r=[],t=s;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)t=r[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lm=S&&"documentMode"in document&&11>=document.documentMode,Dr=null,Fn=null,bs=null,zn=!1;function So(t,r,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;zn||Dr==null||Dr!==Vs(a)||(a=Dr,"selectionStart"in a&&On(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),bs&&vs(bs,a)||(bs=a,a=ma(Fn,"onSelect"),0<a.length&&(r=new An("onSelect","select",null,r,s),t.push({event:r,listeners:a}),r.target=Dr)))}function ca(t,r){var s={};return s[t.toLowerCase()]=r.toLowerCase(),s["Webkit"+t]="webkit"+r,s["Moz"+t]="moz"+r,s}var Pr={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionend:ca("Transition","TransitionEnd")},Un={},Co={};S&&(Co=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function da(t){if(Un[t])return Un[t];if(!Pr[t])return t;var r=Pr[t],s;for(s in r)if(r.hasOwnProperty(s)&&s in Co)return Un[t]=r[s];return t}var Eo=da("animationend"),Ao=da("animationiteration"),Do=da("animationstart"),Po=da("transitionend"),Ro=new Map,To="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wt(t,r){Ro.set(t,r),N(r,[t])}for(var qn=0;qn<To.length;qn++){var Bn=To[qn],im=Bn.toLowerCase(),om=Bn[0].toUpperCase()+Bn.slice(1);Wt(im,"on"+om)}Wt(Eo,"onAnimationEnd"),Wt(Ao,"onAnimationIteration"),Wt(Do,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt(Po,"onTransitionEnd"),w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),N("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),N("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),N("onBeforeInput",["compositionend","keypress","textInput","paste"]),N("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),N("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),N("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cm=new Set("cancel close invalid load scroll toggle".split(" ").concat(js));function Lo(t,r,s){var a=t.type||"unknown-event";t.currentTarget=s,iu(a,r,void 0,t),t.currentTarget=null}function Io(t,r){r=(r&4)!==0;for(var s=0;s<t.length;s++){var a=t[s],n=a.event;a=a.listeners;e:{var l=void 0;if(r)for(var d=a.length-1;0<=d;d--){var _=a[d],P=_.instance,q=_.currentTarget;if(_=_.listener,P!==l&&n.isPropagationStopped())break e;Lo(n,_,q),l=P}else for(d=0;d<a.length;d++){if(_=a[d],P=_.instance,q=_.currentTarget,_=_.listener,P!==l&&n.isPropagationStopped())break e;Lo(n,_,q),l=P}}}if(Ks)throw t=vn,Ks=!1,vn=null,t}function Se(t,r){var s=r[Yn];s===void 0&&(s=r[Yn]=new Set);var a=t+"__bubble";s.has(a)||(Mo(r,t,2,!1),s.add(a))}function Hn(t,r,s){var a=0;r&&(a|=4),Mo(s,t,a,r)}var ua="_reactListening"+Math.random().toString(36).slice(2);function Ns(t){if(!t[ua]){t[ua]=!0,v.forEach(function(s){s!=="selectionchange"&&(cm.has(s)||Hn(s,!1,t),Hn(s,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[ua]||(r[ua]=!0,Hn("selectionchange",!1,r))}}function Mo(t,r,s,a){switch(ao(r)){case 1:var n=_u;break;case 4:n=wu;break;default:n=Sn}s=n.bind(null,r,s,t),n=void 0,!yn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(r,s,{capture:!0,passive:n}):t.addEventListener(r,s,!0):n!==void 0?t.addEventListener(r,s,{passive:n}):t.addEventListener(r,s,!1)}function $n(t,r,s,a,n){var l=a;if((r&1)===0&&(r&2)===0&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var _=a.stateNode.containerInfo;if(_===n||_.nodeType===8&&_.parentNode===n)break;if(d===4)for(d=a.return;d!==null;){var P=d.tag;if((P===3||P===4)&&(P=d.stateNode.containerInfo,P===n||P.nodeType===8&&P.parentNode===n))return;d=d.return}for(;_!==null;){if(d=mr(_),d===null)return;if(P=d.tag,P===5||P===6){a=l=d;continue e}_=_.parentNode}}a=a.return}Ui(function(){var q=l,K=gn(s),Z=[];e:{var W=Ro.get(t);if(W!==void 0){var ae=An,le=t;switch(t){case"keypress":if(na(s)===0)break e;case"keydown":case"keyup":ae=zu;break;case"focusin":le="focus",ae=Rn;break;case"focusout":le="blur",ae=Rn;break;case"beforeblur":case"afterblur":ae=Rn;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Cu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Bu;break;case Eo:case Ao:case Do:ae=Du;break;case Po:ae=$u;break;case"scroll":ae=ku;break;case"wheel":ae=Gu;break;case"copy":case"cut":case"paste":ae=Ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=co}var ie=(r&4)!==0,Ie=!ie&&t==="scroll",F=ie?W!==null?W+"Capture":null:W;ie=[];for(var L=q,U;L!==null;){U=L;var J=U.stateNode;if(U.tag===5&&J!==null&&(U=J,F!==null&&(J=as(L,F),J!=null&&ie.push(_s(L,J,U)))),Ie)break;L=L.return}0<ie.length&&(W=new ae(W,le,null,s,K),Z.push({event:W,listeners:ie}))}}if((r&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",ae=t==="mouseout"||t==="pointerout",W&&s!==xn&&(le=s.relatedTarget||s.fromElement)&&(mr(le)||le[Tt]))break e;if((ae||W)&&(W=K.window===K?K:(W=K.ownerDocument)?W.defaultView||W.parentWindow:window,ae?(le=s.relatedTarget||s.toElement,ae=q,le=le?mr(le):null,le!==null&&(Ie=ur(le),le!==Ie||le.tag!==5&&le.tag!==6)&&(le=null)):(ae=null,le=q),ae!==le)){if(ie=io,J="onMouseLeave",F="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(ie=co,J="onPointerLeave",F="onPointerEnter",L="pointer"),Ie=ae==null?W:Lr(ae),U=le==null?W:Lr(le),W=new ie(J,L+"leave",ae,s,K),W.target=Ie,W.relatedTarget=U,J=null,mr(K)===q&&(ie=new ie(F,L+"enter",le,s,K),ie.target=U,ie.relatedTarget=Ie,J=ie),Ie=J,ae&&le)t:{for(ie=ae,F=le,L=0,U=ie;U;U=Rr(U))L++;for(U=0,J=F;J;J=Rr(J))U++;for(;0<L-U;)ie=Rr(ie),L--;for(;0<U-L;)F=Rr(F),U--;for(;L--;){if(ie===F||F!==null&&ie===F.alternate)break t;ie=Rr(ie),F=Rr(F)}ie=null}else ie=null;ae!==null&&Oo(Z,W,ae,ie,!1),le!==null&&Ie!==null&&Oo(Z,Ie,le,ie,!0)}}e:{if(W=q?Lr(q):window,ae=W.nodeName&&W.nodeName.toLowerCase(),ae==="select"||ae==="input"&&W.type==="file")var oe=Ju;else if(ho(W))if(yo)oe=sm;else{oe=tm;var ue=em}else(ae=W.nodeName)&&ae.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(oe=rm);if(oe&&(oe=oe(t,q))){fo(Z,oe,s,K);break e}ue&&ue(t,W,q),t==="focusout"&&(ue=W._wrapperState)&&ue.controlled&&W.type==="number"&&cn(W,"number",W.value)}switch(ue=q?Lr(q):window,t){case"focusin":(ho(ue)||ue.contentEditable==="true")&&(Dr=ue,Fn=q,bs=null);break;case"focusout":bs=Fn=Dr=null;break;case"mousedown":zn=!0;break;case"contextmenu":case"mouseup":case"dragend":zn=!1,So(Z,s,K);break;case"selectionchange":if(lm)break;case"keydown":case"keyup":So(Z,s,K)}var me;if(Ln)e:{switch(t){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Ar?xo(t,s)&&(ge="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(ge="onCompositionStart");ge&&(uo&&s.locale!=="ko"&&(Ar||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Ar&&(me=no()):(Gt=K,En="value"in Gt?Gt.value:Gt.textContent,Ar=!0)),ue=ma(q,ge),0<ue.length&&(ge=new oo(ge,t,null,s,K),Z.push({event:ge,listeners:ue}),me?ge.data=me:(me=go(s),me!==null&&(ge.data=me)))),(me=Ku?Qu(t,s):Yu(t,s))&&(q=ma(q,"onBeforeInput"),0<q.length&&(K=new oo("onBeforeInput","beforeinput",null,s,K),Z.push({event:K,listeners:q}),K.data=me))}Io(Z,r)})}function _s(t,r,s){return{instance:t,listener:r,currentTarget:s}}function ma(t,r){for(var s=r+"Capture",a=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=as(t,s),l!=null&&a.unshift(_s(t,l,n)),l=as(t,r),l!=null&&a.push(_s(t,l,n))),t=t.return}return a}function Rr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Oo(t,r,s,a,n){for(var l=r._reactName,d=[];s!==null&&s!==a;){var _=s,P=_.alternate,q=_.stateNode;if(P!==null&&P===a)break;_.tag===5&&q!==null&&(_=q,n?(P=as(s,l),P!=null&&d.unshift(_s(s,P,_))):n||(P=as(s,l),P!=null&&d.push(_s(s,P,_)))),s=s.return}d.length!==0&&t.push({event:r,listeners:d})}var dm=/\r\n?/g,um=/\u0000|\uFFFD/g;function Fo(t){return(typeof t=="string"?t:""+t).replace(dm,`
`).replace(um,"")}function pa(t,r,s){if(r=Fo(r),Fo(t)!==r&&s)throw Error(u(425))}function xa(){}var Vn=null,Gn=null;function Wn(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Kn=typeof setTimeout=="function"?setTimeout:void 0,mm=typeof clearTimeout=="function"?clearTimeout:void 0,zo=typeof Promise=="function"?Promise:void 0,pm=typeof queueMicrotask=="function"?queueMicrotask:typeof zo<"u"?function(t){return zo.resolve(null).then(t).catch(xm)}:Kn;function xm(t){setTimeout(function(){throw t})}function Qn(t,r){var s=r,a=0;do{var n=s.nextSibling;if(t.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(a===0){t.removeChild(n),ps(r);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=n}while(s);ps(r)}function Kt(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Uo(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(r===0)return t;r--}else s==="/$"&&r++}t=t.previousSibling}return null}var Tr=Math.random().toString(36).slice(2),At="__reactFiber$"+Tr,ws="__reactProps$"+Tr,Tt="__reactContainer$"+Tr,Yn="__reactEvents$"+Tr,gm="__reactListeners$"+Tr,hm="__reactHandles$"+Tr;function mr(t){var r=t[At];if(r)return r;for(var s=t.parentNode;s;){if(r=s[Tt]||s[At]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(t=Uo(t);t!==null;){if(s=t[At])return s;t=Uo(t)}return r}t=s,s=t.parentNode}return null}function ks(t){return t=t[At]||t[Tt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(u(33))}function ga(t){return t[ws]||null}var Xn=[],Ir=-1;function Qt(t){return{current:t}}function Ce(t){0>Ir||(t.current=Xn[Ir],Xn[Ir]=null,Ir--)}function ke(t,r){Ir++,Xn[Ir]=t.current,t.current=r}var Yt={},Ge=Qt(Yt),Je=Qt(!1),pr=Yt;function Mr(t,r){var s=t.type.contextTypes;if(!s)return Yt;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===r)return a.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in s)n[l]=r[l];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=n),n}function et(t){return t=t.childContextTypes,t!=null}function ha(){Ce(Je),Ce(Ge)}function qo(t,r,s){if(Ge.current!==Yt)throw Error(u(168));ke(Ge,r),ke(Je,s)}function Bo(t,r,s){var a=t.stateNode;if(r=r.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var n in a)if(!(n in r))throw Error(u(108,je(t)||"Unknown",n));return Y({},s,a)}function fa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yt,pr=Ge.current,ke(Ge,t),ke(Je,Je.current),!0}function Ho(t,r,s){var a=t.stateNode;if(!a)throw Error(u(169));s?(t=Bo(t,r,pr),a.__reactInternalMemoizedMergedChildContext=t,Ce(Je),Ce(Ge),ke(Ge,t)):Ce(Je),ke(Je,s)}var Lt=null,ya=!1,Zn=!1;function $o(t){Lt===null?Lt=[t]:Lt.push(t)}function fm(t){ya=!0,$o(t)}function Xt(){if(!Zn&&Lt!==null){Zn=!0;var t=0,r=we;try{var s=Lt;for(we=1;t<s.length;t++){var a=s[t];do a=a(!0);while(a!==null)}Lt=null,ya=!1}catch(n){throw Lt!==null&&(Lt=Lt.slice(t+1)),Vi(bn,Xt),n}finally{we=r,Zn=!1}}return null}var Or=[],Fr=0,va=null,ba=0,mt=[],pt=0,xr=null,It=1,Mt="";function gr(t,r){Or[Fr++]=ba,Or[Fr++]=va,va=t,ba=r}function Vo(t,r,s){mt[pt++]=It,mt[pt++]=Mt,mt[pt++]=xr,xr=t;var a=It;t=Mt;var n=32-bt(a)-1;a&=~(1<<n),s+=1;var l=32-bt(r)+n;if(30<l){var d=n-n%5;l=(a&(1<<d)-1).toString(32),a>>=d,n-=d,It=1<<32-bt(r)+n|s<<n|a,Mt=l+t}else It=1<<l|s<<n|a,Mt=t}function Jn(t){t.return!==null&&(gr(t,1),Vo(t,1,0))}function el(t){for(;t===va;)va=Or[--Fr],Or[Fr]=null,ba=Or[--Fr],Or[Fr]=null;for(;t===xr;)xr=mt[--pt],mt[pt]=null,Mt=mt[--pt],mt[pt]=null,It=mt[--pt],mt[pt]=null}var ot=null,ct=null,Ae=!1,Nt=null;function Go(t,r){var s=ft(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=t,r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)}function Wo(t,r){switch(t.tag){case 5:var s=t.type;return r=r.nodeType!==1||s.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,ot=t,ct=Kt(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,ot=t,ct=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(s=xr!==null?{id:It,overflow:Mt}:null,t.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=ft(18,null,null,0),s.stateNode=r,s.return=t,t.child=s,ot=t,ct=null,!0):!1;default:return!1}}function tl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rl(t){if(Ae){var r=ct;if(r){var s=r;if(!Wo(t,r)){if(tl(t))throw Error(u(418));r=Kt(s.nextSibling);var a=ot;r&&Wo(t,r)?Go(a,s):(t.flags=t.flags&-4097|2,Ae=!1,ot=t)}}else{if(tl(t))throw Error(u(418));t.flags=t.flags&-4097|2,Ae=!1,ot=t}}}function Ko(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ot=t}function ja(t){if(t!==ot)return!1;if(!Ae)return Ko(t),Ae=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Wn(t.type,t.memoizedProps)),r&&(r=ct)){if(tl(t))throw Qo(),Error(u(418));for(;r;)Go(t,r),r=Kt(r.nextSibling)}if(Ko(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(r===0){ct=Kt(t.nextSibling);break e}r--}else s!=="$"&&s!=="$!"&&s!=="$?"||r++}t=t.nextSibling}ct=null}}else ct=ot?Kt(t.stateNode.nextSibling):null;return!0}function Qo(){for(var t=ct;t;)t=Kt(t.nextSibling)}function zr(){ct=ot=null,Ae=!1}function sl(t){Nt===null?Nt=[t]:Nt.push(t)}var ym=z.ReactCurrentBatchConfig;function Ss(t,r,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(u(309));var a=s.stateNode}if(!a)throw Error(u(147,t));var n=a,l=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===l?r.ref:(r=function(d){var _=n.refs;d===null?delete _[l]:_[l]=d},r._stringRef=l,r)}if(typeof t!="string")throw Error(u(284));if(!s._owner)throw Error(u(290,t))}return t}function Na(t,r){throw t=Object.prototype.toString.call(r),Error(u(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Yo(t){var r=t._init;return r(t._payload)}function Xo(t){function r(F,L){if(t){var U=F.deletions;U===null?(F.deletions=[L],F.flags|=16):U.push(L)}}function s(F,L){if(!t)return null;for(;L!==null;)r(F,L),L=L.sibling;return null}function a(F,L){for(F=new Map;L!==null;)L.key!==null?F.set(L.key,L):F.set(L.index,L),L=L.sibling;return F}function n(F,L){return F=nr(F,L),F.index=0,F.sibling=null,F}function l(F,L,U){return F.index=U,t?(U=F.alternate,U!==null?(U=U.index,U<L?(F.flags|=2,L):U):(F.flags|=2,L)):(F.flags|=1048576,L)}function d(F){return t&&F.alternate===null&&(F.flags|=2),F}function _(F,L,U,J){return L===null||L.tag!==6?(L=Kl(U,F.mode,J),L.return=F,L):(L=n(L,U),L.return=F,L)}function P(F,L,U,J){var oe=U.type;return oe===T?K(F,L,U.props.children,J,U.key):L!==null&&(L.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===te&&Yo(oe)===L.type)?(J=n(L,U.props),J.ref=Ss(F,L,U),J.return=F,J):(J=Ga(U.type,U.key,U.props,null,F.mode,J),J.ref=Ss(F,L,U),J.return=F,J)}function q(F,L,U,J){return L===null||L.tag!==4||L.stateNode.containerInfo!==U.containerInfo||L.stateNode.implementation!==U.implementation?(L=Ql(U,F.mode,J),L.return=F,L):(L=n(L,U.children||[]),L.return=F,L)}function K(F,L,U,J,oe){return L===null||L.tag!==7?(L=_r(U,F.mode,J,oe),L.return=F,L):(L=n(L,U),L.return=F,L)}function Z(F,L,U){if(typeof L=="string"&&L!==""||typeof L=="number")return L=Kl(""+L,F.mode,U),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case h:return U=Ga(L.type,L.key,L.props,null,F.mode,U),U.ref=Ss(F,null,L),U.return=F,U;case M:return L=Ql(L,F.mode,U),L.return=F,L;case te:var J=L._init;return Z(F,J(L._payload),U)}if(ts(L)||G(L))return L=_r(L,F.mode,U,null),L.return=F,L;Na(F,L)}return null}function W(F,L,U,J){var oe=L!==null?L.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return oe!==null?null:_(F,L,""+U,J);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case h:return U.key===oe?P(F,L,U,J):null;case M:return U.key===oe?q(F,L,U,J):null;case te:return oe=U._init,W(F,L,oe(U._payload),J)}if(ts(U)||G(U))return oe!==null?null:K(F,L,U,J,null);Na(F,U)}return null}function ae(F,L,U,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number")return F=F.get(U)||null,_(L,F,""+J,oe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case h:return F=F.get(J.key===null?U:J.key)||null,P(L,F,J,oe);case M:return F=F.get(J.key===null?U:J.key)||null,q(L,F,J,oe);case te:var ue=J._init;return ae(F,L,U,ue(J._payload),oe)}if(ts(J)||G(J))return F=F.get(U)||null,K(L,F,J,oe,null);Na(L,J)}return null}function le(F,L,U,J){for(var oe=null,ue=null,me=L,ge=L=0,Be=null;me!==null&&ge<U.length;ge++){me.index>ge?(Be=me,me=null):Be=me.sibling;var _e=W(F,me,U[ge],J);if(_e===null){me===null&&(me=Be);break}t&&me&&_e.alternate===null&&r(F,me),L=l(_e,L,ge),ue===null?oe=_e:ue.sibling=_e,ue=_e,me=Be}if(ge===U.length)return s(F,me),Ae&&gr(F,ge),oe;if(me===null){for(;ge<U.length;ge++)me=Z(F,U[ge],J),me!==null&&(L=l(me,L,ge),ue===null?oe=me:ue.sibling=me,ue=me);return Ae&&gr(F,ge),oe}for(me=a(F,me);ge<U.length;ge++)Be=ae(me,F,ge,U[ge],J),Be!==null&&(t&&Be.alternate!==null&&me.delete(Be.key===null?ge:Be.key),L=l(Be,L,ge),ue===null?oe=Be:ue.sibling=Be,ue=Be);return t&&me.forEach(function(lr){return r(F,lr)}),Ae&&gr(F,ge),oe}function ie(F,L,U,J){var oe=G(U);if(typeof oe!="function")throw Error(u(150));if(U=oe.call(U),U==null)throw Error(u(151));for(var ue=oe=null,me=L,ge=L=0,Be=null,_e=U.next();me!==null&&!_e.done;ge++,_e=U.next()){me.index>ge?(Be=me,me=null):Be=me.sibling;var lr=W(F,me,_e.value,J);if(lr===null){me===null&&(me=Be);break}t&&me&&lr.alternate===null&&r(F,me),L=l(lr,L,ge),ue===null?oe=lr:ue.sibling=lr,ue=lr,me=Be}if(_e.done)return s(F,me),Ae&&gr(F,ge),oe;if(me===null){for(;!_e.done;ge++,_e=U.next())_e=Z(F,_e.value,J),_e!==null&&(L=l(_e,L,ge),ue===null?oe=_e:ue.sibling=_e,ue=_e);return Ae&&gr(F,ge),oe}for(me=a(F,me);!_e.done;ge++,_e=U.next())_e=ae(me,F,ge,_e.value,J),_e!==null&&(t&&_e.alternate!==null&&me.delete(_e.key===null?ge:_e.key),L=l(_e,L,ge),ue===null?oe=_e:ue.sibling=_e,ue=_e);return t&&me.forEach(function(Xm){return r(F,Xm)}),Ae&&gr(F,ge),oe}function Ie(F,L,U,J){if(typeof U=="object"&&U!==null&&U.type===T&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case h:e:{for(var oe=U.key,ue=L;ue!==null;){if(ue.key===oe){if(oe=U.type,oe===T){if(ue.tag===7){s(F,ue.sibling),L=n(ue,U.props.children),L.return=F,F=L;break e}}else if(ue.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===te&&Yo(oe)===ue.type){s(F,ue.sibling),L=n(ue,U.props),L.ref=Ss(F,ue,U),L.return=F,F=L;break e}s(F,ue);break}else r(F,ue);ue=ue.sibling}U.type===T?(L=_r(U.props.children,F.mode,J,U.key),L.return=F,F=L):(J=Ga(U.type,U.key,U.props,null,F.mode,J),J.ref=Ss(F,L,U),J.return=F,F=J)}return d(F);case M:e:{for(ue=U.key;L!==null;){if(L.key===ue)if(L.tag===4&&L.stateNode.containerInfo===U.containerInfo&&L.stateNode.implementation===U.implementation){s(F,L.sibling),L=n(L,U.children||[]),L.return=F,F=L;break e}else{s(F,L);break}else r(F,L);L=L.sibling}L=Ql(U,F.mode,J),L.return=F,F=L}return d(F);case te:return ue=U._init,Ie(F,L,ue(U._payload),J)}if(ts(U))return le(F,L,U,J);if(G(U))return ie(F,L,U,J);Na(F,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,L!==null&&L.tag===6?(s(F,L.sibling),L=n(L,U),L.return=F,F=L):(s(F,L),L=Kl(U,F.mode,J),L.return=F,F=L),d(F)):s(F,L)}return Ie}var Ur=Xo(!0),Zo=Xo(!1),_a=Qt(null),wa=null,qr=null,al=null;function nl(){al=qr=wa=null}function ll(t){var r=_a.current;Ce(_a),t._currentValue=r}function il(t,r,s){for(;t!==null;){var a=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,a!==null&&(a.childLanes|=r)):a!==null&&(a.childLanes&r)!==r&&(a.childLanes|=r),t===s)break;t=t.return}}function Br(t,r){wa=t,al=qr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(tt=!0),t.firstContext=null)}function xt(t){var r=t._currentValue;if(al!==t)if(t={context:t,memoizedValue:r,next:null},qr===null){if(wa===null)throw Error(u(308));qr=t,wa.dependencies={lanes:0,firstContext:t}}else qr=qr.next=t;return r}var hr=null;function ol(t){hr===null?hr=[t]:hr.push(t)}function Jo(t,r,s,a){var n=r.interleaved;return n===null?(s.next=s,ol(r)):(s.next=n.next,n.next=s),r.interleaved=s,Ot(t,a)}function Ot(t,r){t.lanes|=r;var s=t.alternate;for(s!==null&&(s.lanes|=r),s=t,t=t.return;t!==null;)t.childLanes|=r,s=t.alternate,s!==null&&(s.childLanes|=r),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Zt=!1;function cl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ec(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ft(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Jt(t,r,s){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(Ne&2)!==0){var n=a.pending;return n===null?r.next=r:(r.next=n.next,n.next=r),a.pending=r,Ot(t,s)}return n=a.interleaved,n===null?(r.next=r,ol(a)):(r.next=n.next,n.next=r),a.interleaved=r,Ot(t,s)}function ka(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var a=r.lanes;a&=t.pendingLanes,s|=a,r.lanes=s,_n(t,s)}}function tc(t,r){var s=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var n=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var d={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?n=l=d:l=l.next=d,s=s.next}while(s!==null);l===null?n=l=r:l=l.next=r}else n=l=r;s={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}function Sa(t,r,s,a){var n=t.updateQueue;Zt=!1;var l=n.firstBaseUpdate,d=n.lastBaseUpdate,_=n.shared.pending;if(_!==null){n.shared.pending=null;var P=_,q=P.next;P.next=null,d===null?l=q:d.next=q,d=P;var K=t.alternate;K!==null&&(K=K.updateQueue,_=K.lastBaseUpdate,_!==d&&(_===null?K.firstBaseUpdate=q:_.next=q,K.lastBaseUpdate=P))}if(l!==null){var Z=n.baseState;d=0,K=q=P=null,_=l;do{var W=_.lane,ae=_.eventTime;if((a&W)===W){K!==null&&(K=K.next={eventTime:ae,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var le=t,ie=_;switch(W=r,ae=s,ie.tag){case 1:if(le=ie.payload,typeof le=="function"){Z=le.call(ae,Z,W);break e}Z=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ie.payload,W=typeof le=="function"?le.call(ae,Z,W):le,W==null)break e;Z=Y({},Z,W);break e;case 2:Zt=!0}}_.callback!==null&&_.lane!==0&&(t.flags|=64,W=n.effects,W===null?n.effects=[_]:W.push(_))}else ae={eventTime:ae,lane:W,tag:_.tag,payload:_.payload,callback:_.callback,next:null},K===null?(q=K=ae,P=Z):K=K.next=ae,d|=W;if(_=_.next,_===null){if(_=n.shared.pending,_===null)break;W=_,_=W.next,W.next=null,n.lastBaseUpdate=W,n.shared.pending=null}}while(!0);if(K===null&&(P=Z),n.baseState=P,n.firstBaseUpdate=q,n.lastBaseUpdate=K,r=n.shared.interleaved,r!==null){n=r;do d|=n.lane,n=n.next;while(n!==r)}else l===null&&(n.shared.lanes=0);vr|=d,t.lanes=d,t.memoizedState=Z}}function rc(t,r,s){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var a=t[r],n=a.callback;if(n!==null){if(a.callback=null,a=s,typeof n!="function")throw Error(u(191,n));n.call(a)}}}var Cs={},Dt=Qt(Cs),Es=Qt(Cs),As=Qt(Cs);function fr(t){if(t===Cs)throw Error(u(174));return t}function dl(t,r){switch(ke(As,r),ke(Es,t),ke(Dt,Cs),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:un(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=un(r,t)}Ce(Dt),ke(Dt,r)}function Hr(){Ce(Dt),Ce(Es),Ce(As)}function sc(t){fr(As.current);var r=fr(Dt.current),s=un(r,t.type);r!==s&&(ke(Es,t),ke(Dt,s))}function ul(t){Es.current===t&&(Ce(Dt),Ce(Es))}var De=Qt(0);function Ca(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ml=[];function pl(){for(var t=0;t<ml.length;t++)ml[t]._workInProgressVersionPrimary=null;ml.length=0}var Ea=z.ReactCurrentDispatcher,xl=z.ReactCurrentBatchConfig,yr=0,Pe=null,Fe=null,Ue=null,Aa=!1,Ds=!1,Ps=0,vm=0;function We(){throw Error(u(321))}function gl(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!jt(t[s],r[s]))return!1;return!0}function hl(t,r,s,a,n,l){if(yr=l,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ea.current=t===null||t.memoizedState===null?_m:wm,t=s(a,n),Ds){l=0;do{if(Ds=!1,Ps=0,25<=l)throw Error(u(301));l+=1,Ue=Fe=null,r.updateQueue=null,Ea.current=km,t=s(a,n)}while(Ds)}if(Ea.current=Ra,r=Fe!==null&&Fe.next!==null,yr=0,Ue=Fe=Pe=null,Aa=!1,r)throw Error(u(300));return t}function fl(){var t=Ps!==0;return Ps=0,t}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Pe.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function gt(){if(Fe===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var r=Ue===null?Pe.memoizedState:Ue.next;if(r!==null)Ue=r,Fe=t;else{if(t===null)throw Error(u(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ue===null?Pe.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function Rs(t,r){return typeof r=="function"?r(t):r}function yl(t){var r=gt(),s=r.queue;if(s===null)throw Error(u(311));s.lastRenderedReducer=t;var a=Fe,n=a.baseQueue,l=s.pending;if(l!==null){if(n!==null){var d=n.next;n.next=l.next,l.next=d}a.baseQueue=n=l,s.pending=null}if(n!==null){l=n.next,a=a.baseState;var _=d=null,P=null,q=l;do{var K=q.lane;if((yr&K)===K)P!==null&&(P=P.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),a=q.hasEagerState?q.eagerState:t(a,q.action);else{var Z={lane:K,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};P===null?(_=P=Z,d=a):P=P.next=Z,Pe.lanes|=K,vr|=K}q=q.next}while(q!==null&&q!==l);P===null?d=a:P.next=_,jt(a,r.memoizedState)||(tt=!0),r.memoizedState=a,r.baseState=d,r.baseQueue=P,s.lastRenderedState=a}if(t=s.interleaved,t!==null){n=t;do l=n.lane,Pe.lanes|=l,vr|=l,n=n.next;while(n!==t)}else n===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function vl(t){var r=gt(),s=r.queue;if(s===null)throw Error(u(311));s.lastRenderedReducer=t;var a=s.dispatch,n=s.pending,l=r.memoizedState;if(n!==null){s.pending=null;var d=n=n.next;do l=t(l,d.action),d=d.next;while(d!==n);jt(l,r.memoizedState)||(tt=!0),r.memoizedState=l,r.baseQueue===null&&(r.baseState=l),s.lastRenderedState=l}return[l,a]}function ac(){}function nc(t,r){var s=Pe,a=gt(),n=r(),l=!jt(a.memoizedState,n);if(l&&(a.memoizedState=n,tt=!0),a=a.queue,bl(oc.bind(null,s,a,t),[t]),a.getSnapshot!==r||l||Ue!==null&&Ue.memoizedState.tag&1){if(s.flags|=2048,Ts(9,ic.bind(null,s,a,n,r),void 0,null),qe===null)throw Error(u(349));(yr&30)!==0||lc(s,r,n)}return n}function lc(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=Pe.updateQueue,r===null?(r={lastEffect:null,stores:null},Pe.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function ic(t,r,s,a){r.value=s,r.getSnapshot=a,cc(r)&&dc(t)}function oc(t,r,s){return s(function(){cc(r)&&dc(t)})}function cc(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!jt(t,s)}catch{return!0}}function dc(t){var r=Ot(t,1);r!==null&&St(r,t,1,-1)}function uc(t){var r=Pt();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:t},r.queue=t,t=t.dispatch=Nm.bind(null,Pe,t),[r.memoizedState,t]}function Ts(t,r,s,a){return t={tag:t,create:r,destroy:s,deps:a,next:null},r=Pe.updateQueue,r===null?(r={lastEffect:null,stores:null},Pe.updateQueue=r,r.lastEffect=t.next=t):(s=r.lastEffect,s===null?r.lastEffect=t.next=t:(a=s.next,s.next=t,t.next=a,r.lastEffect=t)),t}function mc(){return gt().memoizedState}function Da(t,r,s,a){var n=Pt();Pe.flags|=t,n.memoizedState=Ts(1|r,s,void 0,a===void 0?null:a)}function Pa(t,r,s,a){var n=gt();a=a===void 0?null:a;var l=void 0;if(Fe!==null){var d=Fe.memoizedState;if(l=d.destroy,a!==null&&gl(a,d.deps)){n.memoizedState=Ts(r,s,l,a);return}}Pe.flags|=t,n.memoizedState=Ts(1|r,s,l,a)}function pc(t,r){return Da(8390656,8,t,r)}function bl(t,r){return Pa(2048,8,t,r)}function xc(t,r){return Pa(4,2,t,r)}function gc(t,r){return Pa(4,4,t,r)}function hc(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function fc(t,r,s){return s=s!=null?s.concat([t]):null,Pa(4,4,hc.bind(null,r,t),s)}function jl(){}function yc(t,r){var s=gt();r=r===void 0?null:r;var a=s.memoizedState;return a!==null&&r!==null&&gl(r,a[1])?a[0]:(s.memoizedState=[t,r],t)}function vc(t,r){var s=gt();r=r===void 0?null:r;var a=s.memoizedState;return a!==null&&r!==null&&gl(r,a[1])?a[0]:(t=t(),s.memoizedState=[t,r],t)}function bc(t,r,s){return(yr&21)===0?(t.baseState&&(t.baseState=!1,tt=!0),t.memoizedState=s):(jt(s,r)||(s=Qi(),Pe.lanes|=s,vr|=s,t.baseState=!0),r)}function bm(t,r){var s=we;we=s!==0&&4>s?s:4,t(!0);var a=xl.transition;xl.transition={};try{t(!1),r()}finally{we=s,xl.transition=a}}function jc(){return gt().memoizedState}function jm(t,r,s){var a=sr(t);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Nc(t))_c(r,s);else if(s=Jo(t,r,s,a),s!==null){var n=Xe();St(s,t,a,n),wc(s,r,a)}}function Nm(t,r,s){var a=sr(t),n={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Nc(t))_c(r,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=r.lastRenderedReducer,l!==null))try{var d=r.lastRenderedState,_=l(d,s);if(n.hasEagerState=!0,n.eagerState=_,jt(_,d)){var P=r.interleaved;P===null?(n.next=n,ol(r)):(n.next=P.next,P.next=n),r.interleaved=n;return}}catch{}s=Jo(t,r,n,a),s!==null&&(n=Xe(),St(s,t,a,n),wc(s,r,a))}}function Nc(t){var r=t.alternate;return t===Pe||r!==null&&r===Pe}function _c(t,r){Ds=Aa=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function wc(t,r,s){if((s&4194240)!==0){var a=r.lanes;a&=t.pendingLanes,s|=a,r.lanes=s,_n(t,s)}}var Ra={readContext:xt,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},_m={readContext:xt,useCallback:function(t,r){return Pt().memoizedState=[t,r===void 0?null:r],t},useContext:xt,useEffect:pc,useImperativeHandle:function(t,r,s){return s=s!=null?s.concat([t]):null,Da(4194308,4,hc.bind(null,r,t),s)},useLayoutEffect:function(t,r){return Da(4194308,4,t,r)},useInsertionEffect:function(t,r){return Da(4,2,t,r)},useMemo:function(t,r){var s=Pt();return r=r===void 0?null:r,t=t(),s.memoizedState=[t,r],t},useReducer:function(t,r,s){var a=Pt();return r=s!==void 0?s(r):r,a.memoizedState=a.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},a.queue=t,t=t.dispatch=jm.bind(null,Pe,t),[a.memoizedState,t]},useRef:function(t){var r=Pt();return t={current:t},r.memoizedState=t},useState:uc,useDebugValue:jl,useDeferredValue:function(t){return Pt().memoizedState=t},useTransition:function(){var t=uc(!1),r=t[0];return t=bm.bind(null,t[1]),Pt().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,s){var a=Pe,n=Pt();if(Ae){if(s===void 0)throw Error(u(407));s=s()}else{if(s=r(),qe===null)throw Error(u(349));(yr&30)!==0||lc(a,r,s)}n.memoizedState=s;var l={value:s,getSnapshot:r};return n.queue=l,pc(oc.bind(null,a,l,t),[t]),a.flags|=2048,Ts(9,ic.bind(null,a,l,s,r),void 0,null),s},useId:function(){var t=Pt(),r=qe.identifierPrefix;if(Ae){var s=Mt,a=It;s=(a&~(1<<32-bt(a)-1)).toString(32)+s,r=":"+r+"R"+s,s=Ps++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=vm++,r=":"+r+"r"+s.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},wm={readContext:xt,useCallback:yc,useContext:xt,useEffect:bl,useImperativeHandle:fc,useInsertionEffect:xc,useLayoutEffect:gc,useMemo:vc,useReducer:yl,useRef:mc,useState:function(){return yl(Rs)},useDebugValue:jl,useDeferredValue:function(t){var r=gt();return bc(r,Fe.memoizedState,t)},useTransition:function(){var t=yl(Rs)[0],r=gt().memoizedState;return[t,r]},useMutableSource:ac,useSyncExternalStore:nc,useId:jc,unstable_isNewReconciler:!1},km={readContext:xt,useCallback:yc,useContext:xt,useEffect:bl,useImperativeHandle:fc,useInsertionEffect:xc,useLayoutEffect:gc,useMemo:vc,useReducer:vl,useRef:mc,useState:function(){return vl(Rs)},useDebugValue:jl,useDeferredValue:function(t){var r=gt();return Fe===null?r.memoizedState=t:bc(r,Fe.memoizedState,t)},useTransition:function(){var t=vl(Rs)[0],r=gt().memoizedState;return[t,r]},useMutableSource:ac,useSyncExternalStore:nc,useId:jc,unstable_isNewReconciler:!1};function _t(t,r){if(t&&t.defaultProps){r=Y({},r),t=t.defaultProps;for(var s in t)r[s]===void 0&&(r[s]=t[s]);return r}return r}function Nl(t,r,s,a){r=t.memoizedState,s=s(a,r),s=s==null?r:Y({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Ta={isMounted:function(t){return(t=t._reactInternals)?ur(t)===t:!1},enqueueSetState:function(t,r,s){t=t._reactInternals;var a=Xe(),n=sr(t),l=Ft(a,n);l.payload=r,s!=null&&(l.callback=s),r=Jt(t,l,n),r!==null&&(St(r,t,n,a),ka(r,t,n))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var a=Xe(),n=sr(t),l=Ft(a,n);l.tag=1,l.payload=r,s!=null&&(l.callback=s),r=Jt(t,l,n),r!==null&&(St(r,t,n,a),ka(r,t,n))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=Xe(),a=sr(t),n=Ft(s,a);n.tag=2,r!=null&&(n.callback=r),r=Jt(t,n,a),r!==null&&(St(r,t,a,s),ka(r,t,a))}};function kc(t,r,s,a,n,l,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,l,d):r.prototype&&r.prototype.isPureReactComponent?!vs(s,a)||!vs(n,l):!0}function Sc(t,r,s){var a=!1,n=Yt,l=r.contextType;return typeof l=="object"&&l!==null?l=xt(l):(n=et(r)?pr:Ge.current,a=r.contextTypes,l=(a=a!=null)?Mr(t,n):Yt),r=new r(s,l),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Ta,t.stateNode=r,r._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),r}function Cc(t,r,s,a){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,a),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,a),r.state!==t&&Ta.enqueueReplaceState(r,r.state,null)}function _l(t,r,s,a){var n=t.stateNode;n.props=s,n.state=t.memoizedState,n.refs={},cl(t);var l=r.contextType;typeof l=="object"&&l!==null?n.context=xt(l):(l=et(r)?pr:Ge.current,n.context=Mr(t,l)),n.state=t.memoizedState,l=r.getDerivedStateFromProps,typeof l=="function"&&(Nl(t,r,l,s),n.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(r=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),r!==n.state&&Ta.enqueueReplaceState(n,n.state,null),Sa(t,s,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function $r(t,r){try{var s="",a=r;do s+=xe(a),a=a.return;while(a);var n=s}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:r,stack:n,digest:null}}function wl(t,r,s){return{value:t,source:null,stack:s??null,digest:r??null}}function kl(t,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var Sm=typeof WeakMap=="function"?WeakMap:Map;function Ec(t,r,s){s=Ft(-1,s),s.tag=3,s.payload={element:null};var a=r.value;return s.callback=function(){Ua||(Ua=!0,Ul=a),kl(t,r)},s}function Ac(t,r,s){s=Ft(-1,s),s.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=r.value;s.payload=function(){return a(n)},s.callback=function(){kl(t,r)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){kl(t,r),typeof a!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var d=r.stack;this.componentDidCatch(r.value,{componentStack:d!==null?d:""})}),s}function Dc(t,r,s){var a=t.pingCache;if(a===null){a=t.pingCache=new Sm;var n=new Set;a.set(r,n)}else n=a.get(r),n===void 0&&(n=new Set,a.set(r,n));n.has(s)||(n.add(s),t=Um.bind(null,t,r,s),r.then(t,t))}function Pc(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Rc(t,r,s,a,n){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=Ft(-1,1),r.tag=2,Jt(s,r,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=n,t)}var Cm=z.ReactCurrentOwner,tt=!1;function Ye(t,r,s,a){r.child=t===null?Zo(r,null,s,a):Ur(r,t.child,s,a)}function Tc(t,r,s,a,n){s=s.render;var l=r.ref;return Br(r,n),a=hl(t,r,s,a,l,n),s=fl(),t!==null&&!tt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~n,zt(t,r,n)):(Ae&&s&&Jn(r),r.flags|=1,Ye(t,r,a,n),r.child)}function Lc(t,r,s,a,n){if(t===null){var l=s.type;return typeof l=="function"&&!Wl(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=l,Ic(t,r,l,a,n)):(t=Ga(s.type,null,a,r,r.mode,n),t.ref=r.ref,t.return=r,r.child=t)}if(l=t.child,(t.lanes&n)===0){var d=l.memoizedProps;if(s=s.compare,s=s!==null?s:vs,s(d,a)&&t.ref===r.ref)return zt(t,r,n)}return r.flags|=1,t=nr(l,a),t.ref=r.ref,t.return=r,r.child=t}function Ic(t,r,s,a,n){if(t!==null){var l=t.memoizedProps;if(vs(l,a)&&t.ref===r.ref)if(tt=!1,r.pendingProps=a=l,(t.lanes&n)!==0)(t.flags&131072)!==0&&(tt=!0);else return r.lanes=t.lanes,zt(t,r,n)}return Sl(t,r,s,a,n)}function Mc(t,r,s){var a=r.pendingProps,n=a.children,l=t!==null?t.memoizedState:null;if(a.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Gr,dt),dt|=s;else{if((s&1073741824)===0)return t=l!==null?l.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,ke(Gr,dt),dt|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:s,ke(Gr,dt),dt|=a}else l!==null?(a=l.baseLanes|s,r.memoizedState=null):a=s,ke(Gr,dt),dt|=a;return Ye(t,r,n,s),r.child}function Oc(t,r){var s=r.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function Sl(t,r,s,a,n){var l=et(s)?pr:Ge.current;return l=Mr(r,l),Br(r,n),s=hl(t,r,s,a,l,n),a=fl(),t!==null&&!tt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~n,zt(t,r,n)):(Ae&&a&&Jn(r),r.flags|=1,Ye(t,r,s,n),r.child)}function Fc(t,r,s,a,n){if(et(s)){var l=!0;fa(r)}else l=!1;if(Br(r,n),r.stateNode===null)Ia(t,r),Sc(r,s,a),_l(r,s,a,n),a=!0;else if(t===null){var d=r.stateNode,_=r.memoizedProps;d.props=_;var P=d.context,q=s.contextType;typeof q=="object"&&q!==null?q=xt(q):(q=et(s)?pr:Ge.current,q=Mr(r,q));var K=s.getDerivedStateFromProps,Z=typeof K=="function"||typeof d.getSnapshotBeforeUpdate=="function";Z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==a||P!==q)&&Cc(r,d,a,q),Zt=!1;var W=r.memoizedState;d.state=W,Sa(r,a,d,n),P=r.memoizedState,_!==a||W!==P||Je.current||Zt?(typeof K=="function"&&(Nl(r,s,K,a),P=r.memoizedState),(_=Zt||kc(r,s,_,a,W,P,q))?(Z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=a,r.memoizedState=P),d.props=a,d.state=P,d.context=q,a=_):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),a=!1)}else{d=r.stateNode,ec(t,r),_=r.memoizedProps,q=r.type===r.elementType?_:_t(r.type,_),d.props=q,Z=r.pendingProps,W=d.context,P=s.contextType,typeof P=="object"&&P!==null?P=xt(P):(P=et(s)?pr:Ge.current,P=Mr(r,P));var ae=s.getDerivedStateFromProps;(K=typeof ae=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==Z||W!==P)&&Cc(r,d,a,P),Zt=!1,W=r.memoizedState,d.state=W,Sa(r,a,d,n);var le=r.memoizedState;_!==Z||W!==le||Je.current||Zt?(typeof ae=="function"&&(Nl(r,s,ae,a),le=r.memoizedState),(q=Zt||kc(r,s,q,a,W,le,P)||!1)?(K||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,le,P),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,le,P)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),r.memoizedProps=a,r.memoizedState=le),d.props=a,d.state=le,d.context=P,a=q):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),a=!1)}return Cl(t,r,s,a,l,n)}function Cl(t,r,s,a,n,l){Oc(t,r);var d=(r.flags&128)!==0;if(!a&&!d)return n&&Ho(r,s,!1),zt(t,r,l);a=r.stateNode,Cm.current=r;var _=d&&typeof s.getDerivedStateFromError!="function"?null:a.render();return r.flags|=1,t!==null&&d?(r.child=Ur(r,t.child,null,l),r.child=Ur(r,null,_,l)):Ye(t,r,_,l),r.memoizedState=a.state,n&&Ho(r,s,!0),r.child}function zc(t){var r=t.stateNode;r.pendingContext?qo(t,r.pendingContext,r.pendingContext!==r.context):r.context&&qo(t,r.context,!1),dl(t,r.containerInfo)}function Uc(t,r,s,a,n){return zr(),sl(n),r.flags|=256,Ye(t,r,s,a),r.child}var El={dehydrated:null,treeContext:null,retryLane:0};function Al(t){return{baseLanes:t,cachePool:null,transitions:null}}function qc(t,r,s){var a=r.pendingProps,n=De.current,l=!1,d=(r.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(n&2)!==0),_?(l=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),ke(De,n&1),t===null)return rl(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(d=a.children,t=a.fallback,l?(a=r.mode,l=r.child,d={mode:"hidden",children:d},(a&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=d):l=Wa(d,a,0,null),t=_r(t,a,s,null),l.return=r,t.return=r,l.sibling=t,r.child=l,r.child.memoizedState=Al(s),r.memoizedState=El,t):Dl(r,d));if(n=t.memoizedState,n!==null&&(_=n.dehydrated,_!==null))return Em(t,r,d,a,_,n,s);if(l){l=a.fallback,d=r.mode,n=t.child,_=n.sibling;var P={mode:"hidden",children:a.children};return(d&1)===0&&r.child!==n?(a=r.child,a.childLanes=0,a.pendingProps=P,r.deletions=null):(a=nr(n,P),a.subtreeFlags=n.subtreeFlags&14680064),_!==null?l=nr(_,l):(l=_r(l,d,s,null),l.flags|=2),l.return=r,a.return=r,a.sibling=l,r.child=a,a=l,l=r.child,d=t.child.memoizedState,d=d===null?Al(s):{baseLanes:d.baseLanes|s,cachePool:null,transitions:d.transitions},l.memoizedState=d,l.childLanes=t.childLanes&~s,r.memoizedState=El,a}return l=t.child,t=l.sibling,a=nr(l,{mode:"visible",children:a.children}),(r.mode&1)===0&&(a.lanes=s),a.return=r,a.sibling=null,t!==null&&(s=r.deletions,s===null?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=a,r.memoizedState=null,a}function Dl(t,r){return r=Wa({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function La(t,r,s,a){return a!==null&&sl(a),Ur(r,t.child,null,s),t=Dl(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Em(t,r,s,a,n,l,d){if(s)return r.flags&256?(r.flags&=-257,a=wl(Error(u(422))),La(t,r,d,a)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(l=a.fallback,n=r.mode,a=Wa({mode:"visible",children:a.children},n,0,null),l=_r(l,n,d,null),l.flags|=2,a.return=r,l.return=r,a.sibling=l,r.child=a,(r.mode&1)!==0&&Ur(r,t.child,null,d),r.child.memoizedState=Al(d),r.memoizedState=El,l);if((r.mode&1)===0)return La(t,r,d,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var _=a.dgst;return a=_,l=Error(u(419)),a=wl(l,a,void 0),La(t,r,d,a)}if(_=(d&t.childLanes)!==0,tt||_){if(a=qe,a!==null){switch(d&-d){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=(n&(a.suspendedLanes|d))!==0?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,Ot(t,n),St(a,t,n,-1))}return Gl(),a=wl(Error(u(421))),La(t,r,d,a)}return n.data==="$?"?(r.flags|=128,r.child=t.child,r=qm.bind(null,t),n._reactRetry=r,null):(t=l.treeContext,ct=Kt(n.nextSibling),ot=r,Ae=!0,Nt=null,t!==null&&(mt[pt++]=It,mt[pt++]=Mt,mt[pt++]=xr,It=t.id,Mt=t.overflow,xr=r),r=Dl(r,a.children),r.flags|=4096,r)}function Bc(t,r,s){t.lanes|=r;var a=t.alternate;a!==null&&(a.lanes|=r),il(t.return,r,s)}function Pl(t,r,s,a,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:n}:(l.isBackwards=r,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=s,l.tailMode=n)}function Hc(t,r,s){var a=r.pendingProps,n=a.revealOrder,l=a.tail;if(Ye(t,r,a.children,s),a=De.current,(a&2)!==0)a=a&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bc(t,s,r);else if(t.tag===19)Bc(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(ke(De,a),(r.mode&1)===0)r.memoizedState=null;else switch(n){case"forwards":for(s=r.child,n=null;s!==null;)t=s.alternate,t!==null&&Ca(t)===null&&(n=s),s=s.sibling;s=n,s===null?(n=r.child,r.child=null):(n=s.sibling,s.sibling=null),Pl(r,!1,n,s,l);break;case"backwards":for(s=null,n=r.child,r.child=null;n!==null;){if(t=n.alternate,t!==null&&Ca(t)===null){r.child=n;break}t=n.sibling,n.sibling=s,s=n,n=t}Pl(r,!0,s,null,l);break;case"together":Pl(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ia(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function zt(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),vr|=r.lanes,(s&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(u(153));if(r.child!==null){for(t=r.child,s=nr(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=nr(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function Am(t,r,s){switch(r.tag){case 3:zc(r),zr();break;case 5:sc(r);break;case 1:et(r.type)&&fa(r);break;case 4:dl(r,r.stateNode.containerInfo);break;case 10:var a=r.type._context,n=r.memoizedProps.value;ke(_a,a._currentValue),a._currentValue=n;break;case 13:if(a=r.memoizedState,a!==null)return a.dehydrated!==null?(ke(De,De.current&1),r.flags|=128,null):(s&r.child.childLanes)!==0?qc(t,r,s):(ke(De,De.current&1),t=zt(t,r,s),t!==null?t.sibling:null);ke(De,De.current&1);break;case 19:if(a=(s&r.childLanes)!==0,(t.flags&128)!==0){if(a)return Hc(t,r,s);r.flags|=128}if(n=r.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ke(De,De.current),a)break;return null;case 22:case 23:return r.lanes=0,Mc(t,r,s)}return zt(t,r,s)}var $c,Rl,Vc,Gc;$c=function(t,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Rl=function(){},Vc=function(t,r,s,a){var n=t.memoizedProps;if(n!==a){t=r.stateNode,fr(Dt.current);var l=null;switch(s){case"input":n=ln(t,n),a=ln(t,a),l=[];break;case"select":n=Y({},n,{value:void 0}),a=Y({},a,{value:void 0}),l=[];break;case"textarea":n=dn(t,n),a=dn(t,a),l=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=xa)}mn(s,a);var d;s=null;for(q in n)if(!a.hasOwnProperty(q)&&n.hasOwnProperty(q)&&n[q]!=null)if(q==="style"){var _=n[q];for(d in _)_.hasOwnProperty(d)&&(s||(s={}),s[d]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(k.hasOwnProperty(q)?l||(l=[]):(l=l||[]).push(q,null));for(q in a){var P=a[q];if(_=n?.[q],a.hasOwnProperty(q)&&P!==_&&(P!=null||_!=null))if(q==="style")if(_){for(d in _)!_.hasOwnProperty(d)||P&&P.hasOwnProperty(d)||(s||(s={}),s[d]="");for(d in P)P.hasOwnProperty(d)&&_[d]!==P[d]&&(s||(s={}),s[d]=P[d])}else s||(l||(l=[]),l.push(q,s)),s=P;else q==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,_=_?_.__html:void 0,P!=null&&_!==P&&(l=l||[]).push(q,P)):q==="children"?typeof P!="string"&&typeof P!="number"||(l=l||[]).push(q,""+P):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(k.hasOwnProperty(q)?(P!=null&&q==="onScroll"&&Se("scroll",t),l||_===P||(l=[])):(l=l||[]).push(q,P))}s&&(l=l||[]).push("style",s);var q=l;(r.updateQueue=q)&&(r.flags|=4)}},Gc=function(t,r,s,a){s!==a&&(r.flags|=4)};function Ls(t,r){if(!Ae)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Ke(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,a=0;if(r)for(var n=t.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=s,r}function Dm(t,r,s){var a=r.pendingProps;switch(el(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(r),null;case 1:return et(r.type)&&ha(),Ke(r),null;case 3:return a=r.stateNode,Hr(),Ce(Je),Ce(Ge),pl(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ja(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Nt!==null&&(Hl(Nt),Nt=null))),Rl(t,r),Ke(r),null;case 5:ul(r);var n=fr(As.current);if(s=r.type,t!==null&&r.stateNode!=null)Vc(t,r,s,a,n),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!a){if(r.stateNode===null)throw Error(u(166));return Ke(r),null}if(t=fr(Dt.current),ja(r)){a=r.stateNode,s=r.type;var l=r.memoizedProps;switch(a[At]=r,a[ws]=l,t=(r.mode&1)!==0,s){case"dialog":Se("cancel",a),Se("close",a);break;case"iframe":case"object":case"embed":Se("load",a);break;case"video":case"audio":for(n=0;n<js.length;n++)Se(js[n],a);break;case"source":Se("error",a);break;case"img":case"image":case"link":Se("error",a),Se("load",a);break;case"details":Se("toggle",a);break;case"input":ki(a,l),Se("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},Se("invalid",a);break;case"textarea":Ei(a,l),Se("invalid",a)}mn(s,l),n=null;for(var d in l)if(l.hasOwnProperty(d)){var _=l[d];d==="children"?typeof _=="string"?a.textContent!==_&&(l.suppressHydrationWarning!==!0&&pa(a.textContent,_,t),n=["children",_]):typeof _=="number"&&a.textContent!==""+_&&(l.suppressHydrationWarning!==!0&&pa(a.textContent,_,t),n=["children",""+_]):k.hasOwnProperty(d)&&_!=null&&d==="onScroll"&&Se("scroll",a)}switch(s){case"input":$s(a),Ci(a,l,!0);break;case"textarea":$s(a),Di(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=xa)}a=n,r.updateQueue=a,a!==null&&(r.flags|=4)}else{d=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pi(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=d.createElement(s,{is:a.is}):(t=d.createElement(s),s==="select"&&(d=t,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):t=d.createElementNS(t,s),t[At]=r,t[ws]=a,$c(t,r,!1,!1),r.stateNode=t;e:{switch(d=pn(s,a),s){case"dialog":Se("cancel",t),Se("close",t),n=a;break;case"iframe":case"object":case"embed":Se("load",t),n=a;break;case"video":case"audio":for(n=0;n<js.length;n++)Se(js[n],t);n=a;break;case"source":Se("error",t),n=a;break;case"img":case"image":case"link":Se("error",t),Se("load",t),n=a;break;case"details":Se("toggle",t),n=a;break;case"input":ki(t,a),n=ln(t,a),Se("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=Y({},a,{value:void 0}),Se("invalid",t);break;case"textarea":Ei(t,a),n=dn(t,a),Se("invalid",t);break;default:n=a}mn(s,n),_=n;for(l in _)if(_.hasOwnProperty(l)){var P=_[l];l==="style"?Li(t,P):l==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Ri(t,P)):l==="children"?typeof P=="string"?(s!=="textarea"||P!=="")&&rs(t,P):typeof P=="number"&&rs(t,""+P):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(k.hasOwnProperty(l)?P!=null&&l==="onScroll"&&Se("scroll",t):P!=null&&V(t,l,P,d))}switch(s){case"input":$s(t),Ci(t,a,!1);break;case"textarea":$s(t),Di(t);break;case"option":a.value!=null&&t.setAttribute("value",""+be(a.value));break;case"select":t.multiple=!!a.multiple,l=a.value,l!=null?wr(t,!!a.multiple,l,!1):a.defaultValue!=null&&wr(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=xa)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ke(r),null;case 6:if(t&&r.stateNode!=null)Gc(t,r,t.memoizedProps,a);else{if(typeof a!="string"&&r.stateNode===null)throw Error(u(166));if(s=fr(As.current),fr(Dt.current),ja(r)){if(a=r.stateNode,s=r.memoizedProps,a[At]=r,(l=a.nodeValue!==s)&&(t=ot,t!==null))switch(t.tag){case 3:pa(a.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pa(a.nodeValue,s,(t.mode&1)!==0)}l&&(r.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[At]=r,r.stateNode=a}return Ke(r),null;case 13:if(Ce(De),a=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&ct!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Qo(),zr(),r.flags|=98560,l=!1;else if(l=ja(r),a!==null&&a.dehydrated!==null){if(t===null){if(!l)throw Error(u(318));if(l=r.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(u(317));l[At]=r}else zr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ke(r),l=!1}else Nt!==null&&(Hl(Nt),Nt=null),l=!0;if(!l)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=s,r):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(De.current&1)!==0?ze===0&&(ze=3):Gl())),r.updateQueue!==null&&(r.flags|=4),Ke(r),null);case 4:return Hr(),Rl(t,r),t===null&&Ns(r.stateNode.containerInfo),Ke(r),null;case 10:return ll(r.type._context),Ke(r),null;case 17:return et(r.type)&&ha(),Ke(r),null;case 19:if(Ce(De),l=r.memoizedState,l===null)return Ke(r),null;if(a=(r.flags&128)!==0,d=l.rendering,d===null)if(a)Ls(l,!1);else{if(ze!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=Ca(t),d!==null){for(r.flags|=128,Ls(l,!1),a=d.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),r.subtreeFlags=0,a=s,s=r.child;s!==null;)l=s,t=a,l.flags&=14680066,d=l.alternate,d===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,t=d.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return ke(De,De.current&1|2),r.child}t=t.sibling}l.tail!==null&&Le()>Wr&&(r.flags|=128,a=!0,Ls(l,!1),r.lanes=4194304)}else{if(!a)if(t=Ca(d),t!==null){if(r.flags|=128,a=!0,s=t.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),Ls(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ae)return Ke(r),null}else 2*Le()-l.renderingStartTime>Wr&&s!==1073741824&&(r.flags|=128,a=!0,Ls(l,!1),r.lanes=4194304);l.isBackwards?(d.sibling=r.child,r.child=d):(s=l.last,s!==null?s.sibling=d:r.child=d,l.last=d)}return l.tail!==null?(r=l.tail,l.rendering=r,l.tail=r.sibling,l.renderingStartTime=Le(),r.sibling=null,s=De.current,ke(De,a?s&1|2:s&1),r):(Ke(r),null);case 22:case 23:return Vl(),a=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(r.flags|=8192),a&&(r.mode&1)!==0?(dt&1073741824)!==0&&(Ke(r),r.subtreeFlags&6&&(r.flags|=8192)):Ke(r),null;case 24:return null;case 25:return null}throw Error(u(156,r.tag))}function Pm(t,r){switch(el(r),r.tag){case 1:return et(r.type)&&ha(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Hr(),Ce(Je),Ce(Ge),pl(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return ul(r),null;case 13:if(Ce(De),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(u(340));zr()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Ce(De),null;case 4:return Hr(),null;case 10:return ll(r.type._context),null;case 22:case 23:return Vl(),null;case 24:return null;default:return null}}var Ma=!1,Qe=!1,Rm=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Vr(t,r){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){Te(t,r,a)}else s.current=null}function Tl(t,r,s){try{s()}catch(a){Te(t,r,a)}}var Wc=!1;function Tm(t,r){if(Vn=ra,t=ko(),On(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var d=0,_=-1,P=-1,q=0,K=0,Z=t,W=null;t:for(;;){for(var ae;Z!==s||n!==0&&Z.nodeType!==3||(_=d+n),Z!==l||a!==0&&Z.nodeType!==3||(P=d+a),Z.nodeType===3&&(d+=Z.nodeValue.length),(ae=Z.firstChild)!==null;)W=Z,Z=ae;for(;;){if(Z===t)break t;if(W===s&&++q===n&&(_=d),W===l&&++K===a&&(P=d),(ae=Z.nextSibling)!==null)break;Z=W,W=Z.parentNode}Z=ae}s=_===-1||P===-1?null:{start:_,end:P}}else s=null}s=s||{start:0,end:0}}else s=null;for(Gn={focusedElem:t,selectionRange:s},ra=!1,ne=r;ne!==null;)if(r=ne,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ne=t;else for(;ne!==null;){r=ne;try{var le=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ie=le.memoizedProps,Ie=le.memoizedState,F=r.stateNode,L=F.getSnapshotBeforeUpdate(r.elementType===r.type?ie:_t(r.type,ie),Ie);F.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var U=r.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(J){Te(r,r.return,J)}if(t=r.sibling,t!==null){t.return=r.return,ne=t;break}ne=r.return}return le=Wc,Wc=!1,le}function Is(t,r,s){var a=r.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&Tl(r,s,l)}n=n.next}while(n!==a)}}function Oa(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.create;s.destroy=a()}s=s.next}while(s!==r)}}function Ll(t){var r=t.ref;if(r!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof r=="function"?r(t):r.current=t}}function Kc(t){var r=t.alternate;r!==null&&(t.alternate=null,Kc(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[At],delete r[ws],delete r[Yn],delete r[gm],delete r[hm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qc(t){return t.tag===5||t.tag===3||t.tag===4}function Yc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qc(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Il(t,r,s){var a=t.tag;if(a===5||a===6)t=t.stateNode,r?s.nodeType===8?s.parentNode.insertBefore(t,r):s.insertBefore(t,r):(s.nodeType===8?(r=s.parentNode,r.insertBefore(t,s)):(r=s,r.appendChild(t)),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=xa));else if(a!==4&&(t=t.child,t!==null))for(Il(t,r,s),t=t.sibling;t!==null;)Il(t,r,s),t=t.sibling}function Ml(t,r,s){var a=t.tag;if(a===5||a===6)t=t.stateNode,r?s.insertBefore(t,r):s.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Ml(t,r,s),t=t.sibling;t!==null;)Ml(t,r,s),t=t.sibling}var $e=null,wt=!1;function er(t,r,s){for(s=s.child;s!==null;)Xc(t,r,s),s=s.sibling}function Xc(t,r,s){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Ys,s)}catch{}switch(s.tag){case 5:Qe||Vr(s,r);case 6:var a=$e,n=wt;$e=null,er(t,r,s),$e=a,wt=n,$e!==null&&(wt?(t=$e,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):$e.removeChild(s.stateNode));break;case 18:$e!==null&&(wt?(t=$e,s=s.stateNode,t.nodeType===8?Qn(t.parentNode,s):t.nodeType===1&&Qn(t,s),ps(t)):Qn($e,s.stateNode));break;case 4:a=$e,n=wt,$e=s.stateNode.containerInfo,wt=!0,er(t,r,s),$e=a,wt=n;break;case 0:case 11:case 14:case 15:if(!Qe&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var l=n,d=l.destroy;l=l.tag,d!==void 0&&((l&2)!==0||(l&4)!==0)&&Tl(s,r,d),n=n.next}while(n!==a)}er(t,r,s);break;case 1:if(!Qe&&(Vr(s,r),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(_){Te(s,r,_)}er(t,r,s);break;case 21:er(t,r,s);break;case 22:s.mode&1?(Qe=(a=Qe)||s.memoizedState!==null,er(t,r,s),Qe=a):er(t,r,s);break;default:er(t,r,s)}}function Zc(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Rm),r.forEach(function(a){var n=Bm.bind(null,t,a);s.has(a)||(s.add(a),a.then(n,n))})}}function kt(t,r){var s=r.deletions;if(s!==null)for(var a=0;a<s.length;a++){var n=s[a];try{var l=t,d=r,_=d;e:for(;_!==null;){switch(_.tag){case 5:$e=_.stateNode,wt=!1;break e;case 3:$e=_.stateNode.containerInfo,wt=!0;break e;case 4:$e=_.stateNode.containerInfo,wt=!0;break e}_=_.return}if($e===null)throw Error(u(160));Xc(l,d,n),$e=null,wt=!1;var P=n.alternate;P!==null&&(P.return=null),n.return=null}catch(q){Te(n,r,q)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Jc(r,t),r=r.sibling}function Jc(t,r){var s=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kt(r,t),Rt(t),a&4){try{Is(3,t,t.return),Oa(3,t)}catch(ie){Te(t,t.return,ie)}try{Is(5,t,t.return)}catch(ie){Te(t,t.return,ie)}}break;case 1:kt(r,t),Rt(t),a&512&&s!==null&&Vr(s,s.return);break;case 5:if(kt(r,t),Rt(t),a&512&&s!==null&&Vr(s,s.return),t.flags&32){var n=t.stateNode;try{rs(n,"")}catch(ie){Te(t,t.return,ie)}}if(a&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,d=s!==null?s.memoizedProps:l,_=t.type,P=t.updateQueue;if(t.updateQueue=null,P!==null)try{_==="input"&&l.type==="radio"&&l.name!=null&&Si(n,l),pn(_,d);var q=pn(_,l);for(d=0;d<P.length;d+=2){var K=P[d],Z=P[d+1];K==="style"?Li(n,Z):K==="dangerouslySetInnerHTML"?Ri(n,Z):K==="children"?rs(n,Z):V(n,K,Z,q)}switch(_){case"input":on(n,l);break;case"textarea":Ai(n,l);break;case"select":var W=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var ae=l.value;ae!=null?wr(n,!!l.multiple,ae,!1):W!==!!l.multiple&&(l.defaultValue!=null?wr(n,!!l.multiple,l.defaultValue,!0):wr(n,!!l.multiple,l.multiple?[]:"",!1))}n[ws]=l}catch(ie){Te(t,t.return,ie)}}break;case 6:if(kt(r,t),Rt(t),a&4){if(t.stateNode===null)throw Error(u(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(ie){Te(t,t.return,ie)}}break;case 3:if(kt(r,t),Rt(t),a&4&&s!==null&&s.memoizedState.isDehydrated)try{ps(r.containerInfo)}catch(ie){Te(t,t.return,ie)}break;case 4:kt(r,t),Rt(t);break;case 13:kt(r,t),Rt(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(zl=Le())),a&4&&Zc(t);break;case 22:if(K=s!==null&&s.memoizedState!==null,t.mode&1?(Qe=(q=Qe)||K,kt(r,t),Qe=q):kt(r,t),Rt(t),a&8192){if(q=t.memoizedState!==null,(t.stateNode.isHidden=q)&&!K&&(t.mode&1)!==0)for(ne=t,K=t.child;K!==null;){for(Z=ne=K;ne!==null;){switch(W=ne,ae=W.child,W.tag){case 0:case 11:case 14:case 15:Is(4,W,W.return);break;case 1:Vr(W,W.return);var le=W.stateNode;if(typeof le.componentWillUnmount=="function"){a=W,s=W.return;try{r=a,le.props=r.memoizedProps,le.state=r.memoizedState,le.componentWillUnmount()}catch(ie){Te(a,s,ie)}}break;case 5:Vr(W,W.return);break;case 22:if(W.memoizedState!==null){rd(Z);continue}}ae!==null?(ae.return=W,ne=ae):rd(Z)}K=K.sibling}e:for(K=null,Z=t;;){if(Z.tag===5){if(K===null){K=Z;try{n=Z.stateNode,q?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(_=Z.stateNode,P=Z.memoizedProps.style,d=P!=null&&P.hasOwnProperty("display")?P.display:null,_.style.display=Ti("display",d))}catch(ie){Te(t,t.return,ie)}}}else if(Z.tag===6){if(K===null)try{Z.stateNode.nodeValue=q?"":Z.memoizedProps}catch(ie){Te(t,t.return,ie)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===t)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===t)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===t)break e;K===Z&&(K=null),Z=Z.return}K===Z&&(K=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:kt(r,t),Rt(t),a&4&&Zc(t);break;case 21:break;default:kt(r,t),Rt(t)}}function Rt(t){var r=t.flags;if(r&2){try{e:{for(var s=t.return;s!==null;){if(Qc(s)){var a=s;break e}s=s.return}throw Error(u(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(rs(n,""),a.flags&=-33);var l=Yc(t);Ml(t,l,n);break;case 3:case 4:var d=a.stateNode.containerInfo,_=Yc(t);Il(t,_,d);break;default:throw Error(u(161))}}catch(P){Te(t,t.return,P)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Lm(t,r,s){ne=t,ed(t)}function ed(t,r,s){for(var a=(t.mode&1)!==0;ne!==null;){var n=ne,l=n.child;if(n.tag===22&&a){var d=n.memoizedState!==null||Ma;if(!d){var _=n.alternate,P=_!==null&&_.memoizedState!==null||Qe;_=Ma;var q=Qe;if(Ma=d,(Qe=P)&&!q)for(ne=n;ne!==null;)d=ne,P=d.child,d.tag===22&&d.memoizedState!==null?sd(n):P!==null?(P.return=d,ne=P):sd(n);for(;l!==null;)ne=l,ed(l),l=l.sibling;ne=n,Ma=_,Qe=q}td(t)}else(n.subtreeFlags&8772)!==0&&l!==null?(l.return=n,ne=l):td(t)}}function td(t){for(;ne!==null;){var r=ne;if((r.flags&8772)!==0){var s=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Qe||Oa(5,r);break;case 1:var a=r.stateNode;if(r.flags&4&&!Qe)if(s===null)a.componentDidMount();else{var n=r.elementType===r.type?s.memoizedProps:_t(r.type,s.memoizedProps);a.componentDidUpdate(n,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=r.updateQueue;l!==null&&rc(r,l,a);break;case 3:var d=r.updateQueue;if(d!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}rc(r,d,s)}break;case 5:var _=r.stateNode;if(s===null&&r.flags&4){s=_;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&s.focus();break;case"img":P.src&&(s.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var q=r.alternate;if(q!==null){var K=q.memoizedState;if(K!==null){var Z=K.dehydrated;Z!==null&&ps(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(u(163))}Qe||r.flags&512&&Ll(r)}catch(W){Te(r,r.return,W)}}if(r===t){ne=null;break}if(s=r.sibling,s!==null){s.return=r.return,ne=s;break}ne=r.return}}function rd(t){for(;ne!==null;){var r=ne;if(r===t){ne=null;break}var s=r.sibling;if(s!==null){s.return=r.return,ne=s;break}ne=r.return}}function sd(t){for(;ne!==null;){var r=ne;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{Oa(4,r)}catch(P){Te(r,s,P)}break;case 1:var a=r.stateNode;if(typeof a.componentDidMount=="function"){var n=r.return;try{a.componentDidMount()}catch(P){Te(r,n,P)}}var l=r.return;try{Ll(r)}catch(P){Te(r,l,P)}break;case 5:var d=r.return;try{Ll(r)}catch(P){Te(r,d,P)}}}catch(P){Te(r,r.return,P)}if(r===t){ne=null;break}var _=r.sibling;if(_!==null){_.return=r.return,ne=_;break}ne=r.return}}var Im=Math.ceil,Fa=z.ReactCurrentDispatcher,Ol=z.ReactCurrentOwner,ht=z.ReactCurrentBatchConfig,Ne=0,qe=null,Oe=null,Ve=0,dt=0,Gr=Qt(0),ze=0,Ms=null,vr=0,za=0,Fl=0,Os=null,rt=null,zl=0,Wr=1/0,Ut=null,Ua=!1,Ul=null,tr=null,qa=!1,rr=null,Ba=0,Fs=0,ql=null,Ha=-1,$a=0;function Xe(){return(Ne&6)!==0?Le():Ha!==-1?Ha:Ha=Le()}function sr(t){return(t.mode&1)===0?1:(Ne&2)!==0&&Ve!==0?Ve&-Ve:ym.transition!==null?($a===0&&($a=Qi()),$a):(t=we,t!==0||(t=window.event,t=t===void 0?16:ao(t.type)),t)}function St(t,r,s,a){if(50<Fs)throw Fs=0,ql=null,Error(u(185));os(t,s,a),((Ne&2)===0||t!==qe)&&(t===qe&&((Ne&2)===0&&(za|=s),ze===4&&ar(t,Ve)),st(t,a),s===1&&Ne===0&&(r.mode&1)===0&&(Wr=Le()+500,ya&&Xt()))}function st(t,r){var s=t.callbackNode;yu(t,r);var a=Js(t,t===qe?Ve:0);if(a===0)s!==null&&Gi(s),t.callbackNode=null,t.callbackPriority=0;else if(r=a&-a,t.callbackPriority!==r){if(s!=null&&Gi(s),r===1)t.tag===0?fm(nd.bind(null,t)):$o(nd.bind(null,t)),pm(function(){(Ne&6)===0&&Xt()}),s=null;else{switch(Yi(a)){case 1:s=bn;break;case 4:s=Wi;break;case 16:s=Qs;break;case 536870912:s=Ki;break;default:s=Qs}s=pd(s,ad.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function ad(t,r){if(Ha=-1,$a=0,(Ne&6)!==0)throw Error(u(327));var s=t.callbackNode;if(Kr()&&t.callbackNode!==s)return null;var a=Js(t,t===qe?Ve:0);if(a===0)return null;if((a&30)!==0||(a&t.expiredLanes)!==0||r)r=Va(t,a);else{r=a;var n=Ne;Ne|=2;var l=id();(qe!==t||Ve!==r)&&(Ut=null,Wr=Le()+500,jr(t,r));do try{Fm();break}catch(_){ld(t,_)}while(!0);nl(),Fa.current=l,Ne=n,Oe!==null?r=0:(qe=null,Ve=0,r=ze)}if(r!==0){if(r===2&&(n=jn(t),n!==0&&(a=n,r=Bl(t,n))),r===1)throw s=Ms,jr(t,0),ar(t,a),st(t,Le()),s;if(r===6)ar(t,a);else{if(n=t.current.alternate,(a&30)===0&&!Mm(n)&&(r=Va(t,a),r===2&&(l=jn(t),l!==0&&(a=l,r=Bl(t,l))),r===1))throw s=Ms,jr(t,0),ar(t,a),st(t,Le()),s;switch(t.finishedWork=n,t.finishedLanes=a,r){case 0:case 1:throw Error(u(345));case 2:Nr(t,rt,Ut);break;case 3:if(ar(t,a),(a&130023424)===a&&(r=zl+500-Le(),10<r)){if(Js(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){Xe(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=Kn(Nr.bind(null,t,rt,Ut),r);break}Nr(t,rt,Ut);break;case 4:if(ar(t,a),(a&4194240)===a)break;for(r=t.eventTimes,n=-1;0<a;){var d=31-bt(a);l=1<<d,d=r[d],d>n&&(n=d),a&=~l}if(a=n,a=Le()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Im(a/1960))-a,10<a){t.timeoutHandle=Kn(Nr.bind(null,t,rt,Ut),a);break}Nr(t,rt,Ut);break;case 5:Nr(t,rt,Ut);break;default:throw Error(u(329))}}}return st(t,Le()),t.callbackNode===s?ad.bind(null,t):null}function Bl(t,r){var s=Os;return t.current.memoizedState.isDehydrated&&(jr(t,r).flags|=256),t=Va(t,r),t!==2&&(r=rt,rt=s,r!==null&&Hl(r)),t}function Hl(t){rt===null?rt=t:rt.push.apply(rt,t)}function Mm(t){for(var r=t;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var n=s[a],l=n.getSnapshot;n=n.value;try{if(!jt(l(),n))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ar(t,r){for(r&=~Fl,r&=~za,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var s=31-bt(r),a=1<<s;t[s]=-1,r&=~a}}function nd(t){if((Ne&6)!==0)throw Error(u(327));Kr();var r=Js(t,0);if((r&1)===0)return st(t,Le()),null;var s=Va(t,r);if(t.tag!==0&&s===2){var a=jn(t);a!==0&&(r=a,s=Bl(t,a))}if(s===1)throw s=Ms,jr(t,0),ar(t,r),st(t,Le()),s;if(s===6)throw Error(u(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Nr(t,rt,Ut),st(t,Le()),null}function $l(t,r){var s=Ne;Ne|=1;try{return t(r)}finally{Ne=s,Ne===0&&(Wr=Le()+500,ya&&Xt())}}function br(t){rr!==null&&rr.tag===0&&(Ne&6)===0&&Kr();var r=Ne;Ne|=1;var s=ht.transition,a=we;try{if(ht.transition=null,we=1,t)return t()}finally{we=a,ht.transition=s,Ne=r,(Ne&6)===0&&Xt()}}function Vl(){dt=Gr.current,Ce(Gr)}function jr(t,r){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,mm(s)),Oe!==null)for(s=Oe.return;s!==null;){var a=s;switch(el(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ha();break;case 3:Hr(),Ce(Je),Ce(Ge),pl();break;case 5:ul(a);break;case 4:Hr();break;case 13:Ce(De);break;case 19:Ce(De);break;case 10:ll(a.type._context);break;case 22:case 23:Vl()}s=s.return}if(qe=t,Oe=t=nr(t.current,null),Ve=dt=r,ze=0,Ms=null,Fl=za=vr=0,rt=Os=null,hr!==null){for(r=0;r<hr.length;r++)if(s=hr[r],a=s.interleaved,a!==null){s.interleaved=null;var n=a.next,l=s.pending;if(l!==null){var d=l.next;l.next=n,a.next=d}s.pending=a}hr=null}return t}function ld(t,r){do{var s=Oe;try{if(nl(),Ea.current=Ra,Aa){for(var a=Pe.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Aa=!1}if(yr=0,Ue=Fe=Pe=null,Ds=!1,Ps=0,Ol.current=null,s===null||s.return===null){ze=1,Ms=r,Oe=null;break}e:{var l=t,d=s.return,_=s,P=r;if(r=Ve,_.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var q=P,K=_,Z=K.tag;if((K.mode&1)===0&&(Z===0||Z===11||Z===15)){var W=K.alternate;W?(K.updateQueue=W.updateQueue,K.memoizedState=W.memoizedState,K.lanes=W.lanes):(K.updateQueue=null,K.memoizedState=null)}var ae=Pc(d);if(ae!==null){ae.flags&=-257,Rc(ae,d,_,l,r),ae.mode&1&&Dc(l,q,r),r=ae,P=q;var le=r.updateQueue;if(le===null){var ie=new Set;ie.add(P),r.updateQueue=ie}else le.add(P);break e}else{if((r&1)===0){Dc(l,q,r),Gl();break e}P=Error(u(426))}}else if(Ae&&_.mode&1){var Ie=Pc(d);if(Ie!==null){(Ie.flags&65536)===0&&(Ie.flags|=256),Rc(Ie,d,_,l,r),sl($r(P,_));break e}}l=P=$r(P,_),ze!==4&&(ze=2),Os===null?Os=[l]:Os.push(l),l=d;do{switch(l.tag){case 3:l.flags|=65536,r&=-r,l.lanes|=r;var F=Ec(l,P,r);tc(l,F);break e;case 1:_=P;var L=l.type,U=l.stateNode;if((l.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(tr===null||!tr.has(U)))){l.flags|=65536,r&=-r,l.lanes|=r;var J=Ac(l,_,r);tc(l,J);break e}}l=l.return}while(l!==null)}cd(s)}catch(oe){r=oe,Oe===s&&s!==null&&(Oe=s=s.return);continue}break}while(!0)}function id(){var t=Fa.current;return Fa.current=Ra,t===null?Ra:t}function Gl(){(ze===0||ze===3||ze===2)&&(ze=4),qe===null||(vr&268435455)===0&&(za&268435455)===0||ar(qe,Ve)}function Va(t,r){var s=Ne;Ne|=2;var a=id();(qe!==t||Ve!==r)&&(Ut=null,jr(t,r));do try{Om();break}catch(n){ld(t,n)}while(!0);if(nl(),Ne=s,Fa.current=a,Oe!==null)throw Error(u(261));return qe=null,Ve=0,ze}function Om(){for(;Oe!==null;)od(Oe)}function Fm(){for(;Oe!==null&&!cu();)od(Oe)}function od(t){var r=md(t.alternate,t,dt);t.memoizedProps=t.pendingProps,r===null?cd(t):Oe=r,Ol.current=null}function cd(t){var r=t;do{var s=r.alternate;if(t=r.return,(r.flags&32768)===0){if(s=Dm(s,r,dt),s!==null){Oe=s;return}}else{if(s=Pm(s,r),s!==null){s.flags&=32767,Oe=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Oe=null;return}}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=t}while(r!==null);ze===0&&(ze=5)}function Nr(t,r,s){var a=we,n=ht.transition;try{ht.transition=null,we=1,zm(t,r,s,a)}finally{ht.transition=n,we=a}return null}function zm(t,r,s,a){do Kr();while(rr!==null);if((Ne&6)!==0)throw Error(u(327));s=t.finishedWork;var n=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(u(177));t.callbackNode=null,t.callbackPriority=0;var l=s.lanes|s.childLanes;if(vu(t,l),t===qe&&(Oe=qe=null,Ve=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||qa||(qa=!0,pd(Qs,function(){return Kr(),null})),l=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||l){l=ht.transition,ht.transition=null;var d=we;we=1;var _=Ne;Ne|=4,Ol.current=null,Tm(t,s),Jc(s,t),nm(Gn),ra=!!Vn,Gn=Vn=null,t.current=s,Lm(s),du(),Ne=_,we=d,ht.transition=l}else t.current=s;if(qa&&(qa=!1,rr=t,Ba=n),l=t.pendingLanes,l===0&&(tr=null),pu(s.stateNode),st(t,Le()),r!==null)for(a=t.onRecoverableError,s=0;s<r.length;s++)n=r[s],a(n.value,{componentStack:n.stack,digest:n.digest});if(Ua)throw Ua=!1,t=Ul,Ul=null,t;return(Ba&1)!==0&&t.tag!==0&&Kr(),l=t.pendingLanes,(l&1)!==0?t===ql?Fs++:(Fs=0,ql=t):Fs=0,Xt(),null}function Kr(){if(rr!==null){var t=Yi(Ba),r=ht.transition,s=we;try{if(ht.transition=null,we=16>t?16:t,rr===null)var a=!1;else{if(t=rr,rr=null,Ba=0,(Ne&6)!==0)throw Error(u(331));var n=Ne;for(Ne|=4,ne=t.current;ne!==null;){var l=ne,d=l.child;if((ne.flags&16)!==0){var _=l.deletions;if(_!==null){for(var P=0;P<_.length;P++){var q=_[P];for(ne=q;ne!==null;){var K=ne;switch(K.tag){case 0:case 11:case 15:Is(8,K,l)}var Z=K.child;if(Z!==null)Z.return=K,ne=Z;else for(;ne!==null;){K=ne;var W=K.sibling,ae=K.return;if(Kc(K),K===q){ne=null;break}if(W!==null){W.return=ae,ne=W;break}ne=ae}}}var le=l.alternate;if(le!==null){var ie=le.child;if(ie!==null){le.child=null;do{var Ie=ie.sibling;ie.sibling=null,ie=Ie}while(ie!==null)}}ne=l}}if((l.subtreeFlags&2064)!==0&&d!==null)d.return=l,ne=d;else e:for(;ne!==null;){if(l=ne,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:Is(9,l,l.return)}var F=l.sibling;if(F!==null){F.return=l.return,ne=F;break e}ne=l.return}}var L=t.current;for(ne=L;ne!==null;){d=ne;var U=d.child;if((d.subtreeFlags&2064)!==0&&U!==null)U.return=d,ne=U;else e:for(d=L;ne!==null;){if(_=ne,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:Oa(9,_)}}catch(oe){Te(_,_.return,oe)}if(_===d){ne=null;break e}var J=_.sibling;if(J!==null){J.return=_.return,ne=J;break e}ne=_.return}}if(Ne=n,Xt(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Ys,t)}catch{}a=!0}return a}finally{we=s,ht.transition=r}}return!1}function dd(t,r,s){r=$r(s,r),r=Ec(t,r,1),t=Jt(t,r,1),r=Xe(),t!==null&&(os(t,1,r),st(t,r))}function Te(t,r,s){if(t.tag===3)dd(t,t,s);else for(;r!==null;){if(r.tag===3){dd(r,t,s);break}else if(r.tag===1){var a=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(tr===null||!tr.has(a))){t=$r(s,t),t=Ac(r,t,1),r=Jt(r,t,1),t=Xe(),r!==null&&(os(r,1,t),st(r,t));break}}r=r.return}}function Um(t,r,s){var a=t.pingCache;a!==null&&a.delete(r),r=Xe(),t.pingedLanes|=t.suspendedLanes&s,qe===t&&(Ve&s)===s&&(ze===4||ze===3&&(Ve&130023424)===Ve&&500>Le()-zl?jr(t,0):Fl|=s),st(t,r)}function ud(t,r){r===0&&((t.mode&1)===0?r=1:(r=Zs,Zs<<=1,(Zs&130023424)===0&&(Zs=4194304)));var s=Xe();t=Ot(t,r),t!==null&&(os(t,r,s),st(t,s))}function qm(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),ud(t,s)}function Bm(t,r){var s=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(s=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(u(314))}a!==null&&a.delete(r),ud(t,s)}var md;md=function(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps||Je.current)tt=!0;else{if((t.lanes&s)===0&&(r.flags&128)===0)return tt=!1,Am(t,r,s);tt=(t.flags&131072)!==0}else tt=!1,Ae&&(r.flags&1048576)!==0&&Vo(r,ba,r.index);switch(r.lanes=0,r.tag){case 2:var a=r.type;Ia(t,r),t=r.pendingProps;var n=Mr(r,Ge.current);Br(r,s),n=hl(null,r,a,t,n,s);var l=fl();return r.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,et(a)?(l=!0,fa(r)):l=!1,r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,cl(r),n.updater=Ta,r.stateNode=n,n._reactInternals=r,_l(r,a,t,s),r=Cl(null,r,a,!0,l,s)):(r.tag=0,Ae&&l&&Jn(r),Ye(null,r,n,s),r=r.child),r;case 16:a=r.elementType;e:{switch(Ia(t,r),t=r.pendingProps,n=a._init,a=n(a._payload),r.type=a,n=r.tag=$m(a),t=_t(a,t),n){case 0:r=Sl(null,r,a,t,s);break e;case 1:r=Fc(null,r,a,t,s);break e;case 11:r=Tc(null,r,a,t,s);break e;case 14:r=Lc(null,r,a,_t(a.type,t),s);break e}throw Error(u(306,a,""))}return r;case 0:return a=r.type,n=r.pendingProps,n=r.elementType===a?n:_t(a,n),Sl(t,r,a,n,s);case 1:return a=r.type,n=r.pendingProps,n=r.elementType===a?n:_t(a,n),Fc(t,r,a,n,s);case 3:e:{if(zc(r),t===null)throw Error(u(387));a=r.pendingProps,l=r.memoizedState,n=l.element,ec(t,r),Sa(r,a,null,s);var d=r.memoizedState;if(a=d.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},r.updateQueue.baseState=l,r.memoizedState=l,r.flags&256){n=$r(Error(u(423)),r),r=Uc(t,r,a,s,n);break e}else if(a!==n){n=$r(Error(u(424)),r),r=Uc(t,r,a,s,n);break e}else for(ct=Kt(r.stateNode.containerInfo.firstChild),ot=r,Ae=!0,Nt=null,s=Zo(r,null,a,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(zr(),a===n){r=zt(t,r,s);break e}Ye(t,r,a,s)}r=r.child}return r;case 5:return sc(r),t===null&&rl(r),a=r.type,n=r.pendingProps,l=t!==null?t.memoizedProps:null,d=n.children,Wn(a,n)?d=null:l!==null&&Wn(a,l)&&(r.flags|=32),Oc(t,r),Ye(t,r,d,s),r.child;case 6:return t===null&&rl(r),null;case 13:return qc(t,r,s);case 4:return dl(r,r.stateNode.containerInfo),a=r.pendingProps,t===null?r.child=Ur(r,null,a,s):Ye(t,r,a,s),r.child;case 11:return a=r.type,n=r.pendingProps,n=r.elementType===a?n:_t(a,n),Tc(t,r,a,n,s);case 7:return Ye(t,r,r.pendingProps,s),r.child;case 8:return Ye(t,r,r.pendingProps.children,s),r.child;case 12:return Ye(t,r,r.pendingProps.children,s),r.child;case 10:e:{if(a=r.type._context,n=r.pendingProps,l=r.memoizedProps,d=n.value,ke(_a,a._currentValue),a._currentValue=d,l!==null)if(jt(l.value,d)){if(l.children===n.children&&!Je.current){r=zt(t,r,s);break e}}else for(l=r.child,l!==null&&(l.return=r);l!==null;){var _=l.dependencies;if(_!==null){d=l.child;for(var P=_.firstContext;P!==null;){if(P.context===a){if(l.tag===1){P=Ft(-1,s&-s),P.tag=2;var q=l.updateQueue;if(q!==null){q=q.shared;var K=q.pending;K===null?P.next=P:(P.next=K.next,K.next=P),q.pending=P}}l.lanes|=s,P=l.alternate,P!==null&&(P.lanes|=s),il(l.return,s,r),_.lanes|=s;break}P=P.next}}else if(l.tag===10)d=l.type===r.type?null:l.child;else if(l.tag===18){if(d=l.return,d===null)throw Error(u(341));d.lanes|=s,_=d.alternate,_!==null&&(_.lanes|=s),il(d,s,r),d=l.sibling}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===r){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}Ye(t,r,n.children,s),r=r.child}return r;case 9:return n=r.type,a=r.pendingProps.children,Br(r,s),n=xt(n),a=a(n),r.flags|=1,Ye(t,r,a,s),r.child;case 14:return a=r.type,n=_t(a,r.pendingProps),n=_t(a.type,n),Lc(t,r,a,n,s);case 15:return Ic(t,r,r.type,r.pendingProps,s);case 17:return a=r.type,n=r.pendingProps,n=r.elementType===a?n:_t(a,n),Ia(t,r),r.tag=1,et(a)?(t=!0,fa(r)):t=!1,Br(r,s),Sc(r,a,n),_l(r,a,n,s),Cl(null,r,a,!0,t,s);case 19:return Hc(t,r,s);case 22:return Mc(t,r,s)}throw Error(u(156,r.tag))};function pd(t,r){return Vi(t,r)}function Hm(t,r,s,a){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(t,r,s,a){return new Hm(t,r,s,a)}function Wl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $m(t){if(typeof t=="function")return Wl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===re)return 11;if(t===X)return 14}return 2}function nr(t,r){var s=t.alternate;return s===null?(s=ft(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ga(t,r,s,a,n,l){var d=2;if(a=t,typeof t=="function")Wl(t)&&(d=1);else if(typeof t=="string")d=5;else e:switch(t){case T:return _r(s.children,n,l,r);case $:d=8,n|=8;break;case H:return t=ft(12,s,r,n|2),t.elementType=H,t.lanes=l,t;case de:return t=ft(13,s,r,n),t.elementType=de,t.lanes=l,t;case pe:return t=ft(19,s,r,n),t.elementType=pe,t.lanes=l,t;case ee:return Wa(s,n,l,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ce:d=10;break e;case g:d=9;break e;case re:d=11;break e;case X:d=14;break e;case te:d=16,a=null;break e}throw Error(u(130,t==null?t:typeof t,""))}return r=ft(d,s,r,n),r.elementType=t,r.type=a,r.lanes=l,r}function _r(t,r,s,a){return t=ft(7,t,a,r),t.lanes=s,t}function Wa(t,r,s,a){return t=ft(22,t,a,r),t.elementType=ee,t.lanes=s,t.stateNode={isHidden:!1},t}function Kl(t,r,s){return t=ft(6,t,null,r),t.lanes=s,t}function Ql(t,r,s){return r=ft(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Vm(t,r,s,a,n){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nn(0),this.expirationTimes=Nn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Yl(t,r,s,a,n,l,d,_,P){return t=new Vm(t,r,s,_,P),r===1?(r=1,l===!0&&(r|=8)):r=0,l=ft(3,null,null,r),t.current=l,l.stateNode=t,l.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},cl(l),t}function Gm(t,r,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:a==null?null:""+a,children:t,containerInfo:r,implementation:s}}function xd(t){if(!t)return Yt;t=t._reactInternals;e:{if(ur(t)!==t||t.tag!==1)throw Error(u(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(et(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(u(171))}if(t.tag===1){var s=t.type;if(et(s))return Bo(t,s,r)}return r}function gd(t,r,s,a,n,l,d,_,P){return t=Yl(s,a,!0,t,n,l,d,_,P),t.context=xd(null),s=t.current,a=Xe(),n=sr(s),l=Ft(a,n),l.callback=r??null,Jt(s,l,n),t.current.lanes=n,os(t,n,a),st(t,a),t}function Ka(t,r,s,a){var n=r.current,l=Xe(),d=sr(n);return s=xd(s),r.context===null?r.context=s:r.pendingContext=s,r=Ft(l,d),r.payload={element:t},a=a===void 0?null:a,a!==null&&(r.callback=a),t=Jt(n,r,d),t!==null&&(St(t,n,d,l),ka(t,n,d)),d}function Qa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hd(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function Xl(t,r){hd(t,r),(t=t.alternate)&&hd(t,r)}function Wm(){return null}var fd=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zl(t){this._internalRoot=t}Ya.prototype.render=Zl.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(u(409));Ka(t,r,null,null)},Ya.prototype.unmount=Zl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;br(function(){Ka(null,t,null,null)}),r[Tt]=null}};function Ya(t){this._internalRoot=t}Ya.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ji();t={blockedOn:null,target:t,priority:r};for(var s=0;s<Vt.length&&r!==0&&r<Vt[s].priority;s++);Vt.splice(s,0,t),s===0&&ro(t)}};function Jl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yd(){}function Km(t,r,s,a,n){if(n){if(typeof a=="function"){var l=a;a=function(){var q=Qa(d);l.call(q)}}var d=gd(r,a,t,0,null,!1,!1,"",yd);return t._reactRootContainer=d,t[Tt]=d.current,Ns(t.nodeType===8?t.parentNode:t),br(),d}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var _=a;a=function(){var q=Qa(P);_.call(q)}}var P=Yl(t,0,!1,null,null,!1,!1,"",yd);return t._reactRootContainer=P,t[Tt]=P.current,Ns(t.nodeType===8?t.parentNode:t),br(function(){Ka(r,P,s,a)}),P}function Za(t,r,s,a,n){var l=s._reactRootContainer;if(l){var d=l;if(typeof n=="function"){var _=n;n=function(){var P=Qa(d);_.call(P)}}Ka(r,d,t,n)}else d=Km(s,r,t,n,a);return Qa(d)}Xi=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var s=is(r.pendingLanes);s!==0&&(_n(r,s|1),st(r,Le()),(Ne&6)===0&&(Wr=Le()+500,Xt()))}break;case 13:br(function(){var a=Ot(t,1);if(a!==null){var n=Xe();St(a,t,1,n)}}),Xl(t,1)}},wn=function(t){if(t.tag===13){var r=Ot(t,134217728);if(r!==null){var s=Xe();St(r,t,134217728,s)}Xl(t,134217728)}},Zi=function(t){if(t.tag===13){var r=sr(t),s=Ot(t,r);if(s!==null){var a=Xe();St(s,t,r,a)}Xl(t,r)}},Ji=function(){return we},eo=function(t,r){var s=we;try{return we=t,r()}finally{we=s}},hn=function(t,r,s){switch(r){case"input":if(on(t,s),r=s.name,s.type==="radio"&&r!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<s.length;r++){var a=s[r];if(a!==t&&a.form===t.form){var n=ga(a);if(!n)throw Error(u(90));wi(a),on(a,n)}}}break;case"textarea":Ai(t,s);break;case"select":r=s.value,r!=null&&wr(t,!!s.multiple,r,!1)}},Fi=$l,zi=br;var Qm={usingClientEntryPoint:!1,Events:[ks,Lr,ga,Mi,Oi,$l]},zs={findFiberByHostInstance:mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ym={bundleType:zs.bundleType,version:zs.version,rendererPackageName:zs.rendererPackageName,rendererConfig:zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hi(t),t===null?null:t.stateNode},findFiberByHostInstance:zs.findFiberByHostInstance||Wm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{Ys=Ja.inject(Ym),Et=Ja}catch{}}return at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qm,at.createPortal=function(t,r){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jl(r))throw Error(u(200));return Gm(t,r,null,s)},at.createRoot=function(t,r){if(!Jl(t))throw Error(u(299));var s=!1,a="",n=fd;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(n=r.onRecoverableError)),r=Yl(t,1,!1,null,null,s,!1,a,n),t[Tt]=r.current,Ns(t.nodeType===8?t.parentNode:t),new Zl(r)},at.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(u(188)):(t=Object.keys(t).join(","),Error(u(268,t)));return t=Hi(r),t=t===null?null:t.stateNode,t},at.flushSync=function(t){return br(t)},at.hydrate=function(t,r,s){if(!Xa(r))throw Error(u(200));return Za(null,t,r,!0,s)},at.hydrateRoot=function(t,r,s){if(!Jl(t))throw Error(u(405));var a=s!=null&&s.hydratedSources||null,n=!1,l="",d=fd;if(s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),r=gd(r,null,t,1,s??null,n,!1,l,d),t[Tt]=r.current,Ns(t),a)for(t=0;t<a.length;t++)s=a[t],n=s._getVersion,n=n(s._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[s,n]:r.mutableSourceEagerHydrationData.push(s,n);return new Ya(r)},at.render=function(t,r,s){if(!Xa(r))throw Error(u(200));return Za(null,t,r,!1,s)},at.unmountComponentAtNode=function(t){if(!Xa(t))throw Error(u(40));return t._reactRootContainer?(br(function(){Za(null,null,t,!1,function(){t._reactRootContainer=null,t[Tt]=null})}),!0):!1},at.unstable_batchedUpdates=$l,at.unstable_renderSubtreeIntoContainer=function(t,r,s,a){if(!Xa(s))throw Error(u(200));if(t==null||t._reactInternals===void 0)throw Error(u(38));return Za(t,r,s,!1,a)},at.version="18.3.1-next-f1338f8080-20240426",at}var Sd;function Bd(){if(Sd)return ri.exports;Sd=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(o){console.error(o)}}return i(),ri.exports=lp(),ri.exports}var Cd;function ip(){if(Cd)return en;Cd=1;var i=Bd();return en.createRoot=i.createRoot,en.hydrateRoot=i.hydrateRoot,en}var op=ip();const cp=qd(op);Bd();function qs(){return qs=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&(i[v]=u[v])}return i},qs.apply(this,arguments)}var ir;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(ir||(ir={}));const Ed="popstate";function dp(i){i===void 0&&(i={});function o(v,k){let{pathname:N,search:w,hash:S}=v.location;return ii("",{pathname:N,search:w,hash:S},k.state&&k.state.usr||null,k.state&&k.state.key||"default")}function u(v,k){return typeof k=="string"?k:rn(k)}return mp(o,u,null,i)}function Me(i,o){if(i===!1||i===null||typeof i>"u")throw new Error(o)}function hi(i,o){if(!i){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function up(){return Math.random().toString(36).substr(2,8)}function Ad(i,o){return{usr:i.state,key:i.key,idx:o}}function ii(i,o,u,v){return u===void 0&&(u=null),qs({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof o=="string"?Zr(o):o,{state:u,key:o&&o.key||v||up()})}function rn(i){let{pathname:o="/",search:u="",hash:v=""}=i;return u&&u!=="?"&&(o+=u.charAt(0)==="?"?u:"?"+u),v&&v!=="#"&&(o+=v.charAt(0)==="#"?v:"#"+v),o}function Zr(i){let o={};if(i){let u=i.indexOf("#");u>=0&&(o.hash=i.substr(u),i=i.substr(0,u));let v=i.indexOf("?");v>=0&&(o.search=i.substr(v),i=i.substr(0,v)),i&&(o.pathname=i)}return o}function mp(i,o,u,v){v===void 0&&(v={});let{window:k=document.defaultView,v5Compat:N=!1}=v,w=k.history,S=ir.Pop,x=null,E=b();E==null&&(E=0,w.replaceState(qs({},w.state,{idx:E}),""));function b(){return(w.state||{idx:null}).idx}function D(){S=ir.Pop;let p=b(),c=p==null?null:p-E;E=p,x&&x({action:S,location:y.location,delta:c})}function C(p,c){S=ir.Push;let O=ii(y.location,p,c);E=b()+1;let V=Ad(O,E),z=y.createHref(O);try{w.pushState(V,"",z)}catch(h){if(h instanceof DOMException&&h.name==="DataCloneError")throw h;k.location.assign(z)}N&&x&&x({action:S,location:y.location,delta:1})}function I(p,c){S=ir.Replace;let O=ii(y.location,p,c);E=b();let V=Ad(O,E),z=y.createHref(O);w.replaceState(V,"",z),N&&x&&x({action:S,location:y.location,delta:0})}function m(p){let c=k.location.origin!=="null"?k.location.origin:k.location.href,O=typeof p=="string"?p:rn(p);return O=O.replace(/ $/,"%20"),Me(c,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,c)}let y={get action(){return S},get location(){return i(k,w)},listen(p){if(x)throw new Error("A history only accepts one active listener");return k.addEventListener(Ed,D),x=p,()=>{k.removeEventListener(Ed,D),x=null}},createHref(p){return o(k,p)},createURL:m,encodeLocation(p){let c=m(p);return{pathname:c.pathname,search:c.search,hash:c.hash}},push:C,replace:I,go(p){return w.go(p)}};return y}var Dd;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Dd||(Dd={}));function pp(i,o,u){return u===void 0&&(u="/"),xp(i,o,u)}function xp(i,o,u,v){let k=typeof o=="string"?Zr(o):o,N=fi(k.pathname||"/",u);if(N==null)return null;let w=Hd(i);gp(w);let S=null;for(let x=0;S==null&&x<w.length;++x){let E=Cp(N);S=wp(w[x],E)}return S}function Hd(i,o,u,v){o===void 0&&(o=[]),u===void 0&&(u=[]),v===void 0&&(v="");let k=(N,w,S)=>{let x={relativePath:S===void 0?N.path||"":S,caseSensitive:N.caseSensitive===!0,childrenIndex:w,route:N};x.relativePath.startsWith("/")&&(Me(x.relativePath.startsWith(v),'Absolute route path "'+x.relativePath+'" nested under path '+('"'+v+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),x.relativePath=x.relativePath.slice(v.length));let E=cr([v,x.relativePath]),b=u.concat(x);N.children&&N.children.length>0&&(Me(N.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),Hd(N.children,o,b,E)),!(N.path==null&&!N.index)&&o.push({path:E,score:Np(E,N.index),routesMeta:b})};return i.forEach((N,w)=>{var S;if(N.path===""||!((S=N.path)!=null&&S.includes("?")))k(N,w);else for(let x of $d(N.path))k(N,w,x)}),o}function $d(i){let o=i.split("/");if(o.length===0)return[];let[u,...v]=o,k=u.endsWith("?"),N=u.replace(/\?$/,"");if(v.length===0)return k?[N,""]:[N];let w=$d(v.join("/")),S=[];return S.push(...w.map(x=>x===""?N:[N,x].join("/"))),k&&S.push(...w),S.map(x=>i.startsWith("/")&&x===""?"/":x)}function gp(i){i.sort((o,u)=>o.score!==u.score?u.score-o.score:_p(o.routesMeta.map(v=>v.childrenIndex),u.routesMeta.map(v=>v.childrenIndex)))}const hp=/^:[\w-]+$/,fp=3,yp=2,vp=1,bp=10,jp=-2,Pd=i=>i==="*";function Np(i,o){let u=i.split("/"),v=u.length;return u.some(Pd)&&(v+=jp),o&&(v+=yp),u.filter(k=>!Pd(k)).reduce((k,N)=>k+(hp.test(N)?fp:N===""?vp:bp),v)}function _p(i,o){return i.length===o.length&&i.slice(0,-1).every((v,k)=>v===o[k])?i[i.length-1]-o[o.length-1]:0}function wp(i,o,u){let{routesMeta:v}=i,k={},N="/",w=[];for(let S=0;S<v.length;++S){let x=v[S],E=S===v.length-1,b=N==="/"?o:o.slice(N.length)||"/",D=kp({path:x.relativePath,caseSensitive:x.caseSensitive,end:E},b),C=x.route;if(!D)return null;Object.assign(k,D.params),w.push({params:k,pathname:cr([N,D.pathname]),pathnameBase:Rp(cr([N,D.pathnameBase])),route:C}),D.pathnameBase!=="/"&&(N=cr([N,D.pathnameBase]))}return w}function kp(i,o){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[u,v]=Sp(i.path,i.caseSensitive,i.end),k=o.match(u);if(!k)return null;let N=k[0],w=N.replace(/(.)\/+$/,"$1"),S=k.slice(1);return{params:v.reduce((E,b,D)=>{let{paramName:C,isOptional:I}=b;if(C==="*"){let y=S[D]||"";w=N.slice(0,N.length-y.length).replace(/(.)\/+$/,"$1")}const m=S[D];return I&&!m?E[C]=void 0:E[C]=(m||"").replace(/%2F/g,"/"),E},{}),pathname:N,pathnameBase:w,pattern:i}}function Sp(i,o,u){o===void 0&&(o=!1),u===void 0&&(u=!0),hi(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let v=[],k="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,S,x)=>(v.push({paramName:S,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(v.push({paramName:"*"}),k+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):u?k+="\\/*$":i!==""&&i!=="/"&&(k+="(?:(?=\\/|$))"),[new RegExp(k,o?void 0:"i"),v]}function Cp(i){try{return i.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return hi(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),i}}function fi(i,o){if(o==="/")return i;if(!i.toLowerCase().startsWith(o.toLowerCase()))return null;let u=o.endsWith("/")?o.length-1:o.length,v=i.charAt(u);return v&&v!=="/"?null:i.slice(u)||"/"}const Ep=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ap=i=>Ep.test(i);function Dp(i,o){o===void 0&&(o="/");let{pathname:u,search:v="",hash:k=""}=typeof i=="string"?Zr(i):i,N;if(u)if(Ap(u))N=u;else{if(u.includes("//")){let w=u;u=u.replace(/\/\/+/g,"/"),hi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(w+" -> "+u))}u.startsWith("/")?N=Rd(u.substring(1),"/"):N=Rd(u,o)}else N=o;return{pathname:N,search:Tp(v),hash:Lp(k)}}function Rd(i,o){let u=o.replace(/\/+$/,"").split("/");return i.split("/").forEach(k=>{k===".."?u.length>1&&u.pop():k!=="."&&u.push(k)}),u.length>1?u.join("/"):"/"}function ni(i,o,u,v){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+o+"` field ["+JSON.stringify(v)+"].  Please separate it out to the ")+("`to."+u+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Pp(i){return i.filter((o,u)=>u===0||o.route.path&&o.route.path.length>0)}function yi(i,o){let u=Pp(i);return o?u.map((v,k)=>k===u.length-1?v.pathname:v.pathnameBase):u.map(v=>v.pathnameBase)}function vi(i,o,u,v){v===void 0&&(v=!1);let k;typeof i=="string"?k=Zr(i):(k=qs({},i),Me(!k.pathname||!k.pathname.includes("?"),ni("?","pathname","search",k)),Me(!k.pathname||!k.pathname.includes("#"),ni("#","pathname","hash",k)),Me(!k.search||!k.search.includes("#"),ni("#","search","hash",k)));let N=i===""||k.pathname==="",w=N?"/":k.pathname,S;if(w==null)S=u;else{let D=o.length-1;if(!v&&w.startsWith("..")){let C=w.split("/");for(;C[0]==="..";)C.shift(),D-=1;k.pathname=C.join("/")}S=D>=0?o[D]:"/"}let x=Dp(k,S),E=w&&w!=="/"&&w.endsWith("/"),b=(N||w===".")&&u.endsWith("/");return!x.pathname.endsWith("/")&&(E||b)&&(x.pathname+="/"),x}const cr=i=>i.join("/").replace(/\/\/+/g,"/"),Rp=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Tp=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Lp=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Ip(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Vd=["post","put","patch","delete"];new Set(Vd);const Mp=["get",...Vd];new Set(Mp);function Bs(){return Bs=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&(i[v]=u[v])}return i},Bs.apply(this,arguments)}const bi=f.createContext(null),Op=f.createContext(null),dr=f.createContext(null),an=f.createContext(null),qt=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Gd=f.createContext(null);function Fp(i,o){let{relative:u}=o===void 0?{}:o;Jr()||Me(!1);let{basename:v,navigator:k}=f.useContext(dr),{hash:N,pathname:w,search:S}=Kd(i,{relative:u}),x=w;return v!=="/"&&(x=w==="/"?v:cr([v,w])),k.createHref({pathname:x,search:S,hash:N})}function Jr(){return f.useContext(an)!=null}function es(){return Jr()||Me(!1),f.useContext(an).location}function Wd(i){f.useContext(dr).static||f.useLayoutEffect(i)}function Hs(){let{isDataRoute:i}=f.useContext(qt);return i?Xp():zp()}function zp(){Jr()||Me(!1);let i=f.useContext(bi),{basename:o,future:u,navigator:v}=f.useContext(dr),{matches:k}=f.useContext(qt),{pathname:N}=es(),w=JSON.stringify(yi(k,u.v7_relativeSplatPath)),S=f.useRef(!1);return Wd(()=>{S.current=!0}),f.useCallback(function(E,b){if(b===void 0&&(b={}),!S.current)return;if(typeof E=="number"){v.go(E);return}let D=vi(E,JSON.parse(w),N,b.relative==="path");i==null&&o!=="/"&&(D.pathname=D.pathname==="/"?o:cr([o,D.pathname])),(b.replace?v.replace:v.push)(D,b.state,b)},[o,v,w,N,i])}function ji(){let{matches:i}=f.useContext(qt),o=i[i.length-1];return o?o.params:{}}function Kd(i,o){let{relative:u}=o===void 0?{}:o,{future:v}=f.useContext(dr),{matches:k}=f.useContext(qt),{pathname:N}=es(),w=JSON.stringify(yi(k,v.v7_relativeSplatPath));return f.useMemo(()=>vi(i,JSON.parse(w),N,u==="path"),[i,w,N,u])}function Up(i,o){return qp(i,o)}function qp(i,o,u,v){Jr()||Me(!1);let{navigator:k}=f.useContext(dr),{matches:N}=f.useContext(qt),w=N[N.length-1],S=w?w.params:{};w&&w.pathname;let x=w?w.pathnameBase:"/";w&&w.route;let E=es(),b;if(o){var D;let p=typeof o=="string"?Zr(o):o;x==="/"||(D=p.pathname)!=null&&D.startsWith(x)||Me(!1),b=p}else b=E;let C=b.pathname||"/",I=C;if(x!=="/"){let p=x.replace(/^\//,"").split("/");I="/"+C.replace(/^\//,"").split("/").slice(p.length).join("/")}let m=pp(i,{pathname:I}),y=Gp(m&&m.map(p=>Object.assign({},p,{params:Object.assign({},S,p.params),pathname:cr([x,k.encodeLocation?k.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?x:cr([x,k.encodeLocation?k.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),N,u,v);return o&&y?f.createElement(an.Provider,{value:{location:Bs({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:ir.Pop}},y):y}function Bp(){let i=Yp(),o=Ip(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),u=i instanceof Error?i.stack:null,k={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},o),u?f.createElement("pre",{style:k},u):null,null)}const Hp=f.createElement(Bp,null);class $p extends f.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,u){return u.location!==o.location||u.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:u.error,location:u.location,revalidation:o.revalidation||u.revalidation}}componentDidCatch(o,u){console.error("React Router caught the following error during render",o,u)}render(){return this.state.error!==void 0?f.createElement(qt.Provider,{value:this.props.routeContext},f.createElement(Gd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Vp(i){let{routeContext:o,match:u,children:v}=i,k=f.useContext(bi);return k&&k.static&&k.staticContext&&(u.route.errorElement||u.route.ErrorBoundary)&&(k.staticContext._deepestRenderedBoundaryId=u.route.id),f.createElement(qt.Provider,{value:o},v)}function Gp(i,o,u,v){var k;if(o===void 0&&(o=[]),u===void 0&&(u=null),v===void 0&&(v=null),i==null){var N;if(!u)return null;if(u.errors)i=u.matches;else if((N=v)!=null&&N.v7_partialHydration&&o.length===0&&!u.initialized&&u.matches.length>0)i=u.matches;else return null}let w=i,S=(k=u)==null?void 0:k.errors;if(S!=null){let b=w.findIndex(D=>D.route.id&&S?.[D.route.id]!==void 0);b>=0||Me(!1),w=w.slice(0,Math.min(w.length,b+1))}let x=!1,E=-1;if(u&&v&&v.v7_partialHydration)for(let b=0;b<w.length;b++){let D=w[b];if((D.route.HydrateFallback||D.route.hydrateFallbackElement)&&(E=b),D.route.id){let{loaderData:C,errors:I}=u,m=D.route.loader&&C[D.route.id]===void 0&&(!I||I[D.route.id]===void 0);if(D.route.lazy||m){x=!0,E>=0?w=w.slice(0,E+1):w=[w[0]];break}}}return w.reduceRight((b,D,C)=>{let I,m=!1,y=null,p=null;u&&(I=S&&D.route.id?S[D.route.id]:void 0,y=D.route.errorElement||Hp,x&&(E<0&&C===0?(Zp("route-fallback"),m=!0,p=null):E===C&&(m=!0,p=D.route.hydrateFallbackElement||null)));let c=o.concat(w.slice(0,C+1)),O=()=>{let V;return I?V=y:m?V=p:D.route.Component?V=f.createElement(D.route.Component,null):D.route.element?V=D.route.element:V=b,f.createElement(Vp,{match:D,routeContext:{outlet:b,matches:c,isDataRoute:u!=null},children:V})};return u&&(D.route.ErrorBoundary||D.route.errorElement||C===0)?f.createElement($p,{location:u.location,revalidation:u.revalidation,component:y,error:I,children:O(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):O()},null)}var Qd=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(Qd||{}),Yd=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(Yd||{});function Wp(i){let o=f.useContext(bi);return o||Me(!1),o}function Kp(i){let o=f.useContext(Op);return o||Me(!1),o}function Qp(i){let o=f.useContext(qt);return o||Me(!1),o}function Xd(i){let o=Qp(),u=o.matches[o.matches.length-1];return u.route.id||Me(!1),u.route.id}function Yp(){var i;let o=f.useContext(Gd),u=Kp(),v=Xd();return o!==void 0?o:(i=u.errors)==null?void 0:i[v]}function Xp(){let{router:i}=Wp(Qd.UseNavigateStable),o=Xd(Yd.UseNavigateStable),u=f.useRef(!1);return Wd(()=>{u.current=!0}),f.useCallback(function(k,N){N===void 0&&(N={}),u.current&&(typeof k=="number"?i.navigate(k):i.navigate(k,Bs({fromRouteId:o},N)))},[i,o])}const Td={};function Zp(i,o,u){Td[i]||(Td[i]=!0)}function Jp(i,o){i?.v7_startTransition,i?.v7_relativeSplatPath}function Qr(i){let{to:o,replace:u,state:v,relative:k}=i;Jr()||Me(!1);let{future:N,static:w}=f.useContext(dr),{matches:S}=f.useContext(qt),{pathname:x}=es(),E=Hs(),b=vi(o,yi(S,N.v7_relativeSplatPath),x,k==="path"),D=JSON.stringify(b);return f.useEffect(()=>E(JSON.parse(D),{replace:u,state:v,relative:k}),[E,D,k,u,v]),null}function fe(i){Me(!1)}function ex(i){let{basename:o="/",children:u=null,location:v,navigationType:k=ir.Pop,navigator:N,static:w=!1,future:S}=i;Jr()&&Me(!1);let x=o.replace(/^\/*/,"/"),E=f.useMemo(()=>({basename:x,navigator:N,static:w,future:Bs({v7_relativeSplatPath:!1},S)}),[x,S,N,w]);typeof v=="string"&&(v=Zr(v));let{pathname:b="/",search:D="",hash:C="",state:I=null,key:m="default"}=v,y=f.useMemo(()=>{let p=fi(b,x);return p==null?null:{location:{pathname:p,search:D,hash:C,state:I,key:m},navigationType:k}},[x,b,D,C,I,m,k]);return y==null?null:f.createElement(dr.Provider,{value:E},f.createElement(an.Provider,{children:u,value:y}))}function Ld(i){let{children:o,location:u}=i;return Up(oi(o),u)}new Promise(()=>{});function oi(i,o){o===void 0&&(o=[]);let u=[];return f.Children.forEach(i,(v,k)=>{if(!f.isValidElement(v))return;let N=[...o,k];if(v.type===f.Fragment){u.push.apply(u,oi(v.props.children,N));return}v.type!==fe&&Me(!1),!v.props.index||!v.props.children||Me(!1);let w={id:v.props.id||N.join("-"),caseSensitive:v.props.caseSensitive,element:v.props.element,Component:v.props.Component,index:v.props.index,path:v.props.path,loader:v.props.loader,action:v.props.action,errorElement:v.props.errorElement,ErrorBoundary:v.props.ErrorBoundary,hasErrorBoundary:v.props.ErrorBoundary!=null||v.props.errorElement!=null,shouldRevalidate:v.props.shouldRevalidate,handle:v.props.handle,lazy:v.props.lazy};v.props.children&&(w.children=oi(v.props.children,N)),u.push(w)}),u}function ci(){return ci=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&(i[v]=u[v])}return i},ci.apply(this,arguments)}function tx(i,o){if(i==null)return{};var u={},v=Object.keys(i),k,N;for(N=0;N<v.length;N++)k=v[N],!(o.indexOf(k)>=0)&&(u[k]=i[k]);return u}function rx(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function sx(i,o){return i.button===0&&(!o||o==="_self")&&!rx(i)}const ax=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nx="6";try{window.__reactRouterVersion=nx}catch{}const lx="startTransition",Id=sp[lx];function ix(i){let{basename:o,children:u,future:v,window:k}=i,N=f.useRef();N.current==null&&(N.current=dp({window:k,v5Compat:!0}));let w=N.current,[S,x]=f.useState({action:w.action,location:w.location}),{v7_startTransition:E}=v||{},b=f.useCallback(D=>{E&&Id?Id(()=>x(D)):x(D)},[x,E]);return f.useLayoutEffect(()=>w.listen(b),[w,b]),f.useEffect(()=>Jp(v),[v]),f.createElement(ex,{basename:o,children:u,location:S.location,navigationType:S.action,navigator:w,future:v})}const ox=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vt=f.forwardRef(function(o,u){let{onClick:v,relative:k,reloadDocument:N,replace:w,state:S,target:x,to:E,preventScrollReset:b,viewTransition:D}=o,C=tx(o,ax),{basename:I}=f.useContext(dr),m,y=!1;if(typeof E=="string"&&cx.test(E)&&(m=E,ox))try{let V=new URL(window.location.href),z=E.startsWith("//")?new URL(V.protocol+E):new URL(E),h=fi(z.pathname,I);z.origin===V.origin&&h!=null?E=h+z.search+z.hash:y=!0}catch{}let p=Fp(E,{relative:k}),c=dx(E,{replace:w,state:S,target:x,preventScrollReset:b,relative:k,viewTransition:D});function O(V){v&&v(V),V.defaultPrevented||c(V)}return f.createElement("a",ci({},C,{href:m||p,onClick:y||N?v:O,ref:u,target:x}))});var Md;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(Md||(Md={}));var Od;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Od||(Od={}));function dx(i,o){let{target:u,replace:v,state:k,preventScrollReset:N,relative:w,viewTransition:S}=o===void 0?{}:o,x=Hs(),E=es(),b=Kd(i,{relative:w});return f.useCallback(D=>{if(sx(D,u)){D.preventDefault();let C=v!==void 0?v:rn(E)===rn(b);x(i,{replace:C,state:k,preventScrollReset:N,relative:w,viewTransition:S})}},[E,x,b,v,k,u,i,N,w,S])}const B=Zm.create({baseURL:window.location.origin,headers:{"Content-Type":"application/json",Accept:"application/json"}}),Fd=localStorage.getItem("token");Fd&&(B.defaults.headers.common.Authorization=`Bearer ${Fd}`);B.interceptors.response.use(i=>i,i=>(i.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user_email"),window.location.href="/login"),Promise.reject(i)));const Zd=f.createContext(null);function ux({children:i}){const[o,u]=f.useState(null),[v,k]=f.useState(localStorage.getItem("token")),[N,w]=f.useState(!0);f.useEffect(()=>{v?(B.defaults.headers.common.Authorization=`Bearer ${v}`,S()):w(!1)},[v]);const S=async()=>{try{if(!v){w(!1);return}try{const b=await B.get("/api/v1/me"),D=b.data?.data||b.data;u(D),localStorage.setItem("user_email",D.email),localStorage.setItem("user_name",D.name)}catch{const D=localStorage.getItem("user_email"),C=localStorage.getItem("user_name");if(D)u({email:D,name:C||D.split("@")[0]});else{E();return}}w(!1)}catch(b){console.error("Error fetching user:",b),E()}},x=async(b,D)=>{try{const C=await B.post("/api/v1/login",{email:b,password:D}),{token:I,user:m}=C.data;k(I),localStorage.setItem("token",I),B.defaults.headers.common.Authorization=`Bearer ${I}`;try{const y=await B.get("/api/v1/me"),p=y.data?.data||y.data;u(p),localStorage.setItem("user_email",p.email||b),localStorage.setItem("user_name",p.name||b.split("@")[0])}catch{u(m||{email:b,name:b.split("@")[0]}),localStorage.setItem("user_email",m?.email||b),localStorage.setItem("user_name",m?.name||b.split("@")[0])}return{success:!0}}catch(C){return console.error("Login error:",C),{success:!1,message:C.response?.data?.message||C.message||"Login failed"}}},E=()=>{k(null),u(null),localStorage.removeItem("token"),localStorage.removeItem("user_email"),delete B.defaults.headers.common.Authorization};return e.jsx(Zd.Provider,{value:{user:o,token:v,login:x,logout:E,loading:N},children:i})}function nn(){const i=f.useContext(Zd);if(!i)throw new Error("useAuth must be used within AuthProvider");return i}const mx=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Jd=(...i)=>i.filter((o,u,v)=>!!o&&v.indexOf(o)===u).join(" ");var px={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const xx=f.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:u=2,absoluteStrokeWidth:v,className:k="",children:N,iconNode:w,...S},x)=>f.createElement("svg",{ref:x,...px,width:o,height:o,stroke:i,strokeWidth:v?Number(u)*24/Number(o):u,className:Jd("lucide",k),...S},[...w.map(([E,b])=>f.createElement(E,b)),...Array.isArray(N)?N:[N]]));const ye=(i,o)=>{const u=f.forwardRef(({className:v,...k},N)=>f.createElement(xx,{ref:N,iconNode:o,className:Jd(`lucide-${mx(i)}`,v),...k}));return u.displayName=`${i}`,u};const Ni=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const gx=ye("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const hx=ye("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const zd=ye("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const fx=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const yx=ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const _i=ye("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const vx=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const bx=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const jx=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Nx=ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const _x=ye("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const or=ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const wx=ye("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);const kx=ye("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const nt=ye("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);const Sx=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Cx=ye("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);const Ex=ye("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Ax=ye("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Dx=ye("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const Ud=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const eu=ye("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Px=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const ut=ye("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Re=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const di=ye("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Rx=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const ui=ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Yr=ye("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const tn=ye("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);const He=ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const mi=ye("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const Xr=ye("Tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]]);const Ze=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const yt=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Tx=ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const tu=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const pi=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Lx=ye("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);const Ix=ye("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const sn=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Mx(){const[i,o]=f.useState(""),[u,v]=f.useState(""),[k,N]=f.useState(""),[w,S]=f.useState(!1),{login:x}=nn(),E=Hs(),b=async D=>{D.preventDefault(),N(""),S(!0);const C=await x(i,u);C.success?E("/"):N(C.message||"Invalid credentials"),S(!1)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-green-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-green-600 p-3 rounded-full",children:e.jsx(Xr,{className:"h-12 w-12 text-white"})})}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Farm Management System"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to manage your farm operations"})]}),e.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-lg shadow-lg",onSubmit:b,children:[k&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:k}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:D=>o(D.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:u,onChange:D=>v(D.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Enter your password"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:w,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Signing in...":"Sign in"})}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Demo credentials:"}),e.jsx("p",{className:"font-mono text-xs mt-1",children:"admin@fms.test / password"})]})]})]})})}function Ox(){const[i,o]=f.useState({totalSales:0,totalExpenses:0,totalRevenue:0,totalMargin:0,crops:{},loading:!0}),[u,v]=f.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});f.useEffect(()=>{k()},[u]);const k=async()=>{try{o(I=>({...I,loading:!0}));const[N,w]=await Promise.all([B.get(`/api/v1/gari-sales/summary?date_from=${u.from}&date_to=${u.to}`).catch(()=>({data:{overall:{}}})),B.get(`/api/v1/gari-production-batches?date_from=${u.from}&date_to=${u.to}`).catch(()=>({data:{data:[]}}))]),S=N.data?.overall||{},x=Array.isArray(w.data?.data)?w.data.data:[],E=Number(S.total_revenue||0),b=Number(S.total_cost||0),D=Number(S.total_margin||0),C=x.reduce((I,m)=>I+Number(m.total_cost||0),0);o({totalSales:Number(S.total_sales||0),totalExpenses:C,totalRevenue:E,totalMargin:D,crops:{gari:{sales:E,expenses:C,margin:D,batches:x.length},bellPepper:{sales:0,expenses:0,margin:0,batches:0},tomatoes:{sales:0,expenses:0,margin:0,batches:0},habaneros:{sales:0,expenses:0,margin:0,batches:0}},loading:!1})}catch(N){console.error("Error fetching consolidated data:",N),o(w=>({...w,loading:!1}))}};return i.loading?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Dashboard"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Overview across all crops and livestock"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:u.from,onChange:N=>v({...u,from:N.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:u.to,onChange:N=>v({...u,to:N.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx(or,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(i.totalRevenue||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All crops combined"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx(_i,{className:"h-5 w-5 text-red-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(i.totalExpenses||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Production costs"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),e.jsx(yt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(i.totalMargin||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.totalRevenue>0?Number(i.totalMargin/i.totalRevenue*100).toFixed(1)+"% margin":"No sales"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Sales"}),e.jsx(ut,{className:"h-5 w-5 text-blue-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.totalSales}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Transactions"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance by Crop"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expenses"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Batches"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(i.crops).map(([N,w])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:N==="bellPepper"?"Bell Pepper":N}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(w.sales||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(w.expenses||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(w.margin||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.batches})]},N))})]})})]})]})}const Fx=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"];function zx(){const[i,o]=f.useState([]),[u,v]=f.useState(!0),[k,N]=f.useState(!1),[w,S]=f.useState(null),[x,E]=f.useState({name:"",legal_name:"",farm_type:"MIXED",country:"Nigeria",state:"Ondo",town:"",default_currency:"NGN",default_unit_system:"METRIC",default_timezone:"Africa/Lagos",accounting_method:"ACCRUAL",status:"ACTIVE"});f.useEffect(()=>{b()},[]);const b=async()=>{v(!0);try{const c=await B.get("/api/v1/farms?per_page=1000"),O=c.data?.data||(Array.isArray(c.data)?c.data:[]);o(Array.isArray(O)?O:[])}catch(c){console.error("Error fetching farms:",c),o([])}finally{v(!1)}},D=async(c=null)=>{if(S(c),c)try{const V=(await B.get(`/api/v1/farms/${c.id}`)).data?.data||c;E({name:V.name||"",legal_name:V.legal_name||"",farm_type:V.farm_type||"MIXED",country:V.country||"Nigeria",state:V.state||"",town:V.town||"",default_currency:V.default_currency||"NGN",default_unit_system:V.default_unit_system||"METRIC",default_timezone:V.default_timezone||"Africa/Lagos",accounting_method:V.accounting_method||"ACCRUAL",status:V.status||"ACTIVE"})}catch(O){console.error("Error fetching farm:",O),E({name:c.name||"",legal_name:c.legal_name||"",farm_type:c.farm_type||"MIXED",country:c.country||"Nigeria",state:c.state||"",town:c.town||"",default_currency:c.default_currency||"NGN",default_unit_system:c.default_unit_system||"METRIC",default_timezone:c.default_timezone||"Africa/Lagos",accounting_method:c.accounting_method||"ACCRUAL",status:c.status||"ACTIVE"})}else E({name:"",legal_name:"",farm_type:"MIXED",country:"Nigeria",state:"Ondo",town:"",default_currency:"NGN",default_unit_system:"METRIC",default_timezone:"Africa/Lagos",accounting_method:"ACCRUAL",status:"ACTIVE"});N(!0)},C=async c=>{c.preventDefault();try{w?await B.put(`/api/v1/farms/${w.id}`,x):await B.post("/api/v1/farms",x),N(!1),b()}catch(O){console.error("Error saving farm:",O),alert(O.response?.data?.message||"Error saving farm")}},I=async c=>{if(confirm("Are you sure you want to delete this farm?"))try{await B.delete(`/api/v1/farms/${c}`),b()}catch(O){console.error("Error deleting farm:",O),alert(O.response?.data?.message||"Error deleting farm")}},m=c=>({CROP:"Crop",LIVESTOCK:"Livestock",MIXED:"Mixed",AQUACULTURE:"Aquaculture",HORTICULTURE:"Horticulture"})[c]||c,y=c=>({ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",ARCHIVED:"bg-red-100 text-red-800"})[c]||"bg-gray-100 text-gray-800",p=c=>{const O=[c.town,c.state,c.country].filter(Boolean);return O.length>0?O.join(", "):"Location not specified"};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Farms"}),e.jsxs("button",{onClick:()=>D(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Add Farm"]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Xr,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No farms yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first farm"}),e.jsx("button",{onClick:()=>D(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create Farm"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Legal Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.farm_code||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:c.legal_name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m(c.farm_type)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(eu,{size:14,className:"mr-1"}),p(c)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${y(c.status)}`,children:c.status||"ACTIVE"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx(vt,{to:`/farms/${c.id}`,className:"text-blue-600 hover:text-blue-900 mr-4",title:"View Details",children:"View"}),e.jsx("button",{onClick:()=>D(c),className:"text-green-600 hover:text-green-900 mr-4",children:e.jsx(He,{size:16,className:"inline"})}),e.jsx("button",{onClick:()=>I(c.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ze,{size:16,className:"inline"})})]})]},c.id))})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:w?"Edit Farm":"Create New Farm"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:c=>E({...x,name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Name"}),e.jsx("input",{type:"text",value:x.legal_name,onChange:c=>E({...x,legal_name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm Type *"}),e.jsxs("select",{required:!0,value:x.farm_type,onChange:c=>E({...x,farm_type:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"CROP",children:"Crop"}),e.jsx("option",{value:"LIVESTOCK",children:"Livestock"}),e.jsx("option",{value:"MIXED",children:"Mixed"}),e.jsx("option",{value:"AQUACULTURE",children:"Aquaculture"}),e.jsx("option",{value:"HORTICULTURE",children:"Horticulture"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:x.status,onChange:c=>E({...x,status:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"ARCHIVED",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country *"}),e.jsx("input",{type:"text",required:!0,value:x.country,onChange:c=>E({...x,country:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),e.jsx("select",{required:!0,value:x.state,onChange:c=>E({...x,state:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:Fx.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Town *"}),e.jsx("input",{type:"text",required:!0,value:x.town,onChange:c=>E({...x,town:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Currency *"}),e.jsx("input",{type:"text",required:!0,maxLength:"3",value:x.default_currency,onChange:c=>E({...x,default_currency:c.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Unit System *"}),e.jsxs("select",{required:!0,value:x.default_unit_system,onChange:c=>E({...x,default_unit_system:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"METRIC",children:"Metric"}),e.jsx("option",{value:"IMPERIAL",children:"Imperial"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Timezone *"}),e.jsx("input",{type:"text",required:!0,value:x.default_timezone,onChange:c=>E({...x,default_timezone:c.target.value}),placeholder:"Africa/Lagos",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Accounting Method *"}),e.jsxs("select",{required:!0,value:x.accounting_method,onChange:c=>E({...x,accounting_method:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"ACCRUAL",children:"Accrual"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[w?"Update":"Create"," Farm"]})]})]})]})})]})}function Ux(){const{id:i}=ji(),[o,u]=f.useState(null),[v,k]=f.useState(!0);f.useEffect(()=>{N()},[i]);const N=async()=>{try{const w=await B.get(`/api/v1/farms/${i}`);u(w.data.data||w.data)}catch(w){console.error("Error fetching farm:",w)}finally{k(!1)}};return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):o?e.jsxs("div",{children:[e.jsxs(vt,{to:"/farms",className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[e.jsx(Ni,{className:"h-5 w-5 mr-2"}),"Back to Farms"]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(Xr,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o.name}),o.location&&e.jsxs("div",{className:"flex items-center text-gray-600 mt-1",children:[e.jsx(eu,{className:"h-4 w-4 mr-1"}),o.location]})]})]}),o.is_active?e.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-green-100 text-green-800 rounded",children:"Active"}):e.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-gray-100 text-gray-800 rounded",children:"Inactive"})]})}),e.jsxs("div",{className:"px-6 py-4",children:[o.description&&e.jsx("p",{className:"text-gray-700 mb-4",children:o.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.total_area&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Area"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[o.total_area," ",o.area_unit||"hectares"]})]}),o.fields&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Fields"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.fields?.length||0})]}),o.seasons&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Seasons"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.seasons?.length||0})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.fields&&o.fields.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Fields"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:o.fields.map(w=>e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:w.name}),w.area&&e.jsxs("p",{className:"text-sm text-gray-600",children:[w.area," ",w.area_unit||"hectares"]})]},w.id))})]}),o.seasons&&o.seasons.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Seasons"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:o.seasons.map(w=>e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:w.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(w.start_date).toLocaleDateString()," - ",new Date(w.end_date).toLocaleDateString()]})]},w.id))})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Farm not found"}),e.jsx(vt,{to:"/farms",className:"text-green-600 hover:text-green-700 mt-4 inline-block",children:" Back to Farms"})]})}function qx(){const[i,o]=f.useState([]),[u,v]=f.useState(!0),[k,N]=f.useState(!1),[w,S]=f.useState({name:"",connection_type:"MOCK",is_active:!0});f.useEffect(()=>{x()},[]);const x=async()=>{try{const b=await B.get("/api/v1/scale-devices");o(b.data.data||b.data)}catch(b){console.error("Error fetching devices:",b)}finally{v(!1)}},E=async b=>{b.preventDefault();try{await B.post("/api/v1/scale-devices",w),N(!1),S({name:"",connection_type:"MOCK",is_active:!0}),x()}catch(D){alert("Error creating device: "+(D.response?.data?.message||"Unknown error"))}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Scale Devices"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your weighing scale devices"})]}),e.jsxs("button",{onClick:()=>N(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"Add Device"]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(di,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No scale devices yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first scale device to get started"}),e.jsx("button",{onClick:()=>N(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Add Device"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(b=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:e.jsx(di,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:b.name})]}),b.is_active?e.jsx(Nx,{className:"h-5 w-5 text-green-500"}):e.jsx(_x,{className:"h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Connection Type"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.connection_type})]}),b.last_calibration_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last Calibration"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(b.last_calibration_date).toLocaleDateString()})]})]})]},b.id))}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Scale Device"}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Name *"}),e.jsx("input",{type:"text",required:!0,value:w.name,onChange:b=>S({...w,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Main Weighing Scale"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Connection Type"}),e.jsxs("select",{value:w.connection_type,onChange:b=>S({...w,connection_type:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"MOCK",children:"Mock (Testing)"}),e.jsx("option",{value:"SERIAL",children:"Serial Port"}),e.jsx("option",{value:"USB",children:"USB"}),e.jsx("option",{value:"NETWORK",children:"Network"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Device"})]})]})]})})]})}function Bx(){const[i,o]=f.useState([]),[u,v]=f.useState(!0);f.useEffect(()=>{k()},[]);const k=async()=>{try{const N=await B.get("/api/v1/label-templates");o(N.data.data||N.data)}catch(N){console.error("Error fetching templates:",N)}finally{v(!1)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Label Templates"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your label printing templates"})]})}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(mi,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No label templates yet"}),e.jsx("p",{className:"text-gray-500",children:"Label templates are created through the API. Use the default template for now."})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(N=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:e.jsx(mi,{className:"h-6 w-6 text-orange-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:N.name})]}),N.is_default&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded",children:"Default"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Code"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Target Type"}),e.jsx("p",{className:"text-sm text-gray-900",children:N.target_type?.split("\\").pop()||"N/A"})]}),N.template_body&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Template Preview"}),e.jsxs("pre",{className:"text-xs bg-gray-50 p-2 rounded mt-1 overflow-auto max-h-32",children:[N.template_body.substring(0,200),"..."]})]})]})]},N.id))})]})}function Hx(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState([]),[w,S]=f.useState(!0),[x,E]=f.useState(!1),[b,D]=f.useState({farm_id:"",factory_id:"",processing_date:new Date().toISOString().slice(0,10),cassava_source:"HARVESTED",cassava_quantity_tonnes:"",cassava_cost_per_tonne:"",gari_produced_kg:"",gari_type:"WHITE",gari_grade:"FINE",labour_cost:0,fuel_cost:0,equipment_cost:0,water_cost:0,transport_cost:0,other_costs:0,waste_kg:0,notes:""});f.useEffect(()=>{C()},[]);const C=async()=>{try{const[c,O]=await Promise.all([B.get("/api/v1/gari-production-batches"),B.get("/api/v1/farms")]),V=c.data,z=V?.data||(Array.isArray(V)?V:[]);o(z);const h=O.data,M=h?.data||(Array.isArray(h)?h:[]);v(M)}catch(c){console.error("Error fetching data:",c)}finally{S(!1)}},I=async()=>{try{const c=await B.get("/api/v1/farms");v(c.data.data||c.data)}catch(c){console.error("Error fetching farms:",c)}},m=async c=>{if(!c){N([]);return}try{const V=(await B.get(`/api/v1/factories?farm_id=${c}&production_type=gari`)).data,z=V?.data||(Array.isArray(V)?V:[]);N(z)}catch(O){console.error("Error fetching factories:",O),N([])}},y=()=>{E(!0),I(),D(c=>({...c,factory_id:""})),N([])},p=async c=>{c.preventDefault();try{const O=await B.post("/api/v1/gari-production-batches",b);console.log("Created batch response:",O.data),E(!1),D({farm_id:"",factory_id:"",processing_date:new Date().toISOString().slice(0,10),cassava_source:"HARVESTED",cassava_quantity_tonnes:"",cassava_cost_per_tonne:"",gari_produced_kg:"",gari_type:"WHITE",gari_grade:"FINE",labour_cost:0,fuel_cost:0,equipment_cost:0,water_cost:0,transport_cost:0,other_costs:0,waste_kg:0,notes:""}),C()}catch(O){alert("Error creating batch: "+(O.response?.data?.message||"Unknown error"))}};return w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Production Batches"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track production from cassava to finished gari"})]}),e.jsxs("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"New Batch"]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(nt,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No production batches yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production batch to get started"}),e.jsx("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Batch"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.map(c=>e.jsxs(vt,{to:`/gari-production-batches/${c.id}`,className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c.batch_code}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(c.processing_date).toLocaleDateString(),"  ",c.farm?.name,c.factory&&`  ${c.factory.name}`]})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded ${c.status==="COMPLETED"?"bg-green-100 text-green-800":c.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:c.status})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cassava Input"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:c.cassava_quantity_tonnes?`${c.cassava_quantity_tonnes} tonnes`:`${(c.cassava_quantity_kg/1e3).toFixed(3)} tonnes`}),e.jsx("p",{className:"text-xs text-gray-500",children:c.cassava_source==="HARVESTED"?"Harvested":c.cassava_source==="PURCHASED"?"Purchased":"Mixed"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Gari Produced"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[c.gari_produced_kg," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.gari_type,"  ",c.gari_grade]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Yield"}),e.jsxs("p",{className:"text-sm font-semibold text-green-600",children:[c.conversion_yield_percent!=null?Number(c.conversion_yield_percent).toFixed(1):"N/A","%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cost per kg"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",c.cost_per_kg_gari!=null?Number(c.cost_per_kg_gari).toFixed(2):"N/A"]})]})]})]},c.id))}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create Production Batch"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:b.farm_id,onChange:c=>{const O=c.target.value;D({...b,farm_id:O,factory_id:""}),m(O)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Factory *"}),e.jsxs("select",{required:!0,value:b.factory_id,onChange:c=>D({...b,factory_id:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",disabled:!b.farm_id||k.length===0,children:[e.jsx("option",{value:"",children:b.farm_id?k.length===0?"No factories available":"Select factory":"Select farm first"}),k.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Date *"}),e.jsx("input",{type:"date",required:!0,value:b.processing_date,onChange:c=>D({...b,processing_date:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Source *"}),e.jsxs("select",{required:!0,value:b.cassava_source,onChange:c=>D({...b,cassava_source:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"HARVESTED",children:"Harvested"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Quantity (tonnes) *"}),e.jsx("input",{type:"number",step:"0.001",required:!0,value:b.cassava_quantity_tonnes,onChange:c=>D({...b,cassava_quantity_tonnes:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1 tonne = 1,000 kg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per tonne ()"}),e.jsx("input",{type:"number",step:"0.01",value:b.cassava_cost_per_tonne,onChange:c=>D({...b,cassava_cost_per_tonne:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 150000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Produced (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:b.gari_produced_kg,onChange:c=>D({...b,gari_produced_kg:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),e.jsxs("select",{required:!0,value:b.gari_type,onChange:c=>D({...b,gari_type:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),e.jsxs("select",{required:!0,value:b.gari_grade,onChange:c=>D({...b,gari_grade:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"FINE",children:"Fine"}),e.jsx("option",{value:"COARSE",children:"Coarse"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Processing Costs ()"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour"}),e.jsx("input",{type:"number",step:"0.01",value:b.labour_cost,onChange:c=>D({...b,labour_cost:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuel"}),e.jsx("input",{type:"number",step:"0.01",value:b.fuel_cost,onChange:c=>D({...b,fuel_cost:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment"}),e.jsx("input",{type:"number",step:"0.01",value:b.equipment_cost,onChange:c=>D({...b,equipment_cost:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Water"}),e.jsx("input",{type:"number",step:"0.01",value:b.water_cost,onChange:c=>D({...b,water_cost:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport"}),e.jsx("input",{type:"number",step:"0.01",value:b.transport_cost,onChange:c=>D({...b,transport_cost:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other"}),e.jsx("input",{type:"number",step:"0.01",value:b.other_costs,onChange:c=>D({...b,other_costs:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste (kg)"}),e.jsx("input",{type:"number",step:"0.01",value:b.waste_kg,onChange:c=>D({...b,waste_kg:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:b.notes,onChange:c=>D({...b,notes:c.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Batch"})]})]})]})})]})}function $x(){const{id:i}=ji(),[o,u]=f.useState(null),[v,k]=f.useState(!0),[N,w]=f.useState(!1),[S,x]=f.useState(null);f.useEffect(()=>{E()},[i]);const E=async()=>{try{console.log("Fetching batch with ID:",i);const C=await B.get(`/api/v1/gari-production-batches/${i}`);console.log("Full API response:",C),console.log("Response data:",C.data),console.log("Response data.data:",C.data?.data);const I=C.data?.data||C.data;console.log("Extracted batch data:",I),console.log("Batch data type:",typeof I),console.log("Batch data is object:",I&&typeof I=="object"),I&&typeof I=="object"&&!Array.isArray(I)?(console.log("Setting batch:",I),u(I)):(console.error("Invalid batch data structure:",I),console.error("Batch data keys:",I?Object.keys(I):"null"),u(null))}catch(C){console.error("Error fetching batch:",C),console.error("Error response:",C.response),console.error("Error response data:",C.response?.data),console.error("Error status:",C.response?.status),console.error("Error message:",C.message),console.error("Request URL:",C.config?.url),console.error("Batch ID from URL:",i),u(null)}finally{k(!1)}},b=()=>{o&&(x({processing_date:o.processing_date?new Date(o.processing_date).toISOString().slice(0,10):"",cassava_source:o.cassava_source||"HARVESTED",cassava_quantity_tonnes:o.cassava_quantity_tonnes||(o.cassava_quantity_kg?(o.cassava_quantity_kg/1e3).toString():""),cassava_cost_per_tonne:o.cassava_cost_per_tonne||"",gari_produced_kg:o.gari_produced_kg||"",gari_type:o.gari_type||"WHITE",gari_grade:o.gari_grade||"FINE",labour_cost:o.labour_cost||0,fuel_cost:o.fuel_cost||0,equipment_cost:o.equipment_cost||0,water_cost:o.water_cost||0,transport_cost:o.transport_cost||0,other_costs:o.other_costs||0,waste_kg:o.waste_kg||0,status:o.status||"PLANNED",notes:o.notes||""}),w(!0))},D=async C=>{C.preventDefault();try{await B.put(`/api/v1/gari-production-batches/${i}`,S),w(!1),x(null),E()}catch(I){alert("Error updating batch: "+(I.response?.data?.message||"Unknown error"))}};return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):!o&&!v?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Production batch not found"}),e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["ID: ",i]}),e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Check the browser console for detailed error information"}),e.jsx(vt,{to:"/gari-production-batches",className:"text-green-600 hover:text-green-700 mt-4 inline-block",children:" Back to Batches"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(vt,{to:"/gari-production-batches",className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(Ni,{className:"h-5 w-5 mr-2"}),"Back to Batches"]}),o.status!=="COMPLETED"&&e.jsxs("button",{onClick:b,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(He,{className:"h-5 w-5 mr-2"}),"Edit Batch"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(nt,{className:"h-8 w-8 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o.batch_code}),e.jsxs("p",{className:"text-gray-600",children:[o.farm?.name,"  ",new Date(o.processing_date).toLocaleDateString()]})]})]}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded ${o.status==="COMPLETED"?"bg-green-100 text-green-800":o.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:o.status})]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cassava Input"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.cassava_quantity_tonnes?`${o.cassava_quantity_tonnes} tonnes`:`${(o.cassava_quantity_kg/1e3).toFixed(3)} tonnes`}),o.total_cassava_cost&&e.jsxs("p",{className:"text-xs text-gray-500",children:["",Number(o.total_cassava_cost).toFixed(2)," total"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Gari Produced"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[o.gari_produced_kg," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[o.gari_type,"  ",o.gari_grade]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conversion Yield"}),e.jsxs("p",{className:"text-lg font-semibold text-green-600",children:[o.conversion_yield_percent!=null?Number(o.conversion_yield_percent).toFixed(1):"N/A","%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cost per kg"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",o.cost_per_kg_gari!=null?Number(o.cost_per_kg_gari).toFixed(2):"N/A"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(or,{className:"h-5 w-5 mr-2 text-green-600"}),"Cost Breakdown"]}),e.jsxs("div",{className:"space-y-3",children:[Number(o.total_cassava_cost||0)>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cassava Cost"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.total_cassava_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Labour"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.labour_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Fuel"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.fuel_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Equipment"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.equipment_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Water"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.water_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Transport"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.transport_cost||0).toFixed(2)]})]}),Number(o.other_costs||0)>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Other"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(o.other_costs||0).toFixed(2)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Total Processing"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["",Number(o.total_processing_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[e.jsx("span",{className:"text-base font-bold text-gray-900",children:"Total Cost"}),e.jsxs("span",{className:"text-base font-bold text-gray-900",children:["",o.total_cost!=null?Number(o.total_cost).toFixed(2):"0.00"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Performance Metrics"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conversion Yield"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(Number(o.conversion_yield_percent)||0,100)}%`}})}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[o.conversion_yield_percent!=null?Number(o.conversion_yield_percent).toFixed(1):"0","%"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target: 22-30%"})]}),o.waste_kg>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Waste"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[o.waste_kg," kg (",o.waste_percent!=null?Number(o.waste_percent).toFixed(1):"0","%)"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cost Efficiency"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",o.cost_per_kg_gari!=null?Number(o.cost_per_kg_gari).toFixed(2):"N/A"," per kg"]})]})]})]})]}),o.cassava_inputs&&o.cassava_inputs.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Cassava Inputs"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:o.cassava_inputs.map(C=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[C.quantity_kg," kg"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[C.source_type==="HARVESTED"?"Harvested":"Purchased",C.variety&&`  ${C.variety}`,C.harvest_lot&&`  Lot: ${C.harvest_lot.code||C.harvest_lot.id}`]})]}),Number(C.total_cost||0)>0&&e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",Number(C.total_cost||0).toFixed(2)]})]})},C.id))})]}),o.notes&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Notes"}),e.jsx("p",{className:"text-gray-700",children:o.notes})]}),N&&S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Production Batch"}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Date *"}),e.jsx("input",{type:"date",required:!0,value:S.processing_date,onChange:C=>x({...S,processing_date:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:S.status,onChange:C=>x({...S,status:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"PLANNED",children:"Planned"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Source *"}),e.jsxs("select",{required:!0,value:S.cassava_source,onChange:C=>x({...S,cassava_source:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"HARVESTED",children:"Harvested"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Quantity (tonnes) *"}),e.jsx("input",{type:"number",step:"0.001",required:!0,value:S.cassava_quantity_tonnes,onChange:C=>x({...S,cassava_quantity_tonnes:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1 tonne = 1,000 kg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per tonne ()"}),e.jsx("input",{type:"number",step:"0.01",value:S.cassava_cost_per_tonne,onChange:C=>x({...S,cassava_cost_per_tonne:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 150000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Produced (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:S.gari_produced_kg,onChange:C=>x({...S,gari_produced_kg:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),e.jsxs("select",{required:!0,value:S.gari_type,onChange:C=>x({...S,gari_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),e.jsxs("select",{required:!0,value:S.gari_grade,onChange:C=>x({...S,gari_grade:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"FINE",children:"Fine"}),e.jsx("option",{value:"COARSE",children:"Coarse"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Processing Costs ()"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour"}),e.jsx("input",{type:"number",step:"0.01",value:S.labour_cost,onChange:C=>x({...S,labour_cost:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuel"}),e.jsx("input",{type:"number",step:"0.01",value:S.fuel_cost,onChange:C=>x({...S,fuel_cost:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment"}),e.jsx("input",{type:"number",step:"0.01",value:S.equipment_cost,onChange:C=>x({...S,equipment_cost:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Water"}),e.jsx("input",{type:"number",step:"0.01",value:S.water_cost,onChange:C=>x({...S,water_cost:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport"}),e.jsx("input",{type:"number",step:"0.01",value:S.transport_cost,onChange:C=>x({...S,transport_cost:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other"}),e.jsx("input",{type:"number",step:"0.01",value:S.other_costs,onChange:C=>x({...S,other_costs:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste (kg)"}),e.jsx("input",{type:"number",step:"0.01",value:S.waste_kg,onChange:C=>x({...S,waste_kg:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:S.notes,onChange:C=>x({...S,notes:C.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{w(!1),x(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Update Batch"})]})]})]})})]})}function Vx(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState(0),[w,S]=f.useState(!0),[x,E]=f.useState({gari_type:"",packaging_type:"",status:"IN_STOCK"});f.useEffect(()=>{b()},[x]);const b=async()=>{try{const I=new URLSearchParams;x.gari_type&&I.append("gari_type",x.gari_type),x.packaging_type&&I.append("packaging_type",x.packaging_type),x.status&&I.append("status",x.status);const[m,y]=await Promise.all([B.get(`/api/v1/gari-inventory?${I.toString()}`),B.get("/api/v1/gari-inventory/summary")]),p=m.data.data||m.data,c=Array.isArray(p)?p:[];o(c),v(y.data.data||y.data),N(y.data.totalStock||0),console.log("Inventory response:",m.data),console.log("Inventory items:",c)}catch(I){console.error("Error fetching inventory:",I)}finally{S(!1)}};if(w)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const D=i.reduce((I,m)=>I+(m.quantity_kg||0),0),C=i.reduce((I,m)=>I+(m.total_cost||0),0);return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Inventory"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track finished goods stock"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Stock"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[k>0?k.toFixed(2):D.toFixed(2)," kg"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",C.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Items in Stock"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Sx,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:x.gari_type,onChange:I=>E({...x,gari_type:I.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]}),e.jsxs("select",{value:x.packaging_type,onChange:I=>E({...x,packaging_type:I.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Packaging"}),e.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),e.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),e.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),e.jsx("option",{value:"50KG_BAG",children:"50kg Bag"}),e.jsx("option",{value:"BULK",children:"Bulk"})]}),e.jsxs("select",{value:x.status,onChange:I=>E({...x,status:I.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"IN_STOCK",children:"In Stock"}),e.jsx("option",{value:"RESERVED",children:"Reserved"}),e.jsx("option",{value:"SOLD",children:"Sold"}),e.jsx("option",{value:"SPOILED",children:"Spoiled"}),e.jsx("option",{value:"DAMAGED",children:"Damaged"})]})]})}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(ut,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory items"}),e.jsx("p",{className:"text-gray-500",children:"Inventory will appear here after production batches are created"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Grade"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Packaging"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost per kg"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${I.gari_type==="WHITE"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:I.gari_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.gari_grade}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.packaging_type?.replace("_"," ").toLowerCase()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[I.quantity_kg," kg",I.quantity_units>0&&` (${I.quantity_units} units)`]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",I.cost_per_kg?.toFixed(2)||"N/A"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",I.total_cost?.toFixed(2)||"0.00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${I.status==="IN_STOCK"?"bg-green-100 text-green-800":I.status==="SOLD"?"bg-blue-100 text-blue-800":I.status==="SPOILED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:I.status})})]},I.id))})]})})})]})}function Gx(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState([]),[w,S]=f.useState([]),[x,E]=f.useState(!1),[b,D]=f.useState(!0),[C,I]=f.useState(!1),[m,y]=f.useState(null),[p,c]=f.useState(null),[O,V]=f.useState({farm_id:"",gari_production_batch_id:"",sale_date:new Date().toISOString().slice(0,10),customer_name:"",customer_type:"RETAIL",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",quantity_kg:"",quantity_units:"",unit_price:"",discount:0,cost_per_kg:"",payment_method:"CASH",amount_paid:"",sales_channel:"",notes:""});f.useEffect(()=>{z()},[]);const z=async()=>{try{const[A,G,Y]=await Promise.all([B.get("/api/v1/gari-sales"),B.get("/api/v1/farms"),B.get("/api/v1/gari-sales/summary")]);o(A.data.data||A.data),N(G.data.data||G.data),v(Y.data.data||Y.data)}catch(A){console.error("Error fetching data:",A)}finally{D(!1)}},h=async()=>{try{const A=await B.get("/api/v1/farms");N(A.data.data||A.data)}catch(A){console.error("Error fetching farms:",A)}},M=()=>{I(!0),h(),V({farm_id:"",gari_production_batch_id:"",sale_date:new Date().toISOString().slice(0,10),customer_name:"",customer_type:"RETAIL",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",quantity_kg:"",quantity_units:"",unit_price:"",discount:0,cost_per_kg:"",payment_method:"CASH",amount_paid:"",sales_channel:"",notes:""}),S([]),S([])},T=async()=>{if(!O.farm_id){S([]),E(!1);return}E(!0);try{const A=new URLSearchParams({farm_id:O.farm_id}),Y=(await B.get(`/api/v1/gari-sales/available-batches?${A.toString()}`)).data.data||[];if(S(Y),Y.length>0&&!O.gari_production_batch_id){const R=Y[0];$(R.batch_id)}else Y.length===0&&V(R=>({...R,gari_production_batch_id:"",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",cost_per_kg:""}))}catch(A){console.error("Error fetching available batches:",A),S([]),alert("Error loading available batches: "+(A.response?.data?.message||"Unknown error"))}finally{E(!1)}},$=A=>{const G=w.find(Y=>Y.batch_id==A);if(G){const Y=G.packaging_options&&G.packaging_options.length>0?G.packaging_options[0].packaging_type:"1KG_POUCH";V(R=>({...R,gari_production_batch_id:A,gari_type:G.gari_type||R.gari_type,gari_grade:G.gari_grade||R.gari_grade,packaging_type:Y,cost_per_kg:G.cost_per_kg_gari||R.cost_per_kg,quantity_units:"",quantity_kg:""}))}},H=(A,G)=>!A||!G||G<=0?0:({"1KG_POUCH":1,"2KG_POUCH":2,"5KG_PACK":5,"50KG_BAG":50}[A]||0)*G,ce=A=>{V(G=>{const Y=H(A,G.quantity_units||0);return{...G,packaging_type:A,quantity_kg:Y}})},g=A=>{V(G=>{const Y=H(G.packaging_type,A||0);return{...G,quantity_units:A,quantity_kg:Y}})};f.useEffect(()=>{C&&O.farm_id&&T()},[C,O.farm_id]);const re=async A=>{A.preventDefault();try{await B.post("/api/v1/gari-sales",O),I(!1),z()}catch(G){alert("Error creating sale: "+(G.response?.data?.message||"Unknown error"))}},de=A=>{y(A),c({payment_status:A.payment_status||"PAID",payment_method:A.payment_method||"CASH",amount_paid:A.amount_paid||0,discount:A.discount||0,unit_price:A.unit_price||0,notes:A.notes||""})},pe=async A=>{A.preventDefault();try{console.log("Updating sale with data:",p);const G=await B.put(`/api/v1/gari-sales/${m.id}`,p);console.log("Update response:",G.data),y(null),c(null),z()}catch(G){console.error("Error updating sale:",G),alert("Error updating sale: "+(G.response?.data?.message||"Unknown error"))}},X=A=>{const G=Number(m?.final_amount||0),Y=Number(A||0);let R="OUTSTANDING";Y>=G?R="PAID":Y>0&&(R="PARTIAL"),c({...p,amount_paid:A,payment_status:R})};if(b)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const te=i.reduce((A,G)=>A+(Number(G.final_amount)||0),0),ee=i.reduce((A,G)=>A+(Number(G.gross_margin)||0),0);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Sales"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track sales and revenue"})]}),e.jsxs("button",{onClick:M,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"New Sale"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",Number(te||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Margin"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",Number(ee||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Sales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Yr,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sales yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first sale to get started"}),e.jsx("button",{onClick:M,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Sale"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sale Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.sale_code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(A.sale_date).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[A.customer_name||A.customer?.name||"Walk-in",e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",A.customer_type,")"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[A.gari_type,"  ",A.packaging_type?.replace("_"," ")]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[A.quantity_kg," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["",Number(A.final_amount||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(A.gross_margin||0).toFixed(2),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",Number(A.gross_margin_percent||0).toFixed(1),"%)"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${A.payment_status==="PAID"?"bg-green-100 text-green-800":A.payment_status==="PARTIAL"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:A.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("button",{onClick:()=>de(A),className:"text-green-600 hover:text-green-700 flex items-center",children:[e.jsx(He,{className:"h-4 w-4 mr-1"}),"Edit"]})})]},A.id))})]})})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Sale"}),e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:O.farm_id,onChange:A=>V({...O,farm_id:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),k.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sale Date *"}),e.jsx("input",{type:"date",required:!0,value:O.sale_date,onChange:A=>V({...O,sale_date:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",value:O.customer_name,onChange:A=>V({...O,customer_name:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Walk-in customer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Type *"}),e.jsxs("select",{required:!0,value:O.customer_type,onChange:A=>V({...O,customer_type:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"RETAIL",children:"Retail"}),e.jsx("option",{value:"BULK_BUYER",children:"Bulk Buyer"}),e.jsx("option",{value:"DISTRIBUTOR",children:"Distributor"}),e.jsx("option",{value:"CATERING",children:"Catering"}),e.jsx("option",{value:"HOTEL",children:"Hotel"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Batch (FIFO) *"}),e.jsxs("select",{required:!0,disabled:!O.farm_id||x,value:O.gari_production_batch_id,onChange:A=>$(A.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${!O.farm_id||x?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`,children:[e.jsx("option",{value:"",children:x?"Loading batches...":O.farm_id?w.length===0?"No inventory available for this farm":"Select batch (oldest first - FIFO)":"Select farm first"}),w.map(A=>e.jsxs("option",{value:A.batch_id,children:[A.batch_code," - ",Number(A.total_available_kg||0).toFixed(2)," kg available",A.processing_date&&` (${new Date(A.processing_date).toLocaleDateString()})`,A.gari_type&&` - ${A.gari_type}`,A.gari_grade&&` ${A.gari_grade}`,A.cost_per_kg_gari&&` - ${Number(A.cost_per_kg_gari).toFixed(2)}/kg`]},A.batch_id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x?"Loading available batches...":"Batches are sorted by production date (FIFO - First In, First Out). Selecting a batch will auto-fill product details."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),e.jsxs("select",{required:!0,disabled:!O.gari_production_batch_id,value:O.gari_type,onChange:A=>V({...O,gari_type:A.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${O.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from selected batch"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),e.jsxs("select",{required:!0,disabled:!O.gari_production_batch_id,value:O.gari_grade,onChange:A=>V({...O,gari_grade:A.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${O.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("option",{value:"FINE",children:"Fine"}),e.jsx("option",{value:"COARSE",children:"Coarse"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from selected batch"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packaging *"}),e.jsxs("select",{required:!0,disabled:!O.gari_production_batch_id,value:O.packaging_type,onChange:A=>ce(A.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${O.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),e.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),e.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),e.jsx("option",{value:"50KG_BAG",children:"50kg Bag"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:O.gari_production_batch_id?"Select packaging size":"Select a batch first"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity (units) *"}),e.jsx("input",{type:"number",step:"1",min:"1",required:!0,disabled:!O.packaging_type,value:O.quantity_units,onChange:A=>g(A.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${O.packaging_type?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,placeholder:"Enter number of units"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Number of ",O.packaging_type?.replace("_"," ").toLowerCase()||"units"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Quantity (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,readOnly:!0,value:O.quantity_kg||0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated from packaging and quantity"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price () *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:O.unit_price,onChange:A=>V({...O,unit_price:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount ()"}),e.jsx("input",{type:"number",step:"0.01",value:O.discount,onChange:A=>V({...O,discount:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ()"}),e.jsx("input",{type:"number",step:"0.01",value:O.cost_per_kg,onChange:A=>V({...O,cost_per_kg:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"From inventory"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method *"}),e.jsxs("select",{required:!0,value:O.payment_method,onChange:A=>V({...O,payment_method:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"TRANSFER",children:"Transfer"}),e.jsx("option",{value:"POS",children:"POS"}),e.jsx("option",{value:"CHEQUE",children:"Cheque"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid ()"}),e.jsx("input",{type:"number",step:"0.01",value:O.amount_paid,onChange:A=>V({...O,amount_paid:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sales Channel"}),e.jsx("input",{type:"text",value:O.sales_channel,onChange:A=>V({...O,sales_channel:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Warehouse, Shop, Distributor"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>I(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Sale"})]})]})]})}),m&&p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Edit Sale - ",m.sale_code]}),e.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("span",{className:"ml-2 font-medium",children:m.customer_name||"Walk-in"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Product:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[m.gari_type,"  ",m.packaging_type?.replace("_"," ")]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Quantity:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[m.quantity_kg," kg"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["",Number(m.final_amount||0).toFixed(2)]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status *"}),e.jsxs("select",{required:!0,value:p.payment_status,onChange:A=>c({...p,payment_status:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"PAID",children:"Paid"}),e.jsx("option",{value:"PARTIAL",children:"Partial"}),e.jsx("option",{value:"OUTSTANDING",children:"Outstanding"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method *"}),e.jsxs("select",{required:!0,value:p.payment_method,onChange:A=>c({...p,payment_method:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"TRANSFER",children:"Transfer"}),e.jsx("option",{value:"POS",children:"POS"}),e.jsx("option",{value:"CHEQUE",children:"Cheque"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid () *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:Number(m.final_amount||0),required:!0,value:p.amount_paid,onChange:A=>X(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Outstanding: ",Number(Number(m.final_amount||0)-Number(p.amount_paid||0)).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount ()"}),e.jsx("input",{type:"number",step:"0.01",value:p.discount,onChange:A=>c({...p,discount:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price ()"}),e.jsx("input",{type:"number",step:"0.01",value:p.unit_price,onChange:A=>c({...p,unit_price:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:p.notes,onChange:A=>c({...p,notes:A.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{y(null),c(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Update Sale"})]})]})]})})]})}function Wx(){const[i,o]=f.useState({batches:[],inventory:[],sales:[],summary:null}),[u,v]=f.useState(!0),[k,N]=f.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});f.useEffect(()=>{w()},[k]);const w=async()=>{try{const x=new URLSearchParams({date_from:k.from,date_to:k.to}),E=new URLSearchParams({date_from:k.from,date_to:k.to,per_page:"1000"}),[b,D,C,I]=await Promise.all([B.get(`/api/v1/gari-production-batches?${x.toString()}`),B.get("/api/v1/gari-inventory?status=IN_STOCK"),B.get(`/api/v1/gari-sales?${E.toString()}`),B.get(`/api/v1/gari-sales/summary?${x.toString()}`)]),m=Array.isArray(b.data.data)?b.data.data:Array.isArray(b.data)?b.data:[],y=Array.isArray(D.data.data)?D.data.data:Array.isArray(D.data)?D.data:[];let p=[];C.data.data&&Array.isArray(C.data.data)?p=C.data.data:Array.isArray(C.data)&&(p=C.data),console.log("Summary API Response:",I.data),console.log("Date Range:",k),console.log("Sales Response:",C.data);const c=I.data.overall||{},O=I.data.data||I.data;console.log("Overall Summary:",c),console.log("Sales array length:",p.length),console.log("Sample sale (first):",p[0]);const V=m.reduce((de,pe)=>de+(Number(pe.cassava_quantity_kg)||0),0),z=m.reduce((de,pe)=>de+(Number(pe.gari_produced_kg)||0),0),h=V>0?z/V*100:0,M=m.length>0?m.reduce((de,pe)=>de+(Number(pe.cost_per_kg_gari)||0),0)/m.length:0,T=c.total_revenue!==void 0?c.total_revenue:p.reduce((de,pe)=>de+(Number(pe.final_amount)||0),0),$=c.total_margin!==void 0?c.total_margin:p.reduce((de,pe)=>de+(Number(pe.gross_margin)||0),0),H=c.total_kg_sold!==void 0?c.total_kg_sold:p.reduce((de,pe)=>de+(Number(pe.quantity_kg)||0),0),ce=c.avg_price_per_kg!==void 0?c.avg_price_per_kg:(()=>{let de=0,pe=0;return p.forEach(X=>{const te=Number(X.quantity_kg)||0,ee=Number(X.unit_price)||0;te>0&&ee>0&&(de+=ee*te,pe+=te)}),pe>0?de/pe:0})();console.log("Calculated KPIs:",{totalRevenue:T,totalMargin:$,totalSalesVolumeKg:H,avgPricePerKg:ce,totalSales:c.total_sales!==void 0?c.total_sales:p.length});const g=y.reduce((de,pe)=>de+(Number(pe.quantity_kg)||0),0),re={totalCassava:V,totalGari:z,avgYield:h,avgCostPerKg:M,totalRevenue:T,totalMargin:$,totalStock:g,avgPricePerKg:ce,totalSalesVolumeKg:H,totalBatches:m.length,totalSales:c.total_sales!==void 0?c.total_sales:p.length};console.log("Setting KPIs summary:",re),o({batches:m,inventory:y,sales:p,summary:re})}catch(x){console.error("Error fetching KPI data:",x)}finally{v(!1)}};if(u)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const S=i.summary||{};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Production KPIs"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Key performance indicators for gari production"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:k.from,onChange:x=>N({...k,from:x.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:k.to,onChange:x=>N({...k,to:x.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conversion Yield"}),e.jsx(yt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(S.avgYield||0).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target: 22-30%"}),S.avgYield&&e.jsx("div",{className:`mt-2 text-xs ${S.avgYield>=22&&S.avgYield<=30?"text-green-600":S.avgYield<22?"text-red-600":"text-yellow-600"}`,children:S.avgYield<22?" Below target":S.avgYield>30?" Above target":" On target"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cost per kg"}),e.jsx(or,{className:"h-5 w-5 text-blue-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(S.avgCostPerKg||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Average production cost"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Stock on Hand"}),e.jsx(ut,{className:"h-5 w-5 text-purple-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(S.totalStock||0).toFixed(2)," kg"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Current inventory"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sales Volume"}),e.jsx(yt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(S.totalSalesVolumeKg||0).toFixed(2)," kg"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total kg sold in period"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Selling Price"}),e.jsx(or,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(S.avgPricePerKg||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Per kg"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),e.jsx(or,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(S.totalMargin||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Number(S.totalRevenue||0)>0?Number(Number(S.totalMargin||0)/Number(S.totalRevenue||1)*100).toFixed(1)+"% margin":"No sales"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(nt,{className:"h-5 w-5 mr-2 text-orange-600"}),"Production Summary"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Batches"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:S.totalBatches||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cassava Processed"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(S.totalCassava||0).toFixed(2)," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Gari Produced"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(S.totalGari||0).toFixed(2)," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Yield"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(S.avgYield||0).toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(or,{className:"h-5 w-5 mr-2 text-green-600"}),"Sales Summary"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(S.totalRevenue||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Margin"}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["",Number(S.totalMargin||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Price"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(S.avgPricePerKg||0).toFixed(2),"/kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Sales"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:S.totalSales||0})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Production Batches"})}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[i.batches.slice(0,5).map(x=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:x.batch_code}),e.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(x.processing_date).toLocaleDateString()," ",x.cassava_quantity_kg," kg cassava  ",x.gari_produced_kg," kg gari"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-green-600",children:[x.conversion_yield_percent!=null?Number(x.conversion_yield_percent).toFixed(1):"0","% yield"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["",x.cost_per_kg_gari!=null?Number(x.cost_per_kg_gari).toFixed(2):"0","/kg"]})]})]})},x.id)),i.batches.length===0&&e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No production batches in this period"})]})]})]})}function Kx(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState(!0),[w,S]=f.useState(!1),[x,E]=f.useState({farm_id:"",name:"",material_type:"POUCH",size:"",unit:"pieces",opening_balance:0,quantity_purchased:0,quantity_used:0,cost_per_unit:"",notes:""});f.useEffect(()=>{b()},[]);const b=async()=>{try{const[m,y]=await Promise.all([B.get("/api/v1/packaging-materials"),B.get("/api/v1/farms")]);o(m.data.data||m.data),v(y.data.data||y.data)}catch(m){console.error("Error fetching data:",m)}finally{N(!1)}},D=async()=>{try{const m=await B.get("/api/v1/farms");v(m.data.data||m.data)}catch(m){console.error("Error fetching farms:",m)}},C=()=>{S(!0),D()},I=async m=>{m.preventDefault();try{await B.post("/api/v1/packaging-materials",x),S(!1),b()}catch(y){alert("Error creating material: "+(y.response?.data?.message||"Unknown error"))}};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Packaging Materials"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track packaging inventory"})]}),e.jsxs("button",{onClick:C,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"Add Material"]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(gx,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No packaging materials yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first packaging material to get started"}),e.jsx("button",{onClick:C,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Add Material"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Opening"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purchased"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Used"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Closing"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[m.name,m.size&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",m.size,")"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.material_type}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[m.opening_balance," ",m.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[m.quantity_purchased," ",m.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[m.quantity_used," ",m.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:[m.closing_balance," ",m.unit]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.total_cost?`${m.total_cost.toFixed(2)}`:"N/A"})]},m.id))})]})})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Packaging Material"}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:x.farm_id,onChange:m=>E({...x,farm_id:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(m=>e.jsx("option",{value:m.id,children:m.name},m.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:m=>E({...x,name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1kg Pouch"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{required:!0,value:x.material_type,onChange:m=>E({...x,material_type:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"POUCH",children:"Pouch"}),e.jsx("option",{value:"SACK",children:"Sack"}),e.jsx("option",{value:"LABEL",children:"Label"}),e.jsx("option",{value:"SEALING_ROLL",children:"Sealing Roll"}),e.jsx("option",{value:"CARTON",children:"Carton"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),e.jsx("input",{type:"text",value:x.size,onChange:m=>E({...x,size:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1kg"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opening"}),e.jsx("input",{type:"number",step:"0.01",value:x.opening_balance,onChange:m=>E({...x,opening_balance:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchased"}),e.jsx("input",{type:"number",step:"0.01",value:x.quantity_purchased,onChange:m=>E({...x,quantity_purchased:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Used"}),e.jsx("input",{type:"number",step:"0.01",value:x.quantity_used,onChange:m=>E({...x,quantity_used:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per Unit ()"}),e.jsx("input",{type:"number",step:"0.01",value:x.cost_per_unit,onChange:m=>E({...x,cost_per_unit:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Material"})]})]})]})})]})}function Qx(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState(!0),[w,S]=f.useState(!1),[x,E]=f.useState({farm_id:"",loss_date:new Date().toISOString().slice(0,10),loss_type:"SPOILAGE",gari_type:"WHITE",packaging_type:"1KG_POUCH",quantity_kg:"",cost_per_kg:"",description:"",notes:""});f.useEffect(()=>{b()},[]);const b=async()=>{try{const[y,p]=await Promise.all([B.get("/api/v1/gari-waste-losses"),B.get("/api/v1/farms")]);o(y.data.data||y.data),v(p.data.data||p.data)}catch(y){console.error("Error fetching data:",y)}finally{N(!1)}},D=async()=>{try{const y=await B.get("/api/v1/farms");v(y.data.data||y.data)}catch(y){console.error("Error fetching farms:",y)}},C=()=>{S(!0),D()},I=async y=>{y.preventDefault();try{await B.post("/api/v1/gari-waste-losses",x),S(!1),b()}catch(p){alert("Error creating loss record: "+(p.response?.data?.message||"Unknown error"))}};if(k)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const m=i.reduce((y,p)=>y+(p.total_loss_value||0),0);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Waste & Losses"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track waste and losses in gari production"})]}),e.jsxs("button",{onClick:C,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"Record Loss"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Loss Value"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["",m.toFixed(2)]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Tx,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No waste/loss records yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Record waste and losses to track efficiency"}),e.jsx("button",{onClick:C,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:"Record Loss"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Loss Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Loss Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(y.loss_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:y.loss_type.replace("_"," ")})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[y.gari_type,"  ",y.packaging_type?.replace("_"," ")]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[y.quantity_kg," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600",children:["",y.total_loss_value?.toFixed(2)||"0.00"]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:y.description||"-"})]},y.id))})]})})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Record Waste/Loss"}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:x.farm_id,onChange:y=>E({...x,farm_id:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loss Date *"}),e.jsx("input",{type:"date",required:!0,value:x.loss_date,onChange:y=>E({...x,loss_date:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loss Type *"}),e.jsxs("select",{required:!0,value:x.loss_type,onChange:y=>E({...x,loss_type:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"SPOILAGE",children:"Spoilage"}),e.jsx("option",{value:"MOISTURE_DAMAGE",children:"Moisture Damage"}),e.jsx("option",{value:"SPILLAGE",children:"Spillage"}),e.jsx("option",{value:"REJECTED_BATCH",children:"Rejected Batch"}),e.jsx("option",{value:"CUSTOMER_RETURN",children:"Customer Return"}),e.jsx("option",{value:"THEFT",children:"Theft"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type"}),e.jsxs("select",{value:x.gari_type,onChange:y=>E({...x,gari_type:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packaging"}),e.jsxs("select",{value:x.packaging_type,onChange:y=>E({...x,packaging_type:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),e.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),e.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),e.jsx("option",{value:"50KG_BAG",children:"50kg Bag"}),e.jsx("option",{value:"BULK",children:"Bulk"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:x.quantity_kg,onChange:y=>E({...x,quantity_kg:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ()"}),e.jsx("input",{type:"number",step:"0.01",value:x.cost_per_kg,onChange:y=>E({...x,cost_per_kg:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:y=>E({...x,description:y.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Describe the loss..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Record Loss"})]})]})]})})]})}function Yx(){const[i,o]=f.useState([]),[u,v]=f.useState({totalRevenue:0,totalMargin:0,totalSales:0,byCrop:{}}),[k,N]=f.useState(!0),[w,S]=f.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});f.useEffect(()=>{x()},[w]);const x=async()=>{try{N(!0);const[E]=await Promise.all([B.get(`/api/v1/gari-sales/summary?date_from=${w.from}&date_to=${w.to}`).catch(()=>({data:{overall:{}}}))]),b=E.data?.overall||{};v({totalRevenue:Number(b.total_revenue||0),totalMargin:Number(b.total_margin||0),totalSales:Number(b.total_sales||0),byCrop:{gari:{revenue:Number(b.total_revenue||0),margin:Number(b.total_margin||0),sales:Number(b.total_sales||0)},bellPepper:{revenue:0,margin:0,sales:0},tomatoes:{revenue:0,margin:0,sales:0},habaneros:{revenue:0,margin:0,sales:0}}})}catch(E){console.error("Error fetching sales data:",E)}finally{N(!1)}};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Sales"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Sales across all crops and livestock"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:w.from,onChange:E=>S({...w,from:E.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:w.to,onChange:E=>S({...w,to:E.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx(or,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(u.totalRevenue||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),e.jsx(yt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(u.totalMargin||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Sales"}),e.jsx(ut,{className:"h-5 w-5 text-blue-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:u.totalSales})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Sales by Crop"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sales Count"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(u.byCrop).map(([E,b])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:E==="bellPepper"?"Bell Pepper":E}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(b.revenue||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(b.margin||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b.sales})]},E))})]})})]})]})}function Xx(){const[i,o]=f.useState({total:0,byCrop:{},byCategory:{}}),[u,v]=f.useState(!0),[k,N]=f.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});f.useEffect(()=>{w()},[k]);const w=async()=>{try{v(!0);const[S]=await Promise.all([B.get(`/api/v1/gari-production-batches?date_from=${k.from}&date_to=${k.to}`).catch(()=>({data:{data:[]}}))]),E=(Array.isArray(S.data?.data)?S.data.data:[]).reduce((b,D)=>b+Number(D.total_cost||0),0);o({total:E,byCrop:{gari:E,bellPepper:0,tomatoes:0,habaneros:0},byCategory:{production:E,labor:0,materials:0,other:0}})}catch(S){console.error("Error fetching expenses data:",S)}finally{v(!1)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Expenses"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Expenses across all crops and activities"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:k.from,onChange:S=>N({...k,from:S.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:k.to,onChange:S=>N({...k,to:S.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx(_i,{className:"h-5 w-5 text-red-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(i.total||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Expenses by Crop"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Percentage"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(i.byCrop).map(([S,x])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:S==="bellPepper"?"Bell Pepper":S}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(x||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.total>0?Number(x/i.total*100).toFixed(1)+"%":"0%"})]},S))})]})})]})]})}function Zx(){const[i,o]=f.useState([]),[u,v]=f.useState({}),[k,N]=f.useState(!0),[w,S]=f.useState({from:new Date(Date.now()-10080*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});f.useEffect(()=>{x()},[w]);const x=async()=>{try{N(!0),o([]),v({totalHours:0,byStaff:{},byCrop:{}})}catch(E){console.error("Error fetching allocations:",E)}finally{N(!1)}};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Staff Allocation Report"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Time allocation across all activities"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:w.from,onChange:E=>S({...w,from:E.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:w.to,onChange:E=>S({...w,to:E.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center text-gray-500",children:[e.jsx(pi,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"Staff allocation reporting coming soon"}),e.jsx("p",{className:"text-sm mt-2",children:"This will show time allocation by staff, crop, and activity type"})]})]})}function Ct({cropName:i,basePath:o}){const u=[{name:"Production",path:`${o}-production`,icon:nt},{name:"Inventory",path:`${o}-inventory`,icon:ut},{name:"Sales",path:`${o}-sales`,icon:Yr},{name:"KPIs",path:`${o}-kpis`,icon:yt}];return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[i," Management"]}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Coming soon - ",i," tracking and management"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map(v=>e.jsxs(vt,{to:`/${v.path}`,className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx(v.icon,{className:"h-8 w-8 text-green-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v.name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["View ",v.name.toLowerCase()," for ",i]})]},v.path))}),e.jsxs("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Feature Coming Soon"}),e.jsxs("p",{className:"text-yellow-700",children:["The ",i," management module is under development. This will include production tracking, inventory management, sales tracking, and performance KPIs specific to ",i,"."]})]})]})}function Jx(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState([]),[w,S]=f.useState(!0),[x,E]=f.useState(!1),[b,D]=f.useState(null),[C,I]=f.useState(!1),[m,y]=f.useState(""),[p,c]=f.useState(""),[O,V]=f.useState(""),[z,h]=f.useState({site_id:"",name:"",type:"POLYHOUSE",status:"ACTIVE",length:"",width:"",height:"",orientation:"",plant_capacity:"",primary_crop_type:"",cropping_system:"",notes:"",track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1});f.useEffect(()=>{M()},[m,p,O]);const M=async()=>{try{const g=new URLSearchParams;m&&g.append("search",m),p&&g.append("status",p),O&&g.append("type",O);const[re,de,pe]=await Promise.all([B.get(`/api/v1/greenhouses?${g.toString()}`),B.get("/api/v1/sites?per_page=1000"),B.get("/api/v1/asset-categories?per_page=1000")]),X=re.data,te=X?.data||(Array.isArray(X)?X:[]);o(te);const ee=de.data,A=ee?.data||(Array.isArray(ee)?ee:[]);v(A);let G=[];pe.data&&(Array.isArray(pe.data)?G=pe.data:pe.data.data&&Array.isArray(pe.data.data)&&(G=pe.data.data)),N(G)}catch(g){console.error("Error fetching data:",g),alert("Error loading data: "+(g.response?.data?.message||g.message))}finally{S(!1)}},T=()=>{E(!0),D(null),I(!1),h({site_id:"",name:"",type:"POLYHOUSE",status:"ACTIVE",length:"",width:"",height:"",orientation:"",plant_capacity:"",primary_crop_type:"",cropping_system:"",notes:"",track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1})},$=g=>{D(g);const re=!!g.asset_id;I(re),h({site_id:g.site?.id||"",name:g.name||"",type:g.type||"POLYHOUSE",status:g.status||(g.is_active?"ACTIVE":"INACTIVE"),length:g.length||"",width:g.width||"",height:g.height||"",orientation:g.orientation||"",plant_capacity:g.plant_capacity||"",primary_crop_type:g.primary_crop_type||"",cropping_system:g.cropping_system||"",notes:g.notes||"",track_as_asset:re,asset_category_id:g.asset?.asset_category_id||"",asset_description:g.asset?.description||"",asset_acquisition_type:g.asset?.acquisition_type||"",asset_purchase_date:g.asset?.purchase_date?new Date(g.asset.purchase_date).toISOString().slice(0,10):"",asset_purchase_cost:g.asset?.purchase_cost||"",asset_currency:g.asset?.currency||"NGN",asset_supplier_name:g.asset?.supplier_name||"",asset_serial_number:g.asset?.serial_number||"",asset_model:g.asset?.model||"",asset_manufacturer:g.asset?.manufacturer||"",asset_year_of_make:g.asset?.year_of_make||"",asset_warranty_expiry:g.asset?.warranty_expiry?new Date(g.asset.warranty_expiry).toISOString().slice(0,10):"",asset_is_trackable:g.asset?.is_trackable||!1}),E(!0)},H=async g=>{g.preventDefault();try{const re={...z};re.track_as_asset=C,C||Object.keys(re).forEach(de=>{de.startsWith("asset_")&&delete re[de]}),b?await B.patch(`/api/v1/greenhouses/${b.id}`,re):await B.post("/api/v1/greenhouses",re),E(!1),M()}catch(re){const de=re.response?.data?.message||(re.response?.data?.errors?JSON.stringify(re.response.data.errors):"")||re.message;alert("Error saving greenhouse: "+de)}},ce=async g=>{if(confirm("Are you sure you want to delete this greenhouse?"))try{await B.delete(`/api/v1/greenhouses/${g}`),M()}catch(re){alert("Error deleting greenhouse: "+(re.response?.data?.message||re.message))}};return w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Greenhouse Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage greenhouses across all sites"})]}),e.jsxs("button",{onClick:T,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"New Greenhouse"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Rx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:m,onChange:g=>y(g.target.value),placeholder:"Search by name or code...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:p,onChange:g=>c(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"DECOMMISSIONED",children:"Decommissioned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:O,onChange:g=>V(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"TUNNEL",children:"Tunnel"}),e.jsx("option",{value:"GLASSHOUSE",children:"Glasshouse"}),e.jsx("option",{value:"POLYHOUSE",children:"Polyhouse"}),e.jsx("option",{value:"SHADE_HOUSE",children:"Shade House"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{y(""),c(""),V("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear Filters"})})]})}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(nt,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No greenhouses found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first greenhouse to get started"}),e.jsx("button",{onClick:T,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Greenhouse"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area (m)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(g=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g.greenhouse_code||g.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.site?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.farm?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.type||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${g.status==="ACTIVE"?"bg-green-100 text-green-800":g.status==="MAINTENANCE"?"bg-yellow-100 text-yellow-800":g.status==="DECOMMISSIONED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:g.status||(g.is_active?"ACTIVE":"INACTIVE")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.total_area?Number(g.total_area).toFixed(2):g.size_sqm?Number(g.size_sqm).toFixed(2):"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>$(g),className:"text-green-600 hover:text-green-900 mr-4",children:e.jsx(He,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ce(g.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ze,{className:"h-4 w-4"})})]})]},g.id))})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:b?"Edit Greenhouse":"Create Greenhouse"}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site *"}),e.jsxs("select",{required:!0,value:z.site_id,onChange:g=>h({...z,site_id:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select site"}),u.map(g=>e.jsxs("option",{value:g.id,children:[g.name," (",g.farm?.name||"No Farm",")"]},g.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Farm will be automatically set from the selected site. Greenhouse code will be auto-generated."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:z.name,onChange:g=>h({...z,name:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{required:!0,value:z.type,onChange:g=>h({...z,type:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"TUNNEL",children:"Tunnel"}),e.jsx("option",{value:"GLASSHOUSE",children:"Glasshouse"}),e.jsx("option",{value:"POLYHOUSE",children:"Polyhouse"}),e.jsx("option",{value:"SHADE_HOUSE",children:"Shade House"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:z.status,onChange:g=>h({...z,status:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"DECOMMISSIONED",children:"Decommissioned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Length (m) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:z.length,onChange:g=>h({...z,length:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width (m) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:z.width,onChange:g=>h({...z,width:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height (m)"}),e.jsx("input",{type:"number",step:"0.01",value:z.height,onChange:g=>h({...z,height:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orientation"}),e.jsxs("select",{value:z.orientation,onChange:g=>h({...z,orientation:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select orientation"}),e.jsx("option",{value:"N_S",children:"North-South"}),e.jsx("option",{value:"E_W",children:"East-West"}),e.jsx("option",{value:"NE_SW",children:"Northeast-Southwest"}),e.jsx("option",{value:"NW_SE",children:"Northwest-Southeast"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plant Capacity"}),e.jsx("input",{type:"number",value:z.plant_capacity,onChange:g=>h({...z,plant_capacity:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Crop Type"}),e.jsx("input",{type:"text",value:z.primary_crop_type,onChange:g=>h({...z,primary_crop_type:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Bell Pepper"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cropping System"}),e.jsxs("select",{value:z.cropping_system,onChange:g=>h({...z,cropping_system:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select system"}),e.jsx("option",{value:"SOIL",children:"Soil"}),e.jsx("option",{value:"COCOPEAT",children:"Cocopeat"}),e.jsx("option",{value:"HYDROPONIC",children:"Hydroponic"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:g=>{I(g.target.checked),h({...z,track_as_asset:g.target.checked})},className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Track as Asset"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check this box to create an asset record for this greenhouse. You can enter asset details below."})]}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:col-span-2 border-t pt-4 mt-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asset Information"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Category"}),e.jsxs("select",{value:z.asset_category_id,onChange:g=>h({...z,asset_category_id:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select category"}),k.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:z.asset_acquisition_type,onChange:g=>h({...z,asset_acquisition_type:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:z.asset_purchase_date,onChange:g=>h({...z,asset_purchase_date:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:z.asset_purchase_cost,onChange:g=>h({...z,asset_purchase_cost:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",maxLength:3,value:z.asset_currency,onChange:g=>h({...z,asset_currency:g.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"NGN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:z.asset_supplier_name,onChange:g=>h({...z,asset_supplier_name:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:z.asset_serial_number,onChange:g=>h({...z,asset_serial_number:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",value:z.asset_model,onChange:g=>h({...z,asset_model:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:z.asset_manufacturer,onChange:g=>h({...z,asset_manufacturer:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year of Make"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,value:z.asset_year_of_make,onChange:g=>h({...z,asset_year_of_make:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty Expiry"}),e.jsx("input",{type:"date",value:z.asset_warranty_expiry,onChange:g=>h({...z,asset_warranty_expiry:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Description"}),e.jsx("textarea",{value:z.asset_description,onChange:g=>h({...z,asset_description:g.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:z.asset_is_trackable,onChange:g=>h({...z,asset_is_trackable:g.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Is Trackable"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:z.notes,onChange:g=>h({...z,notes:g.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:b?"Update":"Create"})]})]})]})})]})}function eg(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState([]),[w,S]=f.useState(!0),[x,E]=f.useState(!1),[b,D]=f.useState({farm_id:"",greenhouse_id:"",start_date:new Date().toISOString().slice(0,10),expected_end_date:"",expected_yield_kg:"",notes:""});f.useEffect(()=>{C()},[]);const C=async()=>{try{const[c,O]=await Promise.all([B.get("/api/v1/bell-pepper-cycles"),B.get("/api/v1/farms")]),V=c.data?.data||c.data||[],z=O.data?.data||O.data||[];o(Array.isArray(V)?V:[]),v(Array.isArray(z)?z:[])}catch(c){console.error("Error fetching data:",c)}finally{S(!1)}},I=async c=>{if(!c){N([]);return}try{const O=await B.get(`/api/v1/greenhouses?farm_id=${c}`),V=O.data?.data||O.data||[];N(Array.isArray(V)?V:[])}catch(O){console.error("Error fetching greenhouses:",O),N([])}},m=()=>{D({farm_id:"",greenhouse_id:"",start_date:new Date().toISOString().slice(0,10),expected_end_date:"",expected_yield_kg:"",notes:""}),N([]),E(!0)},y=c=>{D({...b,farm_id:c,greenhouse_id:""}),I(c)},p=async c=>{c.preventDefault();try{await B.post("/api/v1/bell-pepper-cycles",b),E(!1),C()}catch(O){alert("Error creating cycle: "+(O.response?.data?.message||"Unknown error"))}};return w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bell Pepper Production Cycles"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track production cycles and yield per sqm"})]}),e.jsxs("button",{onClick:m,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"New Cycle"]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(nt,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cycles yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production cycle to get started"}),e.jsx("button",{onClick:m,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Cycle"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cycle Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Greenhouse"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Start Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expected Yield"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actual Yield"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Yield/Sqm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Variance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(c=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.jsx(vt,{to:`/bell-pepper-cycles/${c.id}`,className:"text-green-600 hover:text-green-700",children:c.cycle_code})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.greenhouse?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(c.start_date).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(c.expected_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(c.actual_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(c.actual_yield_per_sqm||0).toFixed(2)," kg/sqm"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("span",{className:`${Number(c.yield_variance_percent||0)>=0?"text-green-600":"text-red-600"}`,children:[Number(c.yield_variance_percent||0).toFixed(1),"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${c.status==="COMPLETED"?"bg-green-100 text-green-800":c.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:c.status})})]},c.id))})]})})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Production Cycle"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:b.farm_id,onChange:c=>y(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse *"}),e.jsxs("select",{required:!0,disabled:!b.farm_id||k.length===0,value:b.greenhouse_id,onChange:c=>D({...b,greenhouse_id:c.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${!b.farm_id||k.length===0?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`,children:[e.jsx("option",{value:"",children:b.farm_id?k.length===0?"No greenhouses available":"Select greenhouse":"Select farm first"}),k.map(c=>e.jsxs("option",{value:c.id,children:[c.name," (",c.size_sqm," sqm)"]},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),e.jsx("input",{type:"date",required:!0,value:b.start_date,onChange:c=>{const O=c.target.value;D({...b,start_date:O,expected_end_date:O?new Date(new Date(O).getTime()+4320*60*60*1e3).toISOString().slice(0,10):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected End Date *"}),e.jsx("input",{type:"date",required:!0,value:b.expected_end_date,onChange:c=>D({...b,expected_end_date:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"6 months from start date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Yield (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:b.expected_yield_kg,onChange:c=>D({...b,expected_yield_kg:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:b.notes,onChange:c=>D({...b,notes:c.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Cycle"})]})]})]})})]})}function tg(){const{id:i}=ji(),[o,u]=f.useState(null),[v,k]=f.useState([]),[N,w]=f.useState([]),[S,x]=f.useState(!0),[E,b]=f.useState(!1),[D,C]=f.useState(!1),[I,m]=f.useState(null),[y,p]=f.useState({cost_type:"SEEDS",description:"",quantity:"",unit:"",unit_cost:"",total_cost:"",cost_date:new Date().toISOString().slice(0,10),staff_id:"",hours_allocated:"",notes:""}),[c,O]=f.useState({harvest_date:new Date().toISOString().slice(0,10),weight_kg:"",crates_count:"",grade:"MIXED",status:"HARVESTED",notes:""});f.useEffect(()=>{V()},[i]);const V=async()=>{try{const[H,ce,g]=await Promise.all([B.get(`/api/v1/bell-pepper-cycles/${i}`),B.get(`/api/v1/bell-pepper-cycle-costs?bell_pepper_cycle_id=${i}`),B.get(`/api/v1/bell-pepper-harvests?bell_pepper_cycle_id=${i}`)]),re=H.data?.data||H.data,de=ce.data?.data||ce.data||[],pe=g.data?.data||g.data||[];u(re),k(Array.isArray(de)?de:[]),w(Array.isArray(pe)?pe:[])}catch(H){console.error("Error fetching cycle data:",H)}finally{x(!1)}},z=async H=>{H.preventDefault();try{const ce={...y,bell_pepper_cycle_id:i,farm_id:o?.farm_id};I?await B.put(`/api/v1/bell-pepper-cycle-costs/${I.id}`,ce):await B.post("/api/v1/bell-pepper-cycle-costs",ce),b(!1),m(null),V()}catch(ce){alert("Error saving cost: "+(ce.response?.data?.message||"Unknown error"))}},h=async H=>{H.preventDefault();try{const ce={...c,farm_id:o?.farm_id,bell_pepper_cycle_id:i,greenhouse_id:o?.greenhouse_id};await B.post("/api/v1/bell-pepper-harvests",ce),C(!1),V()}catch(ce){alert("Error saving harvest: "+(ce.response?.data?.message||"Unknown error"))}},M=async H=>{if(confirm("Are you sure you want to delete this cost?"))try{await B.delete(`/api/v1/bell-pepper-cycle-costs/${H}`),V()}catch(ce){alert("Error deleting cost: "+(ce.response?.data?.message||"Unknown error"))}};if(S)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});if(!o)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Cycle not found"}),e.jsx(vt,{to:"/bell-pepper-production",className:"text-green-600 hover:text-green-700",children:" Back to Cycles"})]});const T=[{value:"SEEDS",label:"Seeds"},{value:"FERTILIZER_CHEMICALS",label:"Fertilizer/Chemicals"},{value:"FUEL_WATER_PUMPING",label:"Fuel (Water Pumping)"},{value:"LABOUR_DEDICATED",label:"Labour (Dedicated)"},{value:"LABOUR_SHARED",label:"Labour (Shared)"},{value:"SPRAY_GUNS",label:"Spray Guns"},{value:"IRRIGATION_EQUIPMENT",label:"Irrigation Equipment"},{value:"PROTECTIVE_CLOTHING",label:"Protective Clothing"},{value:"GREENHOUSE_AMORTIZATION",label:"Greenhouse Amortization"},{value:"BOREHOLE_AMORTIZATION",label:"Borehole Amortization"},{value:"LOGISTICS",label:"Logistics"},{value:"OTHER",label:"Other"}],$=v.reduce((H,ce)=>H+Number(ce.total_cost||0),0);return N.reduce((H,ce)=>H+Number(ce.weight_kg||0),0),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(vt,{to:"/bell-pepper-production",className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(Ni,{className:"h-5 w-5 mr-2"}),"Back to Cycles"]}),o.status!=="COMPLETED"&&e.jsxs("button",{onClick:()=>{alert("Cycle update coming soon")},className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(He,{className:"h-5 w-5 mr-2"}),"Edit Cycle"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(nt,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o.cycle_code}),e.jsxs("p",{className:"text-gray-600",children:[o.greenhouse?.name,"  ",o.farm?.name]})]})]}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded ${o.status==="COMPLETED"?"bg-green-100 text-green-800":o.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:o.status})]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Expected Yield"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Number(o.expected_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Number(o.expected_yield_per_sqm||0).toFixed(2)," kg/sqm"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Actual Yield"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Number(o.actual_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Number(o.actual_yield_per_sqm||0).toFixed(2)," kg/sqm"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Yield Variance"}),e.jsxs("p",{className:`text-lg font-semibold ${Number(o.yield_variance_percent||0)>=0?"text-green-600":"text-red-600"}`,children:[Number(o.yield_variance_percent||0).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Costs"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",Number($||0).toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Costs"}),e.jsxs("button",{onClick:()=>{m(null),p({cost_type:"SEEDS",description:"",quantity:"",unit:"",unit_cost:"",total_cost:"",cost_date:new Date().toISOString().slice(0,10),staff_id:"",hours_allocated:"",notes:""}),b(!0)},className:"bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 flex items-center text-sm",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),"Add Cost"]})]}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[v.map(H=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:T.find(ce=>ce.value===H.cost_type)?.label||H.cost_type}),H.description&&e.jsx("p",{className:"text-sm text-gray-600",children:H.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(H.cost_date).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",Number(H.total_cost||0).toFixed(2)]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>{m(H),p({cost_type:H.cost_type,description:H.description||"",quantity:H.quantity||"",unit:H.unit||"",unit_cost:H.unit_cost||"",total_cost:H.total_cost||"",cost_date:H.cost_date?new Date(H.cost_date).toISOString().slice(0,10):new Date().toISOString().slice(0,10),staff_id:H.staff_id||"",hours_allocated:H.hours_allocated||"",notes:H.notes||""}),b(!0)},className:"text-green-600 hover:text-green-700",children:e.jsx(He,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>M(H.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Ze,{className:"h-4 w-4"})})]})]})]})},H.id)),v.length===0&&e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No costs recorded yet"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Harvests"}),e.jsxs("button",{onClick:()=>{O({harvest_date:new Date().toISOString().slice(0,10),weight_kg:"",crates_count:"",grade:"MIXED",status:"HARVESTED",notes:""}),C(!0)},className:"bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 flex items-center text-sm",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),"Add Harvest"]})]}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[N.map(H=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:H.harvest_code}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Number(H.weight_kg||0).toFixed(2)," kg  ",H.crates_count," crates"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(H.harvest_date).toLocaleDateString(),"  Grade: ",H.grade]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${H.status==="SOLD"?"bg-green-100 text-green-800":H.status==="DELIVERED"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:H.status})]})},H.id)),N.length===0&&e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No harvests recorded yet"})]})]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:I?"Edit Cost":"Add Cost"}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Type *"}),e.jsx("select",{required:!0,value:y.cost_type,onChange:H=>p({...y,cost_type:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:T.map(H=>e.jsx("option",{value:H.value,children:H.label},H.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Date *"}),e.jsx("input",{type:"date",required:!0,value:y.cost_date,onChange:H=>p({...y,cost_date:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:y.description,onChange:H=>p({...y,description:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Cost () *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:y.total_cost,onChange:H=>p({...y,total_cost:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),(y.cost_type==="SEEDS"||y.cost_type==="FERTILIZER_CHEMICALS")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",step:"0.01",value:y.quantity,onChange:H=>p({...y,quantity:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("input",{type:"text",value:y.unit,onChange:H=>p({...y,unit:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"kg, litres, etc"})]})]}),(y.cost_type==="LABOUR_DEDICATED"||y.cost_type==="LABOUR_SHARED")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours Allocated"}),e.jsx("input",{type:"number",step:"0.5",value:y.hours_allocated,onChange:H=>p({...y,hours_allocated:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:y.notes,onChange:H=>p({...y,notes:H.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{b(!1),m(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[I?"Update":"Add"," Cost"]})]})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Harvest"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Date *"}),e.jsx("input",{type:"date",required:!0,value:c.harvest_date,onChange:H=>O({...c,harvest_date:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.weight_kg,onChange:H=>{const ce=H.target.value;O({...c,weight_kg:ce,crates_count:ce?Math.ceil(ce/9.5):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crates Count"}),e.jsx("input",{type:"number",value:c.crates_count,onChange:H=>O({...c,crates_count:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated (9-10kg per crate)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade *"}),e.jsxs("select",{required:!0,value:c.grade,onChange:H=>O({...c,grade:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"A",children:"Grade A"}),e.jsx("option",{value:"B",children:"Grade B"}),e.jsx("option",{value:"C",children:"Grade C"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:c.status,onChange:H=>O({...c,status:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"HARVESTED",children:"Harvested"}),e.jsx("option",{value:"PACKED",children:"Packed"}),e.jsx("option",{value:"IN_TRANSIT",children:"In Transit"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"}),e.jsx("option",{value:"SOLD",children:"Sold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:c.notes,onChange:H=>O({...c,notes:H.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Harvest"})]})]})]})})]})}function rg(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState([]),[w,S]=f.useState([]),[x,E]=f.useState([]),[b,D]=f.useState(!0),C=(j,Q=2)=>{const se=Number(j);return isNaN(se)||se===null||se===void 0?"0.00":se.toFixed(Q)},[I,m]=f.useState(!1),[y,p]=f.useState(!1),[c,O]=f.useState({farm_id:"",bell_pepper_cycle_id:"",greenhouse_id:"",harvest_date:new Date().toISOString().slice(0,10),grade_a_kg:"0",grade_b_kg:"0",grade_c_kg:"0",crates_count:"",notes:""}),[V,z]=f.useState({farm_id:"",cycle_id:"",greenhouse_id:""}),[h,M]=f.useState(null);f.useEffect(()=>{T()},[V]),f.useEffect(()=>{if(h&&h.start_date&&c.harvest_date){const j=te(c.harvest_date,h);console.log("useEffect validation:",j,"showPopup:",!j.valid),p(!j.valid)}else p(!1)},[h,c.harvest_date]);const T=async()=>{try{const j=new URLSearchParams;V.farm_id&&j.append("farm_id",V.farm_id),V.cycle_id&&j.append("bell_pepper_cycle_id",V.cycle_id),V.greenhouse_id&&j.append("greenhouse_id",V.greenhouse_id);const[Q,se,xe]=await Promise.all([B.get(`/api/v1/bell-pepper-harvests?${j.toString()}`),B.get("/api/v1/bell-pepper-cycles?per_page=1000"),B.get("/api/v1/farms?per_page=1000")]),he=Q.data?.data||(Array.isArray(Q.data)?Q.data:[]),je=se.data?.data||(Array.isArray(se.data)?se.data:[]),be=xe.data?.data||(Array.isArray(xe.data)?xe.data:[]);o(Array.isArray(he)?he:[]),v(Array.isArray(je)?je:[]),S(Array.isArray(be)?be:[])}catch(j){console.error("Error fetching data:",j)}finally{D(!1)}},$=async j=>{if(!j){E([]);return}try{const Q=await B.get(`/api/v1/greenhouses?farm_id=${j}`),se=Q.data?.data||Q.data||[];E(Array.isArray(se)?se:[])}catch(Q){console.error("Error fetching greenhouses:",Q),E([])}},H=async j=>{if(!j){N([]);return}try{const Q=await B.get(`/api/v1/bell-pepper-cycles?greenhouse_id=${j}&status=IN_PROGRESS&per_page=1000`),se=Q.data?.data||(Array.isArray(Q.data)?Q.data:[]),xe=Array.isArray(se)?se:[];if(xe.length===0){const he=await B.get(`/api/v1/bell-pepper-cycles?greenhouse_id=${j}&status=PLANNED&per_page=1000`),je=he.data?.data||(Array.isArray(he.data)?he.data:[]);N(Array.isArray(je)?je:[])}else N(xe);console.log("Cycles loaded for greenhouse:",j,xe.length)}catch(Q){console.error("Error fetching cycles:",Q),N([])}},ce=async()=>{if(O({farm_id:"",bell_pepper_cycle_id:"",greenhouse_id:"",harvest_date:new Date().toISOString().slice(0,10),grade_a_kg:"0",grade_b_kg:"0",grade_c_kg:"0",crates_count:"",notes:""}),E([]),N([]),M(null),p(!1),w.length===0)try{const j=await B.get("/api/v1/farms?per_page=1000"),Q=j.data?.data||(Array.isArray(j.data)?j.data:[]);S(Array.isArray(Q)?Q:[])}catch(j){console.error("Error fetching farms:",j)}m(!0)},g=j=>{O({...c,farm_id:j,greenhouse_id:"",bell_pepper_cycle_id:""}),$(j)},re=j=>{O({...c,greenhouse_id:j,bell_pepper_cycle_id:"",harvest_date:new Date().toISOString().slice(0,10)}),M(null),H(j)},de=j=>{const Q=k.find(se=>String(se.id)===String(j));if(console.log("handleCycleChange called with cycleId:",j,"cycle:",Q,"current harvest_date:",c.harvest_date),M(Q),O({...c,bell_pepper_cycle_id:j}),Q&&Q.start_date&&c.harvest_date){const se=te(c.harvest_date,Q);console.log("Immediate validation after cycle selection:",{harvestDate:c.harvest_date,cycleStartDate:Q.start_date,validation:se,willShowPopup:!se.valid}),se.valid?p(!1):(console.log("Setting popup to true immediately"),p(!0))}else p(!1)},pe=()=>{if(h&&h.start_date){const j=new Date(h.start_date),Q=new Date(j);return Q.setDate(Q.getDate()+70),Q.toISOString().slice(0,10)}return null},X=()=>{if(h&&h.expected_end_date){const j=new Date(h.expected_end_date),Q=new Date;return j<Q?j.toISOString().slice(0,10):Q.toISOString().slice(0,10)}return new Date().toISOString().slice(0,10)},te=(j,Q=h)=>{if(!Q||!Q.start_date||!j)return{valid:!0};const se=new Date(Q.start_date),xe=new Date(j),he=new Date(se);he.setDate(he.getDate()+70);const je=xe.getTime()-se.getTime(),be=Math.floor(je/(1e3*60*60*24));return console.log("Validating date:",{harvestDate:j,cycleStartDate:Q.start_date,daysDifference:be,minRequired:70,isValid:be>=70}),be<70?{valid:!1,minDate:he.toISOString().slice(0,10),cycleStartDate:se.toISOString().slice(0,10),daysDifference:be}:{valid:!0}},ee=j=>{console.log("handleHarvestDateChange called with:",j,"selectedCycle:",h),O({...c,harvest_date:j})},A=()=>{if(!h||!h.start_date)return;te(c.harvest_date).valid||p(!0)},G=()=>{const j=Number(c.grade_a_kg)||0,Q=Number(c.grade_b_kg)||0,se=Number(c.grade_c_kg)||0,xe=j+Q+se;return isNaN(xe)?0:xe},Y=()=>{const j=G();return j>0?Math.ceil(j/9.5):0},R=async j=>{if(j.preventDefault(),h&&h.start_date&&!te(c.harvest_date).valid){p(!0);return}try{const Q={...c,grade_a_kg:parseFloat(c.grade_a_kg)||0,grade_b_kg:parseFloat(c.grade_b_kg)||0,grade_c_kg:parseFloat(c.grade_c_kg)||0,crates_count:c.crates_count||Y()};await B.post("/api/v1/bell-pepper-harvests",Q),m(!1),p(!1),T()}catch(Q){alert("Error creating harvest: "+(Q.response?.data?.message||"Unknown error"))}};return b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Bell Pepper Harvests"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Record and track harvests by grade"})]}),e.jsxs("button",{onClick:ce,className:"w-full md:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Re,{className:"w-5 h-5"}),"Record Harvest"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm"}),e.jsxs("select",{value:V.farm_id,onChange:j=>z({...V,farm_id:j.target.value,greenhouse_id:"",cycle_id:""}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Farms"}),w.map(j=>e.jsx("option",{value:j.id,children:j.name},j.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse"}),e.jsxs("select",{value:V.greenhouse_id,onChange:j=>z({...V,greenhouse_id:j.target.value,cycle_id:""}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:!V.farm_id,children:[e.jsx("option",{value:"",children:"All Greenhouses"}),x.filter(j=>!V.farm_id||j.farm_id==V.farm_id).map(j=>e.jsx("option",{value:j.id,children:j.name},j.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cycle"}),e.jsxs("select",{value:V.cycle_id,onChange:j=>z({...V,cycle_id:j.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:!V.greenhouse_id,children:[e.jsx("option",{value:"",children:"All Cycles"}),u.filter(j=>!V.greenhouse_id||j.greenhouse_id==V.greenhouse_id).map(j=>e.jsx("option",{value:j.id,children:j.cycle_code},j.id))]})]})]})}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx(ut,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No harvests found. Record your first harvest!"})]}):i.map(j=>{const Q=Number(j.grade_a_kg)||0,se=Number(j.grade_b_kg)||0,xe=Number(j.grade_c_kg)||0,he=Q+se+xe||0;return e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ut,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j.harvest_code}),j.harvest_number&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:["Harvest #",j.harvest_number]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fx,{className:"w-4 h-4"}),new Date(j.harvest_date).toLocaleDateString()]}),j.greenhouse&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(yt,{className:"w-4 h-4"}),j.greenhouse.name]}),j.harvester&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tu,{className:"w-4 h-4"}),j.harvester.name]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[C(he)," kg"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[j.crates_count||0," crates"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-green-700 mb-1",children:"Grade A"}),e.jsxs("div",{className:"text-lg font-semibold text-green-900",children:[C(Q)," kg"]})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-yellow-700 mb-1",children:"Grade B"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-900",children:[C(se)," kg"]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-orange-700 mb-1",children:"Grade C"}),e.jsxs("div",{className:"text-lg font-semibold text-orange-900",children:[C(xe)," kg"]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-2 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${j.status==="HARVESTED"?"bg-blue-100 text-blue-800":j.status==="PACKED"?"bg-purple-100 text-purple-800":j.status==="SOLD"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.status})}),j.cycle&&e.jsx(vt,{to:`/bell-pepper-cycles/${j.cycle.id}`,className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"View Cycle "})]})]},j.id)})}),y&&h&&h.start_date&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[100]",onClick:j=>{j.target,j.currentTarget},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",onClick:j=>j.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-red-600",children:"Invalid Harvest Date"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"The selected harvest date is less than 70 days from the cycle start date. This is not possible."}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Cycle Start Date:"})," ",new Date(h.start_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Selected Harvest Date:"})," ",new Date(c.harvest_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Minimum Harvest Date:"})," ",new Date(new Date(h.start_date).setDate(new Date(h.start_date).getDate()+70)).toLocaleDateString()]})]})}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Please select a date that is at least 70 days after the cycle start date."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{p(!1);const j=new Date(h.start_date),Q=new Date(j);Q.setDate(Q.getDate()+70),O({...c,harvest_date:Q.toISOString().slice(0,10)})},className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Use Minimum Date"}),e.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Choose Different Date"})]})]})]})}),I&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Record New Harvest"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Enter harvest details by grade"})]}),e.jsxs("form",{onSubmit:R,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{value:c.farm_id,onChange:j=>g(j.target.value),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select Farm"}),w.length===0?e.jsx("option",{value:"",disabled:!0,children:"Loading farms..."}):w.map(j=>e.jsx("option",{value:String(j.id),children:j.name},j.id))]}),w.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No farms available. Please create a farm first."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse *"}),e.jsxs("select",{value:c.greenhouse_id,onChange:j=>re(j.target.value),required:!0,disabled:!c.farm_id,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Select Greenhouse"}),x.map(j=>e.jsx("option",{value:j.id,children:j.name},j.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Cycle *"}),e.jsxs("select",{value:c.bell_pepper_cycle_id,onChange:j=>de(j.target.value),required:!0,disabled:!c.greenhouse_id||k.length===0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Select Cycle"}),k.length===0&&c.greenhouse_id?e.jsx("option",{value:"",disabled:!0,children:"No active cycles found for this greenhouse"}):k.map(j=>e.jsxs("option",{value:String(j.id),children:[j.cycle_code," ",j.start_date?`(${new Date(j.start_date).toLocaleDateString()})`:""]},j.id))]}),c.greenhouse_id&&k.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No in-progress or planned cycles found. Please create a production cycle first."}),h&&h.start_date&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Cycle started: ",new Date(h.start_date).toLocaleDateString(),". First harvest can be recorded from ",new Date(new Date(h.start_date).setDate(new Date(h.start_date).getDate()+70)).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Date *"}),e.jsx("input",{type:"date",value:c.harvest_date,onChange:j=>{const Q=j.target.value;console.log("Date changed to:",Q,"Selected cycle:",h),ee(Q)},onBlur:A,onInput:j=>{const Q=j.target.value;if(console.log("Date input event:",Q),Q&&h&&h.start_date){const se=te(Q,h);console.log("Validation result:",se),se.valid?p(!1):(console.log("Showing validation popup"),p(!0))}},min:pe()||void 0,max:X(),required:!0,className:`w-full border rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ${y?"border-red-500 bg-red-50":"border-gray-300"}`}),h&&h.start_date&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Harvest date must be at least 70 days after cycle start (",new Date(h.start_date).toLocaleDateString(),")"]}),!h&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please select a production cycle first to set date constraints"})]}),e.jsxs("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Harvest by Grade (kg)"}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Grade A (Premium) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:c.grade_a_kg,onChange:j=>O({...c,grade_a_kg:j.target.value}),required:!0,className:"w-full border border-green-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-2",children:"Grade B (Standard) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:c.grade_b_kg,onChange:j=>O({...c,grade_b_kg:j.target.value}),required:!0,className:"w-full border border-yellow-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Grade C (Lower) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:c.grade_c_kg,onChange:j=>O({...c,grade_c_kg:j.target.value}),required:!0,className:"w-full border border-orange-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total Weight"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[C(G())," kg"]}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Estimated crates: ",Y()]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crates Count"}),e.jsx("input",{type:"number",min:"0",value:c.crates_count,onChange:j=>O({...c,crates_count:j.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:`Auto: ${Y()}`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to auto-calculate (9.5kg per crate)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:c.notes,onChange:j=>O({...c,notes:j.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Additional notes about this harvest..."})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Record Harvest"})]})]})]})})]})}function sg(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState([]),[w,S]=f.useState([]),[x,E]=f.useState(!0),[b,D]=f.useState(!1),[C,I]=f.useState(null),[m,y]=f.useState(!1),[p,c]=f.useState({farm_id:"",name:"",code:"",type:"",description:"",address:"",latitude:"",longitude:"",total_area:"",area_unit:"hectares",notes:"",is_active:!0,track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1});f.useEffect(()=>{O(),V(),z(),h()},[]);const O=async()=>{E(!0);try{const g=await B.get("/api/v1/sites?per_page=1000"),re=g.data?.data||(Array.isArray(g.data)?g.data:[]);o(Array.isArray(re)?re:[])}catch(g){console.error("Error fetching sites:",g),o([])}finally{E(!1)}},V=async()=>{try{const g=await B.get("/api/v1/farms?per_page=1000");console.log("Farms API full response:",g),console.log("Farms API response.data:",g.data);let re=[];g.data?.data&&Array.isArray(g.data.data)?re=g.data.data:Array.isArray(g.data)?re=g.data:g.data&&typeof g.data=="object"&&(Object.keys(g.data).includes("data")&&Array.isArray(g.data.data)?re=g.data.data:re=Object.values(g.data).filter(pe=>pe&&typeof pe=="object"&&pe.id)),console.log("Farms parsed:",re.length,re),v(re)}catch(g){console.error("Error fetching farms:",g),console.error("Error response:",g.response),v([])}},z=async()=>{try{const g=await B.get("/api/v1/site-types?per_page=1000&is_active=true");let re=[];g.data&&(Array.isArray(g.data)?re=g.data:g.data.data&&Array.isArray(g.data.data)&&(re=g.data.data)),N(re)}catch(g){console.error("Error fetching site types:",g),N([])}},h=async()=>{try{const g=await B.get("/api/v1/asset-categories?per_page=1000");let re=[];g.data&&(Array.isArray(g.data)?re=g.data:g.data.data&&Array.isArray(g.data.data)&&(re=g.data.data)),S(re)}catch(g){console.error("Error fetching asset categories:",g),S([])}},M=()=>{I(null),y(!1);const g=k.length>0?k[0].code:"";c({farm_id:"",name:"",code:"",type:g,description:"",address:"",latitude:"",longitude:"",total_area:"",area_unit:"hectares",notes:"",is_active:!0,track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1}),D(!0)},T=g=>{I(g);const re=!!g.asset_id;y(re),c({farm_id:g.farm_id||"",name:g.name||"",code:g.code||"",type:g.type||"farmland",description:g.description||"",address:g.address||"",latitude:g.latitude||"",longitude:g.longitude||"",total_area:g.total_area||"",area_unit:g.area_unit||"hectares",notes:g.notes||"",is_active:g.is_active!==void 0?g.is_active:!0,track_as_asset:re,asset_category_id:g.asset?.asset_category_id||"",asset_description:g.asset?.description||"",asset_acquisition_type:g.asset?.acquisition_type||"",asset_purchase_date:g.asset?.purchase_date?new Date(g.asset.purchase_date).toISOString().slice(0,10):"",asset_purchase_cost:g.asset?.purchase_cost||"",asset_currency:g.asset?.currency||"NGN",asset_supplier_name:g.asset?.supplier_name||"",asset_serial_number:g.asset?.serial_number||"",asset_model:g.asset?.model||"",asset_manufacturer:g.asset?.manufacturer||"",asset_year_of_make:g.asset?.year_of_make||"",asset_warranty_expiry:g.asset?.warranty_expiry?new Date(g.asset.warranty_expiry).toISOString().slice(0,10):"",asset_is_trackable:g.asset?.is_trackable||!1}),D(!0)},$=async g=>{g.preventDefault();try{const re={...p};re.track_as_asset=m,m||Object.keys(re).forEach(de=>{de.startsWith("asset_")&&delete re[de]}),C?await B.put(`/api/v1/sites/${C.id}`,re):await B.post("/api/v1/sites",re),D(!1),O()}catch(re){console.error("Error saving site:",re),alert(re.response?.data?.message||"Error saving site")}},H=async g=>{if(confirm("Are you sure you want to delete this site?"))try{await B.delete(`/api/v1/sites/${g}`),O()}catch(re){console.error("Error deleting site:",re),alert(re.response?.data?.message||"Error deleting site")}},ce=g=>{const re=k.find(de=>de.code===g);return re?re.name:g};return x?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Sites"}),e.jsxs("button",{onClick:M,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Create Site"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No sites found"})}):i.map(g=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ce(g.type)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:g.farm?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>T(g),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>H(g.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ze,{size:16})})]})]},g.id))})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:C?"Edit Site":"Create Site"}),e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm"}),e.jsxs("select",{value:p.farm_id,onChange:g=>c({...p,farm_id:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{required:!0,value:p.type,onChange:g=>c({...p,type:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select type"}),k.filter(g=>g.is_active).map(g=>e.jsx("option",{value:g.code,children:g.name},g.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:p.name,onChange:g=>c({...p,name:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:p.code,onChange:g=>c({...p,code:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if not provided"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("textarea",{value:p.address,onChange:g=>c({...p,address:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),e.jsx("input",{type:"number",step:"any",value:p.latitude,onChange:g=>c({...p,latitude:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),e.jsx("input",{type:"number",step:"any",value:p.longitude,onChange:g=>c({...p,longitude:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Area"}),e.jsx("input",{type:"number",step:"0.01",value:p.total_area,onChange:g=>c({...p,total_area:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area Unit"}),e.jsxs("select",{value:p.area_unit,onChange:g=>c({...p,area_unit:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"hectares",children:"Hectares"}),e.jsx("option",{value:"acres",children:"Acres"}),e.jsx("option",{value:"sqm",children:"Sqm"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:p.description,onChange:g=>c({...p,description:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:g=>{y(g.target.checked),c({...p,track_as_asset:g.target.checked})},className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Track as Asset"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check this box to create an asset record for this site. You can enter asset details below."})]}),m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-2 border-t pt-4 mt-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asset Information"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Category"}),e.jsxs("select",{value:p.asset_category_id,onChange:g=>c({...p,asset_category_id:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select category"}),w.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:p.asset_acquisition_type,onChange:g=>c({...p,asset_acquisition_type:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:p.asset_purchase_date,onChange:g=>c({...p,asset_purchase_date:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:p.asset_purchase_cost,onChange:g=>c({...p,asset_purchase_cost:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",maxLength:3,value:p.asset_currency,onChange:g=>c({...p,asset_currency:g.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500",placeholder:"NGN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:p.asset_supplier_name,onChange:g=>c({...p,asset_supplier_name:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:p.asset_serial_number,onChange:g=>c({...p,asset_serial_number:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",value:p.asset_model,onChange:g=>c({...p,asset_model:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:p.asset_manufacturer,onChange:g=>c({...p,asset_manufacturer:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year of Make"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,value:p.asset_year_of_make,onChange:g=>c({...p,asset_year_of_make:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty Expiry"}),e.jsx("input",{type:"date",value:p.asset_warranty_expiry,onChange:g=>c({...p,asset_warranty_expiry:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Description"}),e.jsx("textarea",{value:p.asset_description,onChange:g=>c({...p,asset_description:g.target.value}),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:p.asset_is_trackable,onChange:g=>c({...p,asset_is_trackable:g.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Is Trackable"})]})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:p.notes,onChange:g=>c({...p,notes:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:p.is_active,onChange:g=>c({...p,is_active:g.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:C?"Update":"Create"})]})]})]})})]})}function ag(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState([]),[w,S]=f.useState(!0),[x,E]=f.useState(!1),[b,D]=f.useState(null),[C,I]=f.useState({site_id:"",crop_id:"",name:"",code:"",description:"",area:"",area_unit:"hectares",produce_type:"",soil_type:"",is_active:!0});f.useEffect(()=>{m(),y(),p()},[]);const m=async()=>{S(!0);try{const h=await B.get("/api/v1/farm-zones?per_page=1000"),M=h.data?.data||(Array.isArray(h.data)?h.data:[]);o(Array.isArray(M)?M:[])}catch(h){console.error("Error fetching farm zones:",h),o([])}finally{S(!1)}},y=async()=>{try{const h=await B.get("/api/v1/sites?type=farmland&per_page=1000"),M=h.data?.data||(Array.isArray(h.data)?h.data:[]);v(Array.isArray(M)?M:[])}catch(h){console.error("Error fetching sites:",h)}},p=async()=>{try{const h=await B.get("/api/v1/crops?per_page=1000"),M=h.data?.data||(Array.isArray(h.data)?h.data:[]);N(Array.isArray(M)?M:[])}catch(h){console.error("Error fetching crops:",h)}},c=()=>{D(null),I({site_id:"",crop_id:"",name:"",code:"",description:"",area:"",area_unit:"hectares",produce_type:"",soil_type:"",is_active:!0}),E(!0)},O=h=>{D(h),I({site_id:h.site_id||"",crop_id:h.crop_id||"",name:h.name||"",code:h.code||"",description:h.description||"",area:h.area||"",area_unit:h.area_unit||"hectares",produce_type:h.produce_type||"",soil_type:h.soil_type||"",is_active:h.is_active!==void 0?h.is_active:!0}),E(!0)},V=async h=>{h.preventDefault();try{b?await B.put(`/api/v1/farm-zones/${b.id}`,C):await B.post("/api/v1/farm-zones",C),E(!1),m()}catch(M){console.error("Error saving farm zone:",M),alert(M.response?.data?.message||"Error saving farm zone")}},z=async h=>{if(confirm("Are you sure you want to delete this farm zone?"))try{await B.delete(`/api/v1/farm-zones/${h}`),m()}catch(M){console.error("Error deleting farm zone:",M),alert(M.response?.data?.message||"Error deleting farm zone")}};return w?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Farm Zones"}),e.jsxs("button",{onClick:c,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Create Farm Zone"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produce Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No farm zones found"})}):i.map(h=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.code||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:h.site?.name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:h.produce_type||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:h.area?`${h.area} ${h.area_unit}`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>O(h),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>z(h.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ze,{size:16})})]})]},h.id))})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:b?"Edit Farm Zone":"Create Farm Zone"}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site (Farmland) *"}),e.jsxs("select",{required:!0,value:C.site_id,onChange:h=>I({...C,site_id:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Site"}),u.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crop"}),e.jsxs("select",{value:C.crop_id,onChange:h=>I({...C,crop_id:h.target.value||null}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Crop"}),k.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:C.name,onChange:h=>I({...C,name:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:C.code,onChange:h=>I({...C,code:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Produce Type"}),e.jsx("input",{type:"text",value:C.produce_type,onChange:h=>I({...C,produce_type:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., tomatoes, corn"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soil Type"}),e.jsx("input",{type:"text",value:C.soil_type,onChange:h=>I({...C,soil_type:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area"}),e.jsx("input",{type:"number",step:"0.01",value:C.area,onChange:h=>I({...C,area:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area Unit"}),e.jsxs("select",{value:C.area_unit,onChange:h=>I({...C,area_unit:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"hectares",children:"Hectares"}),e.jsx("option",{value:"acres",children:"Acres"}),e.jsx("option",{value:"sqm",children:"Sqm"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:C.description,onChange:h=>I({...C,description:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:C.is_active,onChange:h=>I({...C,is_active:h.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:b?"Update":"Create"})]})]})]})})]})}function ng(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState([]),[w,S]=f.useState(!0),[x,E]=f.useState(!1),[b,D]=f.useState(null),[C,I]=f.useState(!1),[m,y]=f.useState({site_id:"",name:"",code:"",production_type:"gari",description:"",area_sqm:"",established_date:"",is_active:!0,track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1});f.useEffect(()=>{p(),c(),O()},[]);const p=async()=>{S(!0);try{const T=await B.get("/api/v1/factories?per_page=1000"),$=T.data?.data||(Array.isArray(T.data)?T.data:[]);o(Array.isArray($)?$:[])}catch(T){console.error("Error fetching factories:",T),o([])}finally{S(!1)}},c=async()=>{try{const T=await B.get("/api/v1/sites?type=factory&per_page=1000"),$=T.data?.data||(Array.isArray(T.data)?T.data:[]);v(Array.isArray($)?$:[])}catch(T){console.error("Error fetching sites:",T)}},O=async()=>{try{const T=await B.get("/api/v1/asset-categories?per_page=1000");let $=[];T.data&&(Array.isArray(T.data)?$=T.data:T.data.data&&Array.isArray(T.data.data)&&($=T.data.data)),N($)}catch(T){console.error("Error fetching asset categories:",T)}},V=()=>{D(null),I(!1),y({site_id:"",name:"",code:"",production_type:"gari",description:"",area_sqm:"",established_date:"",is_active:!0,track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1}),E(!0)},z=T=>{D(T);const $=!!T.asset_id;I($),y({site_id:T.site_id||"",name:T.name||"",code:T.code||"",production_type:T.production_type||"gari",description:T.description||"",area_sqm:T.area_sqm||"",established_date:T.established_date||"",is_active:T.is_active!==void 0?T.is_active:!0,track_as_asset:$,asset_category_id:T.asset?.asset_category_id||"",asset_description:T.asset?.description||"",asset_acquisition_type:T.asset?.acquisition_type||"",asset_purchase_date:T.asset?.purchase_date?new Date(T.asset.purchase_date).toISOString().slice(0,10):"",asset_purchase_cost:T.asset?.purchase_cost||"",asset_currency:T.asset?.currency||"NGN",asset_supplier_name:T.asset?.supplier_name||"",asset_serial_number:T.asset?.serial_number||"",asset_model:T.asset?.model||"",asset_manufacturer:T.asset?.manufacturer||"",asset_year_of_make:T.asset?.year_of_make||"",asset_warranty_expiry:T.asset?.warranty_expiry?new Date(T.asset.warranty_expiry).toISOString().slice(0,10):"",asset_is_trackable:T.asset?.is_trackable||!1}),E(!0)},h=async T=>{T.preventDefault();try{const $={...m};$.track_as_asset=C,C||Object.keys($).forEach(H=>{H.startsWith("asset_")&&delete $[H]}),b?await B.put(`/api/v1/factories/${b.id}`,$):await B.post("/api/v1/factories",$),E(!1),p()}catch($){console.error("Error saving factory:",$);const H=$.response?.data?.message||($.response?.data?.errors?JSON.stringify($.response.data.errors):"")||$.message;alert("Error saving factory: "+H)}},M=async T=>{if(confirm("Are you sure you want to delete this factory?"))try{await B.delete(`/api/v1/factories/${T}`),p()}catch($){console.error("Error deleting factory:",$),alert($.response?.data?.message||"Error deleting factory")}};return w?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Factories"}),e.jsxs("button",{onClick:V,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Create Factory"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Production Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No factories found"})}):i.map(T=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:T.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:T.site?.name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 capitalize",children:T.production_type||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${T.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>z(T),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>M(T.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ze,{size:16})})]})]},T.id))})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:b?"Edit Factory":"Create Factory"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site (Factory Type) *"}),e.jsxs("select",{required:!0,value:m.site_id,onChange:T=>y({...m,site_id:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Site"}),u.map(T=>e.jsx("option",{value:T.id,children:T.name},T.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Type *"}),e.jsxs("select",{required:!0,value:m.production_type,onChange:T=>y({...m,production_type:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"gari",children:"Gari"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:T=>y({...m,name:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:m.code,onChange:T=>y({...m,code:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area (sqm)"}),e.jsx("input",{type:"number",step:"0.01",value:m.area_sqm,onChange:T=>y({...m,area_sqm:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Established Date"}),e.jsx("input",{type:"date",value:m.established_date,onChange:T=>y({...m,established_date:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:T=>y({...m,description:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:m.is_active,onChange:T=>y({...m,is_active:T.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:T=>{I(T.target.checked),y({...m,track_as_asset:T.target.checked})},className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Track as Asset"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check this box to create an asset record for this factory. You can enter asset details below."})]}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asset Information"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Category"}),e.jsxs("select",{value:m.asset_category_id,onChange:T=>y({...m,asset_category_id:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select category"}),k.map(T=>e.jsx("option",{value:T.id,children:T.name},T.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:m.asset_acquisition_type,onChange:T=>y({...m,asset_acquisition_type:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:m.asset_purchase_date,onChange:T=>y({...m,asset_purchase_date:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:m.asset_purchase_cost,onChange:T=>y({...m,asset_purchase_cost:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",maxLength:3,value:m.asset_currency,onChange:T=>y({...m,asset_currency:T.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"NGN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:m.asset_supplier_name,onChange:T=>y({...m,asset_supplier_name:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:m.asset_serial_number,onChange:T=>y({...m,asset_serial_number:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",value:m.asset_model,onChange:T=>y({...m,asset_model:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:m.asset_manufacturer,onChange:T=>y({...m,asset_manufacturer:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year of Make"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,value:m.asset_year_of_make,onChange:T=>y({...m,asset_year_of_make:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty Expiry"}),e.jsx("input",{type:"date",value:m.asset_warranty_expiry,onChange:T=>y({...m,asset_warranty_expiry:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Description"}),e.jsx("textarea",{value:m.asset_description,onChange:T=>y({...m,asset_description:T.target.value}),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:m.asset_is_trackable,onChange:T=>y({...m,asset_is_trackable:T.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Is Trackable"})]})})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:b?"Update":"Create"})]})]})]})})]})}function lg(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState(!0),[w,S]=f.useState(!1),[x,E]=f.useState(null),[b,D]=f.useState({location_id:"",name:"",code:"",description:"",notes:"",is_active:!0});f.useEffect(()=>{C()},[]);const C=async()=>{N(!0);try{const[c,O]=await Promise.all([B.get("/api/v1/admin-zones?per_page=1000"),B.get("/api/v1/locations?per_page=1000&is_active=1")]),V=c.data?.data||(Array.isArray(c.data)?c.data:[]),z=O.data?.data||(Array.isArray(O.data)?O.data:[]);o(Array.isArray(V)?V:[]),v(Array.isArray(z)?z:[])}catch(c){console.error("Error fetching data:",c),o([]),v([])}finally{N(!1)}},I=()=>{E(null),D({location_id:"",name:"",code:"",description:"",notes:"",is_active:!0}),S(!0)},m=c=>{E(c),D({location_id:c.location_id||"",name:c.name||"",code:c.code||"",description:c.description||"",notes:c.notes||"",is_active:c.is_active!==void 0?c.is_active:!0}),S(!0)},y=async c=>{c.preventDefault();try{x?await B.put(`/api/v1/admin-zones/${x.id}`,b):await B.post("/api/v1/admin-zones",b),S(!1),C()}catch(O){console.error("Error saving zone:",O),alert(O.response?.data?.message||"Error saving zone")}},p=async c=>{if(confirm("Are you sure you want to delete this zone?"))try{await B.delete(`/api/v1/admin-zones/${c}`),C()}catch(O){console.error("Error deleting zone:",O),alert(O.response?.data?.message||"Error deleting zone")}};return k?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Zones"}),e.jsxs("button",{onClick:I,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Create Zone"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No zones found"})}):i.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:c.location?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>m(c),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>p(c.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ze,{size:16})})]})]},c.id))})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:x?"Edit Zone":"Create Zone"}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),e.jsxs("select",{required:!0,value:b.location_id,onChange:c=>D({...b,location_id:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Location"}),u.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:b.name,onChange:c=>D({...b,name:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:b.code,onChange:c=>D({...b,code:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if empty"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:c=>D({...b,description:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:b.notes,onChange:c=>D({...b,notes:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:b.is_active,onChange:c=>D({...b,is_active:c.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:x?"Update":"Create"})]})]})]})})]})}function ig(){const[i,o]=f.useState([]),[u,v]=f.useState({}),[k,N]=f.useState(!0),[w,S]=f.useState(!1),[x,E]=f.useState(null),[b,D]=f.useState({name:"",permissions:[]});f.useEffect(()=>{C()},[]);const C=async()=>{try{const[z,h]=await Promise.all([B.get("/api/v1/roles"),B.get("/api/v1/roles/menu-permissions")]);o(z.data?.data||z.data||[]),v(h.data?.data||{})}catch(z){console.error("Error fetching data:",z),alert("Error loading roles: "+(z.response?.data?.message||"Unknown error"))}finally{N(!1)}},I=(z=null)=>{if(z)if(E(z),z.name==="ADMIN"){const h=Object.values(u).flatMap(M=>Object.values(M)).flatMap(M=>M.map(T=>[T.menu_key,T.submenu_key,T.permission_type].filter(Boolean).join(".")));D({name:z.name,permissions:h})}else D({name:z.name,permissions:z.permissions?.map(h=>h.name)||[]});else E(null),D({name:"",permissions:[]});S(!0)},m=()=>{S(!1),E(null),D({name:"",permissions:[]})},y=z=>{b.name!=="ADMIN"&&D(h=>({...h,permissions:h.permissions.includes(z)?h.permissions.filter(M=>M!==z):[...h.permissions,z]}))},p=(z,h,M)=>{const T=[z,h,M].filter(Boolean).join(".");y(T)},c=(z,h,M)=>{const T=[z,h,M].filter(Boolean).join(".");return b.permissions.includes(T)},O=async z=>{z.preventDefault();try{const h={...b};if(h.name==="ADMIN"){const M=Object.values(u).flatMap(T=>Object.values(T)).flatMap(T=>T.map($=>[$.menu_key,$.submenu_key,$.permission_type].filter(Boolean).join(".")));h.permissions=M}x?await B.put(`/api/v1/roles/${x.id}`,h):await B.post("/api/v1/roles",h),m(),C()}catch(h){alert("Error saving role: "+(h.response?.data?.message||"Unknown error"))}},V=async(z,h)=>{if(confirm(`Are you sure you want to delete the role "${h}"?`))try{await B.delete(`/api/v1/roles/${z}`),C()}catch(M){alert("Error deleting role: "+(M.response?.data?.message||"Unknown error"))}};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Roles & Permissions"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage user roles and their access permissions"})]}),e.jsxs("button",{onClick:()=>I(),className:"w-full md:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Re,{className:"w-5 h-5"}),"Create Role"]})]}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx(ui,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No roles found. Create your first role!"})]}):i.map(z=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ui,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:z.name})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[z.permissions?.length||0," permission(s) assigned"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>I(z),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(He,{className:"w-4 h-4"}),"Edit"]}),z.name!=="ADMIN"&&e.jsxs("button",{onClick:()=>V(z.id,z.name),className:"flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Delete"]})]})]}),z.permissions&&z.permissions.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Permissions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:z.permissions.map(h=>e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded",children:h.name},h.id))})]})]},z.id))}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:x?"Edit Role":"Create New Role"})}),e.jsxs("form",{onSubmit:O,className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Name *"}),e.jsx("input",{type:"text",value:b.name,onChange:z=>{const h=z.target.value;if(D({...b,name:h}),h==="ADMIN"){const M=Object.values(u).flatMap(T=>Object.values(T)).flatMap(T=>T.map($=>[$.menu_key,$.submenu_key,$.permission_type].filter(Boolean).join(".")));D(T=>({...T,name:h,permissions:M}))}},required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Manager, Worker, Viewer"}),b.name==="ADMIN"&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:" ADMIN role automatically has all permissions and cannot be modified."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permissions"}),b.name==="ADMIN"&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," The ADMIN role has all permissions automatically. All permissions are selected and cannot be deselected."]})}),e.jsx("div",{className:"space-y-6 max-h-96 overflow-y-auto",children:Object.entries(u).map(([z,h])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3 capitalize",children:z.replace("-"," ")}),Object.entries(h).map(([M,T])=>e.jsxs("div",{className:"ml-4 mb-4 last:mb-0",children:[M!=="main"&&e.jsx("h5",{className:"font-medium text-gray-700 mb-2 capitalize",children:M.replace("-"," ")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:T.map($=>e.jsxs("button",{type:"button",onClick:()=>p($.menu_key,$.submenu_key,$.permission_type),disabled:b.name==="ADMIN",className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${c($.menu_key,$.submenu_key,$.permission_type)?"bg-green-100 border-green-500 text-green-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"} ${b.name==="ADMIN"?"opacity-75 cursor-not-allowed":"cursor-pointer"}`,children:[c($.menu_key,$.submenu_key,$.permission_type)?e.jsx(vx,{className:"w-4 h-4"}):e.jsx(sn,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm capitalize",children:$.permission_type})]},$.id))})]},M))]},z))})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:m,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:x?"Update Role":"Create Role"})]})]})]})})]})}function og(){const[i,o]=f.useState([]),[u,v]=f.useState(!0),[k,N]=f.useState(!1),[w,S]=f.useState(null),[x,E]=f.useState({name:"",category:"",default_maturity_days:"",description:""}),b=["VEGETABLE","FRUIT","GRAIN","LEGUME","ROOT","HERB","SPICE","OTHER"];f.useEffect(()=>{D()},[]);const D=async()=>{v(!0);try{const p=await B.get("/api/v1/crops?per_page=1000"),c=p.data?.data||(Array.isArray(p.data)?p.data:[]);o(Array.isArray(c)?c:[])}catch(p){console.error("Error fetching crops:",p),o([])}finally{v(!1)}},C=()=>{S(null),E({name:"",category:"",default_maturity_days:"",description:""}),N(!0)},I=p=>{S(p),E({name:p.name||"",category:p.category||"",default_maturity_days:p.default_maturity_days||"",description:p.description||""}),N(!0)},m=async p=>{p.preventDefault();try{w?await B.put(`/api/v1/crops/${w.id}`,x):await B.post("/api/v1/crops",x),N(!1),D()}catch(c){console.error("Error saving crop:",c),alert(c.response?.data?.message||"Error saving crop")}},y=async p=>{if(confirm("Are you sure you want to delete this crop? This action cannot be undone."))try{await B.delete(`/api/v1/crops/${p}`),D()}catch(c){console.error("Error deleting crop:",c),alert(c.response?.data?.message||"Error deleting crop")}};return u?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Crops"}),e.jsxs("button",{onClick:C,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Create Crop"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Default Maturity Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No crops found"})}):i.map(p=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.category||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.default_maturity_days||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:p.description||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>I(p),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>y(p.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ze,{size:16})})]})]},p.id))})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:w?"Edit Crop":"Create Crop"}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:p=>E({...x,name:p.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsxs("select",{required:!0,value:x.category,onChange:p=>E({...x,category:p.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Category"}),b.map(p=>e.jsx("option",{value:p,children:p},p))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Maturity Days"}),e.jsx("input",{type:"number",min:"1",value:x.default_maturity_days,onChange:p=>E({...x,default_maturity_days:p.target.value||null}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Days to maturity"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:p=>E({...x,description:p.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:w?"Update":"Create"})]})]})]})})]})}function cg(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState([]),[w,S]=f.useState({}),[x,E]=f.useState(!0),[b,D]=f.useState(!1),[C,I]=f.useState(null),[m,y]=f.useState(null),[p,c]=f.useState({name:"",email:"",phone:"",password:"",photo:null,farms:[],permissions:[],job_roles:[]});f.useEffect(()=>{O()},[]);const O=async()=>{try{const[X,te,ee]=await Promise.all([B.get("/api/v1/users?per_page=1000"),B.get("/api/v1/farms?per_page=1000"),B.get("/api/v1/permissions")]);let A=[];X.data?.data&&Array.isArray(X.data.data)?A=X.data.data:Array.isArray(X.data)&&(A=X.data),o(A);const G=te.data?.data||(Array.isArray(te.data)?te.data:[]);v(Array.isArray(G)?G:[]);const Y=ee.data?.data||(Array.isArray(ee.data)?ee.data:[]);N(Array.isArray(Y)?Y:[])}catch(X){console.error("Error fetching data:",X),alert("Error loading data: "+(X.response?.data?.message||"Unknown error"))}finally{E(!1)}},V=async()=>{try{const X=await B.get("/api/v1/worker-job-roles?is_active=1"),te=X.data?.data||(Array.isArray(X.data)?X.data:[]);return Array.isArray(te)?te:[]}catch(X){return console.error("Error fetching job roles:",X),[]}},z=async(X=null)=>{if(X){I(X);const ee=(await B.get(`/api/v1/users/${X.id}?include_permissions=1`)).data.data,A=[],G=await V();if(S({global:G}),ee.farms&&ee.farms.length>0)for(const R of ee.farms)try{((await B.get(`/api/v1/users/${X.id}/farms/${R.id}/job-roles`)).data?.data||[]).forEach(se=>{se.ended_at||A.push({farm_id:R.id,worker_job_role_id:se.worker_job_role_id})})}catch(j){console.error(`Error loading job roles for farm ${R.id}:`,j)}const Y=(ee.farms||[]).map(R=>({farm_id:R.id,membership_status:R.membership_status||"ACTIVE",employment_category:R.employment_category||"",pay_type:R.pay_type||"",pay_rate:R.pay_rate||"",start_date:R.start_date||"",end_date:R.end_date||"",notes:R.notes||""}));c({name:ee.name||"",email:ee.email||"",phone:ee.phone||"",password:"",photo:null,farms:Y,permissions:ee.permissions||[],job_roles:A}),y(ee.profile_photo_url)}else I(null),c({name:"",email:"",phone:"",password:"",photo:null,farms:[],permissions:[],job_roles:[]}),y(null);D(!0)},h=X=>{const te=X.target.files[0];if(te){c({...p,photo:te});const ee=new FileReader;ee.onloadend=()=>{y(ee.result)},ee.readAsDataURL(te)}},M=()=>{c({...p,farms:[...p.farms,{farm_id:"",membership_status:"ACTIVE",employment_category:"",pay_type:"",pay_rate:"",start_date:""}]})},T=X=>{c({...p,farms:p.farms.filter((te,ee)=>ee!==X)})},$=async(X,te,ee)=>{const A=[...p.farms];if(A[X][te]=ee,Object.keys(w).length===0){const G=await V();S({global:G})}c({...p,farms:A})},H=X=>{c({...p,job_roles:[...p.job_roles,{farm_id:parseInt(X),worker_job_role_id:""}]})},ce=X=>{c({...p,job_roles:p.job_roles.filter((te,ee)=>ee!==X)})},g=(X,te,ee)=>{const A=[...p.job_roles];A[X][te]=parseInt(ee),c({...p,job_roles:A})},re=async X=>{X.preventDefault();try{const te=new FormData;if(te.append("name",p.name),te.append("email",p.email),p.phone&&te.append("phone",p.phone),p.password&&te.append("password",p.password),p.photo&&te.append("photo",p.photo),p.farms.length>0&&te.append("farms",JSON.stringify(p.farms)),p.permissions.length>0&&te.append("permissions",JSON.stringify(p.permissions)),p.job_roles.length>0&&te.append("job_roles",JSON.stringify(p.job_roles)),C){const ee={name:p.name,email:p.email,phone:p.phone};if(p.password&&(ee.password=p.password),p.farms.length>0&&(ee.farms=p.farms),p.permissions.length>0&&(ee.permissions=p.permissions),await B.put(`/api/v1/users/${C.id}`,ee),p.photo){const A=new FormData;A.append("photo",p.photo),await B.post(`/api/v1/users/${C.id}/photo`,A,{headers:{"Content-Type":"multipart/form-data"}})}if(p.job_roles.length>0){for(const A of p.farms)if(A.farm_id)try{const Y=(await B.get(`/api/v1/users/${C.id}/farms/${A.farm_id}/job-roles`)).data?.data||[];for(const R of Y)R.ended_at||await B.post(`/api/v1/users/${C.id}/farms/${A.farm_id}/job-roles/${R.id}/end`)}catch(G){console.error("Error ending existing job roles:",G)}for(const A of p.job_roles)if(A.worker_job_role_id&&A.farm_id)try{await B.post(`/api/v1/users/${C.id}/farms/${A.farm_id}/job-roles/assign`,{worker_job_role_id:A.worker_job_role_id})}catch(G){console.error("Error assigning job role:",G)}}}else await B.post("/api/v1/users",te,{headers:{"Content-Type":"multipart/form-data"}});D(!1),O()}catch(te){console.error("Error saving user:",te),alert("Error saving user: "+(te.response?.data?.message||"Unknown error"))}},de=async(X,te)=>{if(confirm(`Are you sure you want to delete the user "${te}"?`))try{await B.delete(`/api/v1/users/${X}`),O()}catch(ee){alert("Error deleting user: "+(ee.response?.data?.message||"Unknown error"))}},pe=X=>{c(te=>({...te,permissions:te.permissions.includes(X)?te.permissions.filter(ee=>ee!==X):[...te.permissions,X]}))};return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),e.jsxs("button",{onClick:()=>z(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Create User"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Photo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Farms"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):i.map(X=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:X.profile_photo_url?e.jsx("img",{src:X.profile_photo_url,alt:X.name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(tu,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:X.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:X.email}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:X.phone||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:X.farms?.length>0?e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:[X.farms.length," farm(s)"]}):"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>z(X),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(He,{size:16,className:"inline"})}),e.jsx("button",{onClick:()=>de(X.id,X.name),className:"text-red-600 hover:text-red-900",children:e.jsx(Ze,{size:16,className:"inline"})})]})]},X.id))})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:C?"Edit User":"Create New User"}),e.jsxs("form",{onSubmit:re,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[m&&e.jsx("img",{src:m,alt:"Preview",className:"w-20 h-20 rounded-full object-cover"}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx(yx,{size:20}),m?"Change Photo":"Upload Photo",e.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"hidden"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:p.name,onChange:X=>c({...p,name:X.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:p.email,onChange:X=>c({...p,email:X.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:p.phone,onChange:X=>c({...p,phone:X.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",C?"(leave blank to keep current)":"*"]}),e.jsx("input",{type:"password",required:!C,value:p.password,onChange:X=>c({...p,password:X.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Farm Memberships"}),e.jsx("button",{type:"button",onClick:M,className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Add Farm"})]}),p.farms.map((X,te)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Farm ",te+1]}),e.jsx("button",{type:"button",onClick:()=>T(te),className:"text-red-600 hover:text-red-800",children:e.jsx(sn,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("select",{required:!0,value:X.farm_id,onChange:ee=>$(te,"farm_id",ee.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(ee=>e.jsx("option",{value:ee.id,children:ee.name},ee.id))]}),e.jsxs("select",{required:!0,value:X.membership_status,onChange:ee=>$(te,"membership_status",ee.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]}),e.jsxs("select",{value:X.employment_category,onChange:ee=>$(te,"employment_category",ee.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Employment Category"}),e.jsx("option",{value:"PERMANENT",children:"Permanent"}),e.jsx("option",{value:"CASUAL",children:"Casual"}),e.jsx("option",{value:"CONTRACTOR",children:"Contractor"}),e.jsx("option",{value:"SEASONAL",children:"Seasonal"})]}),e.jsxs("select",{value:X.pay_type,onChange:ee=>$(te,"pay_type",ee.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Pay Type"}),e.jsx("option",{value:"MONTHLY",children:"Monthly"}),e.jsx("option",{value:"DAILY",children:"Daily"}),e.jsx("option",{value:"HOURLY",children:"Hourly"}),e.jsx("option",{value:"TASK",children:"Task"})]}),e.jsx("input",{type:"number",step:"0.01",placeholder:"Pay Rate",value:X.pay_rate,onChange:ee=>$(te,"pay_rate",ee.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"date",placeholder:"Start Date",value:X.start_date,onChange:ee=>$(te,"start_date",ee.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"})]})]},te))]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Job Roles (per Farm)"})}),p.farms.map(X=>{const te=X.farm_id;if(!te)return null;const ee=w.global||[],A=p.job_roles.filter(G=>G.farm_id===parseInt(te));return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:u.find(G=>G.id===parseInt(te))?.name||`Farm ${te}`}),e.jsx("button",{type:"button",onClick:()=>H(te),className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Add Job Role"})]}),A.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No job roles assigned"}):A.map((G,Y)=>{const R=p.job_roles.findIndex(j=>j.farm_id===parseInt(te)&&j.worker_job_role_id===G.worker_job_role_id);return e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("select",{value:G.worker_job_role_id,onChange:j=>g(R,"worker_job_role_id",j.target.value),className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Select Job Role"}),ee.map(j=>e.jsxs("option",{value:j.id,children:[j.name," (",j.code,")"]},j.id))]}),e.jsx("button",{type:"button",onClick:()=>ce(R),className:"text-red-600 hover:text-red-800",children:e.jsx(sn,{size:16})})]},Y)})]},te)})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-2",children:k.map(X=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.permissions.includes(X.name),onChange:()=>pe(X.name),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:X.name})]},X.id))})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[C?"Update":"Create"," User"]})]})]})]})})]})}function dg(){const i=Hs(),[o,u]=f.useState([]),[v,k]=f.useState([]),[N,w]=f.useState([]),[S,x]=f.useState(!0),[E,b]=f.useState(!1),[D,C]=f.useState(null),[I,m]=f.useState({farm_id:"",asset_category_id:"",asset_code:"",name:"",description:"",status:"ACTIVE",acquisition_type:"PURCHASED",purchase_date:"",purchase_cost:"",currency:"NGN",serial_number:"",is_trackable:!0});f.useEffect(()=>{y(),p(),c()},[]);const y=async()=>{x(!0);try{const M=await B.get("/api/v1/assets?per_page=1000"),T=M.data?.data||(Array.isArray(M.data)?M.data:[]);u(Array.isArray(T)?T:[])}catch(M){console.error("Error fetching assets:",M),u([])}finally{x(!1)}},p=async()=>{try{const M=await B.get("/api/v1/asset-categories?per_page=1000"),T=M.data?.data||(Array.isArray(M.data)?M.data:[]);k(Array.isArray(T)?T:[])}catch(M){console.error("Error fetching categories:",M),k([])}},c=async()=>{try{const M=await B.get("/api/v1/farms?per_page=1000"),T=M.data?.data||(Array.isArray(M.data)?M.data:[]);w(Array.isArray(T)?T:[])}catch(M){console.error("Error fetching farms:",M),w([])}},O=(M=null)=>{C(M),m({farm_id:M?.farm_id||"",asset_category_id:M?.asset_category_id||"",asset_code:M?.asset_code||"",name:M?.name||"",description:M?.description||"",status:M?.status||"ACTIVE",acquisition_type:M?.acquisition_type||"PURCHASED",purchase_date:M?.purchase_date||"",purchase_cost:M?.purchase_cost||"",currency:M?.currency||"NGN",serial_number:M?.serial_number||"",is_trackable:M?.is_trackable!==void 0?M?.is_trackable:!0}),b(!0)},V=async M=>{M.preventDefault();try{D?await B.put(`/api/v1/assets/${D.id}`,I):await B.post("/api/v1/assets",I),b(!1),y()}catch(T){console.error("Error saving asset:",T),alert(T.response?.data?.message||"Error saving asset")}},z=async M=>{if(confirm("Are you sure you want to delete this asset?"))try{await B.delete(`/api/v1/assets/${M}`),y()}catch(T){console.error("Error deleting asset:",T),alert(T.response?.data?.message||"Error deleting asset")}},h=M=>({ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",UNDER_REPAIR:"bg-yellow-100 text-yellow-800",DISPOSED:"bg-red-100 text-red-800",SOLD:"bg-blue-100 text-blue-800",LOST:"bg-red-100 text-red-800"})[M]||"bg-gray-100 text-gray-800";return S?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Assets"}),e.jsxs("button",{onClick:()=>O(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Add Asset"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No assets found"})}):o.map(M=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:M.asset_code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:M.category?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h(M.status)}`,children:M.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:M.farm?.name||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>i(`/admin/assets/${M.id}`),className:"text-green-600 hover:text-green-900 mr-4",title:"View Details",children:e.jsx(kx,{size:16})}),e.jsx("button",{onClick:()=>O(M),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>z(M.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ze,{size:16})})]})]},M.id))})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:D?"Edit Asset":"Add Asset"}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:I.farm_id,onChange:M=>m({...I,farm_id:M.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",disabled:!!D,children:[e.jsx("option",{value:"",children:"Select Farm"}),N.map(M=>e.jsx("option",{value:M.id,children:M.name},M.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:I.asset_category_id,onChange:M=>m({...I,asset_category_id:M.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Category"}),v.filter(M=>M.farm_id===(I.farm_id||D?.farm_id)).map(M=>e.jsx("option",{value:M.id,children:M.name},M.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Code"}),e.jsx("input",{type:"text",value:I.asset_code,onChange:M=>m({...I,asset_code:M.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if empty"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:I.status,onChange:M=>m({...I,status:M.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"UNDER_REPAIR",children:"Under Repair"}),e.jsx("option",{value:"DISPOSED",children:"Disposed"}),e.jsx("option",{value:"SOLD",children:"Sold"}),e.jsx("option",{value:"LOST",children:"Lost"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:I.name,onChange:M=>m({...I,name:M.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:I.description,onChange:M=>m({...I,description:M.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:I.acquisition_type,onChange:M=>m({...I,acquisition_type:M.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:I.purchase_date,onChange:M=>m({...I,purchase_date:M.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:I.purchase_cost,onChange:M=>m({...I,purchase_cost:M.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",value:I.currency,onChange:M=>m({...I,currency:M.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",maxLength:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:I.serial_number,onChange:M=>m({...I,serial_number:M.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 mt-6",children:[e.jsx("input",{type:"checkbox",checked:I.is_trackable,onChange:M=>m({...I,is_trackable:M.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Trackable"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:D?"Update":"Create"})]})]})]})})]})}function ug(){const[i,o]=f.useState([]),[u,v]=f.useState(!0),[k,N]=f.useState(!1),[w,S]=f.useState(null),[x,E]=f.useState({code:"",name:"",parent_id:"",is_active:!0});f.useEffect(()=>{b()},[]);const b=async()=>{v(!0);try{const y=await B.get("/api/v1/asset-categories?per_page=1000"),p=y.data?.data||(Array.isArray(y.data)?y.data:[]);o(Array.isArray(p)?p:[])}catch(y){console.error("Error fetching categories:",y),o([])}finally{v(!1)}},D=(y=null)=>{S(y),E({code:y?.code||"",name:y?.name||"",parent_id:y?.parent_id||"",is_active:y?.is_active!==void 0?y?.is_active:!0}),N(!0)},C=async y=>{y.preventDefault();try{w?await B.put(`/api/v1/asset-categories/${w.id}`,x):await B.post("/api/v1/asset-categories",x),N(!1),b()}catch(p){console.error("Error saving category:",p),alert(p.response?.data?.message||"Error saving category")}},I=async y=>{if(confirm("Are you sure you want to delete this category?"))try{await B.delete(`/api/v1/asset-categories/${y}`),b()}catch(p){console.error("Error deleting category:",p),alert(p.response?.data?.message||"Error deleting category")}},m=y=>{if(!y)return"-";const p=i.find(c=>c.id===y);return p?p.name:"-"};return u?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Asset Categories"}),e.jsxs("button",{onClick:()=>D(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Add Category"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No categories found"})}):i.map(y=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:y.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:m(y.parent_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${y.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>D(y),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>I(y.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ze,{size:16})})]})]},y.id))})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:w?"Edit Category":"Add Category"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:x.code,onChange:y=>E({...x,code:y.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:y=>E({...x,name:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Category"}),e.jsxs("select",{value:x.parent_id,onChange:y=>E({...x,parent_id:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"None"}),i.filter(y=>y.id!==w?.id).map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 mt-6",children:[e.jsx("input",{type:"checkbox",checked:x.is_active,onChange:y=>E({...x,is_active:y.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:w?"Update":"Create"})]})]})]})})]})}function mg(){const[i,o]=f.useState([]),[u,v]=f.useState(!0),[k,N]=f.useState(!1),[w,S]=f.useState(null),[x,E]=f.useState({code:"",name:"",description:"",is_active:!0});f.useEffect(()=>{b()},[]);const b=async()=>{v(!0);try{const m=await B.get("/api/v1/worker-job-roles?per_page=1000"),y=m.data?.data||(Array.isArray(m.data)?m.data:[]);o(Array.isArray(y)?y:[])}catch(m){console.error("Error fetching job roles:",m),o([])}finally{v(!1)}},D=(m=null)=>{S(m),E(m?{code:m.code||"",name:m.name||"",description:m.description||"",is_active:m.is_active!==void 0?m.is_active:!0}:{code:"",name:"",description:"",is_active:!0}),N(!0)},C=async m=>{m.preventDefault();try{w?await B.put(`/api/v1/worker-job-roles/${w.id}`,x):await B.post("/api/v1/worker-job-roles",x),N(!1),b()}catch(y){console.error("Error saving job role:",y),alert(y.response?.data?.message||"Error saving job role")}},I=async m=>{if(confirm("Are you sure you want to delete this job role?"))try{await B.delete(`/api/v1/worker-job-roles/${m}`),b()}catch(y){console.error("Error deleting job role:",y),alert(y.response?.data?.message||"Error deleting job role")}};return u?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Worker Job Roles"}),e.jsxs("button",{onClick:()=>D(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Add Job Role"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No job roles found"})}):i.map(m=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:m.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:m.description||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${m.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>D(m),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>I(m.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ze,{size:16})})]})]},m.id))})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:w?"Edit Job Role":"Add Job Role"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:x.farm_id,onChange:m=>E({...x,farm_id:m.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",disabled:!!w,children:[e.jsx("option",{value:"",children:"Select Farm"}),farms.map(m=>e.jsx("option",{value:m.id,children:m.name},m.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:x.code,onChange:m=>E({...x,code:m.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., FLD_SUP"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:m=>E({...x,name:m.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., Field Supervisor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:m=>E({...x,description:m.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.is_active,onChange:m=>E({...x,is_active:m.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:w?"Update":"Create"})]})]})]})})]})}function pg(){const[i,o]=f.useState([]),[u,v]=f.useState([]),[k,N]=f.useState([]),[w,S]=f.useState(!0),[x,E]=f.useState(!1),[b,D]=f.useState(null),[C,I]=f.useState(!1),[m,y]=f.useState({site_id:"",name:"",status:"ACTIVE",notes:"",track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1});f.useEffect(()=>{p()},[]);const p=async()=>{try{const[h,M,T]=await Promise.all([B.get("/api/v1/boreholes"),B.get("/api/v1/sites?per_page=1000"),B.get("/api/v1/asset-categories?per_page=1000")]),$=h.data?.data||(Array.isArray(h.data)?h.data:[]);o(Array.isArray($)?$:[]);let H=[];M.data&&(Array.isArray(M.data)?H=M.data:M.data.data&&Array.isArray(M.data.data)?H=M.data.data:Array.isArray(M.data)&&(H=M.data)),v(H);let ce=[];T.data&&(Array.isArray(T.data)?ce=T.data:T.data.data&&Array.isArray(T.data.data)&&(ce=T.data.data)),N(ce)}catch(h){console.error("Error fetching data:",h),console.error("Error response:",h.response?.data),alert("Error loading data: "+(h.response?.data?.message||h.message)),v([]),o([]),N([])}finally{S(!1)}},c=()=>{D(null),I(!1),y({site_id:"",name:"",status:"ACTIVE",notes:"",track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1}),E(!0)},O=h=>{D(h);const M=!!h.asset_id;I(M),y({site_id:h.site?.id||"",name:h.name||"",status:h.status||"ACTIVE",notes:h.notes||"",track_as_asset:M,asset_category_id:h.asset?.asset_category_id||"",asset_description:h.asset?.description||"",asset_acquisition_type:h.asset?.acquisition_type||"",asset_purchase_date:h.asset?.purchase_date?new Date(h.asset.purchase_date).toISOString().slice(0,10):"",asset_purchase_cost:h.asset?.purchase_cost||"",asset_currency:h.asset?.currency||"NGN",asset_supplier_name:h.asset?.supplier_name||"",asset_serial_number:h.asset?.serial_number||"",asset_model:h.asset?.model||"",asset_manufacturer:h.asset?.manufacturer||"",asset_year_of_make:h.asset?.year_of_make||"",asset_warranty_expiry:h.asset?.warranty_expiry?new Date(h.asset.warranty_expiry).toISOString().slice(0,10):"",asset_is_trackable:h.asset?.is_trackable||!1}),E(!0)},V=async h=>{h.preventDefault();try{const M={...m};M.track_as_asset=C,C||Object.keys(M).forEach(T=>{T.startsWith("asset_")&&delete M[T]}),b?await B.patch(`/api/v1/boreholes/${b.id}`,M):await B.post("/api/v1/boreholes",M),E(!1),p()}catch(M){alert("Error saving borehole: "+(M.response?.data?.message||"Unknown error"))}},z=async h=>{if(confirm("Are you sure you want to delete this borehole?"))try{await B.delete(`/api/v1/boreholes/${h}`),p()}catch(M){alert("Error deleting borehole: "+(M.response?.data?.message||"Unknown error"))}};return w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Borehole Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage boreholes per Site; Farm is derived from Site"})]}),e.jsxs("button",{onClick:c,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"New Borehole"]})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(wx,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No boreholes yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first borehole to get started"}),e.jsx("button",{onClick:c,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Borehole"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(h=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.borehole_code||h.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.site?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-gray-100 text-gray-800",children:h.status||"ACTIVE"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>O(h),className:"text-green-600 hover:text-green-700",children:e.jsx(He,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>z(h.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Ze,{className:"h-4 w-4"})})]})})]},h.id))})]})})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:b?"Edit Borehole":"Create New Borehole"}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site *"}),e.jsxs("select",{required:!0,value:m.site_id,onChange:h=>y({...m,site_id:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select site"}),u.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Code will be auto-generated as BH-[Site]-XXX (e.g., BH-EMU-001 for Emure site)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:h=>y({...m,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:m.status,onChange:h=>y({...m,status:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"ACTIVE",children:"ACTIVE"}),e.jsx("option",{value:"INACTIVE",children:"INACTIVE"}),e.jsx("option",{value:"UNDER_REPAIR",children:"UNDER_REPAIR"}),e.jsx("option",{value:"DECOMMISSIONED",children:"DECOMMISSIONED"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:h=>{I(h.target.checked),y({...m,track_as_asset:h.target.checked})},className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Track as Asset"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check this box to create an asset record for this borehole. You can enter asset details below."})]}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:col-span-2 border-t pt-4 mt-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asset Information"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Category"}),e.jsxs("select",{value:m.asset_category_id,onChange:h=>y({...m,asset_category_id:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select category"}),k.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:m.asset_acquisition_type,onChange:h=>y({...m,asset_acquisition_type:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:m.asset_purchase_date,onChange:h=>y({...m,asset_purchase_date:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:m.asset_purchase_cost,onChange:h=>y({...m,asset_purchase_cost:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",maxLength:3,value:m.asset_currency,onChange:h=>y({...m,asset_currency:h.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"NGN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:m.asset_supplier_name,onChange:h=>y({...m,asset_supplier_name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:m.asset_serial_number,onChange:h=>y({...m,asset_serial_number:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",value:m.asset_model,onChange:h=>y({...m,asset_model:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:m.asset_manufacturer,onChange:h=>y({...m,asset_manufacturer:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year of Make"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,value:m.asset_year_of_make,onChange:h=>y({...m,asset_year_of_make:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty Expiry"}),e.jsx("input",{type:"date",value:m.asset_warranty_expiry,onChange:h=>y({...m,asset_warranty_expiry:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Description"}),e.jsx("textarea",{value:m.asset_description,onChange:h=>y({...m,asset_description:h.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:m.asset_is_trackable,onChange:h=>y({...m,asset_is_trackable:h.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Is Trackable"})]})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:m.notes,onChange:h=>y({...m,notes:h.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[b?"Update":"Create"," Borehole"]})]})]})]})})]})}function xg(){const[i,o]=f.useState([]),[u,v]=f.useState(!0),[k,N]=f.useState(!1),[w,S]=f.useState(null),[x,E]=f.useState({code:"",name:"",code_prefix:"",description:"",is_active:!0});f.useEffect(()=>{b()},[]);const b=async()=>{v(!0);try{const m=await B.get("/api/v1/site-types?per_page=1000"),y=m.data?.data||(Array.isArray(m.data)?m.data:[]);o(Array.isArray(y)?y:[])}catch(m){console.error("Error fetching site types:",m),o([])}finally{v(!1)}},D=(m=null)=>{S(m),E({code:m?.code||"",name:m?.name||"",code_prefix:m?.code_prefix||"",description:m?.description||"",is_active:m?.is_active!==void 0?m?.is_active:!0}),N(!0)},C=async m=>{m.preventDefault();try{w?await B.put(`/api/v1/site-types/${w.id}`,x):await B.post("/api/v1/site-types",x),N(!1),b()}catch(y){console.error("Error saving site type:",y);const p=y.response?.data?.message||(y.response?.data?.errors?JSON.stringify(y.response.data.errors):"")||y.message;alert("Error saving site type: "+p)}},I=async m=>{if(confirm("Are you sure you want to delete this site type? Sites using this type will not be affected, but you won't be able to create new sites with this type."))try{await B.delete(`/api/v1/site-types/${m}`),b()}catch(y){console.error("Error deleting site type:",y);const p=y.response?.data?.message||y.message;alert("Error deleting site type: "+p)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Site Types"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage site types for organizing locations"})]}),e.jsxs("button",{onClick:()=>D(),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Re,{size:20}),"Add Site Type"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code Prefix"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sites Count"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No site types found"})}):i.map(m=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:m.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.code_prefix||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:m.description||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.sites?.length||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${m.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>D(m),className:"text-green-600 hover:text-green-900 mr-4",children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>I(m.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ze,{size:16})})]})]},m.id))})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:w?"Edit Site Type":"Add Site Type"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:x.code,onChange:m=>E({...x,code:m.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., farmland, warehouse",disabled:!!w}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique identifier (lowercase, no spaces)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:m=>E({...x,name:m.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., Farmland"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code Prefix"}),e.jsx("input",{type:"text",value:x.code_prefix,onChange:m=>E({...x,code_prefix:m.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., FL (for Farmland)",maxLength:10}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used when auto-generating site codes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:m=>E({...x,description:m.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3",placeholder:"Brief description of this site type"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.is_active,onChange:m=>E({...x,is_active:m.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:w?"Update":"Create"})]})]})]})})]})}function gg({children:i}){const{user:o,logout:u}=nn(),v=es(),k=Hs(),[N,w]=f.useState(!1),[S,x]=f.useState([]),[E,b]=f.useState(!1),D=()=>{const $=v.pathname;return{gari:$.startsWith("/gari"),bellPepper:$.startsWith("/bell-pepper"),tomatoes:$.startsWith("/tomatoes"),habaneros:$.startsWith("/habaneros"),livestock:!1}},[C,I]=f.useState(D());f.useEffect(()=>{const $=v.pathname;I(H=>({...H,gari:$.startsWith("/gari")?!0:H.gari,bellPepper:$.startsWith("/bell-pepper")?!0:H.bellPepper,tomatoes:$.startsWith("/tomatoes")?!0:H.tomatoes,habaneros:$.startsWith("/habaneros")?!0:H.habaneros}))},[v.pathname]),f.useEffect(()=>{if(o){const $=o.permissions?.map(H=>H.name)||o.roles?.flatMap(H=>H.permissions?.map(ce=>ce.name)||[])||[];x($)}},[o]);const m=()=>{u(),k("/login")},y=$=>{I(H=>({...H,[$]:!H[$]}))},p=[{name:"Bell Pepper",key:"bellPepper",icon:tn,items:[{name:"Production",href:"/bell-pepper-production",icon:nt},{name:"Harvests",href:"/bell-pepper-harvests",icon:ut},{name:"Inventory",href:"/bell-pepper-inventory",icon:ut},{name:"Sales",href:"/bell-pepper-sales",icon:Yr},{name:"KPIs",href:"/bell-pepper-kpis",icon:yt}]},{name:"Habaneros",key:"habaneros",icon:tn,items:[{name:"Production",href:"/habaneros-production",icon:nt},{name:"Inventory",href:"/habaneros-inventory",icon:ut},{name:"Sales",href:"/habaneros-sales",icon:Yr},{name:"KPIs",href:"/habaneros-kpis",icon:yt}]},{name:"Tomatoes",key:"tomatoes",icon:tn,items:[{name:"Production",href:"/tomatoes-production",icon:nt},{name:"Inventory",href:"/tomatoes-inventory",icon:ut},{name:"Sales",href:"/tomatoes-sales",icon:Yr},{name:"KPIs",href:"/tomatoes-kpis",icon:yt}]},{name:"Gari",key:"gari",icon:nt,items:[{name:"Production Batches",href:"/gari-production-batches",icon:nt},{name:"Inventory",href:"/gari-inventory",icon:ut},{name:"Sales",href:"/gari-sales",icon:Yr},{name:"KPIs",href:"/gari-kpis",icon:yt},{name:"Waste & Losses",href:"/gari-waste-losses",icon:yt},{name:"Packaging Materials",href:"/packaging-materials",icon:ut}]},{name:"Reports",items:[{name:"Dashboard",href:"/",icon:Dx},{name:"Consolidated Sales",href:"/reports/consolidated-sales",icon:or},{name:"Consolidated Expenses",href:"/reports/consolidated-expenses",icon:_i},{name:"Staff Allocation",href:"/reports/staff-allocation",icon:pi}]},{name:"Admin Settings",items:[{name:"Farms",href:"/farms",icon:Xr},{name:"Sites",href:"/admin/sites",icon:Lx},{name:"Farm Zones",href:"/admin/farm-zones",icon:Ex},{name:"Factories",href:"/admin/factories",icon:zd},{name:"Borehole Management",href:"/admin/boreholes",icon:nt},{name:"Greenhouse Management",href:"/admin/greenhouses",icon:nt},{name:"Scale Devices",href:"/scale-devices",icon:di},{name:"Label Templates",href:"/label-templates",icon:mi},{name:"Crops",href:"/admin/crops",icon:tn},{name:"Worker Job Roles",href:"/admin/worker-job-roles",icon:hx},{name:"Assets",href:"/admin/assets",icon:Ix},{name:"Asset Categories",href:"/admin/asset-categories",icon:Cx},{name:"Site Types",href:"/admin/site-types",icon:zd},{name:"Admin Zones",href:"/admin/admin-zones",icon:Ax},{name:"Roles",href:"/admin/roles",icon:ui},{name:"Users",href:"/admin/users",icon:pi}]}],c=($,H,ce="view")=>{if(o?.roles?.some(re=>re.name==="ADMIN"))return!0;const g=[$,H,ce].filter(Boolean).join(".");return S.includes(g)},O=($,H)=>c($,H,"view"),V=$=>$==="/"?v.pathname==="/":v.pathname.startsWith($),z=$=>$.items.some(H=>V(H.href)),h=$=>({"/":{menu:"reports",submenu:"dashboard"},"/farms":{menu:"admin",submenu:"farms"},"/scale-devices":{menu:"admin",submenu:"scale-devices"},"/label-templates":{menu:"admin",submenu:"label-templates"},"/gari-production-batches":{menu:"gari",submenu:"production-batches"},"/gari-inventory":{menu:"gari",submenu:"inventory"},"/gari-sales":{menu:"gari",submenu:"sales"},"/gari-kpis":{menu:"gari",submenu:"kpis"},"/gari-waste-losses":{menu:"gari",submenu:"waste-losses"},"/packaging-materials":{menu:"gari",submenu:"packaging-materials"},"/admin/boreholes":{menu:"admin",submenu:"boreholes"},"/admin/greenhouses":{menu:"admin",submenu:"greenhouses"},"/bell-pepper-production":{menu:"bell-pepper",submenu:"production"},"/bell-pepper-harvests":{menu:"bell-pepper",submenu:"harvests"},"/bell-pepper-inventory":{menu:"bell-pepper",submenu:"inventory"},"/bell-pepper-sales":{menu:"bell-pepper",submenu:"sales"},"/bell-pepper-kpis":{menu:"bell-pepper",submenu:"kpis"},"/tomatoes-production":{menu:"tomatoes",submenu:"production"},"/tomatoes-inventory":{menu:"tomatoes",submenu:"inventory"},"/tomatoes-sales":{menu:"tomatoes",submenu:"sales"},"/tomatoes-kpis":{menu:"tomatoes",submenu:"kpis"},"/habaneros-production":{menu:"habaneros",submenu:"production"},"/habaneros-inventory":{menu:"habaneros",submenu:"inventory"},"/habaneros-sales":{menu:"habaneros",submenu:"sales"},"/habaneros-kpis":{menu:"habaneros",submenu:"kpis"},"/reports/consolidated-sales":{menu:"reports",submenu:"consolidated-sales"},"/reports/consolidated-expenses":{menu:"reports",submenu:"consolidated-expenses"},"/reports/staff-allocation":{menu:"reports",submenu:"staff-allocation"},"/admin/admin-zones":{menu:"admin",submenu:"admin-zones"},"/admin/sites":{menu:"admin",submenu:"sites"},"/admin/farm-zones":{menu:"admin",submenu:"farm-zones"},"/admin/factories":{menu:"admin",submenu:"factories"},"/admin/crops":{menu:"admin",submenu:"crops"},"/admin/worker-job-roles":{menu:"admin",submenu:"worker-job-roles"},"/admin/assets":{menu:"admin",submenu:"assets"},"/admin/asset-categories":{menu:"admin",submenu:"asset-categories"},"/admin/site-types":{menu:"admin",submenu:"site-types"},"/admin/roles":{menu:"admin",submenu:"roles"},"/admin/users":{menu:"admin",submenu:"users"}})[$]||{menu:null,submenu:null},M=$=>{const{menu:H,submenu:ce}=h($.href);if(!O(H,ce))return null;const g=V($.href);return e.jsxs(vt,{to:$.href,onClick:()=>w(!1),className:`flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors ml-4 ${g?"bg-green-50 text-green-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx($.icon,{className:"mr-3 h-4 w-4"}),$.name]},$.name)},T=$=>{if($.key){const H=C[$.key]||!1,ce=z($);return e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:g=>{g.preventDefault(),g.stopPropagation(),y($.key)},className:`w-full flex items-center justify-between px-4 py-2.5 text-sm font-semibold rounded-lg transition-colors ${ce?"bg-green-50 text-green-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($.icon,{className:"mr-3 h-5 w-5"}),$.name]}),H?e.jsx(bx,{className:"h-4 w-4"}):e.jsx(jx,{className:"h-4 w-4"})]}),H&&e.jsx("div",{className:"mt-1 space-y-1",children:$.items.map(M)})]},$.name)}else return e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:$.name}),e.jsx("div",{className:"mt-1 space-y-1",children:$.items.map(M)})]},$.name)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:e.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[e.jsxs("div",{className:"flex items-center flex-shrink-0 px-4 py-4 border-b border-gray-200 flex-nowrap",children:[E?e.jsx(Xr,{className:"h-8 w-8 text-green-600 flex-shrink-0"}):e.jsx("img",{src:"/images/ogenki-logo.png",alt:"Ogenki Farms",className:"h-12 w-auto object-contain max-w-[120px] flex-shrink-0",onError:()=>b(!0)}),e.jsx("h1",{className:"ml-2 text-sm font-bold text-gray-900 whitespace-nowrap truncate",children:"Ogenki Farms"})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-2 overflow-y-auto",children:p.map(T)})}),e.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 font-medium",children:o?.email?.charAt(0).toUpperCase()||"U"})})}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:o?.name||o?.email||"User"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:o?.email})]}),e.jsx("button",{onClick:m,className:"ml-2 p-2 text-gray-400 hover:text-gray-600",title:"Logout",children:e.jsx(Ud,{className:"h-5 w-5"})})]})})]})}),e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center flex-nowrap flex-1 min-w-0",children:[E?e.jsx(Xr,{className:"h-6 w-6 text-green-600 flex-shrink-0"}):e.jsx("img",{src:"/images/ogenki-logo.png",alt:"Ogenki Farms",className:"h-10 w-auto object-contain max-w-[100px] flex-shrink-0",onError:()=>b(!0)}),e.jsx("h1",{className:"ml-2 text-sm font-bold text-gray-900 whitespace-nowrap truncate",children:"Ogenki Farms"})]}),e.jsx("button",{onClick:()=>w(!N),className:"p-2 text-gray-400 hover:text-gray-600",children:N?e.jsx(sn,{className:"h-6 w-6"}):e.jsx(Px,{className:"h-6 w-6"})})]}),N&&e.jsx("div",{className:"bg-white border-b border-gray-200 max-h-[calc(100vh-64px)] overflow-y-auto",children:e.jsxs("nav",{className:"px-2 py-2 space-y-2",children:[p.map(T),e.jsxs("button",{onClick:m,className:"w-full flex items-center px-4 py-3 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg",children:[e.jsx(Ud,{className:"mr-3 h-5 w-5"}),"Logout"]})]})})]}),e.jsx("div",{className:"md:pl-64",children:e.jsx("main",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i})})})]})}function hg({children:i}){const{user:o,loading:u}=nn();return u?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):o?i:e.jsx(Qr,{to:"/login"})}function fg(){const{user:i,loading:o}=nn();if(o)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})});if(!i)return e.jsx(Qr,{to:"/login"});const u=i?.roles?.some(N=>N.name==="ADMIN"),v=i.permissions?.map(N=>N.name)||i.roles?.flatMap(N=>N.permissions?.map(w=>w.name)||[])||[];return u||v.includes("reports.dashboard.view")?e.jsx(Ox,{}):v.includes("bell-pepper.harvests.view")?e.jsx(Qr,{to:"/bell-pepper-harvests",replace:!0}):v.includes("bell-pepper.inventory.view")?e.jsx(Qr,{to:"/bell-pepper-inventory",replace:!0}):v.includes("gari.production-batches.view")?e.jsx(Qr,{to:"/gari-production-batches",replace:!0}):v.includes("gari.inventory.view")?e.jsx(Qr,{to:"/gari-inventory",replace:!0}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-yellow-800",children:"No Access"}),e.jsx("p",{className:"text-yellow-700",children:"You don't have access to any pages. Please contact your administrator."})]})})}function yg(){return e.jsx(ux,{children:e.jsxs(Ld,{children:[e.jsx(fe,{path:"/login",element:e.jsx(Mx,{})}),e.jsx(fe,{path:"/*",element:e.jsx(hg,{children:e.jsx(gg,{children:e.jsxs(Ld,{children:[e.jsx(fe,{path:"/",element:e.jsx(fg,{})}),e.jsx(fe,{path:"/farms",element:e.jsx(zx,{})}),e.jsx(fe,{path:"/farms/:id",element:e.jsx(Ux,{})}),e.jsx(fe,{path:"/scale-devices",element:e.jsx(qx,{})}),e.jsx(fe,{path:"/label-templates",element:e.jsx(Bx,{})}),e.jsx(fe,{path:"/gari-production-batches",element:e.jsx(Hx,{})}),e.jsx(fe,{path:"/gari-production-batches/:id",element:e.jsx($x,{})}),e.jsx(fe,{path:"/gari-inventory",element:e.jsx(Vx,{})}),e.jsx(fe,{path:"/gari-sales",element:e.jsx(Gx,{})}),e.jsx(fe,{path:"/gari-kpis",element:e.jsx(Wx,{})}),e.jsx(fe,{path:"/packaging-materials",element:e.jsx(Kx,{})}),e.jsx(fe,{path:"/gari-waste-losses",element:e.jsx(Qx,{})}),e.jsx(fe,{path:"/bell-pepper-production",element:e.jsx(eg,{})}),e.jsx(fe,{path:"/bell-pepper-cycles/:id",element:e.jsx(tg,{})}),e.jsx(fe,{path:"/bell-pepper-harvests",element:e.jsx(rg,{})}),e.jsx(fe,{path:"/bell-pepper-inventory",element:e.jsx(Ct,{cropName:"Bell Pepper",basePath:"bell-pepper"})}),e.jsx(fe,{path:"/bell-pepper-sales",element:e.jsx(Ct,{cropName:"Bell Pepper",basePath:"bell-pepper"})}),e.jsx(fe,{path:"/bell-pepper-kpis",element:e.jsx(Ct,{cropName:"Bell Pepper",basePath:"bell-pepper"})}),e.jsx(fe,{path:"/tomatoes-production",element:e.jsx(Ct,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(fe,{path:"/tomatoes-inventory",element:e.jsx(Ct,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(fe,{path:"/tomatoes-sales",element:e.jsx(Ct,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(fe,{path:"/tomatoes-kpis",element:e.jsx(Ct,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(fe,{path:"/habaneros-production",element:e.jsx(Ct,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(fe,{path:"/habaneros-inventory",element:e.jsx(Ct,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(fe,{path:"/habaneros-sales",element:e.jsx(Ct,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(fe,{path:"/habaneros-kpis",element:e.jsx(Ct,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(fe,{path:"/reports/consolidated-sales",element:e.jsx(Yx,{})}),e.jsx(fe,{path:"/reports/consolidated-expenses",element:e.jsx(Xx,{})}),e.jsx(fe,{path:"/reports/staff-allocation",element:e.jsx(Zx,{})}),e.jsx(fe,{path:"/admin/admin-zones",element:e.jsx(lg,{})}),e.jsx(fe,{path:"/admin/sites",element:e.jsx(sg,{})}),e.jsx(fe,{path:"/admin/boreholes",element:e.jsx(pg,{})}),e.jsx(fe,{path:"/admin/greenhouses",element:e.jsx(Jx,{})}),e.jsx(fe,{path:"/admin/farm-zones",element:e.jsx(ag,{})}),e.jsx(fe,{path:"/admin/factories",element:e.jsx(ng,{})}),e.jsx(fe,{path:"/admin/crops",element:e.jsx(og,{})}),e.jsx(fe,{path:"/admin/worker-job-roles",element:e.jsx(mg,{})}),e.jsx(fe,{path:"/admin/assets",element:e.jsx(dg,{})}),e.jsx(fe,{path:"/admin/asset-categories",element:e.jsx(ug,{})}),e.jsx(fe,{path:"/admin/site-types",element:e.jsx(xg,{})}),e.jsx(fe,{path:"/admin/roles",element:e.jsx(ig,{})}),e.jsx(fe,{path:"/admin/users",element:e.jsx(cg,{})})]})})})})]})})}class vg extends gi.Component{constructor(o){super(o),this.state={hasError:!1,error:null}}static getDerivedStateFromError(o){return{hasError:!0,error:o}}componentDidCatch(o,u){console.error("React Error:",o,u)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",fontFamily:"sans-serif"},children:[e.jsx("h1",{children:"Something went wrong"}),e.jsxs("p",{children:["Error: ",this.state.error?.message||"Unknown error"]}),e.jsx("pre",{style:{background:"#f5f5f5",padding:"10px",overflow:"auto"},children:this.state.error?.stack}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}const li=document.getElementById("app");if(!li)console.error('App element not found! Make sure <div id="app"></div> exists in the HTML.'),document.body.innerHTML='<div style="padding: 20px;"><h1>Error: App element not found</h1><p>Make sure the HTML includes: &lt;div id="app"&gt;&lt;/div&gt;</p></div>';else try{cp.createRoot(li).render(e.jsx(gi.StrictMode,{children:e.jsx(vg,{children:e.jsx(ix,{children:e.jsx(yg,{})})})}))}catch(i){console.error("Failed to render React app:",i),li.innerHTML=`
            <div style="padding: 20px; font-family: sans-serif;">
                <h1>Failed to Load Application</h1>
                <p>Error: ${i.message}</p>
                <pre style="background: #f5f5f5; padding: 10px; overflow: auto;">${i.stack}</pre>
                <button onclick="window.location.reload()">Reload Page</button>
            </div>
        `}
