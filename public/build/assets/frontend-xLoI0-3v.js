import{a as sx}from"./index-B9ygI19o.js";/* empty css            */function rx(o,d){for(var u=0;u<d.length;u++){const _=d[u];if(typeof _!="string"&&!Array.isArray(_)){for(const S in _)if(S!=="default"&&!(S in o)){const C=Object.getOwnPropertyDescriptor(_,S);C&&Object.defineProperty(o,S,C.get?C:{enumerable:!0,get:()=>_[S]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}function Hd(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var oi={exports:{}},Qr={},ci={exports:{}},Ne={};var Nd;function ax(){if(Nd)return Ne;Nd=1;var o=Symbol.for("react.element"),d=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),P=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),j=Symbol.iterator;function E(N){return N===null||typeof N!="object"?null:(N=j&&N[j]||N["@@iterator"],typeof N=="function"?N:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c=Object.assign,p={};function h(N,v,D){this.props=N,this.context=v,this.refs=p,this.updater=D||q}h.prototype.isReactComponent={},h.prototype.setState=function(N,v){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,v,"setState")},h.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function i(){}i.prototype=h.prototype;function R(N,v,D){this.props=N,this.context=v,this.refs=p,this.updater=D||q}var G=R.prototype=new i;G.constructor=R,c(G,h.prototype),G.isPureReactComponent=!0;var w=Array.isArray,y=Object.prototype.hasOwnProperty,b={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function H(N,v,D){var V,ne={},$=null,te=null;if(v!=null)for(V in v.ref!==void 0&&(te=v.ref),v.key!==void 0&&($=""+v.key),v)y.call(v,V)&&!I.hasOwnProperty(V)&&(ne[V]=v[V]);var J=arguments.length-2;if(J===1)ne.children=D;else if(1<J){for(var je=Array(J),Ue=0;Ue<J;Ue++)je[Ue]=arguments[Ue+2];ne.children=je}if(N&&N.defaultProps)for(V in J=N.defaultProps,J)ne[V]===void 0&&(ne[V]=J[V]);return{$$typeof:o,type:N,key:$,ref:te,props:ne,_owner:b.current}}function k(N,v){return{$$typeof:o,type:N.type,key:v,ref:N.ref,props:N.props,_owner:N._owner}}function ie(N){return typeof N=="object"&&N!==null&&N.$$typeof===o}function U(N){var v={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(D){return v[D]})}var M=/\/+/g;function ae(N,v){return typeof N=="object"&&N!==null&&N.key!=null?U(""+N.key):v.toString(36)}function xe(N,v,D,V,ne){var $=typeof N;($==="undefined"||$==="boolean")&&(N=null);var te=!1;if(N===null)te=!0;else switch($){case"string":case"number":te=!0;break;case"object":switch(N.$$typeof){case o:case d:te=!0}}if(te)return te=N,ne=ne(te),N=V===""?"."+ae(te,0):V,w(ne)?(D="",N!=null&&(D=N.replace(M,"$&/")+"/"),xe(ne,v,D,"",function(Ue){return Ue})):ne!=null&&(ie(ne)&&(ne=k(ne,D+(!ne.key||te&&te.key===ne.key?"":(""+ne.key).replace(M,"$&/")+"/")+N)),v.push(ne)),1;if(te=0,V=V===""?".":V+":",w(N))for(var J=0;J<N.length;J++){$=N[J];var je=V+ae($,J);te+=xe($,v,D,je,ne)}else if(je=E(N),typeof je=="function")for(N=je.call(N),J=0;!($=N.next()).done;)$=$.value,je=V+ae($,J++),te+=xe($,v,D,je,ne);else if($==="object")throw v=String(N),Error("Objects are not valid as a React child (found: "+(v==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":v)+"). If you meant to render a collection of children, use an array instead.");return te}function X(N,v,D){if(N==null)return N;var V=[],ne=0;return xe(N,V,"","",function($){return v.call(D,$,ne++)}),V}function re(N){if(N._status===-1){var v=N._result;v=v(),v.then(function(D){(N._status===0||N._status===-1)&&(N._status=1,N._result=D)},function(D){(N._status===0||N._status===-1)&&(N._status=2,N._result=D)}),N._status===-1&&(N._status=0,N._result=v)}if(N._status===1)return N._result.default;throw N._result}var oe={current:null},F={transition:null},Y={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:F,ReactCurrentOwner:b};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:X,forEach:function(N,v,D){X(N,function(){v.apply(this,arguments)},D)},count:function(N){var v=0;return X(N,function(){v++}),v},toArray:function(N){return X(N,function(v){return v})||[]},only:function(N){if(!ie(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ne.Component=h,Ne.Fragment=u,Ne.Profiler=S,Ne.PureComponent=R,Ne.StrictMode=_,Ne.Suspense=x,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Ne.act=Z,Ne.cloneElement=function(N,v,D){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var V=c({},N.props),ne=N.key,$=N.ref,te=N._owner;if(v!=null){if(v.ref!==void 0&&($=v.ref,te=b.current),v.key!==void 0&&(ne=""+v.key),N.type&&N.type.defaultProps)var J=N.type.defaultProps;for(je in v)y.call(v,je)&&!I.hasOwnProperty(je)&&(V[je]=v[je]===void 0&&J!==void 0?J[je]:v[je])}var je=arguments.length-2;if(je===1)V.children=D;else if(1<je){J=Array(je);for(var Ue=0;Ue<je;Ue++)J[Ue]=arguments[Ue+2];V.children=J}return{$$typeof:o,type:N.type,key:ne,ref:$,props:V,_owner:te}},Ne.createContext=function(N){return N={$$typeof:T,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:C,_context:N},N.Consumer=N},Ne.createElement=H,Ne.createFactory=function(N){var v=H.bind(null,N);return v.type=N,v},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(N){return{$$typeof:A,render:N}},Ne.isValidElement=ie,Ne.lazy=function(N){return{$$typeof:f,_payload:{_status:-1,_result:N},_init:re}},Ne.memo=function(N,v){return{$$typeof:P,type:N,compare:v===void 0?null:v}},Ne.startTransition=function(N){var v=F.transition;F.transition={};try{N()}finally{F.transition=v}},Ne.unstable_act=Z,Ne.useCallback=function(N,v){return oe.current.useCallback(N,v)},Ne.useContext=function(N){return oe.current.useContext(N)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(N){return oe.current.useDeferredValue(N)},Ne.useEffect=function(N,v){return oe.current.useEffect(N,v)},Ne.useId=function(){return oe.current.useId()},Ne.useImperativeHandle=function(N,v,D){return oe.current.useImperativeHandle(N,v,D)},Ne.useInsertionEffect=function(N,v){return oe.current.useInsertionEffect(N,v)},Ne.useLayoutEffect=function(N,v){return oe.current.useLayoutEffect(N,v)},Ne.useMemo=function(N,v){return oe.current.useMemo(N,v)},Ne.useReducer=function(N,v,D){return oe.current.useReducer(N,v,D)},Ne.useRef=function(N){return oe.current.useRef(N)},Ne.useState=function(N){return oe.current.useState(N)},Ne.useSyncExternalStore=function(N,v,D){return oe.current.useSyncExternalStore(N,v,D)},Ne.useTransition=function(){return oe.current.useTransition()},Ne.version="18.3.1",Ne}var _d;function Ni(){return _d||(_d=1,ci.exports=ax()),ci.exports}var wd;function nx(){if(wd)return Qr;wd=1;var o=Ni(),d=Symbol.for("react.element"),u=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,S=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C={key:!0,ref:!0,__self:!0,__source:!0};function T(A,x,P){var f,j={},E=null,q=null;P!==void 0&&(E=""+P),x.key!==void 0&&(E=""+x.key),x.ref!==void 0&&(q=x.ref);for(f in x)_.call(x,f)&&!C.hasOwnProperty(f)&&(j[f]=x[f]);if(A&&A.defaultProps)for(f in x=A.defaultProps,x)j[f]===void 0&&(j[f]=x[f]);return{$$typeof:d,type:A,key:E,ref:q,props:j,_owner:S.current}}return Qr.Fragment=u,Qr.jsx=T,Qr.jsxs=T,Qr}var kd;function lx(){return kd||(kd=1,oi.exports=nx()),oi.exports}var e=lx(),m=Ni();const _i=Hd(m),ix=rx({__proto__:null,default:_i},[m]);var cn={},di={exports:{}},it={},ui={exports:{}},mi={};var Sd;function ox(){return Sd||(Sd=1,(function(o){function d(F,Y){var Z=F.length;F.push(Y);e:for(;0<Z;){var N=Z-1>>>1,v=F[N];if(0<S(v,Y))F[N]=Y,F[Z]=v,Z=N;else break e}}function u(F){return F.length===0?null:F[0]}function _(F){if(F.length===0)return null;var Y=F[0],Z=F.pop();if(Z!==Y){F[0]=Z;e:for(var N=0,v=F.length,D=v>>>1;N<D;){var V=2*(N+1)-1,ne=F[V],$=V+1,te=F[$];if(0>S(ne,Z))$<v&&0>S(te,ne)?(F[N]=te,F[$]=Z,N=$):(F[N]=ne,F[V]=Z,N=V);else if($<v&&0>S(te,Z))F[N]=te,F[$]=Z,N=$;else break e}}return Y}function S(F,Y){var Z=F.sortIndex-Y.sortIndex;return Z!==0?Z:F.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var C=performance;o.unstable_now=function(){return C.now()}}else{var T=Date,A=T.now();o.unstable_now=function(){return T.now()-A}}var x=[],P=[],f=1,j=null,E=3,q=!1,c=!1,p=!1,h=typeof setTimeout=="function"?setTimeout:null,i=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(F){for(var Y=u(P);Y!==null;){if(Y.callback===null)_(P);else if(Y.startTime<=F)_(P),Y.sortIndex=Y.expirationTime,d(x,Y);else break;Y=u(P)}}function w(F){if(p=!1,G(F),!c)if(u(x)!==null)c=!0,re(y);else{var Y=u(P);Y!==null&&oe(w,Y.startTime-F)}}function y(F,Y){c=!1,p&&(p=!1,i(H),H=-1),q=!0;var Z=E;try{for(G(Y),j=u(x);j!==null&&(!(j.expirationTime>Y)||F&&!U());){var N=j.callback;if(typeof N=="function"){j.callback=null,E=j.priorityLevel;var v=N(j.expirationTime<=Y);Y=o.unstable_now(),typeof v=="function"?j.callback=v:j===u(x)&&_(x),G(Y)}else _(x);j=u(x)}if(j!==null)var D=!0;else{var V=u(P);V!==null&&oe(w,V.startTime-Y),D=!1}return D}finally{j=null,E=Z,q=!1}}var b=!1,I=null,H=-1,k=5,ie=-1;function U(){return!(o.unstable_now()-ie<k)}function M(){if(I!==null){var F=o.unstable_now();ie=F;var Y=!0;try{Y=I(!0,F)}finally{Y?ae():(b=!1,I=null)}}else b=!1}var ae;if(typeof R=="function")ae=function(){R(M)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,X=xe.port2;xe.port1.onmessage=M,ae=function(){X.postMessage(null)}}else ae=function(){h(M,0)};function re(F){I=F,b||(b=!0,ae())}function oe(F,Y){H=h(function(){F(o.unstable_now())},Y)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(F){F.callback=null},o.unstable_continueExecution=function(){c||q||(c=!0,re(y))},o.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},o.unstable_getCurrentPriorityLevel=function(){return E},o.unstable_getFirstCallbackNode=function(){return u(x)},o.unstable_next=function(F){switch(E){case 1:case 2:case 3:var Y=3;break;default:Y=E}var Z=E;E=Y;try{return F()}finally{E=Z}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=E;E=F;try{return Y()}finally{E=Z}},o.unstable_scheduleCallback=function(F,Y,Z){var N=o.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?N+Z:N):Z=N,F){case 1:var v=-1;break;case 2:v=250;break;case 5:v=1073741823;break;case 4:v=1e4;break;default:v=5e3}return v=Z+v,F={id:f++,callback:Y,priorityLevel:F,startTime:Z,expirationTime:v,sortIndex:-1},Z>N?(F.sortIndex=Z,d(P,F),u(x)===null&&F===u(P)&&(p?(i(H),H=-1):p=!0,oe(w,Z-N))):(F.sortIndex=v,d(x,F),c||q||(c=!0,re(y))),F},o.unstable_shouldYield=U,o.unstable_wrapCallback=function(F){var Y=E;return function(){var Z=E;E=Y;try{return F.apply(this,arguments)}finally{E=Z}}}})(mi)),mi}var Cd;function cx(){return Cd||(Cd=1,ui.exports=ox()),ui.exports}var Ed;function dx(){if(Ed)return it;Ed=1;var o=Ni(),d=cx();function u(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _=new Set,S={};function C(t,s){T(t,s),T(t+"Capture",s)}function T(t,s){for(S[t]=s,t=0;t<s.length;t++)_.add(s[t])}var A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,P=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},j={};function E(t){return x.call(j,t)?!0:x.call(f,t)?!1:P.test(t)?j[t]=!0:(f[t]=!0,!1)}function q(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function c(t,s,r,a){if(s===null||typeof s>"u"||q(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function p(t,s,r,a,n,l,g){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=g}var h={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){h[t]=new p(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];h[s]=new p(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){h[t]=new p(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){h[t]=new p(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){h[t]=new p(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){h[t]=new p(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){h[t]=new p(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){h[t]=new p(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){h[t]=new p(t,5,!1,t.toLowerCase(),null,!1,!1)});var i=/[\-:]([a-z])/g;function R(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(i,R);h[s]=new p(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(i,R);h[s]=new p(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(i,R);h[s]=new p(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){h[t]=new p(t,1,!1,t.toLowerCase(),null,!1,!1)}),h.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){h[t]=new p(t,1,!1,t.toLowerCase(),null,!0,!0)});function G(t,s,r,a){var n=h.hasOwnProperty(s)?h[s]:null;(n!==null?n.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(c(s,r,n,a)&&(r=null),a||n===null?E(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(s=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(s):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var w=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),b=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),U=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),F=Symbol.iterator;function Y(t){return t===null||typeof t!="object"?null:(t=F&&t[F]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Object.assign,N;function v(t){if(N===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);N=s&&s[1]||""}return`
`+N+t}var D=!1;function V(t,s){if(!t||D)return"";D=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Q){var a=Q}Reflect.construct(t,[],s)}else{try{s.call()}catch(Q){a=Q}t.call(s.prototype)}else{try{throw Error()}catch(Q){a=Q}t()}}catch(Q){if(Q&&a&&typeof Q.stack=="string"){for(var n=Q.stack.split(`
`),l=a.stack.split(`
`),g=n.length-1,L=l.length-1;1<=g&&0<=L&&n[g]!==l[L];)L--;for(;1<=g&&0<=L;g--,L--)if(n[g]!==l[L]){if(g!==1||L!==1)do if(g--,L--,0>L||n[g]!==l[L]){var z=`
`+n[g].replace(" at new "," at ");return t.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",t.displayName)),z}while(1<=g&&0<=L);break}}}finally{D=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?v(t):""}function ne(t){switch(t.tag){case 5:return v(t.type);case 16:return v("Lazy");case 13:return v("Suspense");case 19:return v("SuspenseList");case 0:case 2:case 15:return t=V(t.type,!1),t;case 11:return t=V(t.type.render,!1),t;case 1:return t=V(t.type,!0),t;default:return""}}function $(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case I:return"Fragment";case b:return"Portal";case k:return"Profiler";case H:return"StrictMode";case ae:return"Suspense";case xe:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case U:return(t.displayName||"Context")+".Consumer";case ie:return(t._context.displayName||"Context")+".Provider";case M:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case X:return s=t.displayName||null,s!==null?s:$(t.type)||"Memo";case re:s=t._payload,t=t._init;try{return $(t(s))}catch{}}return null}function te(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(s);case 8:return s===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function J(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function je(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ue(t){var s=je(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,l=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(g){a=""+g,l.call(this,g)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Lt(t){t._valueTracker||(t._valueTracker=Ue(t))}function ps(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=je(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function gs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ds(t,s){var r=s.checked;return Z({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function or(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=J(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function cr(t,s){s=s.checked,s!=null&&G(t,"checked",s,!1)}function Ps(t,s){cr(t,s);var r=J(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Rs(t,s.type,r):s.hasOwnProperty("defaultValue")&&Rs(t,s.type,J(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function dr(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Rs(t,s,r){(s!=="number"||gs(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Gt=Array.isArray;function It(t,s,r,a){if(t=t.options,s){s={};for(var n=0;n<r.length;n++)s["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=s.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+J(r),s=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function yn(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(u(91));return Z({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pi(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(u(92));if(Gt(r)){if(1<r.length)throw Error(u(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:J(r)}}function Ri(t,s){var r=J(s.value),a=J(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function Ti(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Li(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vn(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Li(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ea,Ii=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,n)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(ea=ea||document.createElement("div"),ea.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ea.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function ur(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var mr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lu=["Webkit","ms","Moz","O"];Object.keys(mr).forEach(function(t){lu.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),mr[s]=mr[t]})});function Mi(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||mr.hasOwnProperty(t)&&mr[t]?(""+s).trim():s+"px"}function Fi(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=Mi(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var iu=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bn(t,s){if(s){if(iu[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(u(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(u(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(u(61))}if(s.style!=null&&typeof s.style!="object")throw Error(u(62))}}function jn(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nn=null;function _n(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wn=null,Ts=null,Ls=null;function Oi(t){if(t=Lr(t)){if(typeof wn!="function")throw Error(u(280));var s=t.stateNode;s&&(s=_a(s),wn(t.stateNode,t.type,s))}}function Ui(t){Ts?Ls?Ls.push(t):Ls=[t]:Ts=t}function qi(){if(Ts){var t=Ts,s=Ls;if(Ls=Ts=null,Oi(t),s)for(t=0;t<s.length;t++)Oi(s[t])}}function zi(t,s){return t(s)}function $i(){}var kn=!1;function Bi(t,s,r){if(kn)return t(s,r);kn=!0;try{return zi(t,s,r)}finally{kn=!1,(Ts!==null||Ls!==null)&&($i(),qi())}}function xr(t,s){var r=t.stateNode;if(r===null)return null;var a=_a(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(u(231,s,typeof r));return r}var Sn=!1;if(A)try{var pr={};Object.defineProperty(pr,"passive",{get:function(){Sn=!0}}),window.addEventListener("test",pr,pr),window.removeEventListener("test",pr,pr)}catch{Sn=!1}function ou(t,s,r,a,n,l,g,L,z){var Q=Array.prototype.slice.call(arguments,3);try{s.apply(r,Q)}catch(se){this.onError(se)}}var gr=!1,ta=null,sa=!1,Cn=null,cu={onError:function(t){gr=!0,ta=t}};function du(t,s,r,a,n,l,g,L,z){gr=!1,ta=null,ou.apply(cu,arguments)}function uu(t,s,r,a,n,l,g,L,z){if(du.apply(this,arguments),gr){if(gr){var Q=ta;gr=!1,ta=null}else throw Error(u(198));sa||(sa=!0,Cn=Q)}}function hs(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Hi(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Gi(t){if(hs(t)!==t)throw Error(u(188))}function mu(t){var s=t.alternate;if(!s){if(s=hs(t),s===null)throw Error(u(188));return s!==t?null:t}for(var r=t,a=s;;){var n=r.return;if(n===null)break;var l=n.alternate;if(l===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===r)return Gi(n),t;if(l===a)return Gi(n),s;l=l.sibling}throw Error(u(188))}if(r.return!==a.return)r=n,a=l;else{for(var g=!1,L=n.child;L;){if(L===r){g=!0,r=n,a=l;break}if(L===a){g=!0,a=n,r=l;break}L=L.sibling}if(!g){for(L=l.child;L;){if(L===r){g=!0,r=l,a=n;break}if(L===a){g=!0,a=l,r=n;break}L=L.sibling}if(!g)throw Error(u(189))}}if(r.alternate!==a)throw Error(u(190))}if(r.tag!==3)throw Error(u(188));return r.stateNode.current===r?t:s}function Vi(t){return t=mu(t),t!==null?Wi(t):null}function Wi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Wi(t);if(s!==null)return s;t=t.sibling}return null}var Ki=d.unstable_scheduleCallback,Qi=d.unstable_cancelCallback,xu=d.unstable_shouldYield,pu=d.unstable_requestPaint,Me=d.unstable_now,gu=d.unstable_getCurrentPriorityLevel,En=d.unstable_ImmediatePriority,Yi=d.unstable_UserBlockingPriority,ra=d.unstable_NormalPriority,hu=d.unstable_LowPriority,Ji=d.unstable_IdlePriority,aa=null,Et=null;function fu(t){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(aa,t,void 0,(t.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:bu,yu=Math.log,vu=Math.LN2;function bu(t){return t>>>=0,t===0?32:31-(yu(t)/vu|0)|0}var na=64,la=4194304;function hr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ia(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,l=t.pingedLanes,g=r&268435455;if(g!==0){var L=g&~n;L!==0?a=hr(L):(l&=g,l!==0&&(a=hr(l)))}else g=r&~n,g!==0?a=hr(g):l!==0&&(a=hr(l));if(a===0)return 0;if(s!==0&&s!==a&&(s&n)===0&&(n=a&-a,l=s&-s,n>=l||n===16&&(l&4194240)!==0))return s;if((a&4)!==0&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-jt(s),n=1<<r,a|=t[r],s&=~n;return a}function ju(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nu(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var g=31-jt(l),L=1<<g,z=n[g];z===-1?((L&r)===0||(L&a)!==0)&&(n[g]=ju(L,s)):z<=s&&(t.expiredLanes|=L),l&=~L}}function An(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xi(){var t=na;return na<<=1,(na&4194240)===0&&(na=64),t}function Dn(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function fr(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-jt(s),t[s]=r}function _u(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-jt(r),l=1<<n;s[n]=0,a[n]=-1,t[n]=-1,r&=~l}}function Pn(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-jt(r),n=1<<a;n&s|t[a]&s&&(t[a]|=s),r&=~n}}var Se=0;function Zi(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var eo,Rn,to,so,ro,Tn=!1,oa=[],Vt=null,Wt=null,Kt=null,yr=new Map,vr=new Map,Qt=[],wu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ao(t,s){switch(t){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":Kt=null;break;case"pointerover":case"pointerout":yr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vr.delete(s.pointerId)}}function br(t,s,r,a,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},s!==null&&(s=Lr(s),s!==null&&Rn(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function ku(t,s,r,a,n){switch(s){case"focusin":return Vt=br(Vt,t,s,r,a,n),!0;case"dragenter":return Wt=br(Wt,t,s,r,a,n),!0;case"mouseover":return Kt=br(Kt,t,s,r,a,n),!0;case"pointerover":var l=n.pointerId;return yr.set(l,br(yr.get(l)||null,t,s,r,a,n)),!0;case"gotpointercapture":return l=n.pointerId,vr.set(l,br(vr.get(l)||null,t,s,r,a,n)),!0}return!1}function no(t){var s=fs(t.target);if(s!==null){var r=hs(s);if(r!==null){if(s=r.tag,s===13){if(s=Hi(r),s!==null){t.blockedOn=s,ro(t.priority,function(){to(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ca(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=In(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);Nn=a,r.target.dispatchEvent(a),Nn=null}else return s=Lr(r),s!==null&&Rn(s),t.blockedOn=r,!1;s.shift()}return!0}function lo(t,s,r){ca(t)&&r.delete(s)}function Su(){Tn=!1,Vt!==null&&ca(Vt)&&(Vt=null),Wt!==null&&ca(Wt)&&(Wt=null),Kt!==null&&ca(Kt)&&(Kt=null),yr.forEach(lo),vr.forEach(lo)}function jr(t,s){t.blockedOn===s&&(t.blockedOn=null,Tn||(Tn=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,Su)))}function Nr(t){function s(n){return jr(n,t)}if(0<oa.length){jr(oa[0],t);for(var r=1;r<oa.length;r++){var a=oa[r];a.blockedOn===t&&(a.blockedOn=null)}}for(Vt!==null&&jr(Vt,t),Wt!==null&&jr(Wt,t),Kt!==null&&jr(Kt,t),yr.forEach(s),vr.forEach(s),r=0;r<Qt.length;r++)a=Qt[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<Qt.length&&(r=Qt[0],r.blockedOn===null);)no(r),r.blockedOn===null&&Qt.shift()}var Is=w.ReactCurrentBatchConfig,da=!0;function Cu(t,s,r,a){var n=Se,l=Is.transition;Is.transition=null;try{Se=1,Ln(t,s,r,a)}finally{Se=n,Is.transition=l}}function Eu(t,s,r,a){var n=Se,l=Is.transition;Is.transition=null;try{Se=4,Ln(t,s,r,a)}finally{Se=n,Is.transition=l}}function Ln(t,s,r,a){if(da){var n=In(t,s,r,a);if(n===null)Xn(t,s,a,ua,r),ao(t,a);else if(ku(n,t,s,r,a))a.stopPropagation();else if(ao(t,a),s&4&&-1<wu.indexOf(t)){for(;n!==null;){var l=Lr(n);if(l!==null&&eo(l),l=In(t,s,r,a),l===null&&Xn(t,s,a,ua,r),l===n)break;n=l}n!==null&&a.stopPropagation()}else Xn(t,s,a,null,r)}}var ua=null;function In(t,s,r,a){if(ua=null,t=_n(a),t=fs(t),t!==null)if(s=hs(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Hi(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return ua=t,null}function io(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gu()){case En:return 1;case Yi:return 4;case ra:case hu:return 16;case Ji:return 536870912;default:return 16}default:return 16}}var Yt=null,Mn=null,ma=null;function oo(){if(ma)return ma;var t,s=Mn,r=s.length,a,n="value"in Yt?Yt.value:Yt.textContent,l=n.length;for(t=0;t<r&&s[t]===n[t];t++);var g=r-t;for(a=1;a<=g&&s[r-a]===n[l-a];a++);return ma=n.slice(t,1<a?1-a:void 0)}function xa(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function pa(){return!0}function co(){return!1}function ct(t){function s(r,a,n,l,g){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=l,this.target=g,this.currentTarget=null;for(var L in t)t.hasOwnProperty(L)&&(r=t[L],this[L]=r?r(l):l[L]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?pa:co,this.isPropagationStopped=co,this}return Z(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pa)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pa)},persist:function(){},isPersistent:pa}),s}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fn=ct(Ms),_r=Z({},Ms,{view:0,detail:0}),Au=ct(_r),On,Un,wr,ga=Z({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wr&&(wr&&t.type==="mousemove"?(On=t.screenX-wr.screenX,Un=t.screenY-wr.screenY):Un=On=0,wr=t),On)},movementY:function(t){return"movementY"in t?t.movementY:Un}}),uo=ct(ga),Du=Z({},ga,{dataTransfer:0}),Pu=ct(Du),Ru=Z({},_r,{relatedTarget:0}),qn=ct(Ru),Tu=Z({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Lu=ct(Tu),Iu=Z({},Ms,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Mu=ct(Iu),Fu=Z({},Ms,{data:0}),mo=ct(Fu),Ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=qu[t])?!!s[t]:!1}function zn(){return zu}var $u=Z({},_r,{key:function(t){if(t.key){var s=Ou[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=xa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zn,charCode:function(t){return t.type==="keypress"?xa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bu=ct($u),Hu=Z({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xo=ct(Hu),Gu=Z({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zn}),Vu=ct(Gu),Wu=Z({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ku=ct(Wu),Qu=Z({},ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yu=ct(Qu),Ju=[9,13,27,32],$n=A&&"CompositionEvent"in window,kr=null;A&&"documentMode"in document&&(kr=document.documentMode);var Xu=A&&"TextEvent"in window&&!kr,po=A&&(!$n||kr&&8<kr&&11>=kr),go=" ",ho=!1;function fo(t,s){switch(t){case"keyup":return Ju.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fs=!1;function Zu(t,s){switch(t){case"compositionend":return yo(s);case"keypress":return s.which!==32?null:(ho=!0,go);case"textInput":return t=s.data,t===go&&ho?null:t;default:return null}}function em(t,s){if(Fs)return t==="compositionend"||!$n&&fo(t,s)?(t=oo(),ma=Mn=Yt=null,Fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return po&&s.locale!=="ko"?null:s.data;default:return null}}var tm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vo(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!tm[t.type]:s==="textarea"}function bo(t,s,r,a){Ui(a),s=ba(s,"onChange"),0<s.length&&(r=new Fn("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var Sr=null,Cr=null;function sm(t){Oo(t,0)}function ha(t){var s=$s(t);if(ps(s))return t}function rm(t,s){if(t==="change")return s}var jo=!1;if(A){var Bn;if(A){var Hn="oninput"in document;if(!Hn){var No=document.createElement("div");No.setAttribute("oninput","return;"),Hn=typeof No.oninput=="function"}Bn=Hn}else Bn=!1;jo=Bn&&(!document.documentMode||9<document.documentMode)}function _o(){Sr&&(Sr.detachEvent("onpropertychange",wo),Cr=Sr=null)}function wo(t){if(t.propertyName==="value"&&ha(Cr)){var s=[];bo(s,Cr,t,_n(t)),Bi(sm,s)}}function am(t,s,r){t==="focusin"?(_o(),Sr=s,Cr=r,Sr.attachEvent("onpropertychange",wo)):t==="focusout"&&_o()}function nm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ha(Cr)}function lm(t,s){if(t==="click")return ha(s)}function im(t,s){if(t==="input"||t==="change")return ha(s)}function om(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Nt=typeof Object.is=="function"?Object.is:om;function Er(t,s){if(Nt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!x.call(s,n)||!Nt(t[n],s[n]))return!1}return!0}function ko(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function So(t,s){var r=ko(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ko(r)}}function Co(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Co(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Eo(){for(var t=window,s=gs();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=gs(t.document)}return s}function Gn(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function cm(t){var s=Eo(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&Co(r.ownerDocument.documentElement,r)){if(a!==null&&Gn(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,l=Math.min(a.start,n);a=a.end===void 0?l:Math.min(a.end,n),!t.extend&&l>a&&(n=a,a=l,l=n),n=So(r,l);var g=So(r,a);n&&g&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==g.node||t.focusOffset!==g.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),l>a?(t.addRange(s),t.extend(g.node,g.offset)):(s.setEnd(g.node,g.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dm=A&&"documentMode"in document&&11>=document.documentMode,Os=null,Vn=null,Ar=null,Wn=!1;function Ao(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wn||Os==null||Os!==gs(a)||(a=Os,"selectionStart"in a&&Gn(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ar&&Er(Ar,a)||(Ar=a,a=ba(Vn,"onSelect"),0<a.length&&(s=new Fn("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=Os)))}function fa(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Us={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionend:fa("Transition","TransitionEnd")},Kn={},Do={};A&&(Do=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function ya(t){if(Kn[t])return Kn[t];if(!Us[t])return t;var s=Us[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Do)return Kn[t]=s[r];return t}var Po=ya("animationend"),Ro=ya("animationiteration"),To=ya("animationstart"),Lo=ya("transitionend"),Io=new Map,Mo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jt(t,s){Io.set(t,s),C(s,[t])}for(var Qn=0;Qn<Mo.length;Qn++){var Yn=Mo[Qn],um=Yn.toLowerCase(),mm=Yn[0].toUpperCase()+Yn.slice(1);Jt(um,"on"+mm)}Jt(Po,"onAnimationEnd"),Jt(Ro,"onAnimationIteration"),Jt(To,"onAnimationStart"),Jt("dblclick","onDoubleClick"),Jt("focusin","onFocus"),Jt("focusout","onBlur"),Jt(Lo,"onTransitionEnd"),T("onMouseEnter",["mouseout","mouseover"]),T("onMouseLeave",["mouseout","mouseover"]),T("onPointerEnter",["pointerout","pointerover"]),T("onPointerLeave",["pointerout","pointerover"]),C("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),C("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),C("onBeforeInput",["compositionend","keypress","textInput","paste"]),C("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),C("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),C("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Fo(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,uu(a,s,void 0,t),t.currentTarget=null}function Oo(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var l=void 0;if(s)for(var g=a.length-1;0<=g;g--){var L=a[g],z=L.instance,Q=L.currentTarget;if(L=L.listener,z!==l&&n.isPropagationStopped())break e;Fo(n,L,Q),l=z}else for(g=0;g<a.length;g++){if(L=a[g],z=L.instance,Q=L.currentTarget,L=L.listener,z!==l&&n.isPropagationStopped())break e;Fo(n,L,Q),l=z}}}if(sa)throw t=Cn,sa=!1,Cn=null,t}function De(t,s){var r=s[al];r===void 0&&(r=s[al]=new Set);var a=t+"__bubble";r.has(a)||(Uo(s,t,2,!1),r.add(a))}function Jn(t,s,r){var a=0;s&&(a|=4),Uo(r,t,a,s)}var va="_reactListening"+Math.random().toString(36).slice(2);function Pr(t){if(!t[va]){t[va]=!0,_.forEach(function(r){r!=="selectionchange"&&(xm.has(r)||Jn(r,!1,t),Jn(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[va]||(s[va]=!0,Jn("selectionchange",!1,s))}}function Uo(t,s,r,a){switch(io(s)){case 1:var n=Cu;break;case 4:n=Eu;break;default:n=Ln}r=n.bind(null,s,r,t),n=void 0,!Sn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(s,r,{capture:!0,passive:n}):t.addEventListener(s,r,!0):n!==void 0?t.addEventListener(s,r,{passive:n}):t.addEventListener(s,r,!1)}function Xn(t,s,r,a,n){var l=a;if((s&1)===0&&(s&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var L=a.stateNode.containerInfo;if(L===n||L.nodeType===8&&L.parentNode===n)break;if(g===4)for(g=a.return;g!==null;){var z=g.tag;if((z===3||z===4)&&(z=g.stateNode.containerInfo,z===n||z.nodeType===8&&z.parentNode===n))return;g=g.return}for(;L!==null;){if(g=fs(L),g===null)return;if(z=g.tag,z===5||z===6){a=l=g;continue e}L=L.parentNode}}a=a.return}Bi(function(){var Q=l,se=_n(r),le=[];e:{var ee=Io.get(t);if(ee!==void 0){var de=Fn,me=t;switch(t){case"keypress":if(xa(r)===0)break e;case"keydown":case"keyup":de=Bu;break;case"focusin":me="focus",de=qn;break;case"focusout":me="blur",de=qn;break;case"beforeblur":case"afterblur":de=qn;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Pu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Vu;break;case Po:case Ro:case To:de=Lu;break;case Lo:de=Ku;break;case"scroll":de=Au;break;case"wheel":de=Yu;break;case"copy":case"cut":case"paste":de=Mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=xo}var pe=(s&4)!==0,Fe=!pe&&t==="scroll",W=pe?ee!==null?ee+"Capture":null:ee;pe=[];for(var B=Q,K;B!==null;){K=B;var ce=K.stateNode;if(K.tag===5&&ce!==null&&(K=ce,W!==null&&(ce=xr(B,W),ce!=null&&pe.push(Rr(B,ce,K)))),Fe)break;B=B.return}0<pe.length&&(ee=new de(ee,me,null,r,se),le.push({event:ee,listeners:pe}))}}if((s&7)===0){e:{if(ee=t==="mouseover"||t==="pointerover",de=t==="mouseout"||t==="pointerout",ee&&r!==Nn&&(me=r.relatedTarget||r.fromElement)&&(fs(me)||me[Mt]))break e;if((de||ee)&&(ee=se.window===se?se:(ee=se.ownerDocument)?ee.defaultView||ee.parentWindow:window,de?(me=r.relatedTarget||r.toElement,de=Q,me=me?fs(me):null,me!==null&&(Fe=hs(me),me!==Fe||me.tag!==5&&me.tag!==6)&&(me=null)):(de=null,me=Q),de!==me)){if(pe=uo,ce="onMouseLeave",W="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(pe=xo,ce="onPointerLeave",W="onPointerEnter",B="pointer"),Fe=de==null?ee:$s(de),K=me==null?ee:$s(me),ee=new pe(ce,B+"leave",de,r,se),ee.target=Fe,ee.relatedTarget=K,ce=null,fs(se)===Q&&(pe=new pe(W,B+"enter",me,r,se),pe.target=K,pe.relatedTarget=Fe,ce=pe),Fe=ce,de&&me)t:{for(pe=de,W=me,B=0,K=pe;K;K=qs(K))B++;for(K=0,ce=W;ce;ce=qs(ce))K++;for(;0<B-K;)pe=qs(pe),B--;for(;0<K-B;)W=qs(W),K--;for(;B--;){if(pe===W||W!==null&&pe===W.alternate)break t;pe=qs(pe),W=qs(W)}pe=null}else pe=null;de!==null&&qo(le,ee,de,pe,!1),me!==null&&Fe!==null&&qo(le,Fe,me,pe,!0)}}e:{if(ee=Q?$s(Q):window,de=ee.nodeName&&ee.nodeName.toLowerCase(),de==="select"||de==="input"&&ee.type==="file")var ge=rm;else if(vo(ee))if(jo)ge=im;else{ge=nm;var he=am}else(de=ee.nodeName)&&de.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ge=lm);if(ge&&(ge=ge(t,Q))){bo(le,ge,r,se);break e}he&&he(t,ee,Q),t==="focusout"&&(he=ee._wrapperState)&&he.controlled&&ee.type==="number"&&Rs(ee,"number",ee.value)}switch(he=Q?$s(Q):window,t){case"focusin":(vo(he)||he.contentEditable==="true")&&(Os=he,Vn=Q,Ar=null);break;case"focusout":Ar=Vn=Os=null;break;case"mousedown":Wn=!0;break;case"contextmenu":case"mouseup":case"dragend":Wn=!1,Ao(le,r,se);break;case"selectionchange":if(dm)break;case"keydown":case"keyup":Ao(le,r,se)}var fe;if($n)e:{switch(t){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else Fs?fo(t,r)&&(ve="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(ve="onCompositionStart");ve&&(po&&r.locale!=="ko"&&(Fs||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&Fs&&(fe=oo()):(Yt=se,Mn="value"in Yt?Yt.value:Yt.textContent,Fs=!0)),he=ba(Q,ve),0<he.length&&(ve=new mo(ve,t,null,r,se),le.push({event:ve,listeners:he}),fe?ve.data=fe:(fe=yo(r),fe!==null&&(ve.data=fe)))),(fe=Xu?Zu(t,r):em(t,r))&&(Q=ba(Q,"onBeforeInput"),0<Q.length&&(se=new mo("onBeforeInput","beforeinput",null,r,se),le.push({event:se,listeners:Q}),se.data=fe))}Oo(le,s)})}function Rr(t,s,r){return{instance:t,listener:s,currentTarget:r}}function ba(t,s){for(var r=s+"Capture",a=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=xr(t,r),l!=null&&a.unshift(Rr(t,l,n)),l=xr(t,s),l!=null&&a.push(Rr(t,l,n))),t=t.return}return a}function qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qo(t,s,r,a,n){for(var l=s._reactName,g=[];r!==null&&r!==a;){var L=r,z=L.alternate,Q=L.stateNode;if(z!==null&&z===a)break;L.tag===5&&Q!==null&&(L=Q,n?(z=xr(r,l),z!=null&&g.unshift(Rr(r,z,L))):n||(z=xr(r,l),z!=null&&g.push(Rr(r,z,L)))),r=r.return}g.length!==0&&t.push({event:s,listeners:g})}var pm=/\r\n?/g,gm=/\u0000|\uFFFD/g;function zo(t){return(typeof t=="string"?t:""+t).replace(pm,`
`).replace(gm,"")}function ja(t,s,r){if(s=zo(s),zo(t)!==s&&r)throw Error(u(425))}function Na(){}var Zn=null,el=null;function tl(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var sl=typeof setTimeout=="function"?setTimeout:void 0,hm=typeof clearTimeout=="function"?clearTimeout:void 0,$o=typeof Promise=="function"?Promise:void 0,fm=typeof queueMicrotask=="function"?queueMicrotask:typeof $o<"u"?function(t){return $o.resolve(null).then(t).catch(ym)}:sl;function ym(t){setTimeout(function(){throw t})}function rl(t,s){var r=s,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),Nr(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Nr(s)}function Xt(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Bo(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var zs=Math.random().toString(36).slice(2),At="__reactFiber$"+zs,Tr="__reactProps$"+zs,Mt="__reactContainer$"+zs,al="__reactEvents$"+zs,vm="__reactListeners$"+zs,bm="__reactHandles$"+zs;function fs(t){var s=t[At];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Mt]||r[At]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Bo(t);t!==null;){if(r=t[At])return r;t=Bo(t)}return s}t=r,r=t.parentNode}return null}function Lr(t){return t=t[At]||t[Mt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(u(33))}function _a(t){return t[Tr]||null}var nl=[],Bs=-1;function Zt(t){return{current:t}}function Pe(t){0>Bs||(t.current=nl[Bs],nl[Bs]=null,Bs--)}function Ee(t,s){Bs++,nl[Bs]=t.current,t.current=s}var es={},Qe=Zt(es),st=Zt(!1),ys=es;function Hs(t,s){var r=t.type.contextTypes;if(!r)return es;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in r)n[l]=s[l];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function rt(t){return t=t.childContextTypes,t!=null}function wa(){Pe(st),Pe(Qe)}function Ho(t,s,r){if(Qe.current!==es)throw Error(u(168));Ee(Qe,s),Ee(st,r)}function Go(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in s))throw Error(u(108,te(t)||"Unknown",n));return Z({},r,a)}function ka(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,ys=Qe.current,Ee(Qe,t),Ee(st,st.current),!0}function Vo(t,s,r){var a=t.stateNode;if(!a)throw Error(u(169));r?(t=Go(t,s,ys),a.__reactInternalMemoizedMergedChildContext=t,Pe(st),Pe(Qe),Ee(Qe,t)):Pe(st),Ee(st,r)}var Ft=null,Sa=!1,ll=!1;function Wo(t){Ft===null?Ft=[t]:Ft.push(t)}function jm(t){Sa=!0,Wo(t)}function ts(){if(!ll&&Ft!==null){ll=!0;var t=0,s=Se;try{var r=Ft;for(Se=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}Ft=null,Sa=!1}catch(n){throw Ft!==null&&(Ft=Ft.slice(t+1)),Ki(En,ts),n}finally{Se=s,ll=!1}}return null}var Gs=[],Vs=0,Ca=null,Ea=0,pt=[],gt=0,vs=null,Ot=1,Ut="";function bs(t,s){Gs[Vs++]=Ea,Gs[Vs++]=Ca,Ca=t,Ea=s}function Ko(t,s,r){pt[gt++]=Ot,pt[gt++]=Ut,pt[gt++]=vs,vs=t;var a=Ot;t=Ut;var n=32-jt(a)-1;a&=~(1<<n),r+=1;var l=32-jt(s)+n;if(30<l){var g=n-n%5;l=(a&(1<<g)-1).toString(32),a>>=g,n-=g,Ot=1<<32-jt(s)+n|r<<n|a,Ut=l+t}else Ot=1<<l|r<<n|a,Ut=t}function il(t){t.return!==null&&(bs(t,1),Ko(t,1,0))}function ol(t){for(;t===Ca;)Ca=Gs[--Vs],Gs[Vs]=null,Ea=Gs[--Vs],Gs[Vs]=null;for(;t===vs;)vs=pt[--gt],pt[gt]=null,Ut=pt[--gt],pt[gt]=null,Ot=pt[--gt],pt[gt]=null}var dt=null,ut=null,Re=!1,_t=null;function Qo(t,s){var r=vt(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function Yo(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,dt=t,ut=Xt(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,dt=t,ut=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=vs!==null?{id:Ot,overflow:Ut}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=vt(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,dt=t,ut=null,!0):!1;default:return!1}}function cl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dl(t){if(Re){var s=ut;if(s){var r=s;if(!Yo(t,s)){if(cl(t))throw Error(u(418));s=Xt(r.nextSibling);var a=dt;s&&Yo(t,s)?Qo(a,r):(t.flags=t.flags&-4097|2,Re=!1,dt=t)}}else{if(cl(t))throw Error(u(418));t.flags=t.flags&-4097|2,Re=!1,dt=t}}}function Jo(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dt=t}function Aa(t){if(t!==dt)return!1;if(!Re)return Jo(t),Re=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!tl(t.type,t.memoizedProps)),s&&(s=ut)){if(cl(t))throw Xo(),Error(u(418));for(;s;)Qo(t,s),s=Xt(s.nextSibling)}if(Jo(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){ut=Xt(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}ut=null}}else ut=dt?Xt(t.stateNode.nextSibling):null;return!0}function Xo(){for(var t=ut;t;)t=Xt(t.nextSibling)}function Ws(){ut=dt=null,Re=!1}function ul(t){_t===null?_t=[t]:_t.push(t)}var Nm=w.ReactCurrentBatchConfig;function Ir(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(u(309));var a=r.stateNode}if(!a)throw Error(u(147,t));var n=a,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(g){var L=n.refs;g===null?delete L[l]:L[l]=g},s._stringRef=l,s)}if(typeof t!="string")throw Error(u(284));if(!r._owner)throw Error(u(290,t))}return t}function Da(t,s){throw t=Object.prototype.toString.call(s),Error(u(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Zo(t){var s=t._init;return s(t._payload)}function ec(t){function s(W,B){if(t){var K=W.deletions;K===null?(W.deletions=[B],W.flags|=16):K.push(B)}}function r(W,B){if(!t)return null;for(;B!==null;)s(W,B),B=B.sibling;return null}function a(W,B){for(W=new Map;B!==null;)B.key!==null?W.set(B.key,B):W.set(B.index,B),B=B.sibling;return W}function n(W,B){return W=cs(W,B),W.index=0,W.sibling=null,W}function l(W,B,K){return W.index=K,t?(K=W.alternate,K!==null?(K=K.index,K<B?(W.flags|=2,B):K):(W.flags|=2,B)):(W.flags|=1048576,B)}function g(W){return t&&W.alternate===null&&(W.flags|=2),W}function L(W,B,K,ce){return B===null||B.tag!==6?(B=si(K,W.mode,ce),B.return=W,B):(B=n(B,K),B.return=W,B)}function z(W,B,K,ce){var ge=K.type;return ge===I?se(W,B,K.props.children,ce,K.key):B!==null&&(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===re&&Zo(ge)===B.type)?(ce=n(B,K.props),ce.ref=Ir(W,B,K),ce.return=W,ce):(ce=en(K.type,K.key,K.props,null,W.mode,ce),ce.ref=Ir(W,B,K),ce.return=W,ce)}function Q(W,B,K,ce){return B===null||B.tag!==4||B.stateNode.containerInfo!==K.containerInfo||B.stateNode.implementation!==K.implementation?(B=ri(K,W.mode,ce),B.return=W,B):(B=n(B,K.children||[]),B.return=W,B)}function se(W,B,K,ce,ge){return B===null||B.tag!==7?(B=Es(K,W.mode,ce,ge),B.return=W,B):(B=n(B,K),B.return=W,B)}function le(W,B,K){if(typeof B=="string"&&B!==""||typeof B=="number")return B=si(""+B,W.mode,K),B.return=W,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case y:return K=en(B.type,B.key,B.props,null,W.mode,K),K.ref=Ir(W,null,B),K.return=W,K;case b:return B=ri(B,W.mode,K),B.return=W,B;case re:var ce=B._init;return le(W,ce(B._payload),K)}if(Gt(B)||Y(B))return B=Es(B,W.mode,K,null),B.return=W,B;Da(W,B)}return null}function ee(W,B,K,ce){var ge=B!==null?B.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return ge!==null?null:L(W,B,""+K,ce);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case y:return K.key===ge?z(W,B,K,ce):null;case b:return K.key===ge?Q(W,B,K,ce):null;case re:return ge=K._init,ee(W,B,ge(K._payload),ce)}if(Gt(K)||Y(K))return ge!==null?null:se(W,B,K,ce,null);Da(W,K)}return null}function de(W,B,K,ce,ge){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return W=W.get(K)||null,L(B,W,""+ce,ge);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:return W=W.get(ce.key===null?K:ce.key)||null,z(B,W,ce,ge);case b:return W=W.get(ce.key===null?K:ce.key)||null,Q(B,W,ce,ge);case re:var he=ce._init;return de(W,B,K,he(ce._payload),ge)}if(Gt(ce)||Y(ce))return W=W.get(K)||null,se(B,W,ce,ge,null);Da(B,ce)}return null}function me(W,B,K,ce){for(var ge=null,he=null,fe=B,ve=B=0,Ge=null;fe!==null&&ve<K.length;ve++){fe.index>ve?(Ge=fe,fe=null):Ge=fe.sibling;var ke=ee(W,fe,K[ve],ce);if(ke===null){fe===null&&(fe=Ge);break}t&&fe&&ke.alternate===null&&s(W,fe),B=l(ke,B,ve),he===null?ge=ke:he.sibling=ke,he=ke,fe=Ge}if(ve===K.length)return r(W,fe),Re&&bs(W,ve),ge;if(fe===null){for(;ve<K.length;ve++)fe=le(W,K[ve],ce),fe!==null&&(B=l(fe,B,ve),he===null?ge=fe:he.sibling=fe,he=fe);return Re&&bs(W,ve),ge}for(fe=a(W,fe);ve<K.length;ve++)Ge=de(fe,W,ve,K[ve],ce),Ge!==null&&(t&&Ge.alternate!==null&&fe.delete(Ge.key===null?ve:Ge.key),B=l(Ge,B,ve),he===null?ge=Ge:he.sibling=Ge,he=Ge);return t&&fe.forEach(function(ds){return s(W,ds)}),Re&&bs(W,ve),ge}function pe(W,B,K,ce){var ge=Y(K);if(typeof ge!="function")throw Error(u(150));if(K=ge.call(K),K==null)throw Error(u(151));for(var he=ge=null,fe=B,ve=B=0,Ge=null,ke=K.next();fe!==null&&!ke.done;ve++,ke=K.next()){fe.index>ve?(Ge=fe,fe=null):Ge=fe.sibling;var ds=ee(W,fe,ke.value,ce);if(ds===null){fe===null&&(fe=Ge);break}t&&fe&&ds.alternate===null&&s(W,fe),B=l(ds,B,ve),he===null?ge=ds:he.sibling=ds,he=ds,fe=Ge}if(ke.done)return r(W,fe),Re&&bs(W,ve),ge;if(fe===null){for(;!ke.done;ve++,ke=K.next())ke=le(W,ke.value,ce),ke!==null&&(B=l(ke,B,ve),he===null?ge=ke:he.sibling=ke,he=ke);return Re&&bs(W,ve),ge}for(fe=a(W,fe);!ke.done;ve++,ke=K.next())ke=de(fe,W,ve,ke.value,ce),ke!==null&&(t&&ke.alternate!==null&&fe.delete(ke.key===null?ve:ke.key),B=l(ke,B,ve),he===null?ge=ke:he.sibling=ke,he=ke);return t&&fe.forEach(function(tx){return s(W,tx)}),Re&&bs(W,ve),ge}function Fe(W,B,K,ce){if(typeof K=="object"&&K!==null&&K.type===I&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case y:e:{for(var ge=K.key,he=B;he!==null;){if(he.key===ge){if(ge=K.type,ge===I){if(he.tag===7){r(W,he.sibling),B=n(he,K.props.children),B.return=W,W=B;break e}}else if(he.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===re&&Zo(ge)===he.type){r(W,he.sibling),B=n(he,K.props),B.ref=Ir(W,he,K),B.return=W,W=B;break e}r(W,he);break}else s(W,he);he=he.sibling}K.type===I?(B=Es(K.props.children,W.mode,ce,K.key),B.return=W,W=B):(ce=en(K.type,K.key,K.props,null,W.mode,ce),ce.ref=Ir(W,B,K),ce.return=W,W=ce)}return g(W);case b:e:{for(he=K.key;B!==null;){if(B.key===he)if(B.tag===4&&B.stateNode.containerInfo===K.containerInfo&&B.stateNode.implementation===K.implementation){r(W,B.sibling),B=n(B,K.children||[]),B.return=W,W=B;break e}else{r(W,B);break}else s(W,B);B=B.sibling}B=ri(K,W.mode,ce),B.return=W,W=B}return g(W);case re:return he=K._init,Fe(W,B,he(K._payload),ce)}if(Gt(K))return me(W,B,K,ce);if(Y(K))return pe(W,B,K,ce);Da(W,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,B!==null&&B.tag===6?(r(W,B.sibling),B=n(B,K),B.return=W,W=B):(r(W,B),B=si(K,W.mode,ce),B.return=W,W=B),g(W)):r(W,B)}return Fe}var Ks=ec(!0),tc=ec(!1),Pa=Zt(null),Ra=null,Qs=null,ml=null;function xl(){ml=Qs=Ra=null}function pl(t){var s=Pa.current;Pe(Pa),t._currentValue=s}function gl(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function Ys(t,s){Ra=t,ml=Qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(at=!0),t.firstContext=null)}function ht(t){var s=t._currentValue;if(ml!==t)if(t={context:t,memoizedValue:s,next:null},Qs===null){if(Ra===null)throw Error(u(308));Qs=t,Ra.dependencies={lanes:0,firstContext:t}}else Qs=Qs.next=t;return s}var js=null;function hl(t){js===null?js=[t]:js.push(t)}function sc(t,s,r,a){var n=s.interleaved;return n===null?(r.next=r,hl(s)):(r.next=n.next,n.next=r),s.interleaved=r,qt(t,a)}function qt(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ss=!1;function fl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rc(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zt(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function rs(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(we&2)!==0){var n=a.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),a.pending=s,qt(t,r)}return n=a.interleaved,n===null?(s.next=s,hl(a)):(s.next=n.next,n.next=s),a.interleaved=s,qt(t,r)}function Ta(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,Pn(t,r)}}function ac(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?n=l=g:l=l.next=g,r=r.next}while(r!==null);l===null?n=l=s:l=l.next=s}else n=l=s;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function La(t,s,r,a){var n=t.updateQueue;ss=!1;var l=n.firstBaseUpdate,g=n.lastBaseUpdate,L=n.shared.pending;if(L!==null){n.shared.pending=null;var z=L,Q=z.next;z.next=null,g===null?l=Q:g.next=Q,g=z;var se=t.alternate;se!==null&&(se=se.updateQueue,L=se.lastBaseUpdate,L!==g&&(L===null?se.firstBaseUpdate=Q:L.next=Q,se.lastBaseUpdate=z))}if(l!==null){var le=n.baseState;g=0,se=Q=z=null,L=l;do{var ee=L.lane,de=L.eventTime;if((a&ee)===ee){se!==null&&(se=se.next={eventTime:de,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var me=t,pe=L;switch(ee=s,de=r,pe.tag){case 1:if(me=pe.payload,typeof me=="function"){le=me.call(de,le,ee);break e}le=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=pe.payload,ee=typeof me=="function"?me.call(de,le,ee):me,ee==null)break e;le=Z({},le,ee);break e;case 2:ss=!0}}L.callback!==null&&L.lane!==0&&(t.flags|=64,ee=n.effects,ee===null?n.effects=[L]:ee.push(L))}else de={eventTime:de,lane:ee,tag:L.tag,payload:L.payload,callback:L.callback,next:null},se===null?(Q=se=de,z=le):se=se.next=de,g|=ee;if(L=L.next,L===null){if(L=n.shared.pending,L===null)break;ee=L,L=ee.next,ee.next=null,n.lastBaseUpdate=ee,n.shared.pending=null}}while(!0);if(se===null&&(z=le),n.baseState=z,n.firstBaseUpdate=Q,n.lastBaseUpdate=se,s=n.shared.interleaved,s!==null){n=s;do g|=n.lane,n=n.next;while(n!==s)}else l===null&&(n.shared.lanes=0);ws|=g,t.lanes=g,t.memoizedState=le}}function nc(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(u(191,n));n.call(a)}}}var Mr={},Dt=Zt(Mr),Fr=Zt(Mr),Or=Zt(Mr);function Ns(t){if(t===Mr)throw Error(u(174));return t}function yl(t,s){switch(Ee(Or,s),Ee(Fr,t),Ee(Dt,Mr),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vn(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=vn(s,t)}Pe(Dt),Ee(Dt,s)}function Js(){Pe(Dt),Pe(Fr),Pe(Or)}function lc(t){Ns(Or.current);var s=Ns(Dt.current),r=vn(s,t.type);s!==r&&(Ee(Fr,t),Ee(Dt,r))}function vl(t){Fr.current===t&&(Pe(Dt),Pe(Fr))}var Te=Zt(0);function Ia(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var bl=[];function jl(){for(var t=0;t<bl.length;t++)bl[t]._workInProgressVersionPrimary=null;bl.length=0}var Ma=w.ReactCurrentDispatcher,Nl=w.ReactCurrentBatchConfig,_s=0,Le=null,ze=null,Be=null,Fa=!1,Ur=!1,qr=0,_m=0;function Ye(){throw Error(u(321))}function _l(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Nt(t[r],s[r]))return!1;return!0}function wl(t,s,r,a,n,l){if(_s=l,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ma.current=t===null||t.memoizedState===null?Cm:Em,t=r(a,n),Ur){l=0;do{if(Ur=!1,qr=0,25<=l)throw Error(u(301));l+=1,Be=ze=null,s.updateQueue=null,Ma.current=Am,t=r(a,n)}while(Ur)}if(Ma.current=qa,s=ze!==null&&ze.next!==null,_s=0,Be=ze=Le=null,Fa=!1,s)throw Error(u(300));return t}function kl(){var t=qr!==0;return qr=0,t}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Le.memoizedState=Be=t:Be=Be.next=t,Be}function ft(){if(ze===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var s=Be===null?Le.memoizedState:Be.next;if(s!==null)Be=s,ze=t;else{if(t===null)throw Error(u(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Be===null?Le.memoizedState=Be=t:Be=Be.next=t}return Be}function zr(t,s){return typeof s=="function"?s(t):s}function Sl(t){var s=ft(),r=s.queue;if(r===null)throw Error(u(311));r.lastRenderedReducer=t;var a=ze,n=a.baseQueue,l=r.pending;if(l!==null){if(n!==null){var g=n.next;n.next=l.next,l.next=g}a.baseQueue=n=l,r.pending=null}if(n!==null){l=n.next,a=a.baseState;var L=g=null,z=null,Q=l;do{var se=Q.lane;if((_s&se)===se)z!==null&&(z=z.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),a=Q.hasEagerState?Q.eagerState:t(a,Q.action);else{var le={lane:se,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};z===null?(L=z=le,g=a):z=z.next=le,Le.lanes|=se,ws|=se}Q=Q.next}while(Q!==null&&Q!==l);z===null?g=a:z.next=L,Nt(a,s.memoizedState)||(at=!0),s.memoizedState=a,s.baseState=g,s.baseQueue=z,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do l=n.lane,Le.lanes|=l,ws|=l,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function Cl(t){var s=ft(),r=s.queue;if(r===null)throw Error(u(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,l=s.memoizedState;if(n!==null){r.pending=null;var g=n=n.next;do l=t(l,g.action),g=g.next;while(g!==n);Nt(l,s.memoizedState)||(at=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,a]}function ic(){}function oc(t,s){var r=Le,a=ft(),n=s(),l=!Nt(a.memoizedState,n);if(l&&(a.memoizedState=n,at=!0),a=a.queue,El(uc.bind(null,r,a,t),[t]),a.getSnapshot!==s||l||Be!==null&&Be.memoizedState.tag&1){if(r.flags|=2048,$r(9,dc.bind(null,r,a,n,s),void 0,null),He===null)throw Error(u(349));(_s&30)!==0||cc(r,s,n)}return n}function cc(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Le.updateQueue,s===null?(s={lastEffect:null,stores:null},Le.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function dc(t,s,r,a){s.value=r,s.getSnapshot=a,mc(s)&&xc(t)}function uc(t,s,r){return r(function(){mc(s)&&xc(t)})}function mc(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Nt(t,r)}catch{return!0}}function xc(t){var s=qt(t,1);s!==null&&Ct(s,t,1,-1)}function pc(t){var s=Pt();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:t},s.queue=t,t=t.dispatch=Sm.bind(null,Le,t),[s.memoizedState,t]}function $r(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=Le.updateQueue,s===null?(s={lastEffect:null,stores:null},Le.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function gc(){return ft().memoizedState}function Oa(t,s,r,a){var n=Pt();Le.flags|=t,n.memoizedState=$r(1|s,r,void 0,a===void 0?null:a)}function Ua(t,s,r,a){var n=ft();a=a===void 0?null:a;var l=void 0;if(ze!==null){var g=ze.memoizedState;if(l=g.destroy,a!==null&&_l(a,g.deps)){n.memoizedState=$r(s,r,l,a);return}}Le.flags|=t,n.memoizedState=$r(1|s,r,l,a)}function hc(t,s){return Oa(8390656,8,t,s)}function El(t,s){return Ua(2048,8,t,s)}function fc(t,s){return Ua(4,2,t,s)}function yc(t,s){return Ua(4,4,t,s)}function vc(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function bc(t,s,r){return r=r!=null?r.concat([t]):null,Ua(4,4,vc.bind(null,s,t),r)}function Al(){}function jc(t,s){var r=ft();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&_l(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function Nc(t,s){var r=ft();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&_l(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function _c(t,s,r){return(_s&21)===0?(t.baseState&&(t.baseState=!1,at=!0),t.memoizedState=r):(Nt(r,s)||(r=Xi(),Le.lanes|=r,ws|=r,t.baseState=!0),s)}function wm(t,s){var r=Se;Se=r!==0&&4>r?r:4,t(!0);var a=Nl.transition;Nl.transition={};try{t(!1),s()}finally{Se=r,Nl.transition=a}}function wc(){return ft().memoizedState}function km(t,s,r){var a=is(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},kc(t))Sc(s,r);else if(r=sc(t,s,r,a),r!==null){var n=tt();Ct(r,t,a,n),Cc(r,s,a)}}function Sm(t,s,r){var a=is(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(kc(t))Sc(s,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var g=s.lastRenderedState,L=l(g,r);if(n.hasEagerState=!0,n.eagerState=L,Nt(L,g)){var z=s.interleaved;z===null?(n.next=n,hl(s)):(n.next=z.next,z.next=n),s.interleaved=n;return}}catch{}r=sc(t,s,n,a),r!==null&&(n=tt(),Ct(r,t,a,n),Cc(r,s,a))}}function kc(t){var s=t.alternate;return t===Le||s!==null&&s===Le}function Sc(t,s){Ur=Fa=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function Cc(t,s,r){if((r&4194240)!==0){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,Pn(t,r)}}var qa={readContext:ht,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},Cm={readContext:ht,useCallback:function(t,s){return Pt().memoizedState=[t,s===void 0?null:s],t},useContext:ht,useEffect:hc,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Oa(4194308,4,vc.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Oa(4194308,4,t,s)},useInsertionEffect:function(t,s){return Oa(4,2,t,s)},useMemo:function(t,s){var r=Pt();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=Pt();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=km.bind(null,Le,t),[a.memoizedState,t]},useRef:function(t){var s=Pt();return t={current:t},s.memoizedState=t},useState:pc,useDebugValue:Al,useDeferredValue:function(t){return Pt().memoizedState=t},useTransition:function(){var t=pc(!1),s=t[0];return t=wm.bind(null,t[1]),Pt().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=Le,n=Pt();if(Re){if(r===void 0)throw Error(u(407));r=r()}else{if(r=s(),He===null)throw Error(u(349));(_s&30)!==0||cc(a,s,r)}n.memoizedState=r;var l={value:r,getSnapshot:s};return n.queue=l,hc(uc.bind(null,a,l,t),[t]),a.flags|=2048,$r(9,dc.bind(null,a,l,r,s),void 0,null),r},useId:function(){var t=Pt(),s=He.identifierPrefix;if(Re){var r=Ut,a=Ot;r=(a&~(1<<32-jt(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=qr++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=_m++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Em={readContext:ht,useCallback:jc,useContext:ht,useEffect:El,useImperativeHandle:bc,useInsertionEffect:fc,useLayoutEffect:yc,useMemo:Nc,useReducer:Sl,useRef:gc,useState:function(){return Sl(zr)},useDebugValue:Al,useDeferredValue:function(t){var s=ft();return _c(s,ze.memoizedState,t)},useTransition:function(){var t=Sl(zr)[0],s=ft().memoizedState;return[t,s]},useMutableSource:ic,useSyncExternalStore:oc,useId:wc,unstable_isNewReconciler:!1},Am={readContext:ht,useCallback:jc,useContext:ht,useEffect:El,useImperativeHandle:bc,useInsertionEffect:fc,useLayoutEffect:yc,useMemo:Nc,useReducer:Cl,useRef:gc,useState:function(){return Cl(zr)},useDebugValue:Al,useDeferredValue:function(t){var s=ft();return ze===null?s.memoizedState=t:_c(s,ze.memoizedState,t)},useTransition:function(){var t=Cl(zr)[0],s=ft().memoizedState;return[t,s]},useMutableSource:ic,useSyncExternalStore:oc,useId:wc,unstable_isNewReconciler:!1};function wt(t,s){if(t&&t.defaultProps){s=Z({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function Dl(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:Z({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var za={isMounted:function(t){return(t=t._reactInternals)?hs(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=tt(),n=is(t),l=zt(a,n);l.payload=s,r!=null&&(l.callback=r),s=rs(t,l,n),s!==null&&(Ct(s,t,n,a),Ta(s,t,n))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=tt(),n=is(t),l=zt(a,n);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=rs(t,l,n),s!==null&&(Ct(s,t,n,a),Ta(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=tt(),a=is(t),n=zt(r,a);n.tag=2,s!=null&&(n.callback=s),s=rs(t,n,a),s!==null&&(Ct(s,t,a,r),Ta(s,t,a))}};function Ec(t,s,r,a,n,l,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,l,g):s.prototype&&s.prototype.isPureReactComponent?!Er(r,a)||!Er(n,l):!0}function Ac(t,s,r){var a=!1,n=es,l=s.contextType;return typeof l=="object"&&l!==null?l=ht(l):(n=rt(s)?ys:Qe.current,a=s.contextTypes,l=(a=a!=null)?Hs(t,n):es),s=new s(r,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=za,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),s}function Dc(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&za.enqueueReplaceState(s,s.state,null)}function Pl(t,s,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},fl(t);var l=s.contextType;typeof l=="object"&&l!==null?n.context=ht(l):(l=rt(s)?ys:Qe.current,n.context=Hs(t,l)),n.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Dl(t,s,l,r),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&za.enqueueReplaceState(n,n.state,null),La(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Xs(t,s){try{var r="",a=s;do r+=ne(a),a=a.return;while(a);var n=r}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:n,digest:null}}function Rl(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function Tl(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var Dm=typeof WeakMap=="function"?WeakMap:Map;function Pc(t,s,r){r=zt(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){Ka||(Ka=!0,Kl=a),Tl(t,s)},r}function Rc(t,s,r){r=zt(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=s.value;r.payload=function(){return a(n)},r.callback=function(){Tl(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Tl(t,s),typeof a!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var g=s.stack;this.componentDidCatch(s.value,{componentStack:g!==null?g:""})}),r}function Tc(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new Dm;var n=new Set;a.set(s,n)}else n=a.get(s),n===void 0&&(n=new Set,a.set(s,n));n.has(r)||(n.add(r),t=Hm.bind(null,t,s,r),s.then(t,t))}function Lc(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Ic(t,s,r,a,n){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=zt(-1,1),s.tag=2,rs(r,s,1))),r.lanes|=1),t):(t.flags|=65536,t.lanes=n,t)}var Pm=w.ReactCurrentOwner,at=!1;function et(t,s,r,a){s.child=t===null?tc(s,null,r,a):Ks(s,t.child,r,a)}function Mc(t,s,r,a,n){r=r.render;var l=s.ref;return Ys(s,n),a=wl(t,s,r,a,l,n),r=kl(),t!==null&&!at?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,$t(t,s,n)):(Re&&r&&il(s),s.flags|=1,et(t,s,a,n),s.child)}function Fc(t,s,r,a,n){if(t===null){var l=r.type;return typeof l=="function"&&!ti(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,Oc(t,s,l,a,n)):(t=en(r.type,null,a,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,(t.lanes&n)===0){var g=l.memoizedProps;if(r=r.compare,r=r!==null?r:Er,r(g,a)&&t.ref===s.ref)return $t(t,s,n)}return s.flags|=1,t=cs(l,a),t.ref=s.ref,t.return=s,s.child=t}function Oc(t,s,r,a,n){if(t!==null){var l=t.memoizedProps;if(Er(l,a)&&t.ref===s.ref)if(at=!1,s.pendingProps=a=l,(t.lanes&n)!==0)(t.flags&131072)!==0&&(at=!0);else return s.lanes=t.lanes,$t(t,s,n)}return Ll(t,s,r,a,n)}function Uc(t,s,r){var a=s.pendingProps,n=a.children,l=t!==null?t.memoizedState:null;if(a.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(er,mt),mt|=r;else{if((r&1073741824)===0)return t=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Ee(er,mt),mt|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:r,Ee(er,mt),mt|=a}else l!==null?(a=l.baseLanes|r,s.memoizedState=null):a=r,Ee(er,mt),mt|=a;return et(t,s,n,r),s.child}function qc(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Ll(t,s,r,a,n){var l=rt(r)?ys:Qe.current;return l=Hs(s,l),Ys(s,n),r=wl(t,s,r,a,l,n),a=kl(),t!==null&&!at?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,$t(t,s,n)):(Re&&a&&il(s),s.flags|=1,et(t,s,r,n),s.child)}function zc(t,s,r,a,n){if(rt(r)){var l=!0;ka(s)}else l=!1;if(Ys(s,n),s.stateNode===null)Ba(t,s),Ac(s,r,a),Pl(s,r,a,n),a=!0;else if(t===null){var g=s.stateNode,L=s.memoizedProps;g.props=L;var z=g.context,Q=r.contextType;typeof Q=="object"&&Q!==null?Q=ht(Q):(Q=rt(r)?ys:Qe.current,Q=Hs(s,Q));var se=r.getDerivedStateFromProps,le=typeof se=="function"||typeof g.getSnapshotBeforeUpdate=="function";le||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(L!==a||z!==Q)&&Dc(s,g,a,Q),ss=!1;var ee=s.memoizedState;g.state=ee,La(s,a,g,n),z=s.memoizedState,L!==a||ee!==z||st.current||ss?(typeof se=="function"&&(Dl(s,r,se,a),z=s.memoizedState),(L=ss||Ec(s,r,L,a,ee,z,Q))?(le||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=z),g.props=a,g.state=z,g.context=Q,a=L):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{g=s.stateNode,rc(t,s),L=s.memoizedProps,Q=s.type===s.elementType?L:wt(s.type,L),g.props=Q,le=s.pendingProps,ee=g.context,z=r.contextType,typeof z=="object"&&z!==null?z=ht(z):(z=rt(r)?ys:Qe.current,z=Hs(s,z));var de=r.getDerivedStateFromProps;(se=typeof de=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(L!==le||ee!==z)&&Dc(s,g,a,z),ss=!1,ee=s.memoizedState,g.state=ee,La(s,a,g,n);var me=s.memoizedState;L!==le||ee!==me||st.current||ss?(typeof de=="function"&&(Dl(s,r,de,a),me=s.memoizedState),(Q=ss||Ec(s,r,Q,a,ee,me,z)||!1)?(se||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,me,z),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,me,z)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||L===t.memoizedProps&&ee===t.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||L===t.memoizedProps&&ee===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=me),g.props=a,g.state=me,g.context=z,a=Q):(typeof g.componentDidUpdate!="function"||L===t.memoizedProps&&ee===t.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||L===t.memoizedProps&&ee===t.memoizedState||(s.flags|=1024),a=!1)}return Il(t,s,r,a,l,n)}function Il(t,s,r,a,n,l){qc(t,s);var g=(s.flags&128)!==0;if(!a&&!g)return n&&Vo(s,r,!1),$t(t,s,l);a=s.stateNode,Pm.current=s;var L=g&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&g?(s.child=Ks(s,t.child,null,l),s.child=Ks(s,null,L,l)):et(t,s,L,l),s.memoizedState=a.state,n&&Vo(s,r,!0),s.child}function $c(t){var s=t.stateNode;s.pendingContext?Ho(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Ho(t,s.context,!1),yl(t,s.containerInfo)}function Bc(t,s,r,a,n){return Ws(),ul(n),s.flags|=256,et(t,s,r,a),s.child}var Ml={dehydrated:null,treeContext:null,retryLane:0};function Fl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hc(t,s,r){var a=s.pendingProps,n=Te.current,l=!1,g=(s.flags&128)!==0,L;if((L=g)||(L=t!==null&&t.memoizedState===null?!1:(n&2)!==0),L?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Ee(Te,n&1),t===null)return dl(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(g=a.children,t=a.fallback,l?(a=s.mode,l=s.child,g={mode:"hidden",children:g},(a&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=g):l=tn(g,a,0,null),t=Es(t,a,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=Fl(r),s.memoizedState=Ml,t):Ol(s,g));if(n=t.memoizedState,n!==null&&(L=n.dehydrated,L!==null))return Rm(t,s,g,a,L,n,r);if(l){l=a.fallback,g=s.mode,n=t.child,L=n.sibling;var z={mode:"hidden",children:a.children};return(g&1)===0&&s.child!==n?(a=s.child,a.childLanes=0,a.pendingProps=z,s.deletions=null):(a=cs(n,z),a.subtreeFlags=n.subtreeFlags&14680064),L!==null?l=cs(L,l):(l=Es(l,g,r,null),l.flags|=2),l.return=s,a.return=s,a.sibling=l,s.child=a,a=l,l=s.child,g=t.child.memoizedState,g=g===null?Fl(r):{baseLanes:g.baseLanes|r,cachePool:null,transitions:g.transitions},l.memoizedState=g,l.childLanes=t.childLanes&~r,s.memoizedState=Ml,a}return l=t.child,t=l.sibling,a=cs(l,{mode:"visible",children:a.children}),(s.mode&1)===0&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function Ol(t,s){return s=tn({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function $a(t,s,r,a){return a!==null&&ul(a),Ks(s,t.child,null,r),t=Ol(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Rm(t,s,r,a,n,l,g){if(r)return s.flags&256?(s.flags&=-257,a=Rl(Error(u(422))),$a(t,s,g,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=a.fallback,n=s.mode,a=tn({mode:"visible",children:a.children},n,0,null),l=Es(l,n,g,null),l.flags|=2,a.return=s,l.return=s,a.sibling=l,s.child=a,(s.mode&1)!==0&&Ks(s,t.child,null,g),s.child.memoizedState=Fl(g),s.memoizedState=Ml,l);if((s.mode&1)===0)return $a(t,s,g,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var L=a.dgst;return a=L,l=Error(u(419)),a=Rl(l,a,void 0),$a(t,s,g,a)}if(L=(g&t.childLanes)!==0,at||L){if(a=He,a!==null){switch(g&-g){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=(n&(a.suspendedLanes|g))!==0?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,qt(t,n),Ct(a,t,n,-1))}return ei(),a=Rl(Error(u(421))),$a(t,s,g,a)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=Gm.bind(null,t),n._reactRetry=s,null):(t=l.treeContext,ut=Xt(n.nextSibling),dt=s,Re=!0,_t=null,t!==null&&(pt[gt++]=Ot,pt[gt++]=Ut,pt[gt++]=vs,Ot=t.id,Ut=t.overflow,vs=s),s=Ol(s,a.children),s.flags|=4096,s)}function Gc(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),gl(t.return,s,r)}function Ul(t,s,r,a,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=n)}function Vc(t,s,r){var a=s.pendingProps,n=a.revealOrder,l=a.tail;if(et(t,s,a.children,r),a=Te.current,(a&2)!==0)a=a&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gc(t,r,s);else if(t.tag===19)Gc(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(Ee(Te,a),(s.mode&1)===0)s.memoizedState=null;else switch(n){case"forwards":for(r=s.child,n=null;r!==null;)t=r.alternate,t!==null&&Ia(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=s.child,s.child=null):(n=r.sibling,r.sibling=null),Ul(s,!1,n,r,l);break;case"backwards":for(r=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&Ia(t)===null){s.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}Ul(s,!0,r,null,l);break;case"together":Ul(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ba(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function $t(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),ws|=s.lanes,(r&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(u(153));if(s.child!==null){for(t=s.child,r=cs(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=cs(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function Tm(t,s,r){switch(s.tag){case 3:$c(s),Ws();break;case 5:lc(s);break;case 1:rt(s.type)&&ka(s);break;case 4:yl(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;Ee(Pa,a._currentValue),a._currentValue=n;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(Ee(Te,Te.current&1),s.flags|=128,null):(r&s.child.childLanes)!==0?Hc(t,s,r):(Ee(Te,Te.current&1),t=$t(t,s,r),t!==null?t.sibling:null);Ee(Te,Te.current&1);break;case 19:if(a=(r&s.childLanes)!==0,(t.flags&128)!==0){if(a)return Vc(t,s,r);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ee(Te,Te.current),a)break;return null;case 22:case 23:return s.lanes=0,Uc(t,s,r)}return $t(t,s,r)}var Wc,ql,Kc,Qc;Wc=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},ql=function(){},Kc=function(t,s,r,a){var n=t.memoizedProps;if(n!==a){t=s.stateNode,Ns(Dt.current);var l=null;switch(r){case"input":n=Ds(t,n),a=Ds(t,a),l=[];break;case"select":n=Z({},n,{value:void 0}),a=Z({},a,{value:void 0}),l=[];break;case"textarea":n=yn(t,n),a=yn(t,a),l=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Na)}bn(r,a);var g;r=null;for(Q in n)if(!a.hasOwnProperty(Q)&&n.hasOwnProperty(Q)&&n[Q]!=null)if(Q==="style"){var L=n[Q];for(g in L)L.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(S.hasOwnProperty(Q)?l||(l=[]):(l=l||[]).push(Q,null));for(Q in a){var z=a[Q];if(L=n?.[Q],a.hasOwnProperty(Q)&&z!==L&&(z!=null||L!=null))if(Q==="style")if(L){for(g in L)!L.hasOwnProperty(g)||z&&z.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in z)z.hasOwnProperty(g)&&L[g]!==z[g]&&(r||(r={}),r[g]=z[g])}else r||(l||(l=[]),l.push(Q,r)),r=z;else Q==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,L=L?L.__html:void 0,z!=null&&L!==z&&(l=l||[]).push(Q,z)):Q==="children"?typeof z!="string"&&typeof z!="number"||(l=l||[]).push(Q,""+z):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(S.hasOwnProperty(Q)?(z!=null&&Q==="onScroll"&&De("scroll",t),l||L===z||(l=[])):(l=l||[]).push(Q,z))}r&&(l=l||[]).push("style",r);var Q=l;(s.updateQueue=Q)&&(s.flags|=4)}},Qc=function(t,s,r,a){r!==a&&(s.flags|=4)};function Br(t,s){if(!Re)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Je(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function Lm(t,s,r){var a=s.pendingProps;switch(ol(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(s),null;case 1:return rt(s.type)&&wa(),Je(s),null;case 3:return a=s.stateNode,Js(),Pe(st),Pe(Qe),jl(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Aa(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,_t!==null&&(Jl(_t),_t=null))),ql(t,s),Je(s),null;case 5:vl(s);var n=Ns(Or.current);if(r=s.type,t!==null&&s.stateNode!=null)Kc(t,s,r,a,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(u(166));return Je(s),null}if(t=Ns(Dt.current),Aa(s)){a=s.stateNode,r=s.type;var l=s.memoizedProps;switch(a[At]=s,a[Tr]=l,t=(s.mode&1)!==0,r){case"dialog":De("cancel",a),De("close",a);break;case"iframe":case"object":case"embed":De("load",a);break;case"video":case"audio":for(n=0;n<Dr.length;n++)De(Dr[n],a);break;case"source":De("error",a);break;case"img":case"image":case"link":De("error",a),De("load",a);break;case"details":De("toggle",a);break;case"input":or(a,l),De("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},De("invalid",a);break;case"textarea":Pi(a,l),De("invalid",a)}bn(r,l),n=null;for(var g in l)if(l.hasOwnProperty(g)){var L=l[g];g==="children"?typeof L=="string"?a.textContent!==L&&(l.suppressHydrationWarning!==!0&&ja(a.textContent,L,t),n=["children",L]):typeof L=="number"&&a.textContent!==""+L&&(l.suppressHydrationWarning!==!0&&ja(a.textContent,L,t),n=["children",""+L]):S.hasOwnProperty(g)&&L!=null&&g==="onScroll"&&De("scroll",a)}switch(r){case"input":Lt(a),dr(a,l,!0);break;case"textarea":Lt(a),Ti(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=Na)}a=n,s.updateQueue=a,a!==null&&(s.flags|=4)}else{g=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Li(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=g.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=g.createElement(r,{is:a.is}):(t=g.createElement(r),r==="select"&&(g=t,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):t=g.createElementNS(t,r),t[At]=s,t[Tr]=a,Wc(t,s,!1,!1),s.stateNode=t;e:{switch(g=jn(r,a),r){case"dialog":De("cancel",t),De("close",t),n=a;break;case"iframe":case"object":case"embed":De("load",t),n=a;break;case"video":case"audio":for(n=0;n<Dr.length;n++)De(Dr[n],t);n=a;break;case"source":De("error",t),n=a;break;case"img":case"image":case"link":De("error",t),De("load",t),n=a;break;case"details":De("toggle",t),n=a;break;case"input":or(t,a),n=Ds(t,a),De("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=Z({},a,{value:void 0}),De("invalid",t);break;case"textarea":Pi(t,a),n=yn(t,a),De("invalid",t);break;default:n=a}bn(r,n),L=n;for(l in L)if(L.hasOwnProperty(l)){var z=L[l];l==="style"?Fi(t,z):l==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Ii(t,z)):l==="children"?typeof z=="string"?(r!=="textarea"||z!=="")&&ur(t,z):typeof z=="number"&&ur(t,""+z):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(S.hasOwnProperty(l)?z!=null&&l==="onScroll"&&De("scroll",t):z!=null&&G(t,l,z,g))}switch(r){case"input":Lt(t),dr(t,a,!1);break;case"textarea":Lt(t),Ti(t);break;case"option":a.value!=null&&t.setAttribute("value",""+J(a.value));break;case"select":t.multiple=!!a.multiple,l=a.value,l!=null?It(t,!!a.multiple,l,!1):a.defaultValue!=null&&It(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Na)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Je(s),null;case 6:if(t&&s.stateNode!=null)Qc(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(u(166));if(r=Ns(Or.current),Ns(Dt.current),Aa(s)){if(a=s.stateNode,r=s.memoizedProps,a[At]=s,(l=a.nodeValue!==r)&&(t=dt,t!==null))switch(t.tag){case 3:ja(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ja(a.nodeValue,r,(t.mode&1)!==0)}l&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[At]=s,s.stateNode=a}return Je(s),null;case 13:if(Pe(Te),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&ut!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Xo(),Ws(),s.flags|=98560,l=!1;else if(l=Aa(s),a!==null&&a.dehydrated!==null){if(t===null){if(!l)throw Error(u(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(u(317));l[At]=s}else Ws(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Je(s),l=!1}else _t!==null&&(Jl(_t),_t=null),l=!0;if(!l)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(Te.current&1)!==0?$e===0&&($e=3):ei())),s.updateQueue!==null&&(s.flags|=4),Je(s),null);case 4:return Js(),ql(t,s),t===null&&Pr(s.stateNode.containerInfo),Je(s),null;case 10:return pl(s.type._context),Je(s),null;case 17:return rt(s.type)&&wa(),Je(s),null;case 19:if(Pe(Te),l=s.memoizedState,l===null)return Je(s),null;if(a=(s.flags&128)!==0,g=l.rendering,g===null)if(a)Br(l,!1);else{if($e!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(g=Ia(t),g!==null){for(s.flags|=128,Br(l,!1),a=g.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)l=r,t=a,l.flags&=14680066,g=l.alternate,g===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,t=g.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ee(Te,Te.current&1|2),s.child}t=t.sibling}l.tail!==null&&Me()>tr&&(s.flags|=128,a=!0,Br(l,!1),s.lanes=4194304)}else{if(!a)if(t=Ia(g),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),Br(l,!0),l.tail===null&&l.tailMode==="hidden"&&!g.alternate&&!Re)return Je(s),null}else 2*Me()-l.renderingStartTime>tr&&r!==1073741824&&(s.flags|=128,a=!0,Br(l,!1),s.lanes=4194304);l.isBackwards?(g.sibling=s.child,s.child=g):(r=l.last,r!==null?r.sibling=g:s.child=g,l.last=g)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Me(),s.sibling=null,r=Te.current,Ee(Te,a?r&1|2:r&1),s):(Je(s),null);case 22:case 23:return Zl(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&(s.mode&1)!==0?(mt&1073741824)!==0&&(Je(s),s.subtreeFlags&6&&(s.flags|=8192)):Je(s),null;case 24:return null;case 25:return null}throw Error(u(156,s.tag))}function Im(t,s){switch(ol(s),s.tag){case 1:return rt(s.type)&&wa(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Js(),Pe(st),Pe(Qe),jl(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return vl(s),null;case 13:if(Pe(Te),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(u(340));Ws()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Pe(Te),null;case 4:return Js(),null;case 10:return pl(s.type._context),null;case 22:case 23:return Zl(),null;case 24:return null;default:return null}}var Ha=!1,Xe=!1,Mm=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Zs(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Ie(t,s,a)}else r.current=null}function zl(t,s,r){try{r()}catch(a){Ie(t,s,a)}}var Yc=!1;function Fm(t,s){if(Zn=da,t=Eo(),Gn(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var g=0,L=-1,z=-1,Q=0,se=0,le=t,ee=null;t:for(;;){for(var de;le!==r||n!==0&&le.nodeType!==3||(L=g+n),le!==l||a!==0&&le.nodeType!==3||(z=g+a),le.nodeType===3&&(g+=le.nodeValue.length),(de=le.firstChild)!==null;)ee=le,le=de;for(;;){if(le===t)break t;if(ee===r&&++Q===n&&(L=g),ee===l&&++se===a&&(z=g),(de=le.nextSibling)!==null)break;le=ee,ee=le.parentNode}le=de}r=L===-1||z===-1?null:{start:L,end:z}}else r=null}r=r||{start:0,end:0}}else r=null;for(el={focusedElem:t,selectionRange:r},da=!1,ue=s;ue!==null;)if(s=ue,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ue=t;else for(;ue!==null;){s=ue;try{var me=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var pe=me.memoizedProps,Fe=me.memoizedState,W=s.stateNode,B=W.getSnapshotBeforeUpdate(s.elementType===s.type?pe:wt(s.type,pe),Fe);W.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var K=s.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(ce){Ie(s,s.return,ce)}if(t=s.sibling,t!==null){t.return=s.return,ue=t;break}ue=s.return}return me=Yc,Yc=!1,me}function Hr(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&zl(s,r,l)}n=n.next}while(n!==a)}}function Ga(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function $l(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function Jc(t){var s=t.alternate;s!==null&&(t.alternate=null,Jc(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[At],delete s[Tr],delete s[al],delete s[vm],delete s[bm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xc(t){return t.tag===5||t.tag===3||t.tag===4}function Zc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xc(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bl(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Na));else if(a!==4&&(t=t.child,t!==null))for(Bl(t,s,r),t=t.sibling;t!==null;)Bl(t,s,r),t=t.sibling}function Hl(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Hl(t,s,r),t=t.sibling;t!==null;)Hl(t,s,r),t=t.sibling}var Ve=null,kt=!1;function as(t,s,r){for(r=r.child;r!==null;)ed(t,s,r),r=r.sibling}function ed(t,s,r){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(aa,r)}catch{}switch(r.tag){case 5:Xe||Zs(r,s);case 6:var a=Ve,n=kt;Ve=null,as(t,s,r),Ve=a,kt=n,Ve!==null&&(kt?(t=Ve,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ve.removeChild(r.stateNode));break;case 18:Ve!==null&&(kt?(t=Ve,r=r.stateNode,t.nodeType===8?rl(t.parentNode,r):t.nodeType===1&&rl(t,r),Nr(t)):rl(Ve,r.stateNode));break;case 4:a=Ve,n=kt,Ve=r.stateNode.containerInfo,kt=!0,as(t,s,r),Ve=a,kt=n;break;case 0:case 11:case 14:case 15:if(!Xe&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var l=n,g=l.destroy;l=l.tag,g!==void 0&&((l&2)!==0||(l&4)!==0)&&zl(r,s,g),n=n.next}while(n!==a)}as(t,s,r);break;case 1:if(!Xe&&(Zs(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(L){Ie(r,s,L)}as(t,s,r);break;case 21:as(t,s,r);break;case 22:r.mode&1?(Xe=(a=Xe)||r.memoizedState!==null,as(t,s,r),Xe=a):as(t,s,r);break;default:as(t,s,r)}}function td(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Mm),s.forEach(function(a){var n=Vm.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function St(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var l=t,g=s,L=g;e:for(;L!==null;){switch(L.tag){case 5:Ve=L.stateNode,kt=!1;break e;case 3:Ve=L.stateNode.containerInfo,kt=!0;break e;case 4:Ve=L.stateNode.containerInfo,kt=!0;break e}L=L.return}if(Ve===null)throw Error(u(160));ed(l,g,n),Ve=null,kt=!1;var z=n.alternate;z!==null&&(z.return=null),n.return=null}catch(Q){Ie(n,s,Q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)sd(s,t),s=s.sibling}function sd(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(St(s,t),Rt(t),a&4){try{Hr(3,t,t.return),Ga(3,t)}catch(pe){Ie(t,t.return,pe)}try{Hr(5,t,t.return)}catch(pe){Ie(t,t.return,pe)}}break;case 1:St(s,t),Rt(t),a&512&&r!==null&&Zs(r,r.return);break;case 5:if(St(s,t),Rt(t),a&512&&r!==null&&Zs(r,r.return),t.flags&32){var n=t.stateNode;try{ur(n,"")}catch(pe){Ie(t,t.return,pe)}}if(a&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,g=r!==null?r.memoizedProps:l,L=t.type,z=t.updateQueue;if(t.updateQueue=null,z!==null)try{L==="input"&&l.type==="radio"&&l.name!=null&&cr(n,l),jn(L,g);var Q=jn(L,l);for(g=0;g<z.length;g+=2){var se=z[g],le=z[g+1];se==="style"?Fi(n,le):se==="dangerouslySetInnerHTML"?Ii(n,le):se==="children"?ur(n,le):G(n,se,le,Q)}switch(L){case"input":Ps(n,l);break;case"textarea":Ri(n,l);break;case"select":var ee=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var de=l.value;de!=null?It(n,!!l.multiple,de,!1):ee!==!!l.multiple&&(l.defaultValue!=null?It(n,!!l.multiple,l.defaultValue,!0):It(n,!!l.multiple,l.multiple?[]:"",!1))}n[Tr]=l}catch(pe){Ie(t,t.return,pe)}}break;case 6:if(St(s,t),Rt(t),a&4){if(t.stateNode===null)throw Error(u(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(pe){Ie(t,t.return,pe)}}break;case 3:if(St(s,t),Rt(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Nr(s.containerInfo)}catch(pe){Ie(t,t.return,pe)}break;case 4:St(s,t),Rt(t);break;case 13:St(s,t),Rt(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(Wl=Me())),a&4&&td(t);break;case 22:if(se=r!==null&&r.memoizedState!==null,t.mode&1?(Xe=(Q=Xe)||se,St(s,t),Xe=Q):St(s,t),Rt(t),a&8192){if(Q=t.memoizedState!==null,(t.stateNode.isHidden=Q)&&!se&&(t.mode&1)!==0)for(ue=t,se=t.child;se!==null;){for(le=ue=se;ue!==null;){switch(ee=ue,de=ee.child,ee.tag){case 0:case 11:case 14:case 15:Hr(4,ee,ee.return);break;case 1:Zs(ee,ee.return);var me=ee.stateNode;if(typeof me.componentWillUnmount=="function"){a=ee,r=ee.return;try{s=a,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(pe){Ie(a,r,pe)}}break;case 5:Zs(ee,ee.return);break;case 22:if(ee.memoizedState!==null){nd(le);continue}}de!==null?(de.return=ee,ue=de):nd(le)}se=se.sibling}e:for(se=null,le=t;;){if(le.tag===5){if(se===null){se=le;try{n=le.stateNode,Q?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(L=le.stateNode,z=le.memoizedProps.style,g=z!=null&&z.hasOwnProperty("display")?z.display:null,L.style.display=Mi("display",g))}catch(pe){Ie(t,t.return,pe)}}}else if(le.tag===6){if(se===null)try{le.stateNode.nodeValue=Q?"":le.memoizedProps}catch(pe){Ie(t,t.return,pe)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===t)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===t)break e;for(;le.sibling===null;){if(le.return===null||le.return===t)break e;se===le&&(se=null),le=le.return}se===le&&(se=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:St(s,t),Rt(t),a&4&&td(t);break;case 21:break;default:St(s,t),Rt(t)}}function Rt(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(Xc(r)){var a=r;break e}r=r.return}throw Error(u(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(ur(n,""),a.flags&=-33);var l=Zc(t);Hl(t,l,n);break;case 3:case 4:var g=a.stateNode.containerInfo,L=Zc(t);Bl(t,L,g);break;default:throw Error(u(161))}}catch(z){Ie(t,t.return,z)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Om(t,s,r){ue=t,rd(t)}function rd(t,s,r){for(var a=(t.mode&1)!==0;ue!==null;){var n=ue,l=n.child;if(n.tag===22&&a){var g=n.memoizedState!==null||Ha;if(!g){var L=n.alternate,z=L!==null&&L.memoizedState!==null||Xe;L=Ha;var Q=Xe;if(Ha=g,(Xe=z)&&!Q)for(ue=n;ue!==null;)g=ue,z=g.child,g.tag===22&&g.memoizedState!==null?ld(n):z!==null?(z.return=g,ue=z):ld(n);for(;l!==null;)ue=l,rd(l),l=l.sibling;ue=n,Ha=L,Xe=Q}ad(t)}else(n.subtreeFlags&8772)!==0&&l!==null?(l.return=n,ue=l):ad(t)}}function ad(t){for(;ue!==null;){var s=ue;if((s.flags&8772)!==0){var r=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Xe||Ga(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!Xe)if(r===null)a.componentDidMount();else{var n=s.elementType===s.type?r.memoizedProps:wt(s.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&nc(s,l,a);break;case 3:var g=s.updateQueue;if(g!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}nc(s,g,r)}break;case 5:var L=s.stateNode;if(r===null&&s.flags&4){r=L;var z=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&r.focus();break;case"img":z.src&&(r.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Q=s.alternate;if(Q!==null){var se=Q.memoizedState;if(se!==null){var le=se.dehydrated;le!==null&&Nr(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(u(163))}Xe||s.flags&512&&$l(s)}catch(ee){Ie(s,s.return,ee)}}if(s===t){ue=null;break}if(r=s.sibling,r!==null){r.return=s.return,ue=r;break}ue=s.return}}function nd(t){for(;ue!==null;){var s=ue;if(s===t){ue=null;break}var r=s.sibling;if(r!==null){r.return=s.return,ue=r;break}ue=s.return}}function ld(t){for(;ue!==null;){var s=ue;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Ga(4,s)}catch(z){Ie(s,r,z)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var n=s.return;try{a.componentDidMount()}catch(z){Ie(s,n,z)}}var l=s.return;try{$l(s)}catch(z){Ie(s,l,z)}break;case 5:var g=s.return;try{$l(s)}catch(z){Ie(s,g,z)}}}catch(z){Ie(s,s.return,z)}if(s===t){ue=null;break}var L=s.sibling;if(L!==null){L.return=s.return,ue=L;break}ue=s.return}}var Um=Math.ceil,Va=w.ReactCurrentDispatcher,Gl=w.ReactCurrentOwner,yt=w.ReactCurrentBatchConfig,we=0,He=null,qe=null,We=0,mt=0,er=Zt(0),$e=0,Gr=null,ws=0,Wa=0,Vl=0,Vr=null,nt=null,Wl=0,tr=1/0,Bt=null,Ka=!1,Kl=null,ns=null,Qa=!1,ls=null,Ya=0,Wr=0,Ql=null,Ja=-1,Xa=0;function tt(){return(we&6)!==0?Me():Ja!==-1?Ja:Ja=Me()}function is(t){return(t.mode&1)===0?1:(we&2)!==0&&We!==0?We&-We:Nm.transition!==null?(Xa===0&&(Xa=Xi()),Xa):(t=Se,t!==0||(t=window.event,t=t===void 0?16:io(t.type)),t)}function Ct(t,s,r,a){if(50<Wr)throw Wr=0,Ql=null,Error(u(185));fr(t,r,a),((we&2)===0||t!==He)&&(t===He&&((we&2)===0&&(Wa|=r),$e===4&&os(t,We)),lt(t,a),r===1&&we===0&&(s.mode&1)===0&&(tr=Me()+500,Sa&&ts()))}function lt(t,s){var r=t.callbackNode;Nu(t,s);var a=ia(t,t===He?We:0);if(a===0)r!==null&&Qi(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&Qi(r),s===1)t.tag===0?jm(od.bind(null,t)):Wo(od.bind(null,t)),fm(function(){(we&6)===0&&ts()}),r=null;else{switch(Zi(a)){case 1:r=En;break;case 4:r=Yi;break;case 16:r=ra;break;case 536870912:r=Ji;break;default:r=ra}r=hd(r,id.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function id(t,s){if(Ja=-1,Xa=0,(we&6)!==0)throw Error(u(327));var r=t.callbackNode;if(sr()&&t.callbackNode!==r)return null;var a=ia(t,t===He?We:0);if(a===0)return null;if((a&30)!==0||(a&t.expiredLanes)!==0||s)s=Za(t,a);else{s=a;var n=we;we|=2;var l=dd();(He!==t||We!==s)&&(Bt=null,tr=Me()+500,Ss(t,s));do try{$m();break}catch(L){cd(t,L)}while(!0);xl(),Va.current=l,we=n,qe!==null?s=0:(He=null,We=0,s=$e)}if(s!==0){if(s===2&&(n=An(t),n!==0&&(a=n,s=Yl(t,n))),s===1)throw r=Gr,Ss(t,0),os(t,a),lt(t,Me()),r;if(s===6)os(t,a);else{if(n=t.current.alternate,(a&30)===0&&!qm(n)&&(s=Za(t,a),s===2&&(l=An(t),l!==0&&(a=l,s=Yl(t,l))),s===1))throw r=Gr,Ss(t,0),os(t,a),lt(t,Me()),r;switch(t.finishedWork=n,t.finishedLanes=a,s){case 0:case 1:throw Error(u(345));case 2:Cs(t,nt,Bt);break;case 3:if(os(t,a),(a&130023424)===a&&(s=Wl+500-Me(),10<s)){if(ia(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){tt(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=sl(Cs.bind(null,t,nt,Bt),s);break}Cs(t,nt,Bt);break;case 4:if(os(t,a),(a&4194240)===a)break;for(s=t.eventTimes,n=-1;0<a;){var g=31-jt(a);l=1<<g,g=s[g],g>n&&(n=g),a&=~l}if(a=n,a=Me()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Um(a/1960))-a,10<a){t.timeoutHandle=sl(Cs.bind(null,t,nt,Bt),a);break}Cs(t,nt,Bt);break;case 5:Cs(t,nt,Bt);break;default:throw Error(u(329))}}}return lt(t,Me()),t.callbackNode===r?id.bind(null,t):null}function Yl(t,s){var r=Vr;return t.current.memoizedState.isDehydrated&&(Ss(t,s).flags|=256),t=Za(t,s),t!==2&&(s=nt,nt=r,s!==null&&Jl(s)),t}function Jl(t){nt===null?nt=t:nt.push.apply(nt,t)}function qm(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],l=n.getSnapshot;n=n.value;try{if(!Nt(l(),n))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function os(t,s){for(s&=~Vl,s&=~Wa,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-jt(s),a=1<<r;t[r]=-1,s&=~a}}function od(t){if((we&6)!==0)throw Error(u(327));sr();var s=ia(t,0);if((s&1)===0)return lt(t,Me()),null;var r=Za(t,s);if(t.tag!==0&&r===2){var a=An(t);a!==0&&(s=a,r=Yl(t,a))}if(r===1)throw r=Gr,Ss(t,0),os(t,s),lt(t,Me()),r;if(r===6)throw Error(u(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Cs(t,nt,Bt),lt(t,Me()),null}function Xl(t,s){var r=we;we|=1;try{return t(s)}finally{we=r,we===0&&(tr=Me()+500,Sa&&ts())}}function ks(t){ls!==null&&ls.tag===0&&(we&6)===0&&sr();var s=we;we|=1;var r=yt.transition,a=Se;try{if(yt.transition=null,Se=1,t)return t()}finally{Se=a,yt.transition=r,we=s,(we&6)===0&&ts()}}function Zl(){mt=er.current,Pe(er)}function Ss(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,hm(r)),qe!==null)for(r=qe.return;r!==null;){var a=r;switch(ol(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&wa();break;case 3:Js(),Pe(st),Pe(Qe),jl();break;case 5:vl(a);break;case 4:Js();break;case 13:Pe(Te);break;case 19:Pe(Te);break;case 10:pl(a.type._context);break;case 22:case 23:Zl()}r=r.return}if(He=t,qe=t=cs(t.current,null),We=mt=s,$e=0,Gr=null,Vl=Wa=ws=0,nt=Vr=null,js!==null){for(s=0;s<js.length;s++)if(r=js[s],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,l=r.pending;if(l!==null){var g=l.next;l.next=n,a.next=g}r.pending=a}js=null}return t}function cd(t,s){do{var r=qe;try{if(xl(),Ma.current=qa,Fa){for(var a=Le.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Fa=!1}if(_s=0,Be=ze=Le=null,Ur=!1,qr=0,Gl.current=null,r===null||r.return===null){$e=1,Gr=s,qe=null;break}e:{var l=t,g=r.return,L=r,z=s;if(s=We,L.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var Q=z,se=L,le=se.tag;if((se.mode&1)===0&&(le===0||le===11||le===15)){var ee=se.alternate;ee?(se.updateQueue=ee.updateQueue,se.memoizedState=ee.memoizedState,se.lanes=ee.lanes):(se.updateQueue=null,se.memoizedState=null)}var de=Lc(g);if(de!==null){de.flags&=-257,Ic(de,g,L,l,s),de.mode&1&&Tc(l,Q,s),s=de,z=Q;var me=s.updateQueue;if(me===null){var pe=new Set;pe.add(z),s.updateQueue=pe}else me.add(z);break e}else{if((s&1)===0){Tc(l,Q,s),ei();break e}z=Error(u(426))}}else if(Re&&L.mode&1){var Fe=Lc(g);if(Fe!==null){(Fe.flags&65536)===0&&(Fe.flags|=256),Ic(Fe,g,L,l,s),ul(Xs(z,L));break e}}l=z=Xs(z,L),$e!==4&&($e=2),Vr===null?Vr=[l]:Vr.push(l),l=g;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var W=Pc(l,z,s);ac(l,W);break e;case 1:L=z;var B=l.type,K=l.stateNode;if((l.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(ns===null||!ns.has(K)))){l.flags|=65536,s&=-s,l.lanes|=s;var ce=Rc(l,L,s);ac(l,ce);break e}}l=l.return}while(l!==null)}md(r)}catch(ge){s=ge,qe===r&&r!==null&&(qe=r=r.return);continue}break}while(!0)}function dd(){var t=Va.current;return Va.current=qa,t===null?qa:t}function ei(){($e===0||$e===3||$e===2)&&($e=4),He===null||(ws&268435455)===0&&(Wa&268435455)===0||os(He,We)}function Za(t,s){var r=we;we|=2;var a=dd();(He!==t||We!==s)&&(Bt=null,Ss(t,s));do try{zm();break}catch(n){cd(t,n)}while(!0);if(xl(),we=r,Va.current=a,qe!==null)throw Error(u(261));return He=null,We=0,$e}function zm(){for(;qe!==null;)ud(qe)}function $m(){for(;qe!==null&&!xu();)ud(qe)}function ud(t){var s=gd(t.alternate,t,mt);t.memoizedProps=t.pendingProps,s===null?md(t):qe=s,Gl.current=null}function md(t){var s=t;do{var r=s.alternate;if(t=s.return,(s.flags&32768)===0){if(r=Lm(r,s,mt),r!==null){qe=r;return}}else{if(r=Im(r,s),r!==null){r.flags&=32767,qe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,qe=null;return}}if(s=s.sibling,s!==null){qe=s;return}qe=s=t}while(s!==null);$e===0&&($e=5)}function Cs(t,s,r){var a=Se,n=yt.transition;try{yt.transition=null,Se=1,Bm(t,s,r,a)}finally{yt.transition=n,Se=a}return null}function Bm(t,s,r,a){do sr();while(ls!==null);if((we&6)!==0)throw Error(u(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(u(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(_u(t,l),t===He&&(qe=He=null,We=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Qa||(Qa=!0,hd(ra,function(){return sr(),null})),l=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||l){l=yt.transition,yt.transition=null;var g=Se;Se=1;var L=we;we|=4,Gl.current=null,Fm(t,r),sd(r,t),cm(el),da=!!Zn,el=Zn=null,t.current=r,Om(r),pu(),we=L,Se=g,yt.transition=l}else t.current=r;if(Qa&&(Qa=!1,ls=t,Ya=n),l=t.pendingLanes,l===0&&(ns=null),fu(r.stateNode),lt(t,Me()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)n=s[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(Ka)throw Ka=!1,t=Kl,Kl=null,t;return(Ya&1)!==0&&t.tag!==0&&sr(),l=t.pendingLanes,(l&1)!==0?t===Ql?Wr++:(Wr=0,Ql=t):Wr=0,ts(),null}function sr(){if(ls!==null){var t=Zi(Ya),s=yt.transition,r=Se;try{if(yt.transition=null,Se=16>t?16:t,ls===null)var a=!1;else{if(t=ls,ls=null,Ya=0,(we&6)!==0)throw Error(u(331));var n=we;for(we|=4,ue=t.current;ue!==null;){var l=ue,g=l.child;if((ue.flags&16)!==0){var L=l.deletions;if(L!==null){for(var z=0;z<L.length;z++){var Q=L[z];for(ue=Q;ue!==null;){var se=ue;switch(se.tag){case 0:case 11:case 15:Hr(8,se,l)}var le=se.child;if(le!==null)le.return=se,ue=le;else for(;ue!==null;){se=ue;var ee=se.sibling,de=se.return;if(Jc(se),se===Q){ue=null;break}if(ee!==null){ee.return=de,ue=ee;break}ue=de}}}var me=l.alternate;if(me!==null){var pe=me.child;if(pe!==null){me.child=null;do{var Fe=pe.sibling;pe.sibling=null,pe=Fe}while(pe!==null)}}ue=l}}if((l.subtreeFlags&2064)!==0&&g!==null)g.return=l,ue=g;else e:for(;ue!==null;){if(l=ue,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:Hr(9,l,l.return)}var W=l.sibling;if(W!==null){W.return=l.return,ue=W;break e}ue=l.return}}var B=t.current;for(ue=B;ue!==null;){g=ue;var K=g.child;if((g.subtreeFlags&2064)!==0&&K!==null)K.return=g,ue=K;else e:for(g=B;ue!==null;){if(L=ue,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:Ga(9,L)}}catch(ge){Ie(L,L.return,ge)}if(L===g){ue=null;break e}var ce=L.sibling;if(ce!==null){ce.return=L.return,ue=ce;break e}ue=L.return}}if(we=n,ts(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(aa,t)}catch{}a=!0}return a}finally{Se=r,yt.transition=s}}return!1}function xd(t,s,r){s=Xs(r,s),s=Pc(t,s,1),t=rs(t,s,1),s=tt(),t!==null&&(fr(t,1,s),lt(t,s))}function Ie(t,s,r){if(t.tag===3)xd(t,t,r);else for(;s!==null;){if(s.tag===3){xd(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ns===null||!ns.has(a))){t=Xs(r,t),t=Rc(s,t,1),s=rs(s,t,1),t=tt(),s!==null&&(fr(s,1,t),lt(s,t));break}}s=s.return}}function Hm(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=tt(),t.pingedLanes|=t.suspendedLanes&r,He===t&&(We&r)===r&&($e===4||$e===3&&(We&130023424)===We&&500>Me()-Wl?Ss(t,0):Vl|=r),lt(t,s)}function pd(t,s){s===0&&((t.mode&1)===0?s=1:(s=la,la<<=1,(la&130023424)===0&&(la=4194304)));var r=tt();t=qt(t,s),t!==null&&(fr(t,s,r),lt(t,r))}function Gm(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),pd(t,r)}function Vm(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(u(314))}a!==null&&a.delete(s),pd(t,r)}var gd;gd=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||st.current)at=!0;else{if((t.lanes&r)===0&&(s.flags&128)===0)return at=!1,Tm(t,s,r);at=(t.flags&131072)!==0}else at=!1,Re&&(s.flags&1048576)!==0&&Ko(s,Ea,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Ba(t,s),t=s.pendingProps;var n=Hs(s,Qe.current);Ys(s,r),n=wl(null,s,a,t,n,r);var l=kl();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,rt(a)?(l=!0,ka(s)):l=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,fl(s),n.updater=za,s.stateNode=n,n._reactInternals=s,Pl(s,a,t,r),s=Il(null,s,a,!0,l,r)):(s.tag=0,Re&&l&&il(s),et(null,s,n,r),s=s.child),s;case 16:a=s.elementType;e:{switch(Ba(t,s),t=s.pendingProps,n=a._init,a=n(a._payload),s.type=a,n=s.tag=Km(a),t=wt(a,t),n){case 0:s=Ll(null,s,a,t,r);break e;case 1:s=zc(null,s,a,t,r);break e;case 11:s=Mc(null,s,a,t,r);break e;case 14:s=Fc(null,s,a,wt(a.type,t),r);break e}throw Error(u(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:wt(a,n),Ll(t,s,a,n,r);case 1:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:wt(a,n),zc(t,s,a,n,r);case 3:e:{if($c(s),t===null)throw Error(u(387));a=s.pendingProps,l=s.memoizedState,n=l.element,rc(t,s),La(s,a,null,r);var g=s.memoizedState;if(a=g.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){n=Xs(Error(u(423)),s),s=Bc(t,s,a,r,n);break e}else if(a!==n){n=Xs(Error(u(424)),s),s=Bc(t,s,a,r,n);break e}else for(ut=Xt(s.stateNode.containerInfo.firstChild),dt=s,Re=!0,_t=null,r=tc(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ws(),a===n){s=$t(t,s,r);break e}et(t,s,a,r)}s=s.child}return s;case 5:return lc(s),t===null&&dl(s),a=s.type,n=s.pendingProps,l=t!==null?t.memoizedProps:null,g=n.children,tl(a,n)?g=null:l!==null&&tl(a,l)&&(s.flags|=32),qc(t,s),et(t,s,g,r),s.child;case 6:return t===null&&dl(s),null;case 13:return Hc(t,s,r);case 4:return yl(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=Ks(s,null,a,r):et(t,s,a,r),s.child;case 11:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:wt(a,n),Mc(t,s,a,n,r);case 7:return et(t,s,s.pendingProps,r),s.child;case 8:return et(t,s,s.pendingProps.children,r),s.child;case 12:return et(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,l=s.memoizedProps,g=n.value,Ee(Pa,a._currentValue),a._currentValue=g,l!==null)if(Nt(l.value,g)){if(l.children===n.children&&!st.current){s=$t(t,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var L=l.dependencies;if(L!==null){g=l.child;for(var z=L.firstContext;z!==null;){if(z.context===a){if(l.tag===1){z=zt(-1,r&-r),z.tag=2;var Q=l.updateQueue;if(Q!==null){Q=Q.shared;var se=Q.pending;se===null?z.next=z:(z.next=se.next,se.next=z),Q.pending=z}}l.lanes|=r,z=l.alternate,z!==null&&(z.lanes|=r),gl(l.return,r,s),L.lanes|=r;break}z=z.next}}else if(l.tag===10)g=l.type===s.type?null:l.child;else if(l.tag===18){if(g=l.return,g===null)throw Error(u(341));g.lanes|=r,L=g.alternate,L!==null&&(L.lanes|=r),gl(g,r,s),g=l.sibling}else g=l.child;if(g!==null)g.return=l;else for(g=l;g!==null;){if(g===s){g=null;break}if(l=g.sibling,l!==null){l.return=g.return,g=l;break}g=g.return}l=g}et(t,s,n.children,r),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,Ys(s,r),n=ht(n),a=a(n),s.flags|=1,et(t,s,a,r),s.child;case 14:return a=s.type,n=wt(a,s.pendingProps),n=wt(a.type,n),Fc(t,s,a,n,r);case 15:return Oc(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:wt(a,n),Ba(t,s),s.tag=1,rt(a)?(t=!0,ka(s)):t=!1,Ys(s,r),Ac(s,a,n),Pl(s,a,n,r),Il(null,s,a,!0,t,r);case 19:return Vc(t,s,r);case 22:return Uc(t,s,r)}throw Error(u(156,s.tag))};function hd(t,s){return Ki(t,s)}function Wm(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(t,s,r,a){return new Wm(t,s,r,a)}function ti(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Km(t){if(typeof t=="function")return ti(t)?1:0;if(t!=null){if(t=t.$$typeof,t===M)return 11;if(t===X)return 14}return 2}function cs(t,s){var r=t.alternate;return r===null?(r=vt(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function en(t,s,r,a,n,l){var g=2;if(a=t,typeof t=="function")ti(t)&&(g=1);else if(typeof t=="string")g=5;else e:switch(t){case I:return Es(r.children,n,l,s);case H:g=8,n|=8;break;case k:return t=vt(12,r,s,n|2),t.elementType=k,t.lanes=l,t;case ae:return t=vt(13,r,s,n),t.elementType=ae,t.lanes=l,t;case xe:return t=vt(19,r,s,n),t.elementType=xe,t.lanes=l,t;case oe:return tn(r,n,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ie:g=10;break e;case U:g=9;break e;case M:g=11;break e;case X:g=14;break e;case re:g=16,a=null;break e}throw Error(u(130,t==null?t:typeof t,""))}return s=vt(g,r,s,n),s.elementType=t,s.type=a,s.lanes=l,s}function Es(t,s,r,a){return t=vt(7,t,a,s),t.lanes=r,t}function tn(t,s,r,a){return t=vt(22,t,a,s),t.elementType=oe,t.lanes=r,t.stateNode={isHidden:!1},t}function si(t,s,r){return t=vt(6,t,null,s),t.lanes=r,t}function ri(t,s,r){return s=vt(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Qm(t,s,r,a,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dn(0),this.expirationTimes=Dn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dn(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function ai(t,s,r,a,n,l,g,L,z){return t=new Qm(t,s,r,L,z),s===1?(s=1,l===!0&&(s|=8)):s=0,l=vt(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},fl(l),t}function Ym(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:b,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function fd(t){if(!t)return es;t=t._reactInternals;e:{if(hs(t)!==t||t.tag!==1)throw Error(u(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(rt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(u(171))}if(t.tag===1){var r=t.type;if(rt(r))return Go(t,r,s)}return s}function yd(t,s,r,a,n,l,g,L,z){return t=ai(r,a,!0,t,n,l,g,L,z),t.context=fd(null),r=t.current,a=tt(),n=is(r),l=zt(a,n),l.callback=s??null,rs(r,l,n),t.current.lanes=n,fr(t,n,a),lt(t,a),t}function sn(t,s,r,a){var n=s.current,l=tt(),g=is(n);return r=fd(r),s.context===null?s.context=r:s.pendingContext=r,s=zt(l,g),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=rs(n,s,g),t!==null&&(Ct(t,n,g,l),Ta(t,n,g)),g}function rn(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vd(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function ni(t,s){vd(t,s),(t=t.alternate)&&vd(t,s)}function Jm(){return null}var bd=typeof reportError=="function"?reportError:function(t){console.error(t)};function li(t){this._internalRoot=t}an.prototype.render=li.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(u(409));sn(t,s,null,null)},an.prototype.unmount=li.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;ks(function(){sn(null,t,null,null)}),s[Mt]=null}};function an(t){this._internalRoot=t}an.prototype.unstable_scheduleHydration=function(t){if(t){var s=so();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Qt.length&&s!==0&&s<Qt[r].priority;r++);Qt.splice(r,0,t),r===0&&no(t)}};function ii(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nn(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jd(){}function Xm(t,s,r,a,n){if(n){if(typeof a=="function"){var l=a;a=function(){var Q=rn(g);l.call(Q)}}var g=yd(s,a,t,0,null,!1,!1,"",jd);return t._reactRootContainer=g,t[Mt]=g.current,Pr(t.nodeType===8?t.parentNode:t),ks(),g}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var L=a;a=function(){var Q=rn(z);L.call(Q)}}var z=ai(t,0,!1,null,null,!1,!1,"",jd);return t._reactRootContainer=z,t[Mt]=z.current,Pr(t.nodeType===8?t.parentNode:t),ks(function(){sn(s,z,r,a)}),z}function ln(t,s,r,a,n){var l=r._reactRootContainer;if(l){var g=l;if(typeof n=="function"){var L=n;n=function(){var z=rn(g);L.call(z)}}sn(s,g,t,n)}else g=Xm(r,s,t,n,a);return rn(g)}eo=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=hr(s.pendingLanes);r!==0&&(Pn(s,r|1),lt(s,Me()),(we&6)===0&&(tr=Me()+500,ts()))}break;case 13:ks(function(){var a=qt(t,1);if(a!==null){var n=tt();Ct(a,t,1,n)}}),ni(t,1)}},Rn=function(t){if(t.tag===13){var s=qt(t,134217728);if(s!==null){var r=tt();Ct(s,t,134217728,r)}ni(t,134217728)}},to=function(t){if(t.tag===13){var s=is(t),r=qt(t,s);if(r!==null){var a=tt();Ct(r,t,s,a)}ni(t,s)}},so=function(){return Se},ro=function(t,s){var r=Se;try{return Se=t,s()}finally{Se=r}},wn=function(t,s,r){switch(s){case"input":if(Ps(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var n=_a(a);if(!n)throw Error(u(90));ps(a),Ps(a,n)}}}break;case"textarea":Ri(t,r);break;case"select":s=r.value,s!=null&&It(t,!!r.multiple,s,!1)}},zi=Xl,$i=ks;var Zm={usingClientEntryPoint:!1,Events:[Lr,$s,_a,Ui,qi,Xl]},Kr={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ex={bundleType:Kr.bundleType,version:Kr.version,rendererPackageName:Kr.rendererPackageName,rendererConfig:Kr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vi(t),t===null?null:t.stateNode},findFiberByHostInstance:Kr.findFiberByHostInstance||Jm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var on=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!on.isDisabled&&on.supportsFiber)try{aa=on.inject(ex),Et=on}catch{}}return it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zm,it.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ii(s))throw Error(u(200));return Ym(t,s,null,r)},it.createRoot=function(t,s){if(!ii(t))throw Error(u(299));var r=!1,a="",n=bd;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=ai(t,1,!1,null,null,r,!1,a,n),t[Mt]=s.current,Pr(t.nodeType===8?t.parentNode:t),new li(s)},it.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(u(188)):(t=Object.keys(t).join(","),Error(u(268,t)));return t=Vi(s),t=t===null?null:t.stateNode,t},it.flushSync=function(t){return ks(t)},it.hydrate=function(t,s,r){if(!nn(s))throw Error(u(200));return ln(null,t,s,!0,r)},it.hydrateRoot=function(t,s,r){if(!ii(t))throw Error(u(405));var a=r!=null&&r.hydratedSources||null,n=!1,l="",g=bd;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),s=yd(s,null,t,1,r??null,n,!1,l,g),t[Mt]=s.current,Pr(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,n]:s.mutableSourceEagerHydrationData.push(r,n);return new an(s)},it.render=function(t,s,r){if(!nn(s))throw Error(u(200));return ln(null,t,s,!1,r)},it.unmountComponentAtNode=function(t){if(!nn(t))throw Error(u(40));return t._reactRootContainer?(ks(function(){ln(null,null,t,!1,function(){t._reactRootContainer=null,t[Mt]=null})}),!0):!1},it.unstable_batchedUpdates=Xl,it.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!nn(r))throw Error(u(200));if(t==null||t._reactInternals===void 0)throw Error(u(38));return ln(t,s,r,!1,a)},it.version="18.3.1-next-f1338f8080-20240426",it}var Ad;function Gd(){if(Ad)return di.exports;Ad=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(d){console.error(d)}}return o(),di.exports=dx(),di.exports}var Dd;function ux(){if(Dd)return cn;Dd=1;var o=Gd();return cn.createRoot=o.createRoot,cn.hydrateRoot=o.hydrateRoot,cn}var mx=ux();const xx=Hd(mx);Gd();function Yr(){return Yr=Object.assign?Object.assign.bind():function(o){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(o[_]=u[_])}return o},Yr.apply(this,arguments)}var us;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(us||(us={}));const Pd="popstate";function px(o){o===void 0&&(o={});function d(_,S){let{pathname:C,search:T,hash:A}=_.location;return gi("",{pathname:C,search:T,hash:A},S.state&&S.state.usr||null,S.state&&S.state.key||"default")}function u(_,S){return typeof S=="string"?S:mn(S)}return hx(d,u,null,o)}function Oe(o,d){if(o===!1||o===null||typeof o>"u")throw new Error(d)}function wi(o,d){if(!o){typeof console<"u"&&console.warn(d);try{throw new Error(d)}catch{}}}function gx(){return Math.random().toString(36).substr(2,8)}function Rd(o,d){return{usr:o.state,key:o.key,idx:d}}function gi(o,d,u,_){return u===void 0&&(u=null),Yr({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof d=="string"?nr(d):d,{state:u,key:d&&d.key||_||gx()})}function mn(o){let{pathname:d="/",search:u="",hash:_=""}=o;return u&&u!=="?"&&(d+=u.charAt(0)==="?"?u:"?"+u),_&&_!=="#"&&(d+=_.charAt(0)==="#"?_:"#"+_),d}function nr(o){let d={};if(o){let u=o.indexOf("#");u>=0&&(d.hash=o.substr(u),o=o.substr(0,u));let _=o.indexOf("?");_>=0&&(d.search=o.substr(_),o=o.substr(0,_)),o&&(d.pathname=o)}return d}function hx(o,d,u,_){_===void 0&&(_={});let{window:S=document.defaultView,v5Compat:C=!1}=_,T=S.history,A=us.Pop,x=null,P=f();P==null&&(P=0,T.replaceState(Yr({},T.state,{idx:P}),""));function f(){return(T.state||{idx:null}).idx}function j(){A=us.Pop;let h=f(),i=h==null?null:h-P;P=h,x&&x({action:A,location:p.location,delta:i})}function E(h,i){A=us.Push;let R=gi(p.location,h,i);P=f()+1;let G=Rd(R,P),w=p.createHref(R);try{T.pushState(G,"",w)}catch(y){if(y instanceof DOMException&&y.name==="DataCloneError")throw y;S.location.assign(w)}C&&x&&x({action:A,location:p.location,delta:1})}function q(h,i){A=us.Replace;let R=gi(p.location,h,i);P=f();let G=Rd(R,P),w=p.createHref(R);T.replaceState(G,"",w),C&&x&&x({action:A,location:p.location,delta:0})}function c(h){let i=S.location.origin!=="null"?S.location.origin:S.location.href,R=typeof h=="string"?h:mn(h);return R=R.replace(/ $/,"%20"),Oe(i,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,i)}let p={get action(){return A},get location(){return o(S,T)},listen(h){if(x)throw new Error("A history only accepts one active listener");return S.addEventListener(Pd,j),x=h,()=>{S.removeEventListener(Pd,j),x=null}},createHref(h){return d(S,h)},createURL:c,encodeLocation(h){let i=c(h);return{pathname:i.pathname,search:i.search,hash:i.hash}},push:E,replace:q,go(h){return T.go(h)}};return p}var Td;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(Td||(Td={}));function fx(o,d,u){return u===void 0&&(u="/"),yx(o,d,u)}function yx(o,d,u,_){let S=typeof d=="string"?nr(d):d,C=ki(S.pathname||"/",u);if(C==null)return null;let T=Vd(o);vx(T);let A=null;for(let x=0;A==null&&x<T.length;++x){let P=Px(C);A=Ex(T[x],P)}return A}function Vd(o,d,u,_){d===void 0&&(d=[]),u===void 0&&(u=[]),_===void 0&&(_="");let S=(C,T,A)=>{let x={relativePath:A===void 0?C.path||"":A,caseSensitive:C.caseSensitive===!0,childrenIndex:T,route:C};x.relativePath.startsWith("/")&&(Oe(x.relativePath.startsWith(_),'Absolute route path "'+x.relativePath+'" nested under path '+('"'+_+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),x.relativePath=x.relativePath.slice(_.length));let P=ms([_,x.relativePath]),f=u.concat(x);C.children&&C.children.length>0&&(Oe(C.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+P+'".')),Vd(C.children,d,f,P)),!(C.path==null&&!C.index)&&d.push({path:P,score:Sx(P,C.index),routesMeta:f})};return o.forEach((C,T)=>{var A;if(C.path===""||!((A=C.path)!=null&&A.includes("?")))S(C,T);else for(let x of Wd(C.path))S(C,T,x)}),d}function Wd(o){let d=o.split("/");if(d.length===0)return[];let[u,..._]=d,S=u.endsWith("?"),C=u.replace(/\?$/,"");if(_.length===0)return S?[C,""]:[C];let T=Wd(_.join("/")),A=[];return A.push(...T.map(x=>x===""?C:[C,x].join("/"))),S&&A.push(...T),A.map(x=>o.startsWith("/")&&x===""?"/":x)}function vx(o){o.sort((d,u)=>d.score!==u.score?u.score-d.score:Cx(d.routesMeta.map(_=>_.childrenIndex),u.routesMeta.map(_=>_.childrenIndex)))}const bx=/^:[\w-]+$/,jx=3,Nx=2,_x=1,wx=10,kx=-2,Ld=o=>o==="*";function Sx(o,d){let u=o.split("/"),_=u.length;return u.some(Ld)&&(_+=kx),d&&(_+=Nx),u.filter(S=>!Ld(S)).reduce((S,C)=>S+(bx.test(C)?jx:C===""?_x:wx),_)}function Cx(o,d){return o.length===d.length&&o.slice(0,-1).every((_,S)=>_===d[S])?o[o.length-1]-d[d.length-1]:0}function Ex(o,d,u){let{routesMeta:_}=o,S={},C="/",T=[];for(let A=0;A<_.length;++A){let x=_[A],P=A===_.length-1,f=C==="/"?d:d.slice(C.length)||"/",j=Ax({path:x.relativePath,caseSensitive:x.caseSensitive,end:P},f),E=x.route;if(!j)return null;Object.assign(S,j.params),T.push({params:S,pathname:ms([C,j.pathname]),pathnameBase:Mx(ms([C,j.pathnameBase])),route:E}),j.pathnameBase!=="/"&&(C=ms([C,j.pathnameBase]))}return T}function Ax(o,d){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[u,_]=Dx(o.path,o.caseSensitive,o.end),S=d.match(u);if(!S)return null;let C=S[0],T=C.replace(/(.)\/+$/,"$1"),A=S.slice(1);return{params:_.reduce((P,f,j)=>{let{paramName:E,isOptional:q}=f;if(E==="*"){let p=A[j]||"";T=C.slice(0,C.length-p.length).replace(/(.)\/+$/,"$1")}const c=A[j];return q&&!c?P[E]=void 0:P[E]=(c||"").replace(/%2F/g,"/"),P},{}),pathname:C,pathnameBase:T,pattern:o}}function Dx(o,d,u){d===void 0&&(d=!1),u===void 0&&(u=!0),wi(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let _=[],S="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(T,A,x)=>(_.push({paramName:A,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(_.push({paramName:"*"}),S+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):u?S+="\\/*$":o!==""&&o!=="/"&&(S+="(?:(?=\\/|$))"),[new RegExp(S,d?void 0:"i"),_]}function Px(o){try{return o.split("/").map(d=>decodeURIComponent(d).replace(/\//g,"%2F")).join("/")}catch(d){return wi(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+d+").")),o}}function ki(o,d){if(d==="/")return o;if(!o.toLowerCase().startsWith(d.toLowerCase()))return null;let u=d.endsWith("/")?d.length-1:d.length,_=o.charAt(u);return _&&_!=="/"?null:o.slice(u)||"/"}const Rx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tx=o=>Rx.test(o);function Lx(o,d){d===void 0&&(d="/");let{pathname:u,search:_="",hash:S=""}=typeof o=="string"?nr(o):o,C;if(u)if(Tx(u))C=u;else{if(u.includes("//")){let T=u;u=u.replace(/\/\/+/g,"/"),wi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(T+" -> "+u))}u.startsWith("/")?C=Id(u.substring(1),"/"):C=Id(u,d)}else C=d;return{pathname:C,search:Fx(_),hash:Ox(S)}}function Id(o,d){let u=d.replace(/\/+$/,"").split("/");return o.split("/").forEach(S=>{S===".."?u.length>1&&u.pop():S!=="."&&u.push(S)}),u.length>1?u.join("/"):"/"}function xi(o,d,u,_){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+d+"` field ["+JSON.stringify(_)+"].  Please separate it out to the ")+("`to."+u+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ix(o){return o.filter((d,u)=>u===0||d.route.path&&d.route.path.length>0)}function Si(o,d){let u=Ix(o);return d?u.map((_,S)=>S===u.length-1?_.pathname:_.pathnameBase):u.map(_=>_.pathnameBase)}function Ci(o,d,u,_){_===void 0&&(_=!1);let S;typeof o=="string"?S=nr(o):(S=Yr({},o),Oe(!S.pathname||!S.pathname.includes("?"),xi("?","pathname","search",S)),Oe(!S.pathname||!S.pathname.includes("#"),xi("#","pathname","hash",S)),Oe(!S.search||!S.search.includes("#"),xi("#","search","hash",S)));let C=o===""||S.pathname==="",T=C?"/":S.pathname,A;if(T==null)A=u;else{let j=d.length-1;if(!_&&T.startsWith("..")){let E=T.split("/");for(;E[0]==="..";)E.shift(),j-=1;S.pathname=E.join("/")}A=j>=0?d[j]:"/"}let x=Lx(S,A),P=T&&T!=="/"&&T.endsWith("/"),f=(C||T===".")&&u.endsWith("/");return!x.pathname.endsWith("/")&&(P||f)&&(x.pathname+="/"),x}const ms=o=>o.join("/").replace(/\/\/+/g,"/"),Mx=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),Fx=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,Ox=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function Ux(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const Kd=["post","put","patch","delete"];new Set(Kd);const qx=["get",...Kd];new Set(qx);function Jr(){return Jr=Object.assign?Object.assign.bind():function(o){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(o[_]=u[_])}return o},Jr.apply(this,arguments)}const Ei=m.createContext(null),zx=m.createContext(null),xs=m.createContext(null),gn=m.createContext(null),Ht=m.createContext({outlet:null,matches:[],isDataRoute:!1}),Qd=m.createContext(null);function $x(o,d){let{relative:u}=d===void 0?{}:d;lr()||Oe(!1);let{basename:_,navigator:S}=m.useContext(xs),{hash:C,pathname:T,search:A}=Jd(o,{relative:u}),x=T;return _!=="/"&&(x=T==="/"?_:ms([_,T])),S.createHref({pathname:x,search:A,hash:C})}function lr(){return m.useContext(gn)!=null}function ir(){return lr()||Oe(!1),m.useContext(gn).location}function Yd(o){m.useContext(xs).static||m.useLayoutEffect(o)}function Zr(){let{isDataRoute:o}=m.useContext(Ht);return o?tp():Bx()}function Bx(){lr()||Oe(!1);let o=m.useContext(Ei),{basename:d,future:u,navigator:_}=m.useContext(xs),{matches:S}=m.useContext(Ht),{pathname:C}=ir(),T=JSON.stringify(Si(S,u.v7_relativeSplatPath)),A=m.useRef(!1);return Yd(()=>{A.current=!0}),m.useCallback(function(P,f){if(f===void 0&&(f={}),!A.current)return;if(typeof P=="number"){_.go(P);return}let j=Ci(P,JSON.parse(T),C,f.relative==="path");o==null&&d!=="/"&&(j.pathname=j.pathname==="/"?d:ms([d,j.pathname])),(f.replace?_.replace:_.push)(j,f.state,f)},[d,_,T,C,o])}function Ai(){let{matches:o}=m.useContext(Ht),d=o[o.length-1];return d?d.params:{}}function Jd(o,d){let{relative:u}=d===void 0?{}:d,{future:_}=m.useContext(xs),{matches:S}=m.useContext(Ht),{pathname:C}=ir(),T=JSON.stringify(Si(S,_.v7_relativeSplatPath));return m.useMemo(()=>Ci(o,JSON.parse(T),C,u==="path"),[o,T,C,u])}function Hx(o,d){return Gx(o,d)}function Gx(o,d,u,_){lr()||Oe(!1);let{navigator:S}=m.useContext(xs),{matches:C}=m.useContext(Ht),T=C[C.length-1],A=T?T.params:{};T&&T.pathname;let x=T?T.pathnameBase:"/";T&&T.route;let P=ir(),f;if(d){var j;let h=typeof d=="string"?nr(d):d;x==="/"||(j=h.pathname)!=null&&j.startsWith(x)||Oe(!1),f=h}else f=P;let E=f.pathname||"/",q=E;if(x!=="/"){let h=x.replace(/^\//,"").split("/");q="/"+E.replace(/^\//,"").split("/").slice(h.length).join("/")}let c=fx(o,{pathname:q}),p=Yx(c&&c.map(h=>Object.assign({},h,{params:Object.assign({},A,h.params),pathname:ms([x,S.encodeLocation?S.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?x:ms([x,S.encodeLocation?S.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),C,u,_);return d&&p?m.createElement(gn.Provider,{value:{location:Jr({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:us.Pop}},p):p}function Vx(){let o=ep(),d=Ux(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),u=o instanceof Error?o.stack:null,S={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},d),u?m.createElement("pre",{style:S},u):null,null)}const Wx=m.createElement(Vx,null);class Kx extends m.Component{constructor(d){super(d),this.state={location:d.location,revalidation:d.revalidation,error:d.error}}static getDerivedStateFromError(d){return{error:d}}static getDerivedStateFromProps(d,u){return u.location!==d.location||u.revalidation!=="idle"&&d.revalidation==="idle"?{error:d.error,location:d.location,revalidation:d.revalidation}:{error:d.error!==void 0?d.error:u.error,location:u.location,revalidation:d.revalidation||u.revalidation}}componentDidCatch(d,u){console.error("React Router caught the following error during render",d,u)}render(){return this.state.error!==void 0?m.createElement(Ht.Provider,{value:this.props.routeContext},m.createElement(Qd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Qx(o){let{routeContext:d,match:u,children:_}=o,S=m.useContext(Ei);return S&&S.static&&S.staticContext&&(u.route.errorElement||u.route.ErrorBoundary)&&(S.staticContext._deepestRenderedBoundaryId=u.route.id),m.createElement(Ht.Provider,{value:d},_)}function Yx(o,d,u,_){var S;if(d===void 0&&(d=[]),u===void 0&&(u=null),_===void 0&&(_=null),o==null){var C;if(!u)return null;if(u.errors)o=u.matches;else if((C=_)!=null&&C.v7_partialHydration&&d.length===0&&!u.initialized&&u.matches.length>0)o=u.matches;else return null}let T=o,A=(S=u)==null?void 0:S.errors;if(A!=null){let f=T.findIndex(j=>j.route.id&&A?.[j.route.id]!==void 0);f>=0||Oe(!1),T=T.slice(0,Math.min(T.length,f+1))}let x=!1,P=-1;if(u&&_&&_.v7_partialHydration)for(let f=0;f<T.length;f++){let j=T[f];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(P=f),j.route.id){let{loaderData:E,errors:q}=u,c=j.route.loader&&E[j.route.id]===void 0&&(!q||q[j.route.id]===void 0);if(j.route.lazy||c){x=!0,P>=0?T=T.slice(0,P+1):T=[T[0]];break}}}return T.reduceRight((f,j,E)=>{let q,c=!1,p=null,h=null;u&&(q=A&&j.route.id?A[j.route.id]:void 0,p=j.route.errorElement||Wx,x&&(P<0&&E===0?(sp("route-fallback"),c=!0,h=null):P===E&&(c=!0,h=j.route.hydrateFallbackElement||null)));let i=d.concat(T.slice(0,E+1)),R=()=>{let G;return q?G=p:c?G=h:j.route.Component?G=m.createElement(j.route.Component,null):j.route.element?G=j.route.element:G=f,m.createElement(Qx,{match:j,routeContext:{outlet:f,matches:i,isDataRoute:u!=null},children:G})};return u&&(j.route.ErrorBoundary||j.route.errorElement||E===0)?m.createElement(Kx,{location:u.location,revalidation:u.revalidation,component:p,error:q,children:R(),routeContext:{outlet:null,matches:i,isDataRoute:!0}}):R()},null)}var Xd=(function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o})(Xd||{}),Zd=(function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o})(Zd||{});function Jx(o){let d=m.useContext(Ei);return d||Oe(!1),d}function Xx(o){let d=m.useContext(zx);return d||Oe(!1),d}function Zx(o){let d=m.useContext(Ht);return d||Oe(!1),d}function eu(o){let d=Zx(),u=d.matches[d.matches.length-1];return u.route.id||Oe(!1),u.route.id}function ep(){var o;let d=m.useContext(Qd),u=Xx(),_=eu();return d!==void 0?d:(o=u.errors)==null?void 0:o[_]}function tp(){let{router:o}=Jx(Xd.UseNavigateStable),d=eu(Zd.UseNavigateStable),u=m.useRef(!1);return Yd(()=>{u.current=!0}),m.useCallback(function(S,C){C===void 0&&(C={}),u.current&&(typeof S=="number"?o.navigate(S):o.navigate(S,Jr({fromRouteId:d},C)))},[o,d])}const Md={};function sp(o,d,u){Md[o]||(Md[o]=!0)}function rp(o,d){o?.v7_startTransition,o?.v7_relativeSplatPath}function rr(o){let{to:d,replace:u,state:_,relative:S}=o;lr()||Oe(!1);let{future:C,static:T}=m.useContext(xs),{matches:A}=m.useContext(Ht),{pathname:x}=ir(),P=Zr(),f=Ci(d,Si(A,C.v7_relativeSplatPath),x,S==="path"),j=JSON.stringify(f);return m.useEffect(()=>P(JSON.parse(j),{replace:u,state:_,relative:S}),[P,j,S,u,_]),null}function ye(o){Oe(!1)}function ap(o){let{basename:d="/",children:u=null,location:_,navigationType:S=us.Pop,navigator:C,static:T=!1,future:A}=o;lr()&&Oe(!1);let x=d.replace(/^\/*/,"/"),P=m.useMemo(()=>({basename:x,navigator:C,static:T,future:Jr({v7_relativeSplatPath:!1},A)}),[x,A,C,T]);typeof _=="string"&&(_=nr(_));let{pathname:f="/",search:j="",hash:E="",state:q=null,key:c="default"}=_,p=m.useMemo(()=>{let h=ki(f,x);return h==null?null:{location:{pathname:h,search:j,hash:E,state:q,key:c},navigationType:S}},[x,f,j,E,q,c,S]);return p==null?null:m.createElement(xs.Provider,{value:P},m.createElement(gn.Provider,{children:u,value:p}))}function Fd(o){let{children:d,location:u}=o;return Hx(hi(d),u)}new Promise(()=>{});function hi(o,d){d===void 0&&(d=[]);let u=[];return m.Children.forEach(o,(_,S)=>{if(!m.isValidElement(_))return;let C=[...d,S];if(_.type===m.Fragment){u.push.apply(u,hi(_.props.children,C));return}_.type!==ye&&Oe(!1),!_.props.index||!_.props.children||Oe(!1);let T={id:_.props.id||C.join("-"),caseSensitive:_.props.caseSensitive,element:_.props.element,Component:_.props.Component,index:_.props.index,path:_.props.path,loader:_.props.loader,action:_.props.action,errorElement:_.props.errorElement,ErrorBoundary:_.props.ErrorBoundary,hasErrorBoundary:_.props.ErrorBoundary!=null||_.props.errorElement!=null,shouldRevalidate:_.props.shouldRevalidate,handle:_.props.handle,lazy:_.props.lazy};_.props.children&&(T.children=hi(_.props.children,C)),u.push(T)}),u}function fi(){return fi=Object.assign?Object.assign.bind():function(o){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(o[_]=u[_])}return o},fi.apply(this,arguments)}function np(o,d){if(o==null)return{};var u={},_=Object.keys(o),S,C;for(C=0;C<_.length;C++)S=_[C],!(d.indexOf(S)>=0)&&(u[S]=o[S]);return u}function lp(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function ip(o,d){return o.button===0&&(!d||d==="_self")&&!lp(o)}const op=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cp="6";try{window.__reactRouterVersion=cp}catch{}const dp="startTransition",Od=ix[dp];function up(o){let{basename:d,children:u,future:_,window:S}=o,C=m.useRef();C.current==null&&(C.current=px({window:S,v5Compat:!0}));let T=C.current,[A,x]=m.useState({action:T.action,location:T.location}),{v7_startTransition:P}=_||{},f=m.useCallback(j=>{P&&Od?Od(()=>x(j)):x(j)},[x,P]);return m.useLayoutEffect(()=>T.listen(f),[T,f]),m.useEffect(()=>rp(_),[_]),m.createElement(ap,{basename:d,children:u,location:A.location,navigationType:A.action,navigator:T,future:_})}const mp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bt=m.forwardRef(function(d,u){let{onClick:_,relative:S,reloadDocument:C,replace:T,state:A,target:x,to:P,preventScrollReset:f,viewTransition:j}=d,E=np(d,op),{basename:q}=m.useContext(xs),c,p=!1;if(typeof P=="string"&&xp.test(P)&&(c=P,mp))try{let G=new URL(window.location.href),w=P.startsWith("//")?new URL(G.protocol+P):new URL(P),y=ki(w.pathname,q);w.origin===G.origin&&y!=null?P=y+w.search+w.hash:p=!0}catch{}let h=$x(P,{relative:S}),i=pp(P,{replace:T,state:A,target:x,preventScrollReset:f,relative:S,viewTransition:j});function R(G){_&&_(G),G.defaultPrevented||i(G)}return m.createElement("a",fi({},E,{href:c||h,onClick:p||C?_:R,ref:u,target:x}))});var Ud;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})(Ud||(Ud={}));var qd;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(qd||(qd={}));function pp(o,d){let{target:u,replace:_,state:S,preventScrollReset:C,relative:T,viewTransition:A}=d===void 0?{}:d,x=Zr(),P=ir(),f=Jd(o,{relative:T});return m.useCallback(j=>{if(ip(j,u)){j.preventDefault();let E=_!==void 0?_:mn(P)===mn(f);x(o,{replace:E,state:S,preventScrollReset:C,relative:T,viewTransition:A})}},[P,x,f,_,S,u,o,C,T,A])}const O=sx.create({baseURL:window.location.origin,headers:{"Content-Type":"application/json",Accept:"application/json"}}),zd=localStorage.getItem("token");zd&&(O.defaults.headers.common.Authorization=`Bearer ${zd}`);O.interceptors.response.use(o=>o,o=>(o.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user_email"),window.location.href="/login"),Promise.reject(o)));const tu=m.createContext(null);function gp({children:o}){const[d,u]=m.useState(null),[_,S]=m.useState(localStorage.getItem("token")),[C,T]=m.useState(!0);m.useEffect(()=>{_?(O.defaults.headers.common.Authorization=`Bearer ${_}`,A()):T(!1)},[_]);const A=async()=>{try{if(!_){T(!1);return}try{const f=await O.get("/api/v1/me"),j=f.data?.data||f.data;u(j),localStorage.setItem("user_email",j.email),localStorage.setItem("user_name",j.name)}catch{const j=localStorage.getItem("user_email"),E=localStorage.getItem("user_name");if(j)u({email:j,name:E||j.split("@")[0]});else{P();return}}T(!1)}catch(f){console.error("Error fetching user:",f),P()}},x=async(f,j)=>{try{const E=await O.post("/api/v1/login",{email:f,password:j}),{token:q,user:c}=E.data;S(q),localStorage.setItem("token",q),O.defaults.headers.common.Authorization=`Bearer ${q}`;try{const p=await O.get("/api/v1/me"),h=p.data?.data||p.data;u(h),localStorage.setItem("user_email",h.email||f),localStorage.setItem("user_name",h.name||f.split("@")[0])}catch{u(c||{email:f,name:f.split("@")[0]}),localStorage.setItem("user_email",c?.email||f),localStorage.setItem("user_name",c?.name||f.split("@")[0])}return{success:!0}}catch(E){return console.error("Login error:",E),{success:!1,message:E.response?.data?.message||E.message||"Login failed"}}},P=()=>{S(null),u(null),localStorage.removeItem("token"),localStorage.removeItem("user_email"),delete O.defaults.headers.common.Authorization};return e.jsx(tu.Provider,{value:{user:d,token:_,login:x,logout:P,loading:C},children:o})}function hn(){const o=m.useContext(tu);if(!o)throw new Error("useAuth must be used within AuthProvider");return o}const hp=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),su=(...o)=>o.filter((d,u,_)=>!!d&&_.indexOf(d)===u).join(" ");var fp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yp=m.forwardRef(({color:o="currentColor",size:d=24,strokeWidth:u=2,absoluteStrokeWidth:_,className:S="",children:C,iconNode:T,...A},x)=>m.createElement("svg",{ref:x,...fp,width:d,height:d,stroke:o,strokeWidth:_?Number(u)*24/Number(d):u,className:su("lucide",S),...A},[...T.map(([P,f])=>m.createElement(P,f)),...Array.isArray(C)?C:[C]]));const be=(o,d)=>{const u=m.forwardRef(({className:_,...S},C)=>m.createElement(yp,{ref:C,iconNode:d,className:su(`lucide-${hp(o)}`,_),...S}));return u.displayName=`${o}`,u};const Di=be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const vp=be("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const bp=be("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const $d=be("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const yi=be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const jp=be("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const fn=be("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Np=be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const _p=be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const wp=be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Xr=be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const kp=be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Tt=be("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const Sp=be("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);const Cp=be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const xt=be("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);const ru=be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const au=be("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Ep=be("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);const Ap=be("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Dp=be("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Pp=be("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const Bd=be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const xn=be("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Rp=be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Ke=be("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Tp=be("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const _e=be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const vi=be("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Lp=be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Ip=be("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const Mp=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const bi=be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const pn=be("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const dn=be("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);const Ae=be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const ji=be("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const ar=be("Tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]]);const Ce=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const ot=be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Fp=be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Op=be("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);const nu=be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const un=be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Up=be("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);const qp=be("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const Ze=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function zp(){const[o,d]=m.useState(""),[u,_]=m.useState(""),[S,C]=m.useState(""),[T,A]=m.useState(!1),{login:x}=hn(),P=Zr(),f=async j=>{j.preventDefault(),C(""),A(!0);const E=await x(o,u);E.success?P("/"):C(E.message||"Invalid credentials"),A(!1)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-green-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-green-600 p-3 rounded-full",children:e.jsx(ar,{className:"h-12 w-12 text-white"})})}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Farm Management System"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to manage your farm operations"})]}),e.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-lg shadow-lg",onSubmit:f,children:[S&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:S}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:j=>d(j.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:u,onChange:j=>_(j.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Enter your password"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:T,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:T?"Signing in...":"Sign in"})}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Demo credentials:"}),e.jsx("p",{className:"font-mono text-xs mt-1",children:"admin@fms.test / password"})]})]})]})})}function $p(){const[o,d]=m.useState({totalSales:0,totalExpenses:0,totalRevenue:0,totalMargin:0,crops:{},loading:!0}),[u,_]=m.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});m.useEffect(()=>{S()},[u]);const S=async()=>{try{d(q=>({...q,loading:!0}));const[C,T]=await Promise.all([O.get(`/api/v1/gari-sales/summary?date_from=${u.from}&date_to=${u.to}`).catch(()=>({data:{overall:{}}})),O.get(`/api/v1/gari-production-batches?date_from=${u.from}&date_to=${u.to}`).catch(()=>({data:{data:[]}}))]),A=C.data?.overall||{},x=Array.isArray(T.data?.data)?T.data.data:[],P=Number(A.total_revenue||0),f=Number(A.total_cost||0),j=Number(A.total_margin||0),E=x.reduce((q,c)=>q+Number(c.total_cost||0),0);d({totalSales:Number(A.total_sales||0),totalExpenses:E,totalRevenue:P,totalMargin:j,crops:{gari:{sales:P,expenses:E,margin:j,batches:x.length},bellPepper:{sales:0,expenses:0,margin:0,batches:0},tomatoes:{sales:0,expenses:0,margin:0,batches:0},habaneros:{sales:0,expenses:0,margin:0,batches:0}},loading:!1})}catch(C){console.error("Error fetching consolidated data:",C),d(T=>({...T,loading:!1}))}};return o.loading?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Dashboard"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Overview across all crops and livestock"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:u.from,onChange:C=>_({...u,from:C.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:u.to,onChange:C=>_({...u,to:C.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx(Tt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(o.totalRevenue||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All crops combined"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx(fn,{className:"h-5 w-5 text-red-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(o.totalExpenses||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Production costs"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),e.jsx(ot,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(o.totalMargin||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.totalRevenue>0?Number(o.totalMargin/o.totalRevenue*100).toFixed(1)+"% margin":"No sales"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Sales"}),e.jsx(Ke,{className:"h-5 w-5 text-blue-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:o.totalSales}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Transactions"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance by Crop"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expenses"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Batches"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(o.crops).map(([C,T])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:C==="bellPepper"?"Bell Pepper":C}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(T.sales||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(T.expenses||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(T.margin||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.batches})]},C))})]})})]})]})}const Bp=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"];function Hp(){const[o,d]=m.useState([]),[u,_]=m.useState(!0),[S,C]=m.useState(!1),[T,A]=m.useState(null),[x,P]=m.useState({name:"",legal_name:"",farm_type:"MIXED",country:"Nigeria",state:"Ondo",town:"",default_currency:"NGN",default_unit_system:"METRIC",default_timezone:"Africa/Lagos",accounting_method:"ACCRUAL",status:"ACTIVE"});m.useEffect(()=>{f()},[]);const f=async()=>{_(!0);try{const i=await O.get("/api/v1/farms?per_page=1000"),R=i.data?.data||(Array.isArray(i.data)?i.data:[]);d(Array.isArray(R)?R:[])}catch(i){console.error("Error fetching farms:",i),d([])}finally{_(!1)}},j=async(i=null)=>{if(A(i),i)try{const G=(await O.get(`/api/v1/farms/${i.id}`)).data?.data||i;P({name:G.name||"",legal_name:G.legal_name||"",farm_type:G.farm_type||"MIXED",country:G.country||"Nigeria",state:G.state||"",town:G.town||"",default_currency:G.default_currency||"NGN",default_unit_system:G.default_unit_system||"METRIC",default_timezone:G.default_timezone||"Africa/Lagos",accounting_method:G.accounting_method||"ACCRUAL",status:G.status||"ACTIVE"})}catch(R){console.error("Error fetching farm:",R),P({name:i.name||"",legal_name:i.legal_name||"",farm_type:i.farm_type||"MIXED",country:i.country||"Nigeria",state:i.state||"",town:i.town||"",default_currency:i.default_currency||"NGN",default_unit_system:i.default_unit_system||"METRIC",default_timezone:i.default_timezone||"Africa/Lagos",accounting_method:i.accounting_method||"ACCRUAL",status:i.status||"ACTIVE"})}else P({name:"",legal_name:"",farm_type:"MIXED",country:"Nigeria",state:"Ondo",town:"",default_currency:"NGN",default_unit_system:"METRIC",default_timezone:"Africa/Lagos",accounting_method:"ACCRUAL",status:"ACTIVE"});C(!0)},E=async i=>{i.preventDefault();try{T?await O.put(`/api/v1/farms/${T.id}`,x):await O.post("/api/v1/farms",x),C(!1),f()}catch(R){console.error("Error saving farm:",R),alert(R.response?.data?.message||"Error saving farm")}},q=async i=>{if(confirm("Are you sure you want to delete this farm?"))try{await O.delete(`/api/v1/farms/${i}`),f()}catch(R){console.error("Error deleting farm:",R),alert(R.response?.data?.message||"Error deleting farm")}},c=i=>({CROP:"Crop",LIVESTOCK:"Livestock",MIXED:"Mixed",AQUACULTURE:"Aquaculture",HORTICULTURE:"Horticulture"})[i]||i,p=i=>({ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",ARCHIVED:"bg-red-100 text-red-800"})[i]||"bg-gray-100 text-gray-800",h=i=>{const R=[i.town,i.state,i.country].filter(Boolean);return R.length>0?R.join(", "):"Location not specified"};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Farms"}),e.jsxs("button",{onClick:()=>j(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Add Farm"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(ar,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No farms yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first farm"}),e.jsx("button",{onClick:()=>j(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create Farm"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Legal Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:i.farm_code||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:i.legal_name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c(i.farm_type)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xn,{size:14,className:"mr-1"}),h(i)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${p(i.status)}`,children:i.status||"ACTIVE"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx(bt,{to:`/farms/${i.id}`,className:"text-blue-600 hover:text-blue-900 mr-4",title:"View Details",children:"View"}),e.jsx("button",{onClick:()=>j(i),className:"text-green-600 hover:text-green-900 mr-4",children:e.jsx(Ae,{size:16,className:"inline"})}),e.jsx("button",{onClick:()=>q(i.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16,className:"inline"})})]})]},i.id))})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:T?"Edit Farm":"Create New Farm"}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:i=>P({...x,name:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Name"}),e.jsx("input",{type:"text",value:x.legal_name,onChange:i=>P({...x,legal_name:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm Type *"}),e.jsxs("select",{required:!0,value:x.farm_type,onChange:i=>P({...x,farm_type:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"CROP",children:"Crop"}),e.jsx("option",{value:"LIVESTOCK",children:"Livestock"}),e.jsx("option",{value:"MIXED",children:"Mixed"}),e.jsx("option",{value:"AQUACULTURE",children:"Aquaculture"}),e.jsx("option",{value:"HORTICULTURE",children:"Horticulture"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:x.status,onChange:i=>P({...x,status:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"ARCHIVED",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country *"}),e.jsx("input",{type:"text",required:!0,value:x.country,onChange:i=>P({...x,country:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),e.jsx("select",{required:!0,value:x.state,onChange:i=>P({...x,state:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:Bp.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Town *"}),e.jsx("input",{type:"text",required:!0,value:x.town,onChange:i=>P({...x,town:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Currency *"}),e.jsx("input",{type:"text",required:!0,maxLength:"3",value:x.default_currency,onChange:i=>P({...x,default_currency:i.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Unit System *"}),e.jsxs("select",{required:!0,value:x.default_unit_system,onChange:i=>P({...x,default_unit_system:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"METRIC",children:"Metric"}),e.jsx("option",{value:"IMPERIAL",children:"Imperial"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Timezone *"}),e.jsx("input",{type:"text",required:!0,value:x.default_timezone,onChange:i=>P({...x,default_timezone:i.target.value}),placeholder:"Africa/Lagos",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Accounting Method *"}),e.jsxs("select",{required:!0,value:x.accounting_method,onChange:i=>P({...x,accounting_method:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"ACCRUAL",children:"Accrual"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[T?"Update":"Create"," Farm"]})]})]})]})})]})}function Gp(){const{id:o}=Ai(),[d,u]=m.useState(null),[_,S]=m.useState(!0);m.useEffect(()=>{C()},[o]);const C=async()=>{try{const T=await O.get(`/api/v1/farms/${o}`);u(T.data.data||T.data)}catch(T){console.error("Error fetching farm:",T)}finally{S(!1)}};return _?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):d?e.jsxs("div",{children:[e.jsxs(bt,{to:"/farms",className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[e.jsx(Di,{className:"h-5 w-5 mr-2"}),"Back to Farms"]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(ar,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:d.name}),d.location&&e.jsxs("div",{className:"flex items-center text-gray-600 mt-1",children:[e.jsx(xn,{className:"h-4 w-4 mr-1"}),d.location]})]})]}),d.is_active?e.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-green-100 text-green-800 rounded",children:"Active"}):e.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-gray-100 text-gray-800 rounded",children:"Inactive"})]})}),e.jsxs("div",{className:"px-6 py-4",children:[d.description&&e.jsx("p",{className:"text-gray-700 mb-4",children:d.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.total_area&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Area"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[d.total_area," ",d.area_unit||"hectares"]})]}),d.fields&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Fields"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d.fields?.length||0})]}),d.seasons&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Seasons"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d.seasons?.length||0})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.fields&&d.fields.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Fields"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:d.fields.map(T=>e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:T.name}),T.area&&e.jsxs("p",{className:"text-sm text-gray-600",children:[T.area," ",T.area_unit||"hectares"]})]},T.id))})]}),d.seasons&&d.seasons.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Seasons"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:d.seasons.map(T=>e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:T.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(T.start_date).toLocaleDateString()," - ",new Date(T.end_date).toLocaleDateString()]})]},T.id))})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Farm not found"}),e.jsx(bt,{to:"/farms",className:"text-green-600 hover:text-green-700 mt-4 inline-block",children:" Back to Farms"})]})}function Vp(){const[o,d]=m.useState([]),[u,_]=m.useState(!0),[S,C]=m.useState(!1),[T,A]=m.useState({name:"",connection_type:"MOCK",is_active:!0});m.useEffect(()=>{x()},[]);const x=async()=>{try{const f=await O.get("/api/v1/scale-devices");d(f.data.data||f.data)}catch(f){console.error("Error fetching devices:",f)}finally{_(!1)}},P=async f=>{f.preventDefault();try{await O.post("/api/v1/scale-devices",T),C(!1),A({name:"",connection_type:"MOCK",is_active:!0}),x()}catch(j){alert("Error creating device: "+(j.response?.data?.message||"Unknown error"))}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Scale Devices"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your weighing scale devices"})]}),e.jsxs("button",{onClick:()=>C(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"Add Device"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(vi,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No scale devices yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first scale device to get started"}),e.jsx("button",{onClick:()=>C(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Add Device"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:o.map(f=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:e.jsx(vi,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:f.name})]}),f.is_active?e.jsx(Xr,{className:"h-5 w-5 text-green-500"}):e.jsx(kp,{className:"h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Connection Type"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.connection_type})]}),f.last_calibration_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last Calibration"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(f.last_calibration_date).toLocaleDateString()})]})]})]},f.id))}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Scale Device"}),e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Name *"}),e.jsx("input",{type:"text",required:!0,value:T.name,onChange:f=>A({...T,name:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Main Weighing Scale"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Connection Type"}),e.jsxs("select",{value:T.connection_type,onChange:f=>A({...T,connection_type:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"MOCK",children:"Mock (Testing)"}),e.jsx("option",{value:"SERIAL",children:"Serial Port"}),e.jsx("option",{value:"USB",children:"USB"}),e.jsx("option",{value:"NETWORK",children:"Network"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Device"})]})]})]})})]})}function Wp(){const[o,d]=m.useState([]),[u,_]=m.useState(!0);m.useEffect(()=>{S()},[]);const S=async()=>{try{const C=await O.get("/api/v1/label-templates");d(C.data.data||C.data)}catch(C){console.error("Error fetching templates:",C)}finally{_(!1)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Label Templates"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your label printing templates"})]})}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(ji,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No label templates yet"}),e.jsx("p",{className:"text-gray-500",children:"Label templates are created through the API. Use the default template for now."})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:o.map(C=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:e.jsx(ji,{className:"h-6 w-6 text-orange-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:C.name})]}),C.is_default&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded",children:"Default"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Code"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:C.code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Target Type"}),e.jsx("p",{className:"text-sm text-gray-900",children:C.target_type?.split("\\").pop()||"N/A"})]}),C.template_body&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Template Preview"}),e.jsxs("pre",{className:"text-xs bg-gray-50 p-2 rounded mt-1 overflow-auto max-h-32",children:[C.template_body.substring(0,200),"..."]})]})]})]},C.id))})]})}function Kp(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState(!0),[x,P]=m.useState(!1),[f,j]=m.useState({farm_id:"",factory_id:"",processing_date:new Date().toISOString().slice(0,10),cassava_source:"HARVESTED",cassava_quantity_tonnes:"",cassava_cost_per_tonne:"",gari_produced_kg:"",gari_type:"WHITE",gari_grade:"FINE",labour_cost:0,fuel_cost:0,equipment_cost:0,water_cost:0,transport_cost:0,other_costs:0,waste_kg:0,notes:""});m.useEffect(()=>{E()},[]);const E=async()=>{try{const[i,R]=await Promise.all([O.get("/api/v1/gari-production-batches"),O.get("/api/v1/farms")]),G=i.data,w=G?.data||(Array.isArray(G)?G:[]);d(w);const y=R.data,b=y?.data||(Array.isArray(y)?y:[]);_(b)}catch(i){console.error("Error fetching data:",i)}finally{A(!1)}},q=async()=>{try{const i=await O.get("/api/v1/farms");_(i.data.data||i.data)}catch(i){console.error("Error fetching farms:",i)}},c=async i=>{if(!i){C([]);return}try{const G=(await O.get(`/api/v1/factories?farm_id=${i}&production_type=gari`)).data,w=G?.data||(Array.isArray(G)?G:[]);C(w)}catch(R){console.error("Error fetching factories:",R),C([])}},p=()=>{P(!0),q(),j(i=>({...i,factory_id:""})),C([])},h=async i=>{i.preventDefault();try{const R=await O.post("/api/v1/gari-production-batches",f);console.log("Created batch response:",R.data),P(!1),j({farm_id:"",factory_id:"",processing_date:new Date().toISOString().slice(0,10),cassava_source:"HARVESTED",cassava_quantity_tonnes:"",cassava_cost_per_tonne:"",gari_produced_kg:"",gari_type:"WHITE",gari_grade:"FINE",labour_cost:0,fuel_cost:0,equipment_cost:0,water_cost:0,transport_cost:0,other_costs:0,waste_kg:0,notes:""}),E()}catch(R){alert("Error creating batch: "+(R.response?.data?.message||"Unknown error"))}};return T?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Production Batches"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track production from cassava to finished gari"})]}),e.jsxs("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Batch"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(xt,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No production batches yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production batch to get started"}),e.jsx("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Batch"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:o.map(i=>e.jsxs(bt,{to:`/gari-production-batches/${i.id}`,className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i.batch_code}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(i.processing_date).toLocaleDateString(),"  ",i.farm?.name,i.factory&&`  ${i.factory.name}`]})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded ${i.status==="COMPLETED"?"bg-green-100 text-green-800":i.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:i.status})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cassava Input"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:i.cassava_quantity_tonnes?`${i.cassava_quantity_tonnes} tonnes`:`${(i.cassava_quantity_kg/1e3).toFixed(3)} tonnes`}),e.jsx("p",{className:"text-xs text-gray-500",children:i.cassava_source==="HARVESTED"?"Harvested":i.cassava_source==="PURCHASED"?"Purchased":"Mixed"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Gari Produced"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[i.gari_produced_kg," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i.gari_type,"  ",i.gari_grade]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Yield"}),e.jsxs("p",{className:"text-sm font-semibold text-green-600",children:[i.conversion_yield_percent!=null?Number(i.conversion_yield_percent).toFixed(1):"N/A","%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cost per kg"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",i.cost_per_kg_gari!=null?Number(i.cost_per_kg_gari).toFixed(2):"N/A"]})]})]})]},i.id))}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create Production Batch"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:f.farm_id,onChange:i=>{const R=i.target.value;j({...f,farm_id:R,factory_id:""}),c(R)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Factory *"}),e.jsxs("select",{required:!0,value:f.factory_id,onChange:i=>j({...f,factory_id:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",disabled:!f.farm_id||S.length===0,children:[e.jsx("option",{value:"",children:f.farm_id?S.length===0?"No factories available":"Select factory":"Select farm first"}),S.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Date *"}),e.jsx("input",{type:"date",required:!0,value:f.processing_date,onChange:i=>j({...f,processing_date:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Source *"}),e.jsxs("select",{required:!0,value:f.cassava_source,onChange:i=>j({...f,cassava_source:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"HARVESTED",children:"Harvested"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Quantity (tonnes) *"}),e.jsx("input",{type:"number",step:"0.001",required:!0,value:f.cassava_quantity_tonnes,onChange:i=>j({...f,cassava_quantity_tonnes:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1 tonne = 1,000 kg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per tonne ()"}),e.jsx("input",{type:"number",step:"0.01",value:f.cassava_cost_per_tonne,onChange:i=>j({...f,cassava_cost_per_tonne:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 150000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Produced (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:f.gari_produced_kg,onChange:i=>j({...f,gari_produced_kg:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),e.jsxs("select",{required:!0,value:f.gari_type,onChange:i=>j({...f,gari_type:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),e.jsxs("select",{required:!0,value:f.gari_grade,onChange:i=>j({...f,gari_grade:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"FINE",children:"Fine"}),e.jsx("option",{value:"COARSE",children:"Coarse"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Processing Costs ()"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour"}),e.jsx("input",{type:"number",step:"0.01",value:f.labour_cost,onChange:i=>j({...f,labour_cost:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuel"}),e.jsx("input",{type:"number",step:"0.01",value:f.fuel_cost,onChange:i=>j({...f,fuel_cost:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment"}),e.jsx("input",{type:"number",step:"0.01",value:f.equipment_cost,onChange:i=>j({...f,equipment_cost:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Water"}),e.jsx("input",{type:"number",step:"0.01",value:f.water_cost,onChange:i=>j({...f,water_cost:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport"}),e.jsx("input",{type:"number",step:"0.01",value:f.transport_cost,onChange:i=>j({...f,transport_cost:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other"}),e.jsx("input",{type:"number",step:"0.01",value:f.other_costs,onChange:i=>j({...f,other_costs:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste (kg)"}),e.jsx("input",{type:"number",step:"0.01",value:f.waste_kg,onChange:i=>j({...f,waste_kg:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:f.notes,onChange:i=>j({...f,notes:i.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Batch"})]})]})]})})]})}function Qp(){const{id:o}=Ai(),[d,u]=m.useState(null),[_,S]=m.useState(!0),[C,T]=m.useState(!1),[A,x]=m.useState(null);m.useEffect(()=>{P()},[o]);const P=async()=>{try{console.log("Fetching batch with ID:",o);const E=await O.get(`/api/v1/gari-production-batches/${o}`);console.log("Full API response:",E),console.log("Response data:",E.data),console.log("Response data.data:",E.data?.data);const q=E.data?.data||E.data;console.log("Extracted batch data:",q),console.log("Batch data type:",typeof q),console.log("Batch data is object:",q&&typeof q=="object"),q&&typeof q=="object"&&!Array.isArray(q)?(console.log("Setting batch:",q),u(q)):(console.error("Invalid batch data structure:",q),console.error("Batch data keys:",q?Object.keys(q):"null"),u(null))}catch(E){console.error("Error fetching batch:",E),console.error("Error response:",E.response),console.error("Error response data:",E.response?.data),console.error("Error status:",E.response?.status),console.error("Error message:",E.message),console.error("Request URL:",E.config?.url),console.error("Batch ID from URL:",o),u(null)}finally{S(!1)}},f=()=>{d&&(x({processing_date:d.processing_date?new Date(d.processing_date).toISOString().slice(0,10):"",cassava_source:d.cassava_source||"HARVESTED",cassava_quantity_tonnes:d.cassava_quantity_tonnes||(d.cassava_quantity_kg?(d.cassava_quantity_kg/1e3).toString():""),cassava_cost_per_tonne:d.cassava_cost_per_tonne||"",gari_produced_kg:d.gari_produced_kg||"",gari_type:d.gari_type||"WHITE",gari_grade:d.gari_grade||"FINE",labour_cost:d.labour_cost||0,fuel_cost:d.fuel_cost||0,equipment_cost:d.equipment_cost||0,water_cost:d.water_cost||0,transport_cost:d.transport_cost||0,other_costs:d.other_costs||0,waste_kg:d.waste_kg||0,status:d.status||"PLANNED",notes:d.notes||""}),T(!0))},j=async E=>{E.preventDefault();try{await O.put(`/api/v1/gari-production-batches/${o}`,A),T(!1),x(null),P()}catch(q){alert("Error updating batch: "+(q.response?.data?.message||"Unknown error"))}};return _?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):!d&&!_?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Production batch not found"}),e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["ID: ",o]}),e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Check the browser console for detailed error information"}),e.jsx(bt,{to:"/gari-production-batches",className:"text-green-600 hover:text-green-700 mt-4 inline-block",children:" Back to Batches"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(bt,{to:"/gari-production-batches",className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(Di,{className:"h-5 w-5 mr-2"}),"Back to Batches"]}),d.status!=="COMPLETED"&&e.jsxs("button",{onClick:f,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Ae,{className:"h-5 w-5 mr-2"}),"Edit Batch"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(xt,{className:"h-8 w-8 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:d.batch_code}),e.jsxs("p",{className:"text-gray-600",children:[d.farm?.name,"  ",new Date(d.processing_date).toLocaleDateString()]})]})]}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded ${d.status==="COMPLETED"?"bg-green-100 text-green-800":d.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.status})]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cassava Input"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d.cassava_quantity_tonnes?`${d.cassava_quantity_tonnes} tonnes`:`${(d.cassava_quantity_kg/1e3).toFixed(3)} tonnes`}),d.total_cassava_cost&&e.jsxs("p",{className:"text-xs text-gray-500",children:["",Number(d.total_cassava_cost).toFixed(2)," total"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Gari Produced"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[d.gari_produced_kg," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[d.gari_type,"  ",d.gari_grade]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conversion Yield"}),e.jsxs("p",{className:"text-lg font-semibold text-green-600",children:[d.conversion_yield_percent!=null?Number(d.conversion_yield_percent).toFixed(1):"N/A","%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cost per kg"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",d.cost_per_kg_gari!=null?Number(d.cost_per_kg_gari).toFixed(2):"N/A"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Tt,{className:"h-5 w-5 mr-2 text-green-600"}),"Cost Breakdown"]}),e.jsxs("div",{className:"space-y-3",children:[Number(d.total_cassava_cost||0)>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cassava Cost"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.total_cassava_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Labour"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.labour_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Fuel"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.fuel_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Equipment"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.equipment_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Water"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.water_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Transport"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.transport_cost||0).toFixed(2)]})]}),Number(d.other_costs||0)>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Other"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.other_costs||0).toFixed(2)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Total Processing"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["",Number(d.total_processing_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[e.jsx("span",{className:"text-base font-bold text-gray-900",children:"Total Cost"}),e.jsxs("span",{className:"text-base font-bold text-gray-900",children:["",d.total_cost!=null?Number(d.total_cost).toFixed(2):"0.00"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ot,{className:"h-5 w-5 mr-2 text-blue-600"}),"Performance Metrics"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conversion Yield"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(Number(d.conversion_yield_percent)||0,100)}%`}})}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[d.conversion_yield_percent!=null?Number(d.conversion_yield_percent).toFixed(1):"0","%"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target: 22-30%"})]}),d.waste_kg>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Waste"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[d.waste_kg," kg (",d.waste_percent!=null?Number(d.waste_percent).toFixed(1):"0","%)"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cost Efficiency"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",d.cost_per_kg_gari!=null?Number(d.cost_per_kg_gari).toFixed(2):"N/A"," per kg"]})]})]})]})]}),d.cassava_inputs&&d.cassava_inputs.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Cassava Inputs"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:d.cassava_inputs.map(E=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[E.quantity_kg," kg"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[E.source_type==="HARVESTED"?"Harvested":"Purchased",E.variety&&`  ${E.variety}`,E.harvest_lot&&`  Lot: ${E.harvest_lot.code||E.harvest_lot.id}`]})]}),Number(E.total_cost||0)>0&&e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",Number(E.total_cost||0).toFixed(2)]})]})},E.id))})]}),d.notes&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Notes"}),e.jsx("p",{className:"text-gray-700",children:d.notes})]}),C&&A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Production Batch"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Date *"}),e.jsx("input",{type:"date",required:!0,value:A.processing_date,onChange:E=>x({...A,processing_date:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:A.status,onChange:E=>x({...A,status:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"PLANNED",children:"Planned"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Source *"}),e.jsxs("select",{required:!0,value:A.cassava_source,onChange:E=>x({...A,cassava_source:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"HARVESTED",children:"Harvested"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Quantity (tonnes) *"}),e.jsx("input",{type:"number",step:"0.001",required:!0,value:A.cassava_quantity_tonnes,onChange:E=>x({...A,cassava_quantity_tonnes:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1 tonne = 1,000 kg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per tonne ()"}),e.jsx("input",{type:"number",step:"0.01",value:A.cassava_cost_per_tonne,onChange:E=>x({...A,cassava_cost_per_tonne:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 150000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Produced (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:A.gari_produced_kg,onChange:E=>x({...A,gari_produced_kg:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),e.jsxs("select",{required:!0,value:A.gari_type,onChange:E=>x({...A,gari_type:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),e.jsxs("select",{required:!0,value:A.gari_grade,onChange:E=>x({...A,gari_grade:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"FINE",children:"Fine"}),e.jsx("option",{value:"COARSE",children:"Coarse"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Processing Costs ()"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour"}),e.jsx("input",{type:"number",step:"0.01",value:A.labour_cost,onChange:E=>x({...A,labour_cost:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuel"}),e.jsx("input",{type:"number",step:"0.01",value:A.fuel_cost,onChange:E=>x({...A,fuel_cost:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment"}),e.jsx("input",{type:"number",step:"0.01",value:A.equipment_cost,onChange:E=>x({...A,equipment_cost:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Water"}),e.jsx("input",{type:"number",step:"0.01",value:A.water_cost,onChange:E=>x({...A,water_cost:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport"}),e.jsx("input",{type:"number",step:"0.01",value:A.transport_cost,onChange:E=>x({...A,transport_cost:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other"}),e.jsx("input",{type:"number",step:"0.01",value:A.other_costs,onChange:E=>x({...A,other_costs:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste (kg)"}),e.jsx("input",{type:"number",step:"0.01",value:A.waste_kg,onChange:E=>x({...A,waste_kg:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:A.notes,onChange:E=>x({...A,notes:E.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{T(!1),x(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Update Batch"})]})]})]})})]})}function Yp(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState(0),[T,A]=m.useState(!0),[x,P]=m.useState({gari_type:"",packaging_type:"",status:"IN_STOCK"});m.useEffect(()=>{f()},[x]);const f=async()=>{try{const q=new URLSearchParams;x.gari_type&&q.append("gari_type",x.gari_type),x.packaging_type&&q.append("packaging_type",x.packaging_type),x.status&&q.append("status",x.status);const[c,p]=await Promise.all([O.get(`/api/v1/gari-inventory?${q.toString()}`),O.get("/api/v1/gari-inventory/summary")]),h=c.data.data||c.data,i=Array.isArray(h)?h:[];d(i),_(p.data.data||p.data),C(p.data.totalStock||0),console.log("Inventory response:",c.data),console.log("Inventory items:",i)}catch(q){console.error("Error fetching inventory:",q)}finally{A(!1)}};if(T)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const j=o.reduce((q,c)=>q+(c.quantity_kg||0),0),E=o.reduce((q,c)=>q+(c.total_cost||0),0);return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Inventory"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track finished goods stock"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Stock"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[S>0?S.toFixed(2):j.toFixed(2)," kg"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",E.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Items in Stock"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(au,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:x.gari_type,onChange:q=>P({...x,gari_type:q.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]}),e.jsxs("select",{value:x.packaging_type,onChange:q=>P({...x,packaging_type:q.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Packaging"}),e.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),e.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),e.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),e.jsx("option",{value:"50KG_BAG",children:"50kg Bag"}),e.jsx("option",{value:"BULK",children:"Bulk"})]}),e.jsxs("select",{value:x.status,onChange:q=>P({...x,status:q.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"IN_STOCK",children:"In Stock"}),e.jsx("option",{value:"RESERVED",children:"Reserved"}),e.jsx("option",{value:"SOLD",children:"Sold"}),e.jsx("option",{value:"SPOILED",children:"Spoiled"}),e.jsx("option",{value:"DAMAGED",children:"Damaged"})]})]})}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Ke,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory items"}),e.jsx("p",{className:"text-gray-500",children:"Inventory will appear here after production batches are created"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Grade"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Packaging"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost per kg"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${q.gari_type==="WHITE"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:q.gari_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.gari_grade}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.packaging_type?.replace("_"," ").toLowerCase()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[q.quantity_kg," kg",q.quantity_units>0&&` (${q.quantity_units} units)`]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",q.cost_per_kg?.toFixed(2)||"N/A"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",q.total_cost?.toFixed(2)||"0.00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${q.status==="IN_STOCK"?"bg-green-100 text-green-800":q.status==="SOLD"?"bg-blue-100 text-blue-800":q.status==="SPOILED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:q.status})})]},q.id))})]})})})]})}function Jp(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState([]),[x,P]=m.useState(!1),[f,j]=m.useState(!0),[E,q]=m.useState(!1),[c,p]=m.useState(null),[h,i]=m.useState(null),[R,G]=m.useState({farm_id:"",gari_production_batch_id:"",sale_date:new Date().toISOString().slice(0,10),customer_name:"",customer_type:"RETAIL",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",quantity_kg:"",quantity_units:"",unit_price:"",discount:0,cost_per_kg:"",payment_method:"CASH",amount_paid:"",sales_channel:"",notes:""});m.useEffect(()=>{w()},[]);const w=async()=>{try{const[F,Y,Z]=await Promise.all([O.get("/api/v1/gari-sales"),O.get("/api/v1/farms"),O.get("/api/v1/gari-sales/summary")]);d(F.data.data||F.data),C(Y.data.data||Y.data),_(Z.data.data||Z.data)}catch(F){console.error("Error fetching data:",F)}finally{j(!1)}},y=async()=>{try{const F=await O.get("/api/v1/farms");C(F.data.data||F.data)}catch(F){console.error("Error fetching farms:",F)}},b=()=>{q(!0),y(),G({farm_id:"",gari_production_batch_id:"",sale_date:new Date().toISOString().slice(0,10),customer_name:"",customer_type:"RETAIL",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",quantity_kg:"",quantity_units:"",unit_price:"",discount:0,cost_per_kg:"",payment_method:"CASH",amount_paid:"",sales_channel:"",notes:""}),A([]),A([])},I=async()=>{if(!R.farm_id){A([]),P(!1);return}P(!0);try{const F=new URLSearchParams({farm_id:R.farm_id}),Z=(await O.get(`/api/v1/gari-sales/available-batches?${F.toString()}`)).data.data||[];if(A(Z),Z.length>0&&!R.gari_production_batch_id){const N=Z[0];H(N.batch_id)}else Z.length===0&&G(N=>({...N,gari_production_batch_id:"",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",cost_per_kg:""}))}catch(F){console.error("Error fetching available batches:",F),A([]),alert("Error loading available batches: "+(F.response?.data?.message||"Unknown error"))}finally{P(!1)}},H=F=>{const Y=T.find(Z=>Z.batch_id==F);if(Y){const Z=Y.packaging_options&&Y.packaging_options.length>0?Y.packaging_options[0].packaging_type:"1KG_POUCH";G(N=>({...N,gari_production_batch_id:F,gari_type:Y.gari_type||N.gari_type,gari_grade:Y.gari_grade||N.gari_grade,packaging_type:Z,cost_per_kg:Y.cost_per_kg_gari||N.cost_per_kg,quantity_units:"",quantity_kg:""}))}},k=(F,Y)=>!F||!Y||Y<=0?0:({"1KG_POUCH":1,"2KG_POUCH":2,"5KG_PACK":5,"50KG_BAG":50}[F]||0)*Y,ie=F=>{G(Y=>{const Z=k(F,Y.quantity_units||0);return{...Y,packaging_type:F,quantity_kg:Z}})},U=F=>{G(Y=>{const Z=k(Y.packaging_type,F||0);return{...Y,quantity_units:F,quantity_kg:Z}})};m.useEffect(()=>{E&&R.farm_id&&I()},[E,R.farm_id]);const M=async F=>{F.preventDefault();try{await O.post("/api/v1/gari-sales",R),q(!1),w()}catch(Y){alert("Error creating sale: "+(Y.response?.data?.message||"Unknown error"))}},ae=F=>{p(F),i({payment_status:F.payment_status||"PAID",payment_method:F.payment_method||"CASH",amount_paid:F.amount_paid||0,discount:F.discount||0,unit_price:F.unit_price||0,notes:F.notes||""})},xe=async F=>{F.preventDefault();try{console.log("Updating sale with data:",h);const Y=await O.put(`/api/v1/gari-sales/${c.id}`,h);console.log("Update response:",Y.data),p(null),i(null),w()}catch(Y){console.error("Error updating sale:",Y),alert("Error updating sale: "+(Y.response?.data?.message||"Unknown error"))}},X=F=>{const Y=Number(c?.final_amount||0),Z=Number(F||0);let N="OUTSTANDING";Z>=Y?N="PAID":Z>0&&(N="PARTIAL"),i({...h,amount_paid:F,payment_status:N})};if(f)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const re=o.reduce((F,Y)=>F+(Number(Y.final_amount)||0),0),oe=o.reduce((F,Y)=>F+(Number(Y.gross_margin)||0),0);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Sales"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track sales and revenue"})]}),e.jsxs("button",{onClick:b,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Sale"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",Number(re||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Margin"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",Number(oe||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Sales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(pn,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sales yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first sale to get started"}),e.jsx("button",{onClick:b,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Sale"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sale Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(F=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:F.sale_code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(F.sale_date).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[F.customer_name||F.customer?.name||"Walk-in",e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",F.customer_type,")"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[F.gari_type,"  ",F.packaging_type?.replace("_"," ")]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[F.quantity_kg," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["",Number(F.final_amount||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(F.gross_margin||0).toFixed(2),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",Number(F.gross_margin_percent||0).toFixed(1),"%)"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${F.payment_status==="PAID"?"bg-green-100 text-green-800":F.payment_status==="PARTIAL"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:F.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("button",{onClick:()=>ae(F),className:"text-green-600 hover:text-green-700 flex items-center",children:[e.jsx(Ae,{className:"h-4 w-4 mr-1"}),"Edit"]})})]},F.id))})]})})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Sale"}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:R.farm_id,onChange:F=>G({...R,farm_id:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),S.map(F=>e.jsx("option",{value:F.id,children:F.name},F.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sale Date *"}),e.jsx("input",{type:"date",required:!0,value:R.sale_date,onChange:F=>G({...R,sale_date:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",value:R.customer_name,onChange:F=>G({...R,customer_name:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Walk-in customer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Type *"}),e.jsxs("select",{required:!0,value:R.customer_type,onChange:F=>G({...R,customer_type:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"RETAIL",children:"Retail"}),e.jsx("option",{value:"BULK_BUYER",children:"Bulk Buyer"}),e.jsx("option",{value:"DISTRIBUTOR",children:"Distributor"}),e.jsx("option",{value:"CATERING",children:"Catering"}),e.jsx("option",{value:"HOTEL",children:"Hotel"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Batch (FIFO) *"}),e.jsxs("select",{required:!0,disabled:!R.farm_id||x,value:R.gari_production_batch_id,onChange:F=>H(F.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${!R.farm_id||x?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`,children:[e.jsx("option",{value:"",children:x?"Loading batches...":R.farm_id?T.length===0?"No inventory available for this farm":"Select batch (oldest first - FIFO)":"Select farm first"}),T.map(F=>e.jsxs("option",{value:F.batch_id,children:[F.batch_code," - ",Number(F.total_available_kg||0).toFixed(2)," kg available",F.processing_date&&` (${new Date(F.processing_date).toLocaleDateString()})`,F.gari_type&&` - ${F.gari_type}`,F.gari_grade&&` ${F.gari_grade}`,F.cost_per_kg_gari&&` - ${Number(F.cost_per_kg_gari).toFixed(2)}/kg`]},F.batch_id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x?"Loading available batches...":"Batches are sorted by production date (FIFO - First In, First Out). Selecting a batch will auto-fill product details."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),e.jsxs("select",{required:!0,disabled:!R.gari_production_batch_id,value:R.gari_type,onChange:F=>G({...R,gari_type:F.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${R.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from selected batch"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),e.jsxs("select",{required:!0,disabled:!R.gari_production_batch_id,value:R.gari_grade,onChange:F=>G({...R,gari_grade:F.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${R.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("option",{value:"FINE",children:"Fine"}),e.jsx("option",{value:"COARSE",children:"Coarse"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from selected batch"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packaging *"}),e.jsxs("select",{required:!0,disabled:!R.gari_production_batch_id,value:R.packaging_type,onChange:F=>ie(F.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${R.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),e.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),e.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),e.jsx("option",{value:"50KG_BAG",children:"50kg Bag"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:R.gari_production_batch_id?"Select packaging size":"Select a batch first"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity (units) *"}),e.jsx("input",{type:"number",step:"1",min:"1",required:!0,disabled:!R.packaging_type,value:R.quantity_units,onChange:F=>U(F.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${R.packaging_type?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,placeholder:"Enter number of units"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Number of ",R.packaging_type?.replace("_"," ").toLowerCase()||"units"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Quantity (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,readOnly:!0,value:R.quantity_kg||0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated from packaging and quantity"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price () *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:R.unit_price,onChange:F=>G({...R,unit_price:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount ()"}),e.jsx("input",{type:"number",step:"0.01",value:R.discount,onChange:F=>G({...R,discount:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ()"}),e.jsx("input",{type:"number",step:"0.01",value:R.cost_per_kg,onChange:F=>G({...R,cost_per_kg:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"From inventory"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method *"}),e.jsxs("select",{required:!0,value:R.payment_method,onChange:F=>G({...R,payment_method:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"TRANSFER",children:"Transfer"}),e.jsx("option",{value:"POS",children:"POS"}),e.jsx("option",{value:"CHEQUE",children:"Cheque"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid ()"}),e.jsx("input",{type:"number",step:"0.01",value:R.amount_paid,onChange:F=>G({...R,amount_paid:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sales Channel"}),e.jsx("input",{type:"text",value:R.sales_channel,onChange:F=>G({...R,sales_channel:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Warehouse, Shop, Distributor"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>q(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Sale"})]})]})]})}),c&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Edit Sale - ",c.sale_code]}),e.jsxs("form",{onSubmit:xe,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("span",{className:"ml-2 font-medium",children:c.customer_name||"Walk-in"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Product:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[c.gari_type,"  ",c.packaging_type?.replace("_"," ")]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Quantity:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[c.quantity_kg," kg"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["",Number(c.final_amount||0).toFixed(2)]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status *"}),e.jsxs("select",{required:!0,value:h.payment_status,onChange:F=>i({...h,payment_status:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"PAID",children:"Paid"}),e.jsx("option",{value:"PARTIAL",children:"Partial"}),e.jsx("option",{value:"OUTSTANDING",children:"Outstanding"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method *"}),e.jsxs("select",{required:!0,value:h.payment_method,onChange:F=>i({...h,payment_method:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"TRANSFER",children:"Transfer"}),e.jsx("option",{value:"POS",children:"POS"}),e.jsx("option",{value:"CHEQUE",children:"Cheque"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid () *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:Number(c.final_amount||0),required:!0,value:h.amount_paid,onChange:F=>X(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Outstanding: ",Number(Number(c.final_amount||0)-Number(h.amount_paid||0)).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount ()"}),e.jsx("input",{type:"number",step:"0.01",value:h.discount,onChange:F=>i({...h,discount:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price ()"}),e.jsx("input",{type:"number",step:"0.01",value:h.unit_price,onChange:F=>i({...h,unit_price:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:h.notes,onChange:F=>i({...h,notes:F.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{p(null),i(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Update Sale"})]})]})]})})]})}function Xp(){const[o,d]=m.useState({batches:[],inventory:[],sales:[],summary:null}),[u,_]=m.useState(!0),[S,C]=m.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});m.useEffect(()=>{T()},[S]);const T=async()=>{try{const x=new URLSearchParams({date_from:S.from,date_to:S.to}),P=new URLSearchParams({date_from:S.from,date_to:S.to,per_page:"1000"}),[f,j,E,q]=await Promise.all([O.get(`/api/v1/gari-production-batches?${x.toString()}`),O.get("/api/v1/gari-inventory?status=IN_STOCK"),O.get(`/api/v1/gari-sales?${P.toString()}`),O.get(`/api/v1/gari-sales/summary?${x.toString()}`)]),c=Array.isArray(f.data.data)?f.data.data:Array.isArray(f.data)?f.data:[],p=Array.isArray(j.data.data)?j.data.data:Array.isArray(j.data)?j.data:[];let h=[];E.data.data&&Array.isArray(E.data.data)?h=E.data.data:Array.isArray(E.data)&&(h=E.data),console.log("Summary API Response:",q.data),console.log("Date Range:",S),console.log("Sales Response:",E.data);const i=q.data.overall||{},R=q.data.data||q.data;console.log("Overall Summary:",i),console.log("Sales array length:",h.length),console.log("Sample sale (first):",h[0]);const G=c.reduce((ae,xe)=>ae+(Number(xe.cassava_quantity_kg)||0),0),w=c.reduce((ae,xe)=>ae+(Number(xe.gari_produced_kg)||0),0),y=G>0?w/G*100:0,b=c.length>0?c.reduce((ae,xe)=>ae+(Number(xe.cost_per_kg_gari)||0),0)/c.length:0,I=i.total_revenue!==void 0?i.total_revenue:h.reduce((ae,xe)=>ae+(Number(xe.final_amount)||0),0),H=i.total_margin!==void 0?i.total_margin:h.reduce((ae,xe)=>ae+(Number(xe.gross_margin)||0),0),k=i.total_kg_sold!==void 0?i.total_kg_sold:h.reduce((ae,xe)=>ae+(Number(xe.quantity_kg)||0),0),ie=i.avg_price_per_kg!==void 0?i.avg_price_per_kg:(()=>{let ae=0,xe=0;return h.forEach(X=>{const re=Number(X.quantity_kg)||0,oe=Number(X.unit_price)||0;re>0&&oe>0&&(ae+=oe*re,xe+=re)}),xe>0?ae/xe:0})();console.log("Calculated KPIs:",{totalRevenue:I,totalMargin:H,totalSalesVolumeKg:k,avgPricePerKg:ie,totalSales:i.total_sales!==void 0?i.total_sales:h.length});const U=p.reduce((ae,xe)=>ae+(Number(xe.quantity_kg)||0),0),M={totalCassava:G,totalGari:w,avgYield:y,avgCostPerKg:b,totalRevenue:I,totalMargin:H,totalStock:U,avgPricePerKg:ie,totalSalesVolumeKg:k,totalBatches:c.length,totalSales:i.total_sales!==void 0?i.total_sales:h.length};console.log("Setting KPIs summary:",M),d({batches:c,inventory:p,sales:h,summary:M})}catch(x){console.error("Error fetching KPI data:",x)}finally{_(!1)}};if(u)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const A=o.summary||{};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Production KPIs"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Key performance indicators for gari production"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:S.from,onChange:x=>C({...S,from:x.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:S.to,onChange:x=>C({...S,to:x.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conversion Yield"}),e.jsx(ot,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(A.avgYield||0).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target: 22-30%"}),A.avgYield&&e.jsx("div",{className:`mt-2 text-xs ${A.avgYield>=22&&A.avgYield<=30?"text-green-600":A.avgYield<22?"text-red-600":"text-yellow-600"}`,children:A.avgYield<22?" Below target":A.avgYield>30?" Above target":" On target"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cost per kg"}),e.jsx(Tt,{className:"h-5 w-5 text-blue-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(A.avgCostPerKg||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Average production cost"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Stock on Hand"}),e.jsx(Ke,{className:"h-5 w-5 text-purple-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(A.totalStock||0).toFixed(2)," kg"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Current inventory"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sales Volume"}),e.jsx(ot,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(A.totalSalesVolumeKg||0).toFixed(2)," kg"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total kg sold in period"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Selling Price"}),e.jsx(Tt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(A.avgPricePerKg||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Per kg"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),e.jsx(Tt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(A.totalMargin||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Number(A.totalRevenue||0)>0?Number(Number(A.totalMargin||0)/Number(A.totalRevenue||1)*100).toFixed(1)+"% margin":"No sales"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(xt,{className:"h-5 w-5 mr-2 text-orange-600"}),"Production Summary"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Batches"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:A.totalBatches||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cassava Processed"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(A.totalCassava||0).toFixed(2)," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Gari Produced"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(A.totalGari||0).toFixed(2)," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Yield"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(A.avgYield||0).toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Tt,{className:"h-5 w-5 mr-2 text-green-600"}),"Sales Summary"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(A.totalRevenue||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Margin"}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["",Number(A.totalMargin||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Price"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(A.avgPricePerKg||0).toFixed(2),"/kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Sales"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:A.totalSales||0})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Production Batches"})}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[o.batches.slice(0,5).map(x=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:x.batch_code}),e.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(x.processing_date).toLocaleDateString()," ",x.cassava_quantity_kg," kg cassava  ",x.gari_produced_kg," kg gari"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-green-600",children:[x.conversion_yield_percent!=null?Number(x.conversion_yield_percent).toFixed(1):"0","% yield"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["",x.cost_per_kg_gari!=null?Number(x.cost_per_kg_gari).toFixed(2):"0","/kg"]})]})]})},x.id)),o.batches.length===0&&e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No production batches in this period"})]})]})]})}function Zp(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState(!0),[T,A]=m.useState(!1),[x,P]=m.useState({farm_id:"",name:"",material_type:"POUCH",size:"",unit:"pieces",opening_balance:0,quantity_purchased:0,quantity_used:0,cost_per_unit:"",notes:""});m.useEffect(()=>{f()},[]);const f=async()=>{try{const[c,p]=await Promise.all([O.get("/api/v1/packaging-materials"),O.get("/api/v1/farms")]);d(c.data.data||c.data),_(p.data.data||p.data)}catch(c){console.error("Error fetching data:",c)}finally{C(!1)}},j=async()=>{try{const c=await O.get("/api/v1/farms");_(c.data.data||c.data)}catch(c){console.error("Error fetching farms:",c)}},E=()=>{A(!0),j()},q=async c=>{c.preventDefault();try{await O.post("/api/v1/packaging-materials",x),A(!1),f()}catch(p){alert("Error creating material: "+(p.response?.data?.message||"Unknown error"))}};return S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Packaging Materials"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track packaging inventory"})]}),e.jsxs("button",{onClick:E,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"Add Material"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(vp,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No packaging materials yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first packaging material to get started"}),e.jsx("button",{onClick:E,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Add Material"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Opening"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purchased"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Used"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Closing"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(c=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[c.name,c.size&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",c.size,")"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.material_type}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[c.opening_balance," ",c.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[c.quantity_purchased," ",c.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[c.quantity_used," ",c.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:[c.closing_balance," ",c.unit]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.total_cost?`${c.total_cost.toFixed(2)}`:"N/A"})]},c.id))})]})})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Packaging Material"}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:x.farm_id,onChange:c=>P({...x,farm_id:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:c=>P({...x,name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1kg Pouch"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{required:!0,value:x.material_type,onChange:c=>P({...x,material_type:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"POUCH",children:"Pouch"}),e.jsx("option",{value:"SACK",children:"Sack"}),e.jsx("option",{value:"LABEL",children:"Label"}),e.jsx("option",{value:"SEALING_ROLL",children:"Sealing Roll"}),e.jsx("option",{value:"CARTON",children:"Carton"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),e.jsx("input",{type:"text",value:x.size,onChange:c=>P({...x,size:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1kg"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opening"}),e.jsx("input",{type:"number",step:"0.01",value:x.opening_balance,onChange:c=>P({...x,opening_balance:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchased"}),e.jsx("input",{type:"number",step:"0.01",value:x.quantity_purchased,onChange:c=>P({...x,quantity_purchased:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Used"}),e.jsx("input",{type:"number",step:"0.01",value:x.quantity_used,onChange:c=>P({...x,quantity_used:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per Unit ()"}),e.jsx("input",{type:"number",step:"0.01",value:x.cost_per_unit,onChange:c=>P({...x,cost_per_unit:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Material"})]})]})]})})]})}function eg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState(!0),[T,A]=m.useState(!1),[x,P]=m.useState({farm_id:"",loss_date:new Date().toISOString().slice(0,10),loss_type:"SPOILAGE",gari_type:"WHITE",packaging_type:"1KG_POUCH",quantity_kg:"",cost_per_kg:"",description:"",notes:""});m.useEffect(()=>{f()},[]);const f=async()=>{try{const[p,h]=await Promise.all([O.get("/api/v1/gari-waste-losses"),O.get("/api/v1/farms")]);d(p.data.data||p.data),_(h.data.data||h.data)}catch(p){console.error("Error fetching data:",p)}finally{C(!1)}},j=async()=>{try{const p=await O.get("/api/v1/farms");_(p.data.data||p.data)}catch(p){console.error("Error fetching farms:",p)}},E=()=>{A(!0),j()},q=async p=>{p.preventDefault();try{await O.post("/api/v1/gari-waste-losses",x),A(!1),f()}catch(h){alert("Error creating loss record: "+(h.response?.data?.message||"Unknown error"))}};if(S)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const c=o.reduce((p,h)=>p+(h.total_loss_value||0),0);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Waste & Losses"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track waste and losses in gari production"})]}),e.jsxs("button",{onClick:E,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"Record Loss"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Loss Value"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["",c.toFixed(2)]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Fp,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No waste/loss records yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Record waste and losses to track efficiency"}),e.jsx("button",{onClick:E,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:"Record Loss"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Loss Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Loss Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(p.loss_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:p.loss_type.replace("_"," ")})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[p.gari_type,"  ",p.packaging_type?.replace("_"," ")]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[p.quantity_kg," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600",children:["",p.total_loss_value?.toFixed(2)||"0.00"]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:p.description||"-"})]},p.id))})]})})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Record Waste/Loss"}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:x.farm_id,onChange:p=>P({...x,farm_id:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(p=>e.jsx("option",{value:p.id,children:p.name},p.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loss Date *"}),e.jsx("input",{type:"date",required:!0,value:x.loss_date,onChange:p=>P({...x,loss_date:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loss Type *"}),e.jsxs("select",{required:!0,value:x.loss_type,onChange:p=>P({...x,loss_type:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"SPOILAGE",children:"Spoilage"}),e.jsx("option",{value:"MOISTURE_DAMAGE",children:"Moisture Damage"}),e.jsx("option",{value:"SPILLAGE",children:"Spillage"}),e.jsx("option",{value:"REJECTED_BATCH",children:"Rejected Batch"}),e.jsx("option",{value:"CUSTOMER_RETURN",children:"Customer Return"}),e.jsx("option",{value:"THEFT",children:"Theft"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type"}),e.jsxs("select",{value:x.gari_type,onChange:p=>P({...x,gari_type:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packaging"}),e.jsxs("select",{value:x.packaging_type,onChange:p=>P({...x,packaging_type:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),e.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),e.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),e.jsx("option",{value:"50KG_BAG",children:"50kg Bag"}),e.jsx("option",{value:"BULK",children:"Bulk"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:x.quantity_kg,onChange:p=>P({...x,quantity_kg:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ()"}),e.jsx("input",{type:"number",step:"0.01",value:x.cost_per_kg,onChange:p=>P({...x,cost_per_kg:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:p=>P({...x,description:p.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Describe the loss..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Record Loss"})]})]})]})})]})}function tg(){const[o,d]=m.useState({total:0,byCrop:{},byCategory:{}}),[u,_]=m.useState(!0),[S,C]=m.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});m.useEffect(()=>{T()},[S]);const T=async()=>{try{_(!0);const[A]=await Promise.all([O.get(`/api/v1/gari-production-batches?date_from=${S.from}&date_to=${S.to}`).catch(()=>({data:{data:[]}}))]),P=(Array.isArray(A.data?.data)?A.data.data:[]).reduce((f,j)=>f+Number(j.total_cost||0),0);d({total:P,byCrop:{gari:P,bellPepper:0,tomatoes:0,habaneros:0},byCategory:{production:P,labor:0,materials:0,other:0}})}catch(A){console.error("Error fetching expenses data:",A)}finally{_(!1)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Expenses"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Expenses across all crops and activities"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:S.from,onChange:A=>C({...S,from:A.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:S.to,onChange:A=>C({...S,to:A.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx(fn,{className:"h-5 w-5 text-red-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(o.total||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Expenses by Crop"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Percentage"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(o.byCrop).map(([A,x])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:A==="bellPepper"?"Bell Pepper":A}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(x||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.total>0?Number(x/o.total*100).toFixed(1)+"%":"0%"})]},A))})]})})]})]})}function sg(){const[o,d]=m.useState([]),[u,_]=m.useState({}),[S,C]=m.useState(!0),[T,A]=m.useState({from:new Date(Date.now()-10080*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});m.useEffect(()=>{x()},[T]);const x=async()=>{try{C(!0),d([]),_({totalHours:0,byStaff:{},byCrop:{}})}catch(P){console.error("Error fetching allocations:",P)}finally{C(!1)}};return S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Staff Allocation Report"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Time allocation across all activities"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:T.from,onChange:P=>A({...T,from:P.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:T.to,onChange:P=>A({...T,to:P.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center text-gray-500",children:[e.jsx(un,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"Staff allocation reporting coming soon"}),e.jsx("p",{className:"text-sm mt-2",children:"This will show time allocation by staff, crop, and activity type"})]})]})}function As({cropName:o,basePath:d}){const u=[{name:"Production",path:`${d}-production`,icon:xt},{name:"Inventory",path:`${d}-inventory`,icon:Ke},{name:"Sales",path:`${d}-sales`,icon:pn},{name:"KPIs",path:`${d}-kpis`,icon:ot}];return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[o," Management"]}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Coming soon - ",o," tracking and management"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map(_=>e.jsxs(bt,{to:`/${_.path}`,className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx(_.icon,{className:"h-8 w-8 text-green-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:_.name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["View ",_.name.toLowerCase()," for ",o]})]},_.path))}),e.jsxs("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Feature Coming Soon"}),e.jsxs("p",{className:"text-yellow-700",children:["The ",o," management module is under development. This will include production tracking, inventory management, sales tracking, and performance KPIs specific to ",o,"."]})]})]})}function rg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState(!0),[x,P]=m.useState(!1),[f,j]=m.useState(null),[E,q]=m.useState(!1),[c,p]=m.useState(""),[h,i]=m.useState(""),[R,G]=m.useState(""),[w,y]=m.useState({site_id:"",name:"",type:"POLYHOUSE",status:"ACTIVE",length:"",width:"",height:"",orientation:"",plant_capacity:"",primary_crop_type:"",cropping_system:"",notes:"",track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1});m.useEffect(()=>{b()},[c,h,R]);const b=async()=>{try{const M=new URLSearchParams;c&&M.append("search",c),h&&M.append("status",h),R&&M.append("type",R);const[ae,xe,X]=await Promise.all([O.get(`/api/v1/greenhouses?${M.toString()}`),O.get("/api/v1/sites?per_page=1000"),O.get("/api/v1/asset-categories?per_page=1000")]),re=ae.data,oe=re?.data||(Array.isArray(re)?re:[]);d(oe);const F=xe.data,Y=F?.data||(Array.isArray(F)?F:[]);_(Y);let Z=[];X.data&&(Array.isArray(X.data)?Z=X.data:X.data.data&&Array.isArray(X.data.data)&&(Z=X.data.data)),C(Z)}catch(M){console.error("Error fetching data:",M),alert("Error loading data: "+(M.response?.data?.message||M.message))}finally{A(!1)}},I=async()=>{try{const M=await O.get("/api/v1/asset-categories?per_page=1000");let ae=[];M.data&&(Array.isArray(M.data)?ae=M.data:M.data.data&&Array.isArray(M.data.data)&&(ae=M.data.data)),C(ae)}catch(M){console.error("Error fetching asset categories:",M),C([])}},H=()=>{P(!0),j(null),q(!1),y({site_id:"",name:"",type:"POLYHOUSE",status:"ACTIVE",length:"",width:"",height:"",orientation:"",plant_capacity:"",primary_crop_type:"",cropping_system:"",notes:"",track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1})},k=M=>{j(M);const ae=!!M.asset_id;q(ae),S.length===0&&I(),y({site_id:M.site?.id||"",name:M.name||"",type:M.type||"POLYHOUSE",status:M.status||(M.is_active?"ACTIVE":"INACTIVE"),length:M.length||"",width:M.width||"",height:M.height||"",orientation:M.orientation||"",plant_capacity:M.plant_capacity||"",primary_crop_type:M.primary_crop_type||"",cropping_system:M.cropping_system||"",notes:M.notes||"",track_as_asset:ae,asset_category_id:M.asset?.asset_category_id||"",asset_description:M.asset?.description||"",asset_acquisition_type:M.asset?.acquisition_type||"",asset_purchase_date:M.asset?.purchase_date?new Date(M.asset.purchase_date).toISOString().slice(0,10):"",asset_purchase_cost:M.asset?.purchase_cost||"",asset_currency:M.asset?.currency||"NGN",asset_supplier_name:M.asset?.supplier_name||"",asset_serial_number:M.asset?.serial_number||"",asset_model:M.asset?.model||"",asset_manufacturer:M.asset?.manufacturer||"",asset_year_of_make:M.asset?.year_of_make||"",asset_warranty_expiry:M.asset?.warranty_expiry?new Date(M.asset.warranty_expiry).toISOString().slice(0,10):"",asset_is_trackable:M.asset?.is_trackable||!1}),P(!0)},ie=async M=>{M.preventDefault();try{const ae={...w};ae.track_as_asset=E,E||Object.keys(ae).forEach(xe=>{xe.startsWith("asset_")&&delete ae[xe]}),f?await O.patch(`/api/v1/greenhouses/${f.id}`,ae):await O.post("/api/v1/greenhouses",ae),P(!1),b()}catch(ae){const xe=ae.response?.data?.message||(ae.response?.data?.errors?JSON.stringify(ae.response.data.errors):"")||ae.message;alert("Error saving greenhouse: "+xe)}},U=async M=>{if(confirm("Are you sure you want to delete this greenhouse?"))try{await O.delete(`/api/v1/greenhouses/${M}`),b()}catch(ae){alert("Error deleting greenhouse: "+(ae.response?.data?.message||ae.message))}};return T?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Greenhouse Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage greenhouses across all sites"})]}),e.jsxs("button",{onClick:H,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Greenhouse"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Lp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:c,onChange:M=>p(M.target.value),placeholder:"Search by name or code...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:h,onChange:M=>i(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"DECOMMISSIONED",children:"Decommissioned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:R,onChange:M=>G(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"TUNNEL",children:"Tunnel"}),e.jsx("option",{value:"GLASSHOUSE",children:"Glasshouse"}),e.jsx("option",{value:"POLYHOUSE",children:"Polyhouse"}),e.jsx("option",{value:"SHADE_HOUSE",children:"Shade House"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{p(""),i(""),G("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear Filters"})})]})}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(xt,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No greenhouses found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first greenhouse to get started"}),e.jsx("button",{onClick:H,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Greenhouse"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area (m)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(M=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:M.greenhouse_code||M.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.site?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.farm?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.type||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${M.status==="ACTIVE"?"bg-green-100 text-green-800":M.status==="MAINTENANCE"?"bg-yellow-100 text-yellow-800":M.status==="DECOMMISSIONED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:M.status||(M.is_active?"ACTIVE":"INACTIVE")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.total_area?Number(M.total_area).toFixed(2):M.size_sqm?Number(M.size_sqm).toFixed(2):"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>k(M),className:"text-green-600 hover:text-green-900 mr-4",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>U(M.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]},M.id))})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:f?"Edit Greenhouse":"Create Greenhouse"}),e.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site *"}),e.jsxs("select",{required:!0,value:w.site_id,onChange:M=>y({...w,site_id:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select site"}),u.map(M=>e.jsxs("option",{value:M.id,children:[M.name," (",M.farm?.name||"No Farm",")"]},M.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Farm will be automatically set from the selected site. Greenhouse code will be auto-generated."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:w.name,onChange:M=>y({...w,name:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{required:!0,value:w.type,onChange:M=>y({...w,type:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"TUNNEL",children:"Tunnel"}),e.jsx("option",{value:"GLASSHOUSE",children:"Glasshouse"}),e.jsx("option",{value:"POLYHOUSE",children:"Polyhouse"}),e.jsx("option",{value:"SHADE_HOUSE",children:"Shade House"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:w.status,onChange:M=>y({...w,status:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"DECOMMISSIONED",children:"Decommissioned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Length (m) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:w.length,onChange:M=>y({...w,length:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width (m) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:w.width,onChange:M=>y({...w,width:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height (m)"}),e.jsx("input",{type:"number",step:"0.01",value:w.height,onChange:M=>y({...w,height:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orientation"}),e.jsxs("select",{value:w.orientation,onChange:M=>y({...w,orientation:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select orientation"}),e.jsx("option",{value:"N_S",children:"North-South"}),e.jsx("option",{value:"E_W",children:"East-West"}),e.jsx("option",{value:"NE_SW",children:"Northeast-Southwest"}),e.jsx("option",{value:"NW_SE",children:"Northwest-Southeast"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plant Capacity"}),e.jsx("input",{type:"number",value:w.plant_capacity,onChange:M=>y({...w,plant_capacity:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Crop Type"}),e.jsx("input",{type:"text",value:w.primary_crop_type,onChange:M=>y({...w,primary_crop_type:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Bell Pepper"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cropping System"}),e.jsxs("select",{value:w.cropping_system,onChange:M=>y({...w,cropping_system:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select system"}),e.jsx("option",{value:"SOIL",children:"Soil"}),e.jsx("option",{value:"COCOPEAT",children:"Cocopeat"}),e.jsx("option",{value:"HYDROPONIC",children:"Hydroponic"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:M=>{q(M.target.checked),y({...w,track_as_asset:M.target.checked})},className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Track as Asset"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check this box to create an asset record for this greenhouse. You can enter asset details below."})]}),E&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:col-span-2 border-t pt-4 mt-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asset Information"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Category"}),e.jsxs("select",{value:w.asset_category_id?String(w.asset_category_id):"",onChange:M=>y({...w,asset_category_id:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select category"}),S.map(M=>e.jsx("option",{value:String(M.id),children:M.name},M.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:w.asset_acquisition_type,onChange:M=>y({...w,asset_acquisition_type:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:w.asset_purchase_date,onChange:M=>y({...w,asset_purchase_date:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:w.asset_purchase_cost,onChange:M=>y({...w,asset_purchase_cost:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",maxLength:3,value:w.asset_currency,onChange:M=>y({...w,asset_currency:M.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"NGN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:w.asset_supplier_name,onChange:M=>y({...w,asset_supplier_name:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:w.asset_serial_number,onChange:M=>y({...w,asset_serial_number:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",value:w.asset_model,onChange:M=>y({...w,asset_model:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:w.asset_manufacturer,onChange:M=>y({...w,asset_manufacturer:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year of Make"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,value:w.asset_year_of_make,onChange:M=>y({...w,asset_year_of_make:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty Expiry"}),e.jsx("input",{type:"date",value:w.asset_warranty_expiry,onChange:M=>y({...w,asset_warranty_expiry:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Description"}),e.jsx("textarea",{value:w.asset_description,onChange:M=>y({...w,asset_description:M.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:w.asset_is_trackable,onChange:M=>y({...w,asset_is_trackable:M.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Is Trackable"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:w.notes,onChange:M=>y({...w,notes:M.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:f?"Update":"Create"})]})]})]})})]})}function ag(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState(!0),[x,P]=m.useState(!1),f=()=>{const R=new Date,G=new Date(R);return G.setMonth(G.getMonth()+6),G.toISOString().slice(0,10)},[j,E]=m.useState({farm_id:"",greenhouse_id:"",start_date:new Date().toISOString().slice(0,10),expected_end_date:f(),expected_yield_kg:"",notes:""});m.useEffect(()=>{q()},[]);const q=async()=>{try{const[R,G]=await Promise.all([O.get("/api/v1/bell-pepper-cycles"),O.get("/api/v1/farms")]),w=R.data?.data||R.data||[],y=G.data?.data||G.data||[];d(Array.isArray(w)?w:[]),_(Array.isArray(y)?y:[])}catch(R){console.error("Error fetching data:",R)}finally{A(!1)}},c=async R=>{if(!R){C([]);return}try{const G=await O.get(`/api/v1/greenhouses?farm_id=${R}`),w=G.data?.data||G.data||[];C(Array.isArray(w)?w:[])}catch(G){console.error("Error fetching greenhouses:",G),C([])}},p=()=>{const R=new Date,G=R.toISOString().slice(0,10),w=new Date(R);w.setMonth(w.getMonth()+6);const y=w.toISOString().slice(0,10);E({farm_id:"",greenhouse_id:"",start_date:G,expected_end_date:y,expected_yield_kg:"",notes:""}),C([]),P(!0)},h=R=>{E({...j,farm_id:R,greenhouse_id:""}),c(R)},i=async R=>{R.preventDefault();try{await O.post("/api/v1/bell-pepper-cycles",j),P(!1),q()}catch(G){alert("Error creating cycle: "+(G.response?.data?.message||"Unknown error"))}};return T?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bell Pepper Production Cycles"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track production cycles and yield per sqm"})]}),e.jsxs("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Cycle"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(xt,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cycles yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production cycle to get started"}),e.jsx("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Cycle"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cycle Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Greenhouse"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Start Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expected Yield"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actual Yield"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Yield/Sqm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Variance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(R=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.jsx(bt,{to:`/bell-pepper-cycles/${R.id}`,className:"text-green-600 hover:text-green-700",children:R.cycle_code})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.greenhouse?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(R.start_date).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(R.expected_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(R.actual_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(R.actual_yield_per_sqm||0).toFixed(2)," kg/sqm"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("span",{className:`${Number(R.yield_variance_percent||0)>=0?"text-green-600":"text-red-600"}`,children:[Number(R.yield_variance_percent||0).toFixed(1),"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${R.status==="COMPLETED"?"bg-green-100 text-green-800":R.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:R.status})})]},R.id))})]})})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Production Cycle"}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:j.farm_id,onChange:R=>h(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(R=>e.jsx("option",{value:R.id,children:R.name},R.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse *"}),e.jsxs("select",{required:!0,disabled:!j.farm_id||S.length===0,value:j.greenhouse_id,onChange:R=>E({...j,greenhouse_id:R.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${!j.farm_id||S.length===0?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`,children:[e.jsx("option",{value:"",children:j.farm_id?S.length===0?"No greenhouses available":"Select greenhouse":"Select farm first"}),S.map(R=>e.jsxs("option",{value:R.id,children:[R.name," (",R.size_sqm," sqm)"]},R.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),e.jsx("input",{type:"date",required:!0,value:j.start_date,onChange:R=>{const G=R.target.value;let w="";if(G){const y=new Date(G),b=new Date(y);b.setMonth(b.getMonth()+6),w=b.toISOString().slice(0,10)}E({...j,start_date:G,expected_end_date:w})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected End Date *"}),e.jsx("input",{type:"date",required:!0,value:j.expected_end_date,onChange:R=>E({...j,expected_end_date:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"6 months from start date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Yield (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:j.expected_yield_kg,onChange:R=>E({...j,expected_yield_kg:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:j.notes,onChange:R=>E({...j,notes:R.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Cycle"})]})]})]})})]})}function ng(){const{id:o}=Ai(),[d,u]=m.useState(null),[_,S]=m.useState([]),[C,T]=m.useState([]),[A,x]=m.useState(!0),[P,f]=m.useState(!1),[j,E]=m.useState(!1),[q,c]=m.useState(null),[p,h]=m.useState({cost_type:"SEEDS",description:"",quantity:"",unit:"",unit_cost:"",total_cost:"",cost_date:new Date().toISOString().slice(0,10),staff_id:"",hours_allocated:"",notes:""}),[i,R]=m.useState({harvest_date:new Date().toISOString().slice(0,10),weight_kg:"",crates_count:"",grade:"MIXED",status:"HARVESTED",notes:""});m.useEffect(()=>{G()},[o]);const G=async()=>{try{const[k,ie,U]=await Promise.all([O.get(`/api/v1/bell-pepper-cycles/${o}`),O.get(`/api/v1/bell-pepper-cycle-costs?bell_pepper_cycle_id=${o}`),O.get(`/api/v1/bell-pepper-harvests?bell_pepper_cycle_id=${o}`)]),M=k.data?.data||k.data,ae=ie.data?.data||ie.data||[],xe=U.data?.data||U.data||[];u(M),S(Array.isArray(ae)?ae:[]),T(Array.isArray(xe)?xe:[])}catch(k){console.error("Error fetching cycle data:",k)}finally{x(!1)}},w=async k=>{k.preventDefault();try{const ie={...p,bell_pepper_cycle_id:o,farm_id:d?.farm_id};q?await O.put(`/api/v1/bell-pepper-cycle-costs/${q.id}`,ie):await O.post("/api/v1/bell-pepper-cycle-costs",ie),f(!1),c(null),G()}catch(ie){alert("Error saving cost: "+(ie.response?.data?.message||"Unknown error"))}},y=async k=>{k.preventDefault();try{const ie={...i,farm_id:d?.farm_id,bell_pepper_cycle_id:o,greenhouse_id:d?.greenhouse_id};await O.post("/api/v1/bell-pepper-harvests",ie),E(!1),G()}catch(ie){alert("Error saving harvest: "+(ie.response?.data?.message||"Unknown error"))}},b=async k=>{if(confirm("Are you sure you want to delete this cost?"))try{await O.delete(`/api/v1/bell-pepper-cycle-costs/${k}`),G()}catch(ie){alert("Error deleting cost: "+(ie.response?.data?.message||"Unknown error"))}};if(A)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});if(!d)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Cycle not found"}),e.jsx(bt,{to:"/bell-pepper-production",className:"text-green-600 hover:text-green-700",children:" Back to Cycles"})]});const I=[{value:"SEEDS",label:"Seeds"},{value:"FERTILIZER_CHEMICALS",label:"Fertilizer/Chemicals"},{value:"FUEL_WATER_PUMPING",label:"Fuel (Water Pumping)"},{value:"LABOUR_DEDICATED",label:"Labour (Dedicated)"},{value:"LABOUR_SHARED",label:"Labour (Shared)"},{value:"SPRAY_GUNS",label:"Spray Guns"},{value:"IRRIGATION_EQUIPMENT",label:"Irrigation Equipment"},{value:"PROTECTIVE_CLOTHING",label:"Protective Clothing"},{value:"GREENHOUSE_AMORTIZATION",label:"Greenhouse Amortization"},{value:"BOREHOLE_AMORTIZATION",label:"Borehole Amortization"},{value:"LOGISTICS",label:"Logistics"},{value:"OTHER",label:"Other"}],H=_.reduce((k,ie)=>k+Number(ie.total_cost||0),0);return C.reduce((k,ie)=>k+Number(ie.weight_kg||0),0),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(bt,{to:"/bell-pepper-production",className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(Di,{className:"h-5 w-5 mr-2"}),"Back to Cycles"]}),d.status!=="COMPLETED"&&e.jsxs("button",{onClick:()=>{alert("Cycle update coming soon")},className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Ae,{className:"h-5 w-5 mr-2"}),"Edit Cycle"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(xt,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:d.cycle_code}),e.jsxs("p",{className:"text-gray-600",children:[d.greenhouse?.name,"  ",d.farm?.name]})]})]}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded ${d.status==="COMPLETED"?"bg-green-100 text-green-800":d.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.status})]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Expected Yield"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Number(d.expected_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Number(d.expected_yield_per_sqm||0).toFixed(2)," kg/sqm"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Actual Yield"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Number(d.actual_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Number(d.actual_yield_per_sqm||0).toFixed(2)," kg/sqm"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Yield Variance"}),e.jsxs("p",{className:`text-lg font-semibold ${Number(d.yield_variance_percent||0)>=0?"text-green-600":"text-red-600"}`,children:[Number(d.yield_variance_percent||0).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Costs"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",Number(H||0).toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Costs"}),e.jsxs("button",{onClick:()=>{c(null),h({cost_type:"SEEDS",description:"",quantity:"",unit:"",unit_cost:"",total_cost:"",cost_date:new Date().toISOString().slice(0,10),staff_id:"",hours_allocated:"",notes:""}),f(!0)},className:"bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 flex items-center text-sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Add Cost"]})]}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[_.map(k=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:I.find(ie=>ie.value===k.cost_type)?.label||k.cost_type}),k.description&&e.jsx("p",{className:"text-sm text-gray-600",children:k.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(k.cost_date).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",Number(k.total_cost||0).toFixed(2)]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>{c(k),h({cost_type:k.cost_type,description:k.description||"",quantity:k.quantity||"",unit:k.unit||"",unit_cost:k.unit_cost||"",total_cost:k.total_cost||"",cost_date:k.cost_date?new Date(k.cost_date).toISOString().slice(0,10):new Date().toISOString().slice(0,10),staff_id:k.staff_id||"",hours_allocated:k.hours_allocated||"",notes:k.notes||""}),f(!0)},className:"text-green-600 hover:text-green-700",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(k.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]})]})},k.id)),_.length===0&&e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No costs recorded yet"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Harvests"}),e.jsxs("button",{onClick:()=>{R({harvest_date:new Date().toISOString().slice(0,10),weight_kg:"",crates_count:"",grade:"MIXED",status:"HARVESTED",notes:""}),E(!0)},className:"bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 flex items-center text-sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Add Harvest"]})]}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[C.map(k=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:k.harvest_code}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Number(k.weight_kg||0).toFixed(2)," kg  ",k.crates_count," crates"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(k.harvest_date).toLocaleDateString(),"  Grade: ",k.grade]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${k.status==="SOLD"?"bg-green-100 text-green-800":k.status==="DELIVERED"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:k.status})]})},k.id)),C.length===0&&e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No harvests recorded yet"})]})]})]}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:q?"Edit Cost":"Add Cost"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Type *"}),e.jsx("select",{required:!0,value:p.cost_type,onChange:k=>h({...p,cost_type:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:I.map(k=>e.jsx("option",{value:k.value,children:k.label},k.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Date *"}),e.jsx("input",{type:"date",required:!0,value:p.cost_date,onChange:k=>h({...p,cost_date:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:p.description,onChange:k=>h({...p,description:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Cost () *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:p.total_cost,onChange:k=>h({...p,total_cost:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),(p.cost_type==="SEEDS"||p.cost_type==="FERTILIZER_CHEMICALS")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",step:"0.01",value:p.quantity,onChange:k=>h({...p,quantity:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("input",{type:"text",value:p.unit,onChange:k=>h({...p,unit:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"kg, litres, etc"})]})]}),(p.cost_type==="LABOUR_DEDICATED"||p.cost_type==="LABOUR_SHARED")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours Allocated"}),e.jsx("input",{type:"number",step:"0.5",value:p.hours_allocated,onChange:k=>h({...p,hours_allocated:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:p.notes,onChange:k=>h({...p,notes:k.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{f(!1),c(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[q?"Update":"Add"," Cost"]})]})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Harvest"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Date *"}),e.jsx("input",{type:"date",required:!0,value:i.harvest_date,onChange:k=>R({...i,harvest_date:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:i.weight_kg,onChange:k=>{const ie=k.target.value;R({...i,weight_kg:ie,crates_count:ie?Math.ceil(ie/9.5):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crates Count"}),e.jsx("input",{type:"number",value:i.crates_count,onChange:k=>R({...i,crates_count:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated (9-10kg per crate)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade *"}),e.jsxs("select",{required:!0,value:i.grade,onChange:k=>R({...i,grade:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"A",children:"Grade A"}),e.jsx("option",{value:"B",children:"Grade B"}),e.jsx("option",{value:"C",children:"Grade C"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:i.status,onChange:k=>R({...i,status:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"HARVESTED",children:"Harvested"}),e.jsx("option",{value:"PACKED",children:"Packed"}),e.jsx("option",{value:"IN_TRANSIT",children:"In Transit"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"}),e.jsx("option",{value:"SOLD",children:"Sold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:i.notes,onChange:k=>R({...i,notes:k.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Harvest"})]})]})]})})]})}function lg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState([]),[x,P]=m.useState([]),[f,j]=m.useState(!0),E=(v,D=2)=>{const V=Number(v);return isNaN(V)||V===null||V===void 0?"0.00":V.toFixed(D)},[q,c]=m.useState(!1),[p,h]=m.useState(!1),[i,R]=m.useState({farm_id:"",bell_pepper_cycle_id:"",greenhouse_id:"",harvest_date:new Date().toISOString().slice(0,10),grade_a_kg:"0",grade_b_kg:"0",grade_c_kg:"0",crates_count:"",notes:""}),[G,w]=m.useState({farm_id:"",cycle_id:"",greenhouse_id:""}),[y,b]=m.useState(null);m.useEffect(()=>{I()},[G]),m.useEffect(()=>{if(y&&y.start_date&&i.harvest_date){const v=re(i.harvest_date,y);console.log("useEffect validation:",v,"showPopup:",!v.valid),h(!v.valid)}else h(!1)},[y,i.harvest_date]);const I=async()=>{try{const v=new URLSearchParams;G.farm_id&&v.append("farm_id",G.farm_id),G.cycle_id&&v.append("bell_pepper_cycle_id",G.cycle_id),G.greenhouse_id&&v.append("greenhouse_id",G.greenhouse_id);const[D,V,ne]=await Promise.all([O.get(`/api/v1/bell-pepper-harvests?${v.toString()}`),O.get("/api/v1/bell-pepper-cycles?per_page=1000"),O.get("/api/v1/farms?per_page=1000")]),$=D.data?.data||(Array.isArray(D.data)?D.data:[]),te=V.data?.data||(Array.isArray(V.data)?V.data:[]),J=ne.data?.data||(Array.isArray(ne.data)?ne.data:[]);d(Array.isArray($)?$:[]),_(Array.isArray(te)?te:[]),A(Array.isArray(J)?J:[])}catch(v){console.error("Error fetching data:",v)}finally{j(!1)}},H=async v=>{if(!v){P([]);return}try{const D=await O.get(`/api/v1/greenhouses?farm_id=${v}`),V=D.data?.data||D.data||[];P(Array.isArray(V)?V:[])}catch(D){console.error("Error fetching greenhouses:",D),P([])}},k=async v=>{if(!v){C([]);return}try{const D=await O.get(`/api/v1/bell-pepper-cycles?greenhouse_id=${v}&status=IN_PROGRESS&per_page=1000`),V=D.data?.data||(Array.isArray(D.data)?D.data:[]),ne=Array.isArray(V)?V:[];if(ne.length===0){const $=await O.get(`/api/v1/bell-pepper-cycles?greenhouse_id=${v}&status=PLANNED&per_page=1000`),te=$.data?.data||(Array.isArray($.data)?$.data:[]);C(Array.isArray(te)?te:[])}else C(ne);console.log("Cycles loaded for greenhouse:",v,ne.length)}catch(D){console.error("Error fetching cycles:",D),C([])}},ie=async()=>{if(R({farm_id:"",bell_pepper_cycle_id:"",greenhouse_id:"",harvest_date:new Date().toISOString().slice(0,10),grade_a_kg:"0",grade_b_kg:"0",grade_c_kg:"0",crates_count:"",notes:""}),P([]),C([]),b(null),h(!1),T.length===0)try{const v=await O.get("/api/v1/farms?per_page=1000"),D=v.data?.data||(Array.isArray(v.data)?v.data:[]);A(Array.isArray(D)?D:[])}catch(v){console.error("Error fetching farms:",v)}c(!0)},U=v=>{R({...i,farm_id:v,greenhouse_id:"",bell_pepper_cycle_id:""}),H(v)},M=v=>{R({...i,greenhouse_id:v,bell_pepper_cycle_id:"",harvest_date:new Date().toISOString().slice(0,10)}),b(null),k(v)},ae=v=>{const D=S.find(V=>String(V.id)===String(v));if(console.log("handleCycleChange called with cycleId:",v,"cycle:",D,"current harvest_date:",i.harvest_date),b(D),R({...i,bell_pepper_cycle_id:v}),D&&D.start_date&&i.harvest_date){const V=re(i.harvest_date,D);console.log("Immediate validation after cycle selection:",{harvestDate:i.harvest_date,cycleStartDate:D.start_date,validation:V,willShowPopup:!V.valid}),V.valid?h(!1):(console.log("Setting popup to true immediately"),h(!0))}else h(!1)},xe=()=>{if(y&&y.start_date){const v=new Date(y.start_date),D=new Date(v);return D.setDate(D.getDate()+70),D.toISOString().slice(0,10)}return null},X=()=>{if(y&&y.expected_end_date){const v=new Date(y.expected_end_date),D=new Date;return v<D?v.toISOString().slice(0,10):D.toISOString().slice(0,10)}return new Date().toISOString().slice(0,10)},re=(v,D=y)=>{if(!D||!D.start_date||!v)return{valid:!0};const V=new Date(D.start_date),ne=new Date(v),$=new Date(V);$.setDate($.getDate()+70);const te=ne.getTime()-V.getTime(),J=Math.floor(te/(1e3*60*60*24));return console.log("Validating date:",{harvestDate:v,cycleStartDate:D.start_date,daysDifference:J,minRequired:70,isValid:J>=70}),J<70?{valid:!1,minDate:$.toISOString().slice(0,10),cycleStartDate:V.toISOString().slice(0,10),daysDifference:J}:{valid:!0}},oe=v=>{console.log("handleHarvestDateChange called with:",v,"selectedCycle:",y),R({...i,harvest_date:v})},F=()=>{if(!y||!y.start_date)return;re(i.harvest_date).valid||h(!0)},Y=()=>{const v=Number(i.grade_a_kg)||0,D=Number(i.grade_b_kg)||0,V=Number(i.grade_c_kg)||0,ne=v+D+V;return isNaN(ne)?0:ne},Z=()=>{const v=Y();return v>0?Math.ceil(v/9.5):0},N=async v=>{if(v.preventDefault(),y&&y.start_date&&!re(i.harvest_date).valid){h(!0);return}try{const D={...i,grade_a_kg:parseFloat(i.grade_a_kg)||0,grade_b_kg:parseFloat(i.grade_b_kg)||0,grade_c_kg:parseFloat(i.grade_c_kg)||0,crates_count:i.crates_count||Z()};await O.post("/api/v1/bell-pepper-harvests",D),c(!1),h(!1),I()}catch(D){alert("Error creating harvest: "+(D.response?.data?.message||"Unknown error"))}};return f?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Bell Pepper Harvests"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Record and track harvests by grade"})]}),e.jsxs("button",{onClick:ie,className:"w-full md:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(_e,{className:"w-5 h-5"}),"Record Harvest"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm"}),e.jsxs("select",{value:G.farm_id,onChange:v=>w({...G,farm_id:v.target.value,greenhouse_id:"",cycle_id:""}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Farms"}),T.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse"}),e.jsxs("select",{value:G.greenhouse_id,onChange:v=>w({...G,greenhouse_id:v.target.value,cycle_id:""}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:!G.farm_id,children:[e.jsx("option",{value:"",children:"All Greenhouses"}),x.filter(v=>!G.farm_id||v.farm_id==G.farm_id).map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cycle"}),e.jsxs("select",{value:G.cycle_id,onChange:v=>w({...G,cycle_id:v.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:!G.greenhouse_id,children:[e.jsx("option",{value:"",children:"All Cycles"}),u.filter(v=>!G.greenhouse_id||v.greenhouse_id==G.greenhouse_id).map(v=>e.jsx("option",{value:v.id,children:v.cycle_code},v.id))]})]})]})}),e.jsx("div",{className:"space-y-4",children:o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx(Ke,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No harvests found. Record your first harvest!"})]}):o.map(v=>{const D=Number(v.grade_a_kg)||0,V=Number(v.grade_b_kg)||0,ne=Number(v.grade_c_kg)||0,$=D+V+ne||0;return e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v.harvest_code}),v.harvest_number&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:["Harvest #",v.harvest_number]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(yi,{className:"w-4 h-4"}),new Date(v.harvest_date).toLocaleDateString()]}),v.greenhouse&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ot,{className:"w-4 h-4"}),v.greenhouse.name]}),v.harvester&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(nu,{className:"w-4 h-4"}),v.harvester.name]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[E($)," kg"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[v.crates_count||0," crates"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-green-700 mb-1",children:"Grade A"}),e.jsxs("div",{className:"text-lg font-semibold text-green-900",children:[E(D)," kg"]})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-yellow-700 mb-1",children:"Grade B"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-900",children:[E(V)," kg"]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-orange-700 mb-1",children:"Grade C"}),e.jsxs("div",{className:"text-lg font-semibold text-orange-900",children:[E(ne)," kg"]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-2 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${v.status==="HARVESTED"?"bg-blue-100 text-blue-800":v.status==="PACKED"?"bg-purple-100 text-purple-800":v.status==="SOLD"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:v.status})}),v.cycle&&e.jsx(bt,{to:`/bell-pepper-cycles/${v.cycle.id}`,className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"View Cycle "})]})]},v.id)})}),p&&y&&y.start_date&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[100]",onClick:v=>{v.target,v.currentTarget},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",onClick:v=>v.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-red-600",children:"Invalid Harvest Date"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"The selected harvest date is less than 70 days from the cycle start date. This is not possible."}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Cycle Start Date:"})," ",new Date(y.start_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Selected Harvest Date:"})," ",new Date(i.harvest_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Minimum Harvest Date:"})," ",new Date(new Date(y.start_date).setDate(new Date(y.start_date).getDate()+70)).toLocaleDateString()]})]})}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Please select a date that is at least 70 days after the cycle start date."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1);const v=new Date(y.start_date),D=new Date(v);D.setDate(D.getDate()+70),R({...i,harvest_date:D.toISOString().slice(0,10)})},className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Use Minimum Date"}),e.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Choose Different Date"})]})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Record New Harvest"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Enter harvest details by grade"})]}),e.jsxs("form",{onSubmit:N,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{value:i.farm_id,onChange:v=>U(v.target.value),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select Farm"}),T.length===0?e.jsx("option",{value:"",disabled:!0,children:"Loading farms..."}):T.map(v=>e.jsx("option",{value:String(v.id),children:v.name},v.id))]}),T.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No farms available. Please create a farm first."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse *"}),e.jsxs("select",{value:i.greenhouse_id,onChange:v=>M(v.target.value),required:!0,disabled:!i.farm_id,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Select Greenhouse"}),x.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Cycle *"}),e.jsxs("select",{value:i.bell_pepper_cycle_id,onChange:v=>ae(v.target.value),required:!0,disabled:!i.greenhouse_id||S.length===0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Select Cycle"}),S.length===0&&i.greenhouse_id?e.jsx("option",{value:"",disabled:!0,children:"No active cycles found for this greenhouse"}):S.map(v=>e.jsxs("option",{value:String(v.id),children:[v.cycle_code," ",v.start_date?`(${new Date(v.start_date).toLocaleDateString()})`:""]},v.id))]}),i.greenhouse_id&&S.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No in-progress or planned cycles found. Please create a production cycle first."}),y&&y.start_date&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Cycle started: ",new Date(y.start_date).toLocaleDateString(),". First harvest can be recorded from ",new Date(new Date(y.start_date).setDate(new Date(y.start_date).getDate()+70)).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Date *"}),e.jsx("input",{type:"date",value:i.harvest_date,onChange:v=>{const D=v.target.value;console.log("Date changed to:",D,"Selected cycle:",y),oe(D)},onBlur:F,onInput:v=>{const D=v.target.value;if(console.log("Date input event:",D),D&&y&&y.start_date){const V=re(D,y);console.log("Validation result:",V),V.valid?h(!1):(console.log("Showing validation popup"),h(!0))}},min:xe()||void 0,max:X(),required:!0,className:`w-full border rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ${p?"border-red-500 bg-red-50":"border-gray-300"}`}),y&&y.start_date&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Harvest date must be at least 70 days after cycle start (",new Date(y.start_date).toLocaleDateString(),")"]}),!y&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please select a production cycle first to set date constraints"})]}),e.jsxs("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Harvest by Grade (kg)"}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Grade A (Premium) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.grade_a_kg,onChange:v=>R({...i,grade_a_kg:v.target.value}),required:!0,className:"w-full border border-green-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-2",children:"Grade B (Standard) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.grade_b_kg,onChange:v=>R({...i,grade_b_kg:v.target.value}),required:!0,className:"w-full border border-yellow-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Grade C (Lower) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.grade_c_kg,onChange:v=>R({...i,grade_c_kg:v.target.value}),required:!0,className:"w-full border border-orange-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total Weight"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[E(Y())," kg"]}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Estimated crates: ",Z()]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crates Count"}),e.jsx("input",{type:"number",min:"0",value:i.crates_count,onChange:v=>R({...i,crates_count:v.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:`Auto: ${Z()}`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to auto-calculate (9.5kg per crate)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:i.notes,onChange:v=>R({...i,notes:v.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Additional notes about this harvest..."})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Record Harvest"})]})]})]})})]})}function ig(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState([]),[x,P]=m.useState(!0),[f,j]=m.useState(!1),[E,q]=m.useState(null),[c,p]=m.useState(!1),[h,i]=m.useState({farm_id:"",name:"",code:"",type:"",description:"",address:"",latitude:"",longitude:"",total_area:"",area_unit:"hectares",notes:"",is_active:!0,track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1});m.useEffect(()=>{R(),G(),w(),y()},[]);const R=async()=>{P(!0);try{const U=await O.get("/api/v1/sites?per_page=1000"),M=U.data?.data||(Array.isArray(U.data)?U.data:[]);d(Array.isArray(M)?M:[])}catch(U){console.error("Error fetching sites:",U),d([])}finally{P(!1)}},G=async()=>{try{const U=await O.get("/api/v1/farms?per_page=1000");console.log("Farms API full response:",U),console.log("Farms API response.data:",U.data);let M=[];U.data?.data&&Array.isArray(U.data.data)?M=U.data.data:Array.isArray(U.data)?M=U.data:U.data&&typeof U.data=="object"&&(Object.keys(U.data).includes("data")&&Array.isArray(U.data.data)?M=U.data.data:M=Object.values(U.data).filter(xe=>xe&&typeof xe=="object"&&xe.id)),console.log("Farms parsed:",M.length,M),_(M)}catch(U){console.error("Error fetching farms:",U),console.error("Error response:",U.response),_([])}},w=async()=>{try{const U=await O.get("/api/v1/site-types?per_page=1000&is_active=true");let M=[];U.data&&(Array.isArray(U.data)?M=U.data:U.data.data&&Array.isArray(U.data.data)&&(M=U.data.data)),C(M)}catch(U){console.error("Error fetching site types:",U),C([])}},y=async()=>{try{const U=await O.get("/api/v1/asset-categories?per_page=1000");let M=[];U.data&&(Array.isArray(U.data)?M=U.data:U.data.data&&Array.isArray(U.data.data)&&(M=U.data.data)),A(M)}catch(U){console.error("Error fetching asset categories:",U),A([])}},b=()=>{q(null),p(!1),S.length===0&&w();const U=S.length>0?S[0].code:"";i({farm_id:"",name:"",code:"",type:U,description:"",address:"",latitude:"",longitude:"",total_area:"",area_unit:"hectares",notes:"",is_active:!0,track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1}),j(!0)},I=U=>{q(U);const M=!!U.asset_id;p(M),T.length===0&&y(),i({farm_id:U.farm_id||"",name:U.name||"",code:U.code||"",type:U.type||"farmland",description:U.description||"",address:U.address||"",latitude:U.latitude||"",longitude:U.longitude||"",total_area:U.total_area||"",area_unit:U.area_unit||"hectares",notes:U.notes||"",is_active:U.is_active!==void 0?U.is_active:!0,track_as_asset:M,asset_category_id:U.asset?.asset_category_id||"",asset_description:U.asset?.description||"",asset_acquisition_type:U.asset?.acquisition_type||"",asset_purchase_date:U.asset?.purchase_date?new Date(U.asset.purchase_date).toISOString().slice(0,10):"",asset_purchase_cost:U.asset?.purchase_cost||"",asset_currency:U.asset?.currency||"NGN",asset_supplier_name:U.asset?.supplier_name||"",asset_serial_number:U.asset?.serial_number||"",asset_model:U.asset?.model||"",asset_manufacturer:U.asset?.manufacturer||"",asset_year_of_make:U.asset?.year_of_make||"",asset_warranty_expiry:U.asset?.warranty_expiry?new Date(U.asset.warranty_expiry).toISOString().slice(0,10):"",asset_is_trackable:U.asset?.is_trackable||!1}),j(!0)},H=async U=>{U.preventDefault();try{const M={...h};M.track_as_asset=c,c||Object.keys(M).forEach(ae=>{ae.startsWith("asset_")&&delete M[ae]}),E?await O.put(`/api/v1/sites/${E.id}`,M):await O.post("/api/v1/sites",M),j(!1),R()}catch(M){console.error("Error saving site:",M),alert(M.response?.data?.message||"Error saving site")}},k=async U=>{if(confirm("Are you sure you want to delete this site?"))try{await O.delete(`/api/v1/sites/${U}`),R()}catch(M){console.error("Error deleting site:",M),alert(M.response?.data?.message||"Error deleting site")}},ie=U=>{const M=S.find(ae=>ae.code===U);return M?M.name:U};return x?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Sites"}),e.jsxs("button",{onClick:b,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Create Site"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No sites found"})}):o.map(U=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:U.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ie(U.type)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:U.farm?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${U.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>I(U),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>k(U.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},U.id))})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:E?"Edit Site":"Create Site"}),e.jsxs("form",{onSubmit:H,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm"}),e.jsxs("select",{value:h.farm_id,onChange:U=>i({...h,farm_id:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(U=>e.jsx("option",{value:U.id,children:U.name},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{required:!0,value:h.type,onChange:U=>i({...h,type:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select type"}),S.filter(U=>U.is_active).map(U=>e.jsx("option",{value:U.code,children:U.name},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:h.name,onChange:U=>i({...h,name:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:h.code,onChange:U=>i({...h,code:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if not provided"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("textarea",{value:h.address,onChange:U=>i({...h,address:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),e.jsx("input",{type:"number",step:"any",value:h.latitude,onChange:U=>i({...h,latitude:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),e.jsx("input",{type:"number",step:"any",value:h.longitude,onChange:U=>i({...h,longitude:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Area"}),e.jsx("input",{type:"number",step:"0.01",value:h.total_area,onChange:U=>i({...h,total_area:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area Unit"}),e.jsxs("select",{value:h.area_unit,onChange:U=>i({...h,area_unit:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"hectares",children:"Hectares"}),e.jsx("option",{value:"acres",children:"Acres"}),e.jsx("option",{value:"sqm",children:"Sqm"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:h.description,onChange:U=>i({...h,description:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:U=>{p(U.target.checked),i({...h,track_as_asset:U.target.checked})},className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Track as Asset"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check this box to create an asset record for this site. You can enter asset details below."})]}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-2 border-t pt-4 mt-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asset Information"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Category"}),e.jsxs("select",{value:h.asset_category_id?String(h.asset_category_id):"",onChange:U=>i({...h,asset_category_id:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select category"}),T.map(U=>e.jsx("option",{value:String(U.id),children:U.name},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:h.asset_acquisition_type,onChange:U=>i({...h,asset_acquisition_type:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:h.asset_purchase_date,onChange:U=>i({...h,asset_purchase_date:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:h.asset_purchase_cost,onChange:U=>i({...h,asset_purchase_cost:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",maxLength:3,value:h.asset_currency,onChange:U=>i({...h,asset_currency:U.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500",placeholder:"NGN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:h.asset_supplier_name,onChange:U=>i({...h,asset_supplier_name:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:h.asset_serial_number,onChange:U=>i({...h,asset_serial_number:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",value:h.asset_model,onChange:U=>i({...h,asset_model:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:h.asset_manufacturer,onChange:U=>i({...h,asset_manufacturer:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year of Make"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,value:h.asset_year_of_make,onChange:U=>i({...h,asset_year_of_make:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty Expiry"}),e.jsx("input",{type:"date",value:h.asset_warranty_expiry,onChange:U=>i({...h,asset_warranty_expiry:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Description"}),e.jsx("textarea",{value:h.asset_description,onChange:U=>i({...h,asset_description:U.target.value}),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h.asset_is_trackable,onChange:U=>i({...h,asset_is_trackable:U.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Is Trackable"})]})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:h.notes,onChange:U=>i({...h,notes:U.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h.is_active,onChange:U=>i({...h,is_active:U.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:E?"Update":"Create"})]})]})]})})]})}function og(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState(!0),[x,P]=m.useState(!1),[f,j]=m.useState(null),[E,q]=m.useState({site_id:"",crop_id:"",name:"",code:"",description:"",area:"",area_unit:"hectares",produce_type:"",soil_type:"",is_active:!0});m.useEffect(()=>{c(),p(),h()},[]);const c=async()=>{A(!0);try{const y=await O.get("/api/v1/farm-zones?per_page=1000"),b=y.data?.data||(Array.isArray(y.data)?y.data:[]);d(Array.isArray(b)?b:[])}catch(y){console.error("Error fetching farm zones:",y),d([])}finally{A(!1)}},p=async()=>{try{const y=await O.get("/api/v1/sites?type=farmland&per_page=1000"),b=y.data?.data||(Array.isArray(y.data)?y.data:[]);_(Array.isArray(b)?b:[])}catch(y){console.error("Error fetching sites:",y)}},h=async()=>{try{const y=await O.get("/api/v1/crops?per_page=1000"),b=y.data?.data||(Array.isArray(y.data)?y.data:[]);C(Array.isArray(b)?b:[])}catch(y){console.error("Error fetching crops:",y)}},i=()=>{j(null),q({site_id:"",crop_id:"",name:"",code:"",description:"",area:"",area_unit:"hectares",produce_type:"",soil_type:"",is_active:!0}),P(!0)},R=y=>{j(y),q({site_id:y.site_id||"",crop_id:y.crop_id||"",name:y.name||"",code:y.code||"",description:y.description||"",area:y.area||"",area_unit:y.area_unit||"hectares",produce_type:y.produce_type||"",soil_type:y.soil_type||"",is_active:y.is_active!==void 0?y.is_active:!0}),P(!0)},G=async y=>{y.preventDefault();try{f?await O.put(`/api/v1/farm-zones/${f.id}`,E):await O.post("/api/v1/farm-zones",E),P(!1),c()}catch(b){console.error("Error saving farm zone:",b),alert(b.response?.data?.message||"Error saving farm zone")}},w=async y=>{if(confirm("Are you sure you want to delete this farm zone?"))try{await O.delete(`/api/v1/farm-zones/${y}`),c()}catch(b){console.error("Error deleting farm zone:",b),alert(b.response?.data?.message||"Error deleting farm zone")}};return T?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Farm Zones"}),e.jsxs("button",{onClick:i,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Create Farm Zone"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produce Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No farm zones found"})}):o.map(y=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:y.code||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:y.site?.name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:y.produce_type||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:y.area?`${y.area} ${y.area_unit}`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${y.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>R(y),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>w(y.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},y.id))})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:f?"Edit Farm Zone":"Create Farm Zone"}),e.jsxs("form",{onSubmit:G,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site (Farmland) *"}),e.jsxs("select",{required:!0,value:E.site_id,onChange:y=>q({...E,site_id:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Site"}),u.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crop"}),e.jsxs("select",{value:E.crop_id,onChange:y=>q({...E,crop_id:y.target.value||null}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Crop"}),S.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:E.name,onChange:y=>q({...E,name:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:E.code,onChange:y=>q({...E,code:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Produce Type"}),e.jsx("input",{type:"text",value:E.produce_type,onChange:y=>q({...E,produce_type:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., tomatoes, corn"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soil Type"}),e.jsx("input",{type:"text",value:E.soil_type,onChange:y=>q({...E,soil_type:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area"}),e.jsx("input",{type:"number",step:"0.01",value:E.area,onChange:y=>q({...E,area:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area Unit"}),e.jsxs("select",{value:E.area_unit,onChange:y=>q({...E,area_unit:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"hectares",children:"Hectares"}),e.jsx("option",{value:"acres",children:"Acres"}),e.jsx("option",{value:"sqm",children:"Sqm"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:E.description,onChange:y=>q({...E,description:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:E.is_active,onChange:y=>q({...E,is_active:y.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:f?"Update":"Create"})]})]})]})})]})}function cg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState(!0),[x,P]=m.useState(!1),[f,j]=m.useState(null),[E,q]=m.useState(!1),[c,p]=m.useState({site_id:"",name:"",code:"",production_type:"gari",description:"",area_sqm:"",established_date:"",is_active:!0,track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1});m.useEffect(()=>{h(),i(),R()},[]);const h=async()=>{A(!0);try{const I=await O.get("/api/v1/factories?per_page=1000"),H=I.data?.data||(Array.isArray(I.data)?I.data:[]);d(Array.isArray(H)?H:[])}catch(I){console.error("Error fetching factories:",I),d([])}finally{A(!1)}},i=async()=>{try{const I=await O.get("/api/v1/sites?type=factory&per_page=1000"),H=I.data?.data||(Array.isArray(I.data)?I.data:[]);_(Array.isArray(H)?H:[])}catch(I){console.error("Error fetching sites:",I)}},R=async()=>{try{const I=await O.get("/api/v1/asset-categories?per_page=1000");let H=[];I.data&&(Array.isArray(I.data)?H=I.data:I.data.data&&Array.isArray(I.data.data)&&(H=I.data.data)),C(H)}catch(I){console.error("Error fetching asset categories:",I)}},G=()=>{j(null),q(!1),p({site_id:"",name:"",code:"",production_type:"gari",description:"",area_sqm:"",established_date:"",is_active:!0,track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1}),P(!0)},w=I=>{j(I);const H=!!I.asset_id;q(H),S.length===0&&R(),p({site_id:I.site_id||"",name:I.name||"",code:I.code||"",production_type:I.production_type||"gari",description:I.description||"",area_sqm:I.area_sqm||"",established_date:I.established_date||"",is_active:I.is_active!==void 0?I.is_active:!0,track_as_asset:H,asset_category_id:I.asset?.asset_category_id||"",asset_description:I.asset?.description||"",asset_acquisition_type:I.asset?.acquisition_type||"",asset_purchase_date:I.asset?.purchase_date?new Date(I.asset.purchase_date).toISOString().slice(0,10):"",asset_purchase_cost:I.asset?.purchase_cost||"",asset_currency:I.asset?.currency||"NGN",asset_supplier_name:I.asset?.supplier_name||"",asset_serial_number:I.asset?.serial_number||"",asset_model:I.asset?.model||"",asset_manufacturer:I.asset?.manufacturer||"",asset_year_of_make:I.asset?.year_of_make||"",asset_warranty_expiry:I.asset?.warranty_expiry?new Date(I.asset.warranty_expiry).toISOString().slice(0,10):"",asset_is_trackable:I.asset?.is_trackable||!1}),P(!0)},y=async I=>{I.preventDefault();try{const H={...c};H.track_as_asset=E,E||Object.keys(H).forEach(k=>{k.startsWith("asset_")&&delete H[k]}),f?await O.put(`/api/v1/factories/${f.id}`,H):await O.post("/api/v1/factories",H),P(!1),h()}catch(H){console.error("Error saving factory:",H);const k=H.response?.data?.message||(H.response?.data?.errors?JSON.stringify(H.response.data.errors):"")||H.message;alert("Error saving factory: "+k)}},b=async I=>{if(confirm("Are you sure you want to delete this factory?"))try{await O.delete(`/api/v1/factories/${I}`),h()}catch(H){console.error("Error deleting factory:",H),alert(H.response?.data?.message||"Error deleting factory")}};return T?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Factories"}),e.jsxs("button",{onClick:G,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Create Factory"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Production Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No factories found"})}):o.map(I=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:I.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:I.site?.name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 capitalize",children:I.production_type||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${I.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>w(I),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>b(I.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},I.id))})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:f?"Edit Factory":"Create Factory"}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site (Factory Type) *"}),e.jsxs("select",{required:!0,value:c.site_id,onChange:I=>p({...c,site_id:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Site"}),u.map(I=>e.jsx("option",{value:I.id,children:I.name},I.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Type *"}),e.jsxs("select",{required:!0,value:c.production_type,onChange:I=>p({...c,production_type:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"gari",children:"Gari"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:c.name,onChange:I=>p({...c,name:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:c.code,onChange:I=>p({...c,code:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area (sqm)"}),e.jsx("input",{type:"number",step:"0.01",value:c.area_sqm,onChange:I=>p({...c,area_sqm:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Established Date"}),e.jsx("input",{type:"date",value:c.established_date,onChange:I=>p({...c,established_date:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:I=>p({...c,description:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.is_active,onChange:I=>p({...c,is_active:I.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:I=>{q(I.target.checked),p({...c,track_as_asset:I.target.checked})},className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Track as Asset"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check this box to create an asset record for this factory. You can enter asset details below."})]}),E&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asset Information"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Category"}),e.jsxs("select",{value:c.asset_category_id?String(c.asset_category_id):"",onChange:I=>p({...c,asset_category_id:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select category"}),S.map(I=>e.jsx("option",{value:String(I.id),children:I.name},I.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:c.asset_acquisition_type,onChange:I=>p({...c,asset_acquisition_type:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:c.asset_purchase_date,onChange:I=>p({...c,asset_purchase_date:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:c.asset_purchase_cost,onChange:I=>p({...c,asset_purchase_cost:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",maxLength:3,value:c.asset_currency,onChange:I=>p({...c,asset_currency:I.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"NGN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:c.asset_supplier_name,onChange:I=>p({...c,asset_supplier_name:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:c.asset_serial_number,onChange:I=>p({...c,asset_serial_number:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",value:c.asset_model,onChange:I=>p({...c,asset_model:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:c.asset_manufacturer,onChange:I=>p({...c,asset_manufacturer:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year of Make"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,value:c.asset_year_of_make,onChange:I=>p({...c,asset_year_of_make:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty Expiry"}),e.jsx("input",{type:"date",value:c.asset_warranty_expiry,onChange:I=>p({...c,asset_warranty_expiry:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Description"}),e.jsx("textarea",{value:c.asset_description,onChange:I=>p({...c,asset_description:I.target.value}),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:c.asset_is_trackable,onChange:I=>p({...c,asset_is_trackable:I.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Is Trackable"})]})})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:f?"Update":"Create"})]})]})]})})]})}function dg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState(!0),[T,A]=m.useState(!1),[x,P]=m.useState(null),[f,j]=m.useState({location_id:"",name:"",code:"",description:"",notes:"",is_active:!0});m.useEffect(()=>{E()},[]);const E=async()=>{C(!0);try{const[i,R]=await Promise.all([O.get("/api/v1/admin-zones?per_page=1000"),O.get("/api/v1/locations?per_page=1000&is_active=1")]),G=i.data?.data||(Array.isArray(i.data)?i.data:[]),w=R.data?.data||(Array.isArray(R.data)?R.data:[]);d(Array.isArray(G)?G:[]),_(Array.isArray(w)?w:[])}catch(i){console.error("Error fetching data:",i),d([]),_([])}finally{C(!1)}},q=()=>{P(null),j({location_id:"",name:"",code:"",description:"",notes:"",is_active:!0}),A(!0)},c=i=>{P(i),j({location_id:i.location_id||"",name:i.name||"",code:i.code||"",description:i.description||"",notes:i.notes||"",is_active:i.is_active!==void 0?i.is_active:!0}),A(!0)},p=async i=>{i.preventDefault();try{x?await O.put(`/api/v1/admin-zones/${x.id}`,f):await O.post("/api/v1/admin-zones",f),A(!1),E()}catch(R){console.error("Error saving zone:",R),alert(R.response?.data?.message||"Error saving zone")}},h=async i=>{if(confirm("Are you sure you want to delete this zone?"))try{await O.delete(`/api/v1/admin-zones/${i}`),E()}catch(R){console.error("Error deleting zone:",R),alert(R.response?.data?.message||"Error deleting zone")}};return S?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Zones"}),e.jsxs("button",{onClick:q,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Create Zone"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No zones found"})}):o.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:i.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:i.location?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${i.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>c(i),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>h(i.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},i.id))})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:x?"Edit Zone":"Create Zone"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),e.jsxs("select",{required:!0,value:f.location_id,onChange:i=>j({...f,location_id:i.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Location"}),u.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:f.name,onChange:i=>j({...f,name:i.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:f.code,onChange:i=>j({...f,code:i.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if empty"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:f.description,onChange:i=>j({...f,description:i.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:f.notes,onChange:i=>j({...f,notes:i.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:f.is_active,onChange:i=>j({...f,is_active:i.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:x?"Update":"Create"})]})]})]})})]})}function ug(){const[o,d]=m.useState([]),[u,_]=m.useState({}),[S,C]=m.useState(!0),[T,A]=m.useState(!1),[x,P]=m.useState(null),[f,j]=m.useState({name:"",permissions:[]});m.useEffect(()=>{E()},[]);const E=async()=>{try{const[w,y]=await Promise.all([O.get("/api/v1/roles"),O.get("/api/v1/roles/menu-permissions")]);d(w.data?.data||w.data||[]),_(y.data?.data||{})}catch(w){console.error("Error fetching data:",w),alert("Error loading roles: "+(w.response?.data?.message||"Unknown error"))}finally{C(!1)}},q=(w=null)=>{if(w)if(P(w),w.name==="ADMIN"){const y=Object.values(u).flatMap(b=>Object.values(b)).flatMap(b=>b.map(I=>[I.menu_key,I.submenu_key,I.permission_type].filter(Boolean).join(".")));j({name:w.name,permissions:y})}else j({name:w.name,permissions:w.permissions?.map(y=>y.name)||[]});else P(null),j({name:"",permissions:[]});A(!0)},c=()=>{A(!1),P(null),j({name:"",permissions:[]})},p=w=>{f.name!=="ADMIN"&&j(y=>({...y,permissions:y.permissions.includes(w)?y.permissions.filter(b=>b!==w):[...y.permissions,w]}))},h=(w,y,b)=>{const I=[w,y,b].filter(Boolean).join(".");p(I)},i=(w,y,b)=>{const I=[w,y,b].filter(Boolean).join(".");return f.permissions.includes(I)},R=async w=>{w.preventDefault();try{const y={...f};if(y.name==="ADMIN"){const b=Object.values(u).flatMap(I=>Object.values(I)).flatMap(I=>I.map(H=>[H.menu_key,H.submenu_key,H.permission_type].filter(Boolean).join(".")));y.permissions=b}x?await O.put(`/api/v1/roles/${x.id}`,y):await O.post("/api/v1/roles",y),c(),E()}catch(y){alert("Error saving role: "+(y.response?.data?.message||"Unknown error"))}},G=async(w,y)=>{if(confirm(`Are you sure you want to delete the role "${y}"?`))try{await O.delete(`/api/v1/roles/${w}`),E()}catch(b){alert("Error deleting role: "+(b.response?.data?.message||"Unknown error"))}};return S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Roles & Permissions"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage user roles and their access permissions"})]}),e.jsxs("button",{onClick:()=>q(),className:"w-full md:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(_e,{className:"w-5 h-5"}),"Create Role"]})]}),e.jsx("div",{className:"space-y-4",children:o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx(bi,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No roles found. Create your first role!"})]}):o.map(w=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(bi,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:w.name})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[w.permissions?.length||0," permission(s) assigned"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>q(w),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Edit"]}),w.name!=="ADMIN"&&e.jsxs("button",{onClick:()=>G(w.id,w.name),className:"flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Delete"]})]})]}),w.permissions&&w.permissions.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Permissions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.permissions.map(y=>e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded",children:y.name},y.id))})]})]},w.id))}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:x?"Edit Role":"Create New Role"})}),e.jsxs("form",{onSubmit:R,className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Name *"}),e.jsx("input",{type:"text",value:f.name,onChange:w=>{const y=w.target.value;if(j({...f,name:y}),y==="ADMIN"){const b=Object.values(u).flatMap(I=>Object.values(I)).flatMap(I=>I.map(H=>[H.menu_key,H.submenu_key,H.permission_type].filter(Boolean).join(".")));j(I=>({...I,name:y,permissions:b}))}},required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Manager, Worker, Viewer"}),f.name==="ADMIN"&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:" ADMIN role automatically has all permissions and cannot be modified."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permissions"}),f.name==="ADMIN"&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," The ADMIN role has all permissions automatically. All permissions are selected and cannot be deselected."]})}),e.jsx("div",{className:"space-y-6 max-h-96 overflow-y-auto",children:Object.entries(u).map(([w,y])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3 capitalize",children:w.replace("-"," ")}),Object.entries(y).map(([b,I])=>e.jsxs("div",{className:"ml-4 mb-4 last:mb-0",children:[b!=="main"&&e.jsx("h5",{className:"font-medium text-gray-700 mb-2 capitalize",children:b.replace("-"," ")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(H=>e.jsxs("button",{type:"button",onClick:()=>h(H.menu_key,H.submenu_key,H.permission_type),disabled:f.name==="ADMIN",className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${i(H.menu_key,H.submenu_key,H.permission_type)?"bg-green-100 border-green-500 text-green-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"} ${f.name==="ADMIN"?"opacity-75 cursor-not-allowed":"cursor-pointer"}`,children:[i(H.menu_key,H.submenu_key,H.permission_type)?e.jsx(Np,{className:"w-4 h-4"}):e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm capitalize",children:H.permission_type})]},H.id))})]},b))]},w))})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:c,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:x?"Update Role":"Create Role"})]})]})]})})]})}function mg(){const[o,d]=m.useState([]),[u,_]=m.useState(!0),[S,C]=m.useState(!1),[T,A]=m.useState(null),[x,P]=m.useState({name:"",category:"",default_maturity_days:"",description:""}),f=["VEGETABLE","FRUIT","GRAIN","LEGUME","ROOT","HERB","SPICE","OTHER"];m.useEffect(()=>{j()},[]);const j=async()=>{_(!0);try{const h=await O.get("/api/v1/crops?per_page=1000"),i=h.data?.data||(Array.isArray(h.data)?h.data:[]);d(Array.isArray(i)?i:[])}catch(h){console.error("Error fetching crops:",h),d([])}finally{_(!1)}},E=()=>{A(null),P({name:"",category:"",default_maturity_days:"",description:""}),C(!0)},q=h=>{A(h),P({name:h.name||"",category:h.category||"",default_maturity_days:h.default_maturity_days||"",description:h.description||""}),C(!0)},c=async h=>{h.preventDefault();try{T?await O.put(`/api/v1/crops/${T.id}`,x):await O.post("/api/v1/crops",x),C(!1),j()}catch(i){console.error("Error saving crop:",i),alert(i.response?.data?.message||"Error saving crop")}},p=async h=>{if(confirm("Are you sure you want to delete this crop? This action cannot be undone."))try{await O.delete(`/api/v1/crops/${h}`),j()}catch(i){console.error("Error deleting crop:",i),alert(i.response?.data?.message||"Error deleting crop")}};return u?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Crops"}),e.jsxs("button",{onClick:E,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Create Crop"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Default Maturity Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No crops found"})}):o.map(h=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.category||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.default_maturity_days||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:h.description||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>q(h),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>p(h.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},h.id))})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:T?"Edit Crop":"Create Crop"}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:h=>P({...x,name:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsxs("select",{required:!0,value:x.category,onChange:h=>P({...x,category:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Category"}),f.map(h=>e.jsx("option",{value:h,children:h},h))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Maturity Days"}),e.jsx("input",{type:"number",min:"1",value:x.default_maturity_days,onChange:h=>P({...x,default_maturity_days:h.target.value||null}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Days to maturity"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:h=>P({...x,description:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:T?"Update":"Create"})]})]})]})})]})}function xg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState({}),[x,P]=m.useState(!0),[f,j]=m.useState(!1),[E,q]=m.useState(null),[c,p]=m.useState(null),[h,i]=m.useState({name:"",email:"",phone:"",password:"",photo:null,farms:[],permissions:[],job_roles:[]});m.useEffect(()=>{R()},[]);const R=async()=>{try{const[X,re,oe]=await Promise.all([O.get("/api/v1/users?per_page=1000"),O.get("/api/v1/farms?per_page=1000"),O.get("/api/v1/permissions")]);let F=[];X.data?.data&&Array.isArray(X.data.data)?F=X.data.data:Array.isArray(X.data)&&(F=X.data),d(F);const Y=re.data?.data||(Array.isArray(re.data)?re.data:[]);_(Array.isArray(Y)?Y:[]);const Z=oe.data?.data||(Array.isArray(oe.data)?oe.data:[]);C(Array.isArray(Z)?Z:[])}catch(X){console.error("Error fetching data:",X),alert("Error loading data: "+(X.response?.data?.message||"Unknown error"))}finally{P(!1)}},G=async()=>{try{const X=await O.get("/api/v1/worker-job-roles?is_active=1"),re=X.data?.data||(Array.isArray(X.data)?X.data:[]);return Array.isArray(re)?re:[]}catch(X){return console.error("Error fetching job roles:",X),[]}},w=async(X=null)=>{if(X){q(X);const oe=(await O.get(`/api/v1/users/${X.id}?include_permissions=1`)).data.data,F=[],Y=await G();if(A({global:Y}),oe.farms&&oe.farms.length>0)for(const N of oe.farms)try{((await O.get(`/api/v1/users/${X.id}/farms/${N.id}/job-roles`)).data?.data||[]).forEach(V=>{V.ended_at||F.push({farm_id:N.id,worker_job_role_id:V.worker_job_role_id})})}catch(v){console.error(`Error loading job roles for farm ${N.id}:`,v)}const Z=(oe.farms||[]).map(N=>({farm_id:N.id,membership_status:N.membership_status||"ACTIVE",employment_category:N.employment_category||"",pay_type:N.pay_type||"",pay_rate:N.pay_rate||"",start_date:N.start_date||"",end_date:N.end_date||"",notes:N.notes||""}));i({name:oe.name||"",email:oe.email||"",phone:oe.phone||"",password:"",photo:null,farms:Z,permissions:oe.permissions||[],job_roles:F}),p(oe.profile_photo_url)}else q(null),i({name:"",email:"",phone:"",password:"",photo:null,farms:[],permissions:[],job_roles:[]}),p(null);j(!0)},y=X=>{const re=X.target.files[0];if(re){i({...h,photo:re});const oe=new FileReader;oe.onloadend=()=>{p(oe.result)},oe.readAsDataURL(re)}},b=()=>{i({...h,farms:[...h.farms,{farm_id:"",membership_status:"ACTIVE",employment_category:"",pay_type:"",pay_rate:"",start_date:""}]})},I=X=>{i({...h,farms:h.farms.filter((re,oe)=>oe!==X)})},H=async(X,re,oe)=>{const F=[...h.farms];if(F[X][re]=oe,Object.keys(T).length===0){const Y=await G();A({global:Y})}i({...h,farms:F})},k=X=>{i({...h,job_roles:[...h.job_roles,{farm_id:parseInt(X),worker_job_role_id:""}]})},ie=X=>{i({...h,job_roles:h.job_roles.filter((re,oe)=>oe!==X)})},U=(X,re,oe)=>{const F=[...h.job_roles];F[X][re]=parseInt(oe),i({...h,job_roles:F})},M=async X=>{X.preventDefault();try{const re=new FormData;if(re.append("name",h.name),re.append("email",h.email),h.phone&&re.append("phone",h.phone),h.password&&re.append("password",h.password),h.photo&&re.append("photo",h.photo),h.farms.length>0&&re.append("farms",JSON.stringify(h.farms)),h.permissions.length>0&&re.append("permissions",JSON.stringify(h.permissions)),h.job_roles.length>0&&re.append("job_roles",JSON.stringify(h.job_roles)),E){const oe={name:h.name,email:h.email,phone:h.phone};if(h.password&&(oe.password=h.password),h.farms.length>0&&(oe.farms=h.farms),h.permissions.length>0&&(oe.permissions=h.permissions),await O.put(`/api/v1/users/${E.id}`,oe),h.photo){const F=new FormData;F.append("photo",h.photo),await O.post(`/api/v1/users/${E.id}/photo`,F,{headers:{"Content-Type":"multipart/form-data"}})}if(h.job_roles.length>0){for(const F of h.farms)if(F.farm_id)try{const Z=(await O.get(`/api/v1/users/${E.id}/farms/${F.farm_id}/job-roles`)).data?.data||[];for(const N of Z)N.ended_at||await O.post(`/api/v1/users/${E.id}/farms/${F.farm_id}/job-roles/${N.id}/end`)}catch(Y){console.error("Error ending existing job roles:",Y)}for(const F of h.job_roles)if(F.worker_job_role_id&&F.farm_id)try{await O.post(`/api/v1/users/${E.id}/farms/${F.farm_id}/job-roles/assign`,{worker_job_role_id:F.worker_job_role_id})}catch(Y){console.error("Error assigning job role:",Y)}}}else await O.post("/api/v1/users",re,{headers:{"Content-Type":"multipart/form-data"}});j(!1),R()}catch(re){console.error("Error saving user:",re),alert("Error saving user: "+(re.response?.data?.message||"Unknown error"))}},ae=async(X,re)=>{if(confirm(`Are you sure you want to delete the user "${re}"?`))try{await O.delete(`/api/v1/users/${X}`),R()}catch(oe){alert("Error deleting user: "+(oe.response?.data?.message||"Unknown error"))}},xe=X=>{i(re=>({...re,permissions:re.permissions.includes(X)?re.permissions.filter(oe=>oe!==X):[...re.permissions,X]}))};return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),e.jsxs("button",{onClick:()=>w(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Create User"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Photo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Farms"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):o.map(X=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:X.profile_photo_url?e.jsx("img",{src:X.profile_photo_url,alt:X.name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(nu,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:X.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:X.email}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:X.phone||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:X.farms?.length>0?e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:[X.farms.length," farm(s)"]}):"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>w(X),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16,className:"inline"})}),e.jsx("button",{onClick:()=>ae(X.id,X.name),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16,className:"inline"})})]})]},X.id))})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:E?"Edit User":"Create New User"}),e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[c&&e.jsx("img",{src:c,alt:"Preview",className:"w-20 h-20 rounded-full object-cover"}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx(jp,{size:20}),c?"Change Photo":"Upload Photo",e.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"hidden"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:h.name,onChange:X=>i({...h,name:X.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:h.email,onChange:X=>i({...h,email:X.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:h.phone,onChange:X=>i({...h,phone:X.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",E?"(leave blank to keep current)":"*"]}),e.jsx("input",{type:"password",required:!E,value:h.password,onChange:X=>i({...h,password:X.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Farm Memberships"}),e.jsx("button",{type:"button",onClick:b,className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Add Farm"})]}),h.farms.map((X,re)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Farm ",re+1]}),e.jsx("button",{type:"button",onClick:()=>I(re),className:"text-red-600 hover:text-red-800",children:e.jsx(Ze,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("select",{required:!0,value:X.farm_id,onChange:oe=>H(re,"farm_id",oe.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(oe=>e.jsx("option",{value:oe.id,children:oe.name},oe.id))]}),e.jsxs("select",{required:!0,value:X.membership_status,onChange:oe=>H(re,"membership_status",oe.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]}),e.jsxs("select",{value:X.employment_category,onChange:oe=>H(re,"employment_category",oe.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Employment Category"}),e.jsx("option",{value:"PERMANENT",children:"Permanent"}),e.jsx("option",{value:"CASUAL",children:"Casual"}),e.jsx("option",{value:"CONTRACTOR",children:"Contractor"}),e.jsx("option",{value:"SEASONAL",children:"Seasonal"})]}),e.jsxs("select",{value:X.pay_type,onChange:oe=>H(re,"pay_type",oe.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Pay Type"}),e.jsx("option",{value:"MONTHLY",children:"Monthly"}),e.jsx("option",{value:"DAILY",children:"Daily"}),e.jsx("option",{value:"HOURLY",children:"Hourly"}),e.jsx("option",{value:"TASK",children:"Task"})]}),e.jsx("input",{type:"number",step:"0.01",placeholder:"Pay Rate",value:X.pay_rate,onChange:oe=>H(re,"pay_rate",oe.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"date",placeholder:"Start Date",value:X.start_date,onChange:oe=>H(re,"start_date",oe.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"})]})]},re))]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Job Roles (per Farm)"})}),h.farms.map(X=>{const re=X.farm_id;if(!re)return null;const oe=T.global||[],F=h.job_roles.filter(Y=>Y.farm_id===parseInt(re));return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:u.find(Y=>Y.id===parseInt(re))?.name||`Farm ${re}`}),e.jsx("button",{type:"button",onClick:()=>k(re),className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Add Job Role"})]}),F.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No job roles assigned"}):F.map((Y,Z)=>{const N=h.job_roles.findIndex(v=>v.farm_id===parseInt(re)&&v.worker_job_role_id===Y.worker_job_role_id);return e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("select",{value:Y.worker_job_role_id,onChange:v=>U(N,"worker_job_role_id",v.target.value),className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Select Job Role"}),oe.map(v=>e.jsxs("option",{value:v.id,children:[v.name," (",v.code,")"]},v.id))]}),e.jsx("button",{type:"button",onClick:()=>ie(N),className:"text-red-600 hover:text-red-800",children:e.jsx(Ze,{size:16})})]},Z)})]},re)})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-2",children:S.map(X=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.permissions.includes(X.name),onChange:()=>xe(X.name),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:X.name})]},X.id))})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[E?"Update":"Create"," User"]})]})]})]})})]})}function pg(){const o=Zr(),[d,u]=m.useState([]),[_,S]=m.useState([]),[C,T]=m.useState([]),[A,x]=m.useState(!0),[P,f]=m.useState(!1),[j,E]=m.useState(null),[q,c]=m.useState({farm_id:"",asset_category_id:"",asset_code:"",name:"",description:"",status:"ACTIVE",acquisition_type:"PURCHASED",purchase_date:"",purchase_cost:"",currency:"NGN",serial_number:"",is_trackable:!0});m.useEffect(()=>{p(),h(),i()},[]);const p=async()=>{x(!0);try{const b=await O.get("/api/v1/assets?per_page=1000"),I=b.data?.data||(Array.isArray(b.data)?b.data:[]);u(Array.isArray(I)?I:[])}catch(b){console.error("Error fetching assets:",b),u([])}finally{x(!1)}},h=async()=>{try{const b=await O.get("/api/v1/asset-categories?per_page=1000");let I=[];b.data&&(b.data.data&&Array.isArray(b.data.data)?I=b.data.data:Array.isArray(b.data)&&(I=b.data)),S(I)}catch(b){console.error("Error fetching categories:",b),S([])}},i=async()=>{try{const b=await O.get("/api/v1/farms?per_page=1000"),I=b.data?.data||(Array.isArray(b.data)?b.data:[]);T(Array.isArray(I)?I:[])}catch(b){console.error("Error fetching farms:",b),T([])}},R=(b=null)=>{E(b),c({farm_id:b?.farm_id||"",asset_category_id:b?.asset_category_id||"",asset_code:b?.asset_code||"",name:b?.name||"",description:b?.description||"",status:b?.status||"ACTIVE",acquisition_type:b?.acquisition_type||"PURCHASED",purchase_date:b?.purchase_date||"",purchase_cost:b?.purchase_cost||"",currency:b?.currency||"NGN",serial_number:b?.serial_number||"",is_trackable:b?.is_trackable!==void 0?b?.is_trackable:!0}),f(!0)},G=async b=>{b.preventDefault();try{j?await O.put(`/api/v1/assets/${j.id}`,q):await O.post("/api/v1/assets",q),f(!1),p()}catch(I){console.error("Error saving asset:",I),alert(I.response?.data?.message||"Error saving asset")}},w=async b=>{if(confirm("Are you sure you want to delete this asset?"))try{await O.delete(`/api/v1/assets/${b}`),p()}catch(I){console.error("Error deleting asset:",I),alert(I.response?.data?.message||"Error deleting asset")}},y=b=>({ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",UNDER_REPAIR:"bg-yellow-100 text-yellow-800",DISPOSED:"bg-red-100 text-red-800",SOLD:"bg-blue-100 text-blue-800",LOST:"bg-red-100 text-red-800"})[b]||"bg-gray-100 text-gray-800";return A?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Assets"}),e.jsxs("button",{onClick:()=>R(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Add Asset"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No assets found"})}):d.map(b=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:b.asset_code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:b.category?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${y(b.status)}`,children:b.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:b.farm?.name||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>o(`/admin/assets/${b.id}`),className:"text-green-600 hover:text-green-900 mr-4",title:"View Details",children:e.jsx(Cp,{size:16})}),e.jsx("button",{onClick:()=>R(b),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>w(b.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},b.id))})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:j?"Edit Asset":"Add Asset"}),e.jsxs("form",{onSubmit:G,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:q.farm_id,onChange:b=>c({...q,farm_id:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",disabled:!!j,children:[e.jsx("option",{value:"",children:"Select Farm"}),C.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:q.asset_category_id?String(q.asset_category_id):"",onChange:b=>c({...q,asset_category_id:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Category"}),_.length===0?e.jsx("option",{value:"",disabled:!0,children:"No categories available"}):_.map(b=>e.jsx("option",{value:String(b.id),children:b.name},b.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Code"}),e.jsx("input",{type:"text",value:q.asset_code,onChange:b=>c({...q,asset_code:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if empty"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:q.status,onChange:b=>c({...q,status:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"UNDER_REPAIR",children:"Under Repair"}),e.jsx("option",{value:"DISPOSED",children:"Disposed"}),e.jsx("option",{value:"SOLD",children:"Sold"}),e.jsx("option",{value:"LOST",children:"Lost"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:q.name,onChange:b=>c({...q,name:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:q.description,onChange:b=>c({...q,description:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:q.acquisition_type,onChange:b=>c({...q,acquisition_type:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:q.purchase_date,onChange:b=>c({...q,purchase_date:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:q.purchase_cost,onChange:b=>c({...q,purchase_cost:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",value:q.currency,onChange:b=>c({...q,currency:b.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",maxLength:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:q.serial_number,onChange:b=>c({...q,serial_number:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 mt-6",children:[e.jsx("input",{type:"checkbox",checked:q.is_trackable,onChange:b=>c({...q,is_trackable:b.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Trackable"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:j?"Update":"Create"})]})]})]})})]})}function gg(){const[o,d]=m.useState([]),[u,_]=m.useState(!0),[S,C]=m.useState(!1),[T,A]=m.useState(null),[x,P]=m.useState({code:"",name:"",parent_id:"",is_active:!0});m.useEffect(()=>{f()},[]);const f=async()=>{_(!0);try{const p=await O.get("/api/v1/asset-categories?per_page=1000"),h=p.data?.data||(Array.isArray(p.data)?p.data:[]);d(Array.isArray(h)?h:[])}catch(p){console.error("Error fetching categories:",p),d([])}finally{_(!1)}},j=(p=null)=>{A(p),P({code:p?.code||"",name:p?.name||"",parent_id:p?.parent_id||"",is_active:p?.is_active!==void 0?p?.is_active:!0}),C(!0)},E=async p=>{p.preventDefault();try{T?await O.put(`/api/v1/asset-categories/${T.id}`,x):await O.post("/api/v1/asset-categories",x),C(!1),f()}catch(h){console.error("Error saving category:",h),alert(h.response?.data?.message||"Error saving category")}},q=async p=>{if(confirm("Are you sure you want to delete this category?"))try{await O.delete(`/api/v1/asset-categories/${p}`),f()}catch(h){console.error("Error deleting category:",h),alert(h.response?.data?.message||"Error deleting category")}},c=p=>{if(!p)return"-";const h=o.find(i=>i.id===p);return h?h.name:"-"};return u?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Asset Categories"}),e.jsxs("button",{onClick:()=>j(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Add Category"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No categories found"})}):o.map(p=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:c(p.parent_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${p.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>j(p),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>q(p.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},p.id))})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:T?"Edit Category":"Add Category"}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:x.code,onChange:p=>P({...x,code:p.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:p=>P({...x,name:p.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Category"}),e.jsxs("select",{value:x.parent_id,onChange:p=>P({...x,parent_id:p.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"None"}),o.filter(p=>p.id!==T?.id).map(p=>e.jsx("option",{value:p.id,children:p.name},p.id))]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 mt-6",children:[e.jsx("input",{type:"checkbox",checked:x.is_active,onChange:p=>P({...x,is_active:p.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:T?"Update":"Create"})]})]})]})})]})}function hg(){const[o,d]=m.useState([]),[u,_]=m.useState(!0),[S,C]=m.useState(!1),[T,A]=m.useState(null),[x,P]=m.useState({code:"",name:"",description:"",is_active:!0});m.useEffect(()=>{f()},[]);const f=async()=>{_(!0);try{const c=await O.get("/api/v1/worker-job-roles?per_page=1000"),p=c.data?.data||(Array.isArray(c.data)?c.data:[]);d(Array.isArray(p)?p:[])}catch(c){console.error("Error fetching job roles:",c),d([])}finally{_(!1)}},j=(c=null)=>{A(c),P(c?{code:c.code||"",name:c.name||"",description:c.description||"",is_active:c.is_active!==void 0?c.is_active:!0}:{code:"",name:"",description:"",is_active:!0}),C(!0)},E=async c=>{c.preventDefault();try{T?await O.put(`/api/v1/worker-job-roles/${T.id}`,x):await O.post("/api/v1/worker-job-roles",x),C(!1),f()}catch(p){console.error("Error saving job role:",p),alert(p.response?.data?.message||"Error saving job role")}},q=async c=>{if(confirm("Are you sure you want to delete this job role?"))try{await O.delete(`/api/v1/worker-job-roles/${c}`),f()}catch(p){console.error("Error deleting job role:",p),alert(p.response?.data?.message||"Error deleting job role")}};return u?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Worker Job Roles"}),e.jsxs("button",{onClick:()=>j(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Add Job Role"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No job roles found"})}):o.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:c.description||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>j(c),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>q(c.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},c.id))})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:T?"Edit Job Role":"Add Job Role"}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:x.farm_id,onChange:c=>P({...x,farm_id:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",disabled:!!T,children:[e.jsx("option",{value:"",children:"Select Farm"}),farms.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:x.code,onChange:c=>P({...x,code:c.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., FLD_SUP"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:c=>P({...x,name:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., Field Supervisor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:c=>P({...x,description:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.is_active,onChange:c=>P({...x,is_active:c.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:T?"Update":"Create"})]})]})]})})]})}function fg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState(!0),[x,P]=m.useState(!1),[f,j]=m.useState(null),[E,q]=m.useState(!1),[c,p]=m.useState({site_id:"",name:"",status:"ACTIVE",notes:"",track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1});m.useEffect(()=>{h()},[]),m.useEffect(()=>{S.length>0&&(document.title=`Boreholes (${S.length} categories loaded)`)},[S]);const h=async()=>{try{const[b,I,H]=await Promise.all([O.get("/api/v1/boreholes"),O.get("/api/v1/sites?per_page=1000"),O.get("/api/v1/asset-categories?per_page=1000")]);console.log("Boreholes API response:",b.data);const k=b.data?.data||(Array.isArray(b.data)?b.data:[]);console.log("Parsed boreholes data:",k),k.length>0&&console.log("First borehole sample:",JSON.stringify(k[0],null,2)),d(Array.isArray(k)?k:[]);let ie=[];I.data&&(Array.isArray(I.data)?ie=I.data:I.data.data&&Array.isArray(I.data.data)?ie=I.data.data:Array.isArray(I.data)&&(ie=I.data)),_(ie);let U=[];H.data&&(H.data.data&&Array.isArray(H.data.data)?U=H.data.data:Array.isArray(H.data)&&(U=H.data)),C(U)}catch(b){console.error("Error fetching data:",b),console.error("Error response:",b.response?.data),alert("Error loading data: "+(b.response?.data?.message||b.message)),_([]),d([]),C([])}finally{A(!1)}},i=async()=>{try{const b=await O.get("/api/v1/asset-categories?per_page=1000");let I=[];return b.data&&(b.data.data&&Array.isArray(b.data.data)?I=b.data.data:Array.isArray(b.data)&&(I=b.data)),C(I),I}catch(b){const I=b.response?.data?.message||b.message||"Unknown error";return alert("Failed to load asset categories: "+I+`

Check if the API endpoint /api/v1/asset-categories is accessible.`),C([]),[]}},R=()=>{j(null),q(!1),p({site_id:"",name:"",status:"ACTIVE",notes:"",track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1}),P(!0)},G=async b=>{j(b);const I=!!b.asset_id;q(I),S.length===0&&await i();const H=b.asset?.asset_category_id||"";p({site_id:b.site?.id||"",name:b.name||"",status:b.status||"ACTIVE",notes:b.notes||"",track_as_asset:I,asset_category_id:H,asset_description:b.asset?.description||"",asset_acquisition_type:b.asset?.acquisition_type||"",asset_purchase_date:b.asset?.purchase_date?new Date(b.asset.purchase_date).toISOString().slice(0,10):"",asset_purchase_cost:b.asset?.purchase_cost||"",asset_currency:b.asset?.currency||"NGN",asset_supplier_name:b.asset?.supplier_name||"",asset_serial_number:b.asset?.serial_number||"",asset_model:b.asset?.model||"",asset_manufacturer:b.asset?.manufacturer||"",asset_year_of_make:b.asset?.year_of_make||"",asset_warranty_expiry:b.asset?.warranty_expiry?new Date(b.asset.warranty_expiry).toISOString().slice(0,10):"",asset_is_trackable:b.asset?.is_trackable||!1}),P(!0)},w=async b=>{b.preventDefault();try{const I={...c};I.track_as_asset=E,E||Object.keys(I).forEach(H=>{H.startsWith("asset_")&&delete I[H]}),f?await O.patch(`/api/v1/boreholes/${f.id}`,I):await O.post("/api/v1/boreholes",I),P(!1),h()}catch(I){alert("Error saving borehole: "+(I.response?.data?.message||"Unknown error"))}},y=async b=>{if(confirm("Are you sure you want to delete this borehole?"))try{await O.delete(`/api/v1/boreholes/${b}`),h()}catch(I){alert("Error deleting borehole: "+(I.response?.data?.message||"Unknown error"))}};return T?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Borehole Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage boreholes per Site; Farm is derived from Site"})]}),e.jsxs("button",{onClick:R,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Borehole"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Sp,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No boreholes yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first borehole to get started"}),e.jsx("button",{onClick:R,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Borehole"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:b.borehole_code||b.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b.site?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-gray-100 text-gray-800",children:b.status||"ACTIVE"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>G(b),className:"text-green-600 hover:text-green-700",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>y(b.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},b.id))})]})})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:f?"Edit Borehole":"Create New Borehole"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site *"}),e.jsxs("select",{required:!0,value:c.site_id,onChange:b=>p({...c,site_id:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select site"}),u.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Code will be auto-generated as BH-[Site]-XXX (e.g., BH-EMU-001 for Emure site)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:c.name,onChange:b=>p({...c,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:c.status,onChange:b=>p({...c,status:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"ACTIVE",children:"ACTIVE"}),e.jsx("option",{value:"INACTIVE",children:"INACTIVE"}),e.jsx("option",{value:"UNDER_REPAIR",children:"UNDER_REPAIR"}),e.jsx("option",{value:"DECOMMISSIONED",children:"DECOMMISSIONED"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:b=>{q(b.target.checked),p({...c,track_as_asset:b.target.checked})},className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Track as Asset"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check this box to create an asset record for this borehole. You can enter asset details below."})]}),E&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:col-span-2 border-t pt-4 mt-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asset Information"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Category"}),e.jsxs("select",{value:c.asset_category_id?String(c.asset_category_id):"",onChange:b=>p({...c,asset_category_id:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:S.length===0?" No categories loaded (0)":`Select category (${S.length} available)`}),S.length===0?e.jsx("option",{value:"",disabled:!0,children:'Click "Retry" button below to load categories'}):S.map(b=>e.jsx("option",{value:String(b.id),children:b.name},b.id))]}),S.length===0&&e.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("p",{className:"text-xs text-yellow-800 mb-2",children:" Asset categories not loaded."}),e.jsx("button",{type:"button",onClick:async()=>{(await i()).length===0&&alert("Still no categories. Check if API endpoint /api/v1/asset-categories is working.")},className:"text-xs bg-yellow-600 text-white px-3 py-1 rounded hover:bg-yellow-700",children:"Retry Loading Categories"})]}),S.length>0&&c.asset_category_id&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" Selected category ID: ",c.asset_category_id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:c.asset_acquisition_type,onChange:b=>p({...c,asset_acquisition_type:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:c.asset_purchase_date,onChange:b=>p({...c,asset_purchase_date:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:c.asset_purchase_cost,onChange:b=>p({...c,asset_purchase_cost:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",maxLength:3,value:c.asset_currency,onChange:b=>p({...c,asset_currency:b.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"NGN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:c.asset_supplier_name,onChange:b=>p({...c,asset_supplier_name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:c.asset_serial_number,onChange:b=>p({...c,asset_serial_number:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",value:c.asset_model,onChange:b=>p({...c,asset_model:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:c.asset_manufacturer,onChange:b=>p({...c,asset_manufacturer:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year of Make"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,value:c.asset_year_of_make,onChange:b=>p({...c,asset_year_of_make:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty Expiry"}),e.jsx("input",{type:"date",value:c.asset_warranty_expiry,onChange:b=>p({...c,asset_warranty_expiry:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Description"}),e.jsx("textarea",{value:c.asset_description,onChange:b=>p({...c,asset_description:b.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:c.asset_is_trackable,onChange:b=>p({...c,asset_is_trackable:b.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Is Trackable"})]})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:c.notes,onChange:b=>p({...c,notes:b.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[f?"Update":"Create"," Borehole"]})]})]})]})})]})}function yg(){const[o,d]=m.useState([]),[u,_]=m.useState(!0),[S,C]=m.useState(!1),[T,A]=m.useState(null),[x,P]=m.useState({code:"",name:"",code_prefix:"",description:"",is_active:!0});m.useEffect(()=>{f()},[]);const f=async()=>{_(!0);try{const c=await O.get("/api/v1/site-types?per_page=1000"),p=c.data?.data||(Array.isArray(c.data)?c.data:[]);d(Array.isArray(p)?p:[])}catch(c){console.error("Error fetching site types:",c),d([])}finally{_(!1)}},j=(c=null)=>{A(c),P({code:c?.code||"",name:c?.name||"",code_prefix:c?.code_prefix||"",description:c?.description||"",is_active:c?.is_active!==void 0?c?.is_active:!0}),C(!0)},E=async c=>{c.preventDefault();try{T?await O.put(`/api/v1/site-types/${T.id}`,x):await O.post("/api/v1/site-types",x),C(!1),f()}catch(p){console.error("Error saving site type:",p);const h=p.response?.data?.message||(p.response?.data?.errors?JSON.stringify(p.response.data.errors):"")||p.message;alert("Error saving site type: "+h)}},q=async c=>{if(confirm("Are you sure you want to delete this site type? Sites using this type will not be affected, but you won't be able to create new sites with this type."))try{await O.delete(`/api/v1/site-types/${c}`),f()}catch(p){console.error("Error deleting site type:",p);const h=p.response?.data?.message||p.message;alert("Error deleting site type: "+h)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Site Types"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage site types for organizing locations"})]}),e.jsxs("button",{onClick:()=>j(),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Add Site Type"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code Prefix"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sites Count"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No site types found"})}):o.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.code_prefix||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:c.description||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.sites?.length||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>j(c),className:"text-green-600 hover:text-green-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>q(c.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},c.id))})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:T?"Edit Site Type":"Add Site Type"}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:x.code,onChange:c=>P({...x,code:c.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., farmland, warehouse",disabled:!!T}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique identifier (lowercase, no spaces)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:c=>P({...x,name:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., Farmland"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code Prefix"}),e.jsx("input",{type:"text",value:x.code_prefix,onChange:c=>P({...x,code_prefix:c.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., FL (for Farmland)",maxLength:10}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used when auto-generating site codes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:c=>P({...x,description:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3",placeholder:"Brief description of this site type"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.is_active,onChange:c=>P({...x,is_active:c.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:T?"Update":"Create"})]})]})]})})]})}function vg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState([]),[x,P]=m.useState(!0),[f,j]=m.useState(!1),[E,q]=m.useState(null),[c,p]=m.useState({greenhouse_id:"",season_id:"",crop:"BELL_PEPPER",variety:"",responsible_supervisor_user_id:"",planting_date:"",establishment_method:"TRANSPLANT",seed_supplier_name:"",seed_batch_number:"",nursery_start_date:"",transplant_date:"",plant_spacing_cm:"",row_spacing_cm:"",plant_density_per_sqm:"",initial_plant_count:"",cropping_system:"COCOPEAT",medium_type:"",bed_count:"",bench_count:"",mulching_used:!1,support_system:"TRELLIS",target_day_temperature_c:"",target_night_temperature_c:"",target_humidity_percent:"",target_light_hours:"",ventilation_strategy:"NATURAL",shade_net_percentage:"",notes:""});m.useEffect(()=>{h()},[]);const h=async()=>{try{const[k,ie,U,M]=await Promise.all([O.get("/api/v1/production-cycles"),O.get("/api/v1/greenhouses?per_page=1000"),O.get("/api/v1/users?per_page=1000"),O.get("/api/v1/seasons?per_page=1000")]),ae=k.data?.data||k.data||[],xe=ie.data?.data||ie.data||[],X=U.data?.data||U.data||[],re=M.data?.data||M.data||[];d(Array.isArray(ae)?ae:[]),_(Array.isArray(xe)?xe:[]),C(Array.isArray(X)?X:[]),A(Array.isArray(re)?re:[])}catch(k){console.error("Error fetching data:",k),alert("Error loading data: "+(k.response?.data?.message||k.message))}finally{P(!1)}},i=()=>{q(null),p({greenhouse_id:"",season_id:"",crop:"BELL_PEPPER",variety:"",responsible_supervisor_user_id:"",planting_date:"",establishment_method:"TRANSPLANT",seed_supplier_name:"",seed_batch_number:"",nursery_start_date:"",transplant_date:"",plant_spacing_cm:"",row_spacing_cm:"",plant_density_per_sqm:"",initial_plant_count:"",cropping_system:"COCOPEAT",medium_type:"",bed_count:"",bench_count:"",mulching_used:!1,support_system:"TRELLIS",target_day_temperature_c:"",target_night_temperature_c:"",target_humidity_percent:"",target_light_hours:"",ventilation_strategy:"NATURAL",shade_net_percentage:"",notes:""}),j(!0)},R=k=>{q(k),p({greenhouse_id:k.greenhouse?.id||"",season_id:k.season?.id||"",crop:k.crop||"BELL_PEPPER",variety:k.variety||"",responsible_supervisor_user_id:k.responsible_supervisor?.id||"",planting_date:k.planting_date||"",establishment_method:k.establishment_method||"TRANSPLANT",seed_supplier_name:k.seed_supplier_name||"",seed_batch_number:k.seed_batch_number||"",nursery_start_date:k.nursery_start_date||"",transplant_date:k.transplant_date||"",plant_spacing_cm:k.plant_spacing_cm||"",row_spacing_cm:k.row_spacing_cm||"",plant_density_per_sqm:k.plant_density_per_sqm||"",initial_plant_count:k.initial_plant_count||"",cropping_system:k.cropping_system||"COCOPEAT",medium_type:k.medium_type||"",bed_count:k.bed_count||"",bench_count:k.bench_count||"",mulching_used:k.mulching_used||!1,support_system:k.support_system||"TRELLIS",target_day_temperature_c:k.target_day_temperature_c||"",target_night_temperature_c:k.target_night_temperature_c||"",target_humidity_percent:k.target_humidity_percent||"",target_light_hours:k.target_light_hours||"",ventilation_strategy:k.ventilation_strategy||"NATURAL",shade_net_percentage:k.shade_net_percentage||"",notes:k.notes||""}),j(!0)},G=async k=>{k.preventDefault();try{E?await O.patch(`/api/v1/production-cycles/${E.id}`,c):await O.post("/api/v1/production-cycles",c),j(!1),h()}catch(ie){const U=ie.response?.data?.message||ie.response?.data?.errors||"Unknown error";alert("Error saving cycle: "+(typeof U=="string"?U:JSON.stringify(U)))}},w=async k=>{if(confirm("Start this production cycle?"))try{await O.post(`/api/v1/production-cycles/${k}/start`),h()}catch(ie){alert("Error starting cycle: "+(ie.response?.data?.message||ie.message))}},y=async k=>{if(confirm("Mark this production cycle as completed?"))try{await O.post(`/api/v1/production-cycles/${k}/complete`),h()}catch(ie){alert("Error completing cycle: "+(ie.response?.data?.message||ie.message))}},b=async k=>{if(confirm("Delete this production cycle?"))try{await O.delete(`/api/v1/production-cycles/${k}`),h()}catch(ie){alert("Error deleting cycle: "+(ie.response?.data?.message||ie.message))}},I=k=>({PLANNED:"bg-gray-100 text-gray-800",ACTIVE:"bg-green-100 text-green-800",HARVESTING:"bg-blue-100 text-blue-800",COMPLETED:"bg-purple-100 text-purple-800",ABANDONED:"bg-red-100 text-red-800"})[k]||"bg-gray-100 text-gray-800",H=T.find(k=>k.id===parseInt(c.season_id));return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Production Cycles"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage greenhouse production cycles"})]}),e.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Cycle"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Greenhouse"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crop"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Planting Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supervisor"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No production cycles found"})}):o.map(k=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:k.production_cycle_code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.greenhouse?.name||"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[k.crop," ",k.variety?`- ${k.variety}`:""]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.planting_date||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${I(k.cycle_status)}`,children:k.cycle_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.responsible_supervisor?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[k.cycle_status==="PLANNED"&&e.jsx("button",{onClick:()=>w(k.id),className:"text-green-600 hover:text-green-900",title:"Start Cycle",children:e.jsx(Tp,{className:"h-4 w-4"})}),["ACTIVE","HARVESTING"].includes(k.cycle_status)&&e.jsx("button",{onClick:()=>y(k.id),className:"text-purple-600 hover:text-purple-900",title:"Complete Cycle",children:e.jsx(Xr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(k),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(k.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},k.id))})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:E?"Edit Production Cycle":"New Production Cycle"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:G,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Greenhouse ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.greenhouse_id,onChange:k=>p({...c,greenhouse_id:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Greenhouse"}),u.map(k=>e.jsxs("option",{value:k.id,children:[k.name," (",k.greenhouse_code||k.code,")"]},k.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Season"}),e.jsxs("select",{value:c.season_id,onChange:k=>p({...c,season_id:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Season"}),T.filter(k=>["PLANNED","ACTIVE"].includes(k.status)).map(k=>e.jsxs("option",{value:k.id,children:[k.name," (",k.status,")"]},k.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Crop ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{required:!0,value:c.crop,onChange:k=>p({...c,crop:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:e.jsx("option",{value:"BELL_PEPPER",children:"Bell Pepper"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Variety"}),e.jsx("input",{type:"text",value:c.variety,onChange:k=>p({...c,variety:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Responsible Supervisor ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.responsible_supervisor_user_id,onChange:k=>p({...c,responsible_supervisor_user_id:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Supervisor"}),S.map(k=>e.jsxs("option",{value:k.id,children:[k.name," (",k.email,")"]},k.id))]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Section 1: Planting & Establishment"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Planting Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:c.planting_date,min:H?.start_date?H.start_date.split("T")[0]:void 0,onChange:k=>p({...c,planting_date:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),H&&c.planting_date&&new Date(c.planting_date)<new Date(H.start_date)&&e.jsxs("p",{className:"mt-1 text-xs text-red-600",children:["Planting date cannot be earlier than season start date (",H.start_date.split("T")[0],")"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Establishment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.establishment_method,onChange:k=>p({...c,establishment_method:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"DIRECT_SEED",children:"Direct Seed"}),e.jsx("option",{value:"TRANSPLANT",children:"Transplant"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Seed Supplier Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:c.seed_supplier_name,onChange:k=>p({...c,seed_supplier_name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Seed Batch Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:c.seed_batch_number,onChange:k=>p({...c,seed_batch_number:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nursery Start Date"}),e.jsx("input",{type:"date",value:c.nursery_start_date,onChange:k=>p({...c,nursery_start_date:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transplant Date"}),e.jsx("input",{type:"date",value:c.transplant_date,onChange:k=>p({...c,transplant_date:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Plant Spacing (cm) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.plant_spacing_cm,onChange:k=>p({...c,plant_spacing_cm:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Row Spacing (cm) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.row_spacing_cm,onChange:k=>p({...c,row_spacing_cm:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plant Density (per sqm)"}),e.jsx("input",{type:"number",step:"0.01",value:c.plant_density_per_sqm,onChange:k=>p({...c,plant_density_per_sqm:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Initial Plant Count ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",required:!0,value:c.initial_plant_count,onChange:k=>p({...c,initial_plant_count:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Section 2: Growing Medium & Setup"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Cropping System ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.cropping_system,onChange:k=>p({...c,cropping_system:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"SOIL",children:"Soil"}),e.jsx("option",{value:"COCOPEAT",children:"Cocopeat"}),e.jsx("option",{value:"HYDROPONIC",children:"Hydroponic"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Medium Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:c.medium_type,onChange:k=>p({...c,medium_type:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Bed Count ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",required:!0,value:c.bed_count,onChange:k=>p({...c,bed_count:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bench Count"}),e.jsx("input",{type:"number",value:c.bench_count,onChange:k=>p({...c,bench_count:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mulching Used ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.mulching_used,onChange:k=>p({...c,mulching_used:k.target.value==="true"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"false",children:"No"}),e.jsx("option",{value:"true",children:"Yes"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Support System ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.support_system,onChange:k=>p({...c,support_system:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"STAKES",children:"Stakes"}),e.jsx("option",{value:"TRELLIS",children:"Trellis"}),e.jsx("option",{value:"STRING",children:"String"}),e.jsx("option",{value:"NONE",children:"None"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Section 3: Environmental Targets"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Target Day Temperature (C) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.target_day_temperature_c,onChange:k=>p({...c,target_day_temperature_c:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Target Night Temperature (C) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.target_night_temperature_c,onChange:k=>p({...c,target_night_temperature_c:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Target Humidity (%) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.target_humidity_percent,onChange:k=>p({...c,target_humidity_percent:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Target Light Hours ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.target_light_hours,onChange:k=>p({...c,target_light_hours:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ventilation Strategy ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.ventilation_strategy,onChange:k=>p({...c,ventilation_strategy:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"NATURAL",children:"Natural"}),e.jsx("option",{value:"FORCED",children:"Forced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shade Net Percentage (%)"}),e.jsx("input",{type:"number",step:"0.01",value:c.shade_net_percentage,onChange:k=>p({...c,shade_net_percentage:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:c.notes,onChange:k=>p({...c,notes:k.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[E?"Update":"Create"," Cycle"]})]})]})]})})]})}function bg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState([]),[x,P]=m.useState([]),[f,j]=m.useState([]),[E,q]=m.useState(!0),[c,p]=m.useState(""),[h,i]=m.useState(!1),[R,G]=m.useState(null),[w,y]=m.useState({production_cycle_id:"",log_date:new Date().toISOString().slice(0,10),issues_notes:"",items:[]});m.useEffect(()=>{b()},[]),m.useEffect(()=>{c?(H(c),I(c)):(d([]),C([]))},[c]);const b=async()=>{try{const[N,v,D]=await Promise.all([O.get("/api/v1/greenhouses?per_page=1000"),O.get("/api/v1/activity-types?per_page=1000"),O.get("/api/v1/users?per_page=1000")]),V=N.data?.data||N.data||[],ne=v.data?.data||v.data||[],$=D.data?.data||D.data||[];_(Array.isArray(V)?V:[]),A(Array.isArray(ne)?ne:[]),P(Array.isArray($)?$:[]);try{const te=await O.get("/api/v1/input-items?per_page=1000"),J=te.data?.data||te.data||[];j(Array.isArray(J)?J:[])}catch{console.warn("Input items endpoint not available, using input_name field only"),j([])}}catch(N){console.error("Error fetching data:",N),alert("Error loading data: "+(N.response?.data?.message||N.message))}finally{q(!1)}},I=async N=>{try{const v=await O.get(`/api/v1/production-cycles?greenhouse_id=${N}`),D=v.data?.data||v.data||[],V=Array.isArray(D)?D.filter(ne=>["PLANNED","ACTIVE","HARVESTING"].includes(ne.cycle_status)):[];C(V)}catch(v){console.error("Error fetching cycles:",v),C([])}},H=async N=>{try{const v=await O.get(`/api/v1/greenhouses/${N}/daily-logs`),D=v.data?.data||v.data||[];d(Array.isArray(D)?D:[])}catch(v){console.error("Error fetching logs:",v),d([])}},k=async()=>{if(!c){alert("Please select a greenhouse first");return}if(S.length===0){alert("No production cycles found for this greenhouse. Please create a production cycle first.");return}const N=S.filter(D=>D.cycle_status==="PLANNED"),v=S.filter(D=>["ACTIVE","HARVESTING"].includes(D.cycle_status));if(v.length===0&&N.length>0){const D=N[0];if(confirm(`No active production cycles found. Would you like to start the cycle "${D.production_cycle_code||D.id}" first?`))try{await O.post(`/api/v1/production-cycles/${D.id}/start`),await I(c),setTimeout(()=>{G(null),y({production_cycle_id:D.id,log_date:new Date().toISOString().slice(0,10),issues_notes:"",items:[]}),i(!0)},500);return}catch(V){alert("Error starting cycle: "+(V.response?.data?.message||V.message));return}else return}G(null),y({production_cycle_id:v.length>0?v.length===1?v[0].id:"":S.length===1?S[0].id:"",log_date:new Date().toISOString().slice(0,10),issues_notes:"",items:[]}),i(!0)},ie=N=>{if(N.status!=="DRAFT"){alert("Only DRAFT logs can be edited");return}G(N),y({production_cycle_id:N.production_cycle_id||(S.length===1?S[0].id:""),log_date:N.log_date||new Date().toISOString().slice(0,10),issues_notes:N.issues_notes||"",items:N.items?.map(v=>({id:v.id,activity_type_id:v.activity_type?.id||"",performed_by_user_id:v.performed_by?.id||"",started_at:v.started_at?new Date(v.started_at).toISOString().slice(0,16):"",ended_at:v.ended_at?new Date(v.ended_at).toISOString().slice(0,16):"",quantity:v.quantity||"",unit:v.unit||"",notes:v.notes||"",meta:v.meta||{},inputs:v.inputs?.map(D=>({id:D.id,input_item_id:D.input_item?.id||"",input_name:D.input_name||"",quantity:D.quantity||"",unit:D.unit||"",notes:D.notes||""}))||[]}))||[]}),i(!0)},U=()=>{y({...w,items:[...w.items,{activity_type_id:"",performed_by_user_id:"",started_at:"",ended_at:"",quantity:"",unit:"",notes:"",meta:{},inputs:[]}]})},M=N=>{y({...w,items:w.items.filter((v,D)=>D!==N)})},ae=(N,v,D)=>{const V=[...w.items];V[N]={...V[N],[v]:D},y({...w,items:V})},xe=N=>{const v=[...w.items];v[N].inputs||(v[N].inputs=[]),v[N].inputs.push({input_item_id:"",input_name:"",quantity:"",unit:"",notes:""}),y({...w,items:v})},X=(N,v)=>{const D=[...w.items];D[N].inputs=D[N].inputs.filter((V,ne)=>ne!==v),y({...w,items:D})},re=(N,v,D,V)=>{const ne=[...w.items];ne[N].inputs[v]={...ne[N].inputs[v],[D]:V},y({...w,items:ne})},oe=async N=>{if(N.preventDefault(),w.items.length===0){alert("Please add at least one activity item");return}if(!w.production_cycle_id){alert("Please select a production cycle");return}try{const v=S.find(V=>V.id===parseInt(w.production_cycle_id));if(v&&v.cycle_status==="PLANNED")if(confirm(`The production cycle "${v.production_cycle_code||v.id}" is PLANNED. It needs to be started before creating daily logs. Would you like to start it now?`))try{await O.post(`/api/v1/production-cycles/${v.id}/start`),await I(c)}catch(V){alert("Error starting cycle: "+(V.response?.data?.message||V.message));return}else return;const D={log_date:w.log_date,issues_notes:w.issues_notes,items:w.items.map(V=>({activity_type_id:V.activity_type_id,performed_by_user_id:V.performed_by_user_id||null,started_at:V.started_at||null,ended_at:V.ended_at||null,quantity:V.quantity||null,unit:V.unit||null,notes:V.notes||null,meta:V.meta||null,inputs:V.inputs?.map(ne=>({input_item_id:ne.input_item_id||null,input_name:ne.input_name||null,quantity:ne.quantity,unit:ne.unit,notes:ne.notes||null}))||[]}))};R?await O.patch(`/api/v1/daily-logs/${R.id}`,D):await O.post(`/api/v1/production-cycles/${w.production_cycle_id}/daily-logs`,D),i(!1),H(c)}catch(v){const D=v.response?.data?.message||v.response?.data?.errors||"Unknown error";alert("Error saving log: "+(typeof D=="string"?D:JSON.stringify(D)))}},F=async N=>{if(confirm("Submit this daily log? It cannot be edited after submission."))try{await O.post(`/api/v1/daily-logs/${N}/submit`),H(c)}catch(v){alert("Error submitting log: "+(v.response?.data?.message||v.message))}},Y=async N=>{if(confirm("Delete this daily log?"))try{await O.delete(`/api/v1/daily-logs/${N}`),H(c)}catch(v){alert("Error deleting log: "+(v.response?.data?.message||v.message))}},Z=N=>T.find(v=>v.id===parseInt(N));return E?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Daily Activity Logs"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Record daily activities for production cycles"})]}),e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Greenhouse"}),e.jsxs("select",{value:c,onChange:N=>p(N.target.value),className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select a greenhouse..."}),u.map(N=>e.jsxs("option",{value:N.id,children:[N.name," (",N.greenhouse_code||N.code,")"]},N.id))]})]}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs("button",{onClick:k,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Daily Log"]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Production Cycle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activities"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No daily logs found for this greenhouse"})}):o.map(N=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.log_date}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.production_cycle?.production_cycle_code||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${N.status==="SUBMITTED"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:N.status})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[N.items?.length||0," activity(ies)"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.submitted_at?new Date(N.submitted_at).toLocaleString():"Not submitted"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[N.status==="DRAFT"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ie(N),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>F(N.id),className:"text-green-600 hover:text-green-900",title:"Submit",children:e.jsx(Ip,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>Y(N.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},N.id))})]})})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:R?"Edit Daily Log":"New Daily Log"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:oe,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Production Cycle ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:w.production_cycle_id,onChange:N=>y({...w,production_cycle_id:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Production Cycle"}),S.map(N=>e.jsxs("option",{value:N.id,children:[N.production_cycle_code," (",N.cycle_status,")"]},N.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Log Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:w.log_date,onChange:N=>y({...w,log_date:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issues/Notes"}),e.jsx("textarea",{value:w.issues_notes,onChange:N=>y({...w,issues_notes:N.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Activity Items"}),e.jsxs("button",{type:"button",onClick:U,className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Add Activity"]})]}),w.items.map((N,v)=>{const D=Z(N.activity_type_id);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Activity ",v+1]}),e.jsx("button",{type:"button",onClick:()=>M(v),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Activity Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:N.activity_type_id,onChange:V=>ae(v,"activity_type_id",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Activity Type"}),T.map(V=>e.jsxs("option",{value:V.id,children:[V.name," (",V.code,")"]},V.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Performed By"}),e.jsxs("select",{value:N.performed_by_user_id,onChange:V=>ae(v,"performed_by_user_id",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select User"}),x.map(V=>e.jsx("option",{value:V.id,children:V.name},V.id))]})]}),D?.requires_time_range&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Started At"}),e.jsx("input",{type:"datetime-local",value:N.started_at,onChange:V=>ae(v,"started_at",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ended At"}),e.jsx("input",{type:"datetime-local",value:N.ended_at,onChange:V=>ae(v,"ended_at",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),D?.requires_quantity&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",step:"0.01",value:N.quantity,onChange:V=>ae(v,"quantity",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("input",{type:"text",value:N.unit,onChange:V=>ae(v,"unit",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"L, KG, hours, etc."})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:N.notes,onChange:V=>ae(v,"notes",V.target.value),rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),D?.requires_inputs&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Inputs Used"}),e.jsxs("button",{type:"button",onClick:()=>xe(v),className:"text-sm text-green-600 hover:text-green-800",children:[e.jsx(_e,{className:"h-4 w-4 inline mr-1"}),"Add Input"]})]}),N.inputs?.map((V,ne)=>e.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-2 p-2 bg-gray-50 rounded",children:[f.length>0?e.jsxs("select",{value:V.input_item_id,onChange:$=>re(v,ne,"input_item_id",$.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Input"}),f.map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]}):e.jsx("input",{type:"text",placeholder:"Input name (required)",value:V.input_name,onChange:$=>re(v,ne,"input_name",$.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",required:!0}),f.length>0&&e.jsx("input",{type:"text",placeholder:"Or enter name",value:V.input_name,onChange:$=>re(v,ne,"input_name",$.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"Quantity",required:!0,value:V.quantity,onChange:$=>re(v,ne,"quantity",$.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsx("input",{type:"text",placeholder:"Unit",required:!0,value:V.unit,onChange:$=>re(v,ne,"unit",$.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsx("button",{type:"button",onClick:()=>X(v,ne),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{className:"h-4 w-4"})})]},ne))]})]},v)})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[R?"Update":"Save"," Log"]})]})]})]})})]})}function jg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState(!0),[T,A]=m.useState(!1),[x,P]=m.useState(null),[f,j]=m.useState({farm_id:"",code:"",name:"",description:"",category:"",requires_quantity:!1,requires_time_range:!1,requires_inputs:!1,requires_photos:!1,is_active:!0});m.useEffect(()=>{E()},[]);const E=async()=>{try{const[i,R]=await Promise.all([O.get("/api/v1/activity-types?per_page=1000"),O.get("/api/v1/farms?per_page=1000")]),G=i.data?.data||i.data||[],w=R.data?.data||R.data||[];d(Array.isArray(G)?G:[]),_(Array.isArray(w)?w:[])}catch(i){console.error("Error fetching data:",i),alert("Error loading data: "+(i.response?.data?.message||i.message))}finally{C(!1)}},q=()=>{P(null),j({farm_id:"",code:"",name:"",description:"",category:"",requires_quantity:!1,requires_time_range:!1,requires_inputs:!1,requires_photos:!1,is_active:!0}),A(!0)},c=i=>{P(i),j({farm_id:i.farm_id||"",code:i.code||"",name:i.name||"",description:i.description||"",category:i.category||"",requires_quantity:i.requires_quantity||!1,requires_time_range:i.requires_time_range||!1,requires_inputs:i.requires_inputs||!1,requires_photos:i.requires_photos||!1,is_active:i.is_active!==!1}),A(!0)},p=async i=>{i.preventDefault();try{x?await O.patch(`/api/v1/activity-types/${x.id}`,f):await O.post("/api/v1/activity-types",f),A(!1),E()}catch(R){const G=R.response?.data?.message||R.response?.data?.errors||"Unknown error";alert("Error saving activity type: "+(typeof G=="string"?G:JSON.stringify(G)))}},h=async i=>{if(confirm("Deactivate this activity type? (It will be soft-deleted)"))try{await O.delete(`/api/v1/activity-types/${i}`),E()}catch(R){alert("Error deleting activity type: "+(R.response?.data?.message||R.message))}};return S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Activity Types"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage activity types for daily logs"})]}),e.jsxs("button",{onClick:q,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Activity Type"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requirements"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No activity types found"})}):o.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:i.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.category||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.requires_quantity&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"Quantity"}),i.requires_time_range&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:"Time"}),i.requires_inputs&&e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:"Inputs"}),i.requires_photos&&e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded",children:"Photos"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${i.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:i.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>c(i),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h(i.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},i.id))})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:x?"Edit Activity Type":"New Activity Type"}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[!x&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Farm ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:f.farm_id,onChange:i=>j({...f,farm_id:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:f.code,onChange:i=>j({...f,code:i.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"IRRIGATION"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:f.name,onChange:i=>j({...f,name:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:f.description,onChange:i=>j({...f,description:i.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:f.category,onChange:i=>j({...f,category:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"CULTURAL",children:"Cultural"}),e.jsx("option",{value:"WATER",children:"Water"}),e.jsx("option",{value:"NUTRITION",children:"Nutrition"}),e.jsx("option",{value:"PROTECTION",children:"Protection"}),e.jsx("option",{value:"HYGIENE",children:"Hygiene"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Requirements"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:f.requires_quantity,onChange:i=>j({...f,requires_quantity:i.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requires Quantity"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:f.requires_time_range,onChange:i=>j({...f,requires_time_range:i.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requires Time Range"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:f.requires_inputs,onChange:i=>j({...f,requires_inputs:i.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requires Inputs"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:f.requires_photos,onChange:i=>j({...f,requires_photos:i.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requires Photos"})]})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:f.is_active,onChange:i=>j({...f,is_active:i.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[x?"Update":"Create"," Activity Type"]})]})]})]})})]})}function Ng(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState([]),[x,P]=m.useState([]),[f,j]=m.useState([]),[E,q]=m.useState([]),[c,p]=m.useState([]),[h,i]=m.useState(!0),[R,G]=m.useState(!1),[w,y]=m.useState(!1),[b,I]=m.useState(null),[H,k]=m.useState(null),[ie,U]=m.useState({payment_date:new Date().toISOString().slice(0,10),amount:"",currency:"USD",method:"CASH",reference:"",notes:""}),[M,ae]=m.useState({farm_id:"",site_id:"",customer_id:"",order_date:new Date().toISOString().slice(0,10),status:"DRAFT",currency:"USD",discount_total:0,tax_total:0,due_date:"",notes:"",items:[]});m.useEffect(()=>{xe()},[]);const xe=async()=>{try{const[$,te,J,je,Ue,Lt,ps,gs]=await Promise.all([O.get("/api/v1/sales-orders"),O.get("/api/v1/farms?per_page=1000"),O.get("/api/v1/sites?per_page=1000"),O.get("/api/v1/customers?per_page=1000"),O.get("/api/v1/products?per_page=1000"),O.get("/api/v1/production-cycles?per_page=1000"),O.get("/api/v1/bell-pepper-harvests?per_page=1000"),O.get("/api/v1/harvest-lots?per_page=1000")]),Ds=$.data?.data||$.data||[],or=te.data?.data||te.data||[],cr=J.data?.data||J.data||[],Ps=je.data?.data||je.data||[],dr=Ue.data?.data||Ue.data||[],Rs=Lt.data?.data||Lt.data||[],Gt=ps.data?.data||ps.data||[],It=gs.data?.data||gs.data||[];d(Array.isArray(Ds)?Ds:[]),_(Array.isArray(or)?or:[]),C(Array.isArray(cr)?cr:[]),A(Array.isArray(Ps)?Ps:[]),P(Array.isArray(dr)?dr:[]),j(Array.isArray(Rs)?Rs:[]),q(Array.isArray(Gt)?Gt:[]),p(Array.isArray(It)?It:[])}catch($){console.error("Error fetching data:",$),alert("Error loading data: "+($.response?.data?.message||$.message))}finally{i(!1)}},X=()=>{k(null);const $=u.length===1?u[0].id:"";ae({farm_id:$,site_id:"",customer_id:"",order_date:new Date().toISOString().slice(0,10),status:"DRAFT",currency:$&&u.find(te=>te.id===$)?.default_currency||"USD",discount_total:0,tax_total:0,due_date:"",notes:"",items:[]}),G(!0)},re=$=>{I($),U({payment_date:new Date().toISOString().slice(0,10),amount:"",currency:$.currency||"USD",method:"CASH",reference:"",notes:""}),y(!0)},oe=async $=>{$.preventDefault();try{await O.post(`/api/v1/sales-orders/${b.id}/payments`,ie),y(!1),xe()}catch(te){const J=te.response?.data?.message||te.response?.data?.errors||"Unknown error";alert("Error recording payment: "+(typeof J=="string"?J:JSON.stringify(J)))}},F=$=>{if($.status!=="DRAFT"){alert("Only DRAFT orders can be edited");return}k($),ae({farm_id:$.farm?.id||"",site_id:$.site?.id||"",customer_id:$.customer?.id||"",order_date:$.order_date||new Date().toISOString().slice(0,10),status:$.status||"DRAFT",currency:$.currency||"USD",discount_total:$.discount_total||0,tax_total:$.tax_total||0,due_date:$.due_date||"",notes:$.notes||"",items:$.items?.map(te=>({product_id:te.product?.id||"",production_cycle_id:te.production_cycle?.id||"",harvest_record_id:te.harvest_record?.id||"",harvest_lot_id:te.harvest_lot?.id||"",product_name:te.product_name||te.product?.name||"",quantity:te.quantity||"",unit:te.unit||"",unit_price:te.unit_price||"",discount_amount:te.discount_amount||0,quality_grade:te.quality_grade||"",notes:te.notes||""}))||[]}),G(!0)},Y=()=>{ae({...M,items:[...M.items,{product_id:"",production_cycle_id:"",harvest_record_id:"",harvest_lot_id:"",product_name:"",quantity:"",unit:"KG",unit_price:"",discount_amount:0,quality_grade:"",notes:""}]})},Z=$=>{ae({...M,items:M.items.filter((te,J)=>J!==$)})},N=($,te,J)=>{const je=[...M.items];if(je[$]={...je[$],[te]:J},te==="quantity"||te==="unit_price"||te==="discount_amount"){const Ue=parseFloat(je[$].quantity)||0,Lt=parseFloat(je[$].unit_price)||0,ps=parseFloat(je[$].discount_amount)||0;je[$].line_total=Ue*Lt-ps}ae({...M,items:je})},v=async $=>{if($.preventDefault(),M.items.length===0){alert("Please add at least one item");return}try{const te={...M,items:M.items.map(J=>({product_id:J.product_id||null,production_cycle_id:J.production_cycle_id||null,harvest_record_id:J.harvest_record_id||null,harvest_lot_id:J.harvest_lot_id||null,product_name:J.product_name||null,quantity:J.quantity,unit:J.unit,unit_price:J.unit_price,discount_amount:J.discount_amount||0,quality_grade:J.quality_grade||null,notes:J.notes||null}))};H?await O.patch(`/api/v1/sales-orders/${H.id}`,te):await O.post("/api/v1/sales-orders",te),G(!1),xe()}catch(te){const J=te.response?.data?.message||te.response?.data?.errors||"Unknown error";alert("Error saving order: "+(typeof J=="string"?J:JSON.stringify(J)))}},D=async($,te)=>{try{await O.post(`/api/v1/sales-orders/${$}/${te}`),xe()}catch(J){alert("Error: "+(J.response?.data?.message||J.message))}},V=async $=>{if(confirm("Delete this sales order?"))try{await O.delete(`/api/v1/sales-orders/${$}`),xe()}catch(te){alert("Error deleting order: "+(te.response?.data?.message||te.message))}},ne=$=>({DRAFT:"bg-gray-100 text-gray-800",CONFIRMED:"bg-blue-100 text-blue-800",DISPATCHED:"bg-green-100 text-green-800",INVOICED:"bg-purple-100 text-purple-800",PAID:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[$]||"bg-gray-100 text-gray-800";return h?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sales Orders"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage sales orders and track revenue"})]}),e.jsxs("button",{onClick:X,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Order"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No sales orders found"})}):o.map($=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:$.order_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$.customer?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$.order_date||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ne($.status)}`,children:$.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[$.currency," ",Number($.total_amount||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${$.payment_status==="PAID"?"bg-green-100 text-green-800":$.payment_status==="PART_PAID"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:$.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[$.status==="DRAFT"&&e.jsx("button",{onClick:()=>D($.id,"confirm"),className:"text-blue-600 hover:text-blue-900",title:"Confirm",children:e.jsx(Xr,{className:"h-4 w-4"})}),["CONFIRMED","INVOICED"].includes($.status)&&e.jsx("button",{onClick:()=>D($.id,"dispatch"),className:"text-green-600 hover:text-green-900",title:"Dispatch",children:e.jsx(Op,{className:"h-4 w-4"})}),["CONFIRMED","DISPATCHED"].includes($.status)&&e.jsx("button",{onClick:()=>D($.id,"invoice"),className:"text-purple-600 hover:text-purple-900",title:"Invoice",children:e.jsx(ru,{className:"h-4 w-4"})}),!["PAID","CANCELLED"].includes($.status)&&e.jsx("button",{onClick:()=>D($.id,"cancel"),className:"text-red-600 hover:text-red-900",title:"Cancel",children:e.jsx(Ze,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>F($),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),$.status==="DRAFT"&&e.jsx("button",{onClick:()=>V($.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})}),$.payment_status!=="PAID"&&e.jsx("button",{onClick:()=>re($),className:"text-green-600 hover:text-green-900",title:"Record Payment",children:e.jsx(Tt,{className:"h-4 w-4"})})]})})]},$.id))})]})}),w&&b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Record Payment"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:oe,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Payment Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:ie.payment_date,onChange:$=>U({...ie,payment_date:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:ie.amount,onChange:$=>U({...ie,amount:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Payment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:ie.method,onChange:$=>U({...ie,method:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"TRANSFER",children:"Transfer"}),e.jsx("option",{value:"POS",children:"POS"}),e.jsx("option",{value:"ONLINE",children:"Online"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reference"}),e.jsx("input",{type:"text",value:ie.reference,onChange:$=>U({...ie,reference:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:ie.notes,onChange:$=>U({...ie,notes:$.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Record Payment"})]})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:H?"Edit Sales Order":"New Sales Order"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[!H&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Farm ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:M.farm_id,onChange:$=>{const te=u.find(J=>J.id===parseInt($.target.value));ae({...M,farm_id:$.target.value,currency:te?.default_currency||"USD",site_id:""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site"}),e.jsxs("select",{value:M.site_id,onChange:$=>ae({...M,site_id:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Site"}),S.filter($=>!M.farm_id||$.farm_id===parseInt(M.farm_id)).map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Customer ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:M.customer_id,onChange:$=>ae({...M,customer_id:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Customer"}),T.map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Order Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:M.order_date,onChange:$=>ae({...M,order_date:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",value:M.currency,onChange:$=>ae({...M,currency:$.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",maxLength:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:M.due_date,onChange:$=>ae({...M,due_date:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Order Items"}),e.jsxs("button",{type:"button",onClick:Y,className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),M.items.map(($,te)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Item ",te+1]}),e.jsx("button",{type:"button",onClick:()=>Z(te),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product"}),e.jsxs("select",{value:$.product_id,onChange:J=>{const je=x.find(Ue=>Ue.id===parseInt(J.target.value));N(te,"product_id",J.target.value),je&&N(te,"product_name",je.name)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Product"}),x.map(J=>e.jsxs("option",{value:J.id,children:[J.name," (",J.code,")"]},J.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name (if no product selected)"}),e.jsx("input",{type:"text",value:$.product_name,onChange:J=>N(te,"product_name",J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Cycle"}),e.jsxs("select",{value:$.production_cycle_id,onChange:J=>N(te,"production_cycle_id",J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Cycle"}),f.map(J=>e.jsx("option",{value:J.id,children:J.production_cycle_code},J.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Record"}),e.jsxs("select",{value:$.harvest_record_id,onChange:J=>N(te,"harvest_record_id",J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Harvest"}),E.map(J=>e.jsxs("option",{value:J.id,children:[J.harvest_code," - ",J.harvest_date]},J.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Lot"}),e.jsxs("select",{value:$.harvest_lot_id,onChange:J=>N(te,"harvest_lot_id",J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Lot"}),c.map(J=>e.jsx("option",{value:J.id,children:J.code},J.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:$.quantity,onChange:J=>N(te,"quantity",J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:$.unit,onChange:J=>N(te,"unit",J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Unit Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:$.unit_price,onChange:J=>N(te,"unit_price",J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount"}),e.jsx("input",{type:"number",step:"0.01",value:$.discount_amount||0,onChange:J=>N(te,"discount_amount",J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Grade"}),e.jsx("input",{type:"text",value:$.quality_grade,onChange:J=>N(te,"quality_grade",J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:$.notes,onChange:J=>N(te,"notes",J.target.value),rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]},te))]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Total"}),e.jsx("input",{type:"number",step:"0.01",value:M.discount_total,onChange:$=>ae({...M,discount_total:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Total"}),e.jsx("input",{type:"number",step:"0.01",value:M.tax_total,onChange:$=>ae({...M,tax_total:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:M.notes,onChange:$=>ae({...M,notes:$.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>G(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[H?"Update":"Create"," Order"]})]})]})]})})]})}function _g(){const[o,d]=m.useState([]),[u,_]=m.useState(!0),[S,C]=m.useState(!1),[T,A]=m.useState(null),[x,P]=m.useState({name:"",customer_type:"",contact_name:"",email:"",phone:"",address_line1:"",address_line2:"",city:"",state:"",country:"",is_active:!0,notes:""});m.useEffect(()=>{f()},[]);const f=async()=>{try{const p=await O.get("/api/v1/customers?per_page=1000"),h=p.data?.data||p.data||[];d(Array.isArray(h)?h:[])}catch(p){console.error("Error fetching data:",p),alert("Error loading data: "+(p.response?.data?.message||p.message))}finally{_(!1)}},j=()=>{A(null),P({name:"",customer_type:"",contact_name:"",email:"",phone:"",address_line1:"",address_line2:"",city:"",state:"",country:"",is_active:!0,notes:""}),C(!0)},E=p=>{A(p),P({name:p.name||"",customer_type:p.customer_type||"",contact_name:p.contact_name||"",email:p.email||"",phone:p.phone||"",address_line1:p.address_line1||"",address_line2:p.address_line2||"",city:p.city||"",state:p.state||"",country:p.country||"",is_active:p.is_active!==!1,notes:p.notes||""}),C(!0)},q=async p=>{p.preventDefault();try{T?await O.patch(`/api/v1/customers/${T.id}`,x):await O.post("/api/v1/customers",x),C(!1),f()}catch(h){const i=h.response?.data?.message||h.response?.data?.errors||"Unknown error";alert("Error saving customer: "+(typeof i=="string"?i:JSON.stringify(i)))}},c=async p=>{if(confirm("Delete this customer?"))try{await O.delete(`/api/v1/customers/${p}`),f()}catch(h){alert("Error deleting customer: "+(h.response?.data?.message||h.message))}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Customers"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage customer information"})]}),e.jsxs("button",{onClick:j,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Customer"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No customers found"})}):o.map(p=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.customer_type||"N/A"}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[e.jsx("div",{children:p.email||"N/A"}),e.jsx("div",{children:p.phone||""})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:[p.city,p.state,p.country].filter(Boolean).join(", ")||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${p.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:p.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>E(p),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>c(p.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},p.id))})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:T?"Edit Customer":"New Customer"}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:q,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:p=>P({...x,name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Type"}),e.jsxs("select",{value:x.customer_type,onChange:p=>P({...x,customer_type:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"INDIVIDUAL",children:"Individual"}),e.jsx("option",{value:"BUSINESS",children:"Business"}),e.jsx("option",{value:"DISTRIBUTOR",children:"Distributor"}),e.jsx("option",{value:"RETAILER",children:"Retailer"}),e.jsx("option",{value:"EXPORTER",children:"Exporter"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name"}),e.jsx("input",{type:"text",value:x.contact_name,onChange:p=>P({...x,contact_name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:x.email,onChange:p=>P({...x,email:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"text",value:x.phone,onChange:p=>P({...x,phone:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1"}),e.jsx("input",{type:"text",value:x.address_line1,onChange:p=>P({...x,address_line1:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),e.jsx("input",{type:"text",value:x.address_line2,onChange:p=>P({...x,address_line2:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",value:x.city,onChange:p=>P({...x,city:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),e.jsx("input",{type:"text",value:x.state,onChange:p=>P({...x,state:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),e.jsx("input",{type:"text",value:x.country,onChange:p=>P({...x,country:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.is_active,onChange:p=>P({...x,is_active:p.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:x.notes,onChange:p=>P({...x,notes:p.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[T?"Update":"Create"," Customer"]})]})]})]})})]})}function wg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState(!0),[T,A]=m.useState(!1),[x,P]=m.useState(null),[f,j]=m.useState({farm_id:"",code:"",name:"",category:"",unit_of_measure:"KG",is_active:!0});m.useEffect(()=>{E()},[]);const E=async()=>{try{const[i,R]=await Promise.all([O.get("/api/v1/products?per_page=1000"),O.get("/api/v1/farms?per_page=1000")]),G=i.data?.data||i.data||[],w=R.data?.data||R.data||[];d(Array.isArray(G)?G:[]),_(Array.isArray(w)?w:[])}catch(i){console.error("Error fetching data:",i),alert("Error loading data: "+(i.response?.data?.message||i.message))}finally{C(!1)}},q=()=>{P(null),j({farm_id:"",code:"",name:"",category:"",unit_of_measure:"KG",is_active:!0}),A(!0)},c=i=>{P(i),j({farm_id:i.farm_id||"",code:i.code||"",name:i.name||"",category:i.category||"",unit_of_measure:i.unit_of_measure||"KG",is_active:i.is_active!==!1}),A(!0)},p=async i=>{i.preventDefault();try{x?await O.patch(`/api/v1/products/${x.id}`,f):await O.post("/api/v1/products",f),A(!1),E()}catch(R){const G=R.response?.data?.message||R.response?.data?.errors||"Unknown error";alert("Error saving product: "+(typeof G=="string"?G:JSON.stringify(G)))}},h=async i=>{if(confirm("Delete this product?"))try{await O.delete(`/api/v1/products/${i}`),E()}catch(R){alert("Error deleting product: "+(R.response?.data?.message||R.message))}};return S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Products"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage saleable products"})]}),e.jsxs("button",{onClick:q,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Product"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No products found"})}):o.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:i.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.category||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.unit_of_measure}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${i.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:i.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>c(i),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h(i.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},i.id))})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:x?"Edit Product":"New Product"}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[!x&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Farm ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:f.farm_id,onChange:i=>j({...f,farm_id:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:f.code,onChange:i=>j({...f,code:i.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:f.name,onChange:i=>j({...f,name:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx("input",{type:"text",value:f.category,onChange:i=>j({...f,category:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"VEGETABLE, FRUIT, etc."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Unit of Measure ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:f.unit_of_measure,onChange:i=>j({...f,unit_of_measure:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"KG, CRATE, etc."})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:f.is_active,onChange:i=>j({...f,is_active:i.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[x?"Update":"Create"," Product"]})]})]})]})})]})}function kg(){const[o,d]=m.useState(null),[u,_]=m.useState([]),[S,C]=m.useState(null),[T,A]=m.useState(!0),[x,P]=m.useState({from:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});m.useEffect(()=>{f()},[x]);const f=async()=>{A(!0);try{const[j,E,q]=await Promise.all([O.get(`/api/v1/kpis/sales-summary?from=${x.from}&to=${x.to}`),O.get(`/api/v1/kpis/production-profitability?from=${x.from}&to=${x.to}`),O.get(`/api/v1/kpis/operations-compliance?from=${x.from}&to=${x.to}`)]);d(j.data?.data||null),_(E.data?.data||[]),C(q.data?.data||null)}catch(j){console.error("Error fetching KPIs:",j),alert("Error loading KPIs: "+(j.response?.data?.message||j.message))}finally{A(!1)}};return T?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sales & Operations KPIs"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Key performance indicators and analytics"})]}),e.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:x.from,onChange:j=>P({...x,from:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:x.to,onChange:j=>P({...x,to:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),o&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Sales Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Number(o.total_revenue||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),e.jsx(Tt,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Number(o.paid_revenue||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),e.jsx(Tt,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Outstanding"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Number(o.outstanding_revenue||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),e.jsx(Tt,{className:"h-8 w-8 text-yellow-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.number_of_orders||0}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Avg: ",Number(o.average_order_value||0).toFixed(2)]})]}),e.jsx(Ke,{className:"h-8 w-8 text-blue-600"})]})})]}),o.top_customers&&o.top_customers.length>0&&e.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Customers"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.top_customers.map((j,E)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:Number(j.revenue||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]},E))})]})})]})]}),u.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Production Profitability"}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cycle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Greenhouse"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sales Revenue"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Qty Sold"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Harvested"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sell Through"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(j=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:j.production_cycle_code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.greenhouse?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:Number(j.total_sales_revenue||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:Number(j.total_quantity_sold||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:Number(j.harvest_quantity_total||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${j.sell_through_rate>=80?"bg-green-100 text-green-800":j.sell_through_rate>=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[Number(j.sell_through_rate||0).toFixed(1),"%"]})})]},j.production_cycle_id))})]})})]}),S&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Operations Compliance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Daily Log Compliance"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Number(S.daily_log_compliance_rate||0).toFixed(1),"%"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[S.submitted_logs||0," / ",S.expected_logs||0," logs"]})]}),e.jsx(fn,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"On-Time Submission"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Number(S.on_time_submission_rate||0).toFixed(1),"%"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[S.on_time_submissions||0," on-time"]})]}),e.jsx(ot,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Missing Logs"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:S.missing_log_count||0})]}),e.jsx(ot,{className:"h-8 w-8 text-red-600"})]})})]})]})]})}function Sg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState(!0),[T,A]=m.useState(!1),[x,P]=m.useState(!1),[f,j]=m.useState(!1),[E,q]=m.useState(null),[c,p]=m.useState(null),[h,i]=m.useState([]),[R,G]=m.useState({production_cycle_id:"",harvest_date:new Date().toISOString().slice(0,10),notes:""}),[w,y]=m.useState({grade:"A",crate_count:1,total_weight_kg:"",storage_location_id:"",notes:""}),[b,I]=m.useState([]),[H,k]=m.useState({production_cycle_id:"",greenhouse_id:"",from:"",to:"",status:""});m.useEffect(()=>{ie(),M()},[]),m.useEffect(()=>{U()},[H]);const ie=async()=>{try{const[D]=await Promise.all([O.get("/api/v1/production-cycles?per_page=1000")]),V=D.data?.data||D.data||[],ne=Array.isArray(V)?V.filter($=>{if(!$)return!1;const te=$.cycle_status||$.status;return["ACTIVE","HARVESTING"].includes(te)}):[];_(ne)}catch(D){console.error("Error fetching data:",D),console.error("Error response:",D.response),alert("Error loading data: "+(D.response?.data?.message||D.message))}finally{C(!1)}},U=async()=>{try{const D=new URLSearchParams;H.production_cycle_id&&D.append("production_cycle_id",H.production_cycle_id),H.greenhouse_id&&D.append("greenhouse_id",H.greenhouse_id),H.from&&D.append("from",H.from),H.to&&D.append("to",H.to),H.status&&D.append("status",H.status);const V=await O.get(`/api/v1/harvest-records?${D.toString()}`),ne=V.data?.data||V.data||[];d(Array.isArray(ne)?ne:[])}catch(D){console.error("Error fetching records:",D),alert("Error loading records: "+(D.response?.data?.message||D.message))}},M=async()=>{try{const D=await O.get("/api/v1/inventory-locations"),V=D.data?.data||D.data||[];I(Array.isArray(V)?V:[])}catch(D){console.error("Error fetching storage locations:",D)}},ae=async()=>{await ie(),q(null),G({production_cycle_id:"",harvest_date:new Date().toISOString().slice(0,10),notes:""}),A(!0)},xe=D=>{if(D.status!=="DRAFT"){alert("Only DRAFT records can be edited");return}q(D),G({production_cycle_id:D.production_cycle?.id||"",harvest_date:D.harvest_date||new Date().toISOString().slice(0,10),notes:D.notes||""}),A(!0)},X=async D=>{D.preventDefault();try{E?await O.patch(`/api/v1/harvest-records/${E.id}`,R):await O.post("/api/v1/harvest-records",R),A(!1),U()}catch(V){const ne=V.response?.data?.message||V.response?.data?.errors||"Unknown error";alert("Error saving record: "+(typeof ne=="string"?ne:JSON.stringify(ne)))}},re=async(D,V)=>{try{await O.post(`/api/v1/harvest-records/${D}/${V}`),U()}catch(ne){alert("Error: "+(ne.response?.data?.message||ne.message))}},oe=async D=>{if(confirm("Delete this harvest record?"))try{await O.delete(`/api/v1/harvest-records/${D}`),U()}catch(V){alert("Error deleting record: "+(V.response?.data?.message||V.message))}},F=async D=>{p(D);try{const V=await O.get(`/api/v1/harvest-records/${D.id}`);i(V.data.data?.crates||[]),j(!0)}catch(V){console.error("Error fetching record details:",V),alert("Error loading record details: "+(V.response?.data?.message||V.message))}},Y=D=>{p(D),y({grade:"A",crate_count:1,total_weight_kg:"",storage_location_id:"",notes:""}),P(!0)},Z=async D=>{D.preventDefault();try{const V={grade:w.grade,crate_count:parseInt(w.crate_count)||1,total_weight_kg:parseFloat(w.total_weight_kg)||0,storage_location_id:w.storage_location_id||null,notes:w.notes||""};if(await O.post(`/api/v1/harvest-records/${c.id}/crates`,V),P(!1),f&&c){const ne=await O.get(`/api/v1/harvest-records/${c.id}`);i(ne.data.data?.crates||[])}U()}catch(V){const ne=V.response?.data?.message||V.response?.data?.errors||"Unknown error";alert("Error adding crate: "+(typeof ne=="string"?ne:JSON.stringify(ne)))}},N=async D=>{if(confirm("Delete this crate?"))try{if(await O.delete(`/api/v1/harvest-crates/${D}`),f&&c){const V=await O.get(`/api/v1/harvest-records/${c.id}`);i(V.data.data?.crates||[])}U()}catch(V){alert("Error deleting crate: "+(V.response?.data?.message||V.message))}},v=D=>({DRAFT:"bg-gray-100 text-gray-800",SUBMITTED:"bg-blue-100 text-blue-800",APPROVED:"bg-green-100 text-green-800"})[D]||"bg-gray-100 text-gray-800";return S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Harvest Records"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Record bell pepper harvests with grade breakdown"})]}),e.jsxs("button",{onClick:ae,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Harvest Record"]})]}),e.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Production Cycle"}),e.jsxs("select",{value:H.production_cycle_id,onChange:D=>k({...H,production_cycle_id:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Cycles"}),u.map(D=>e.jsx("option",{value:D.id,children:D.production_cycle_code},D.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:H.from,onChange:D=>k({...H,from:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:H.to,onChange:D=>k({...H,to:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:H.status,onChange:D=>k({...H,status:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"DRAFT",children:"Draft"}),e.jsx("option",{value:"SUBMITTED",children:"Submitted"}),e.jsx("option",{value:"APPROVED",children:"Approved"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>k({production_cycle_id:"",greenhouse_id:"",from:"",to:"",status:""}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Clear Filters"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Production Cycle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Greenhouse"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade A (kg)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade B (kg)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade C (kg)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total (kg)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crates"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"px-6 py-4 text-center text-gray-500",children:"No harvest records found"})}):o.map(D=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.harvest_date||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.production_cycle?.production_cycle_code||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D.greenhouse?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(D.totals?.a_kg||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(D.totals?.b_kg||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(D.totals?.c_kg||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Number(D.totals?.total_kg||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D.totals?.crate_count_total||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${v(D.status)}`,children:D.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>F(D),className:"text-blue-600 hover:text-blue-900",title:"View Details & Crates",children:e.jsx(Ke,{className:"h-4 w-4"})}),D.status==="DRAFT"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Y(D),className:"text-green-600 hover:text-green-900",title:"Add Crate",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>re(D.id,"submit"),className:"text-green-600 hover:text-green-900",title:"Submit",children:e.jsx(Xr,{className:"h-4 w-4"})})]}),D.status==="SUBMITTED"&&e.jsx("button",{onClick:()=>re(D.id,"approve"),className:"text-green-600 hover:text-green-900",title:"Approve",children:e.jsx(Xr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>xe(D),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),D.status==="DRAFT"&&e.jsx("button",{onClick:()=>oe(D.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},D.id))})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:E?"Edit Harvest Record":"New Harvest Record"}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:X,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Production Cycle ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:R.production_cycle_id,onChange:D=>G({...R,production_cycle_id:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!!E||u.length===0,children:[e.jsx("option",{value:"",children:u.length===0?"No active production cycles available":"Select Production Cycle"}),u.map(D=>e.jsxs("option",{value:D.id,children:[D.production_cycle_code," - ",D.greenhouse?.name||"N/A"," (",D.cycle_status,")"]},D.id))]}),u.length===0&&e.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"No active or harvesting production cycles found. Please start a production cycle first."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Harvest Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),(()=>{const D=u.find($=>$.id===parseInt(R.production_cycle_id));let V=null;if(D&&D.planting_date){const $=new Date(D.planting_date),te=new Date($);te.setDate(te.getDate()+40),V=te.toISOString().split("T")[0]}const ne=V&&R.harvest_date&&new Date(R.harvest_date)<new Date(V);return e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",required:!0,value:R.harvest_date,min:V||void 0,onChange:$=>G({...R,harvest_date:$.target.value}),className:`w-full px-3 py-2 border rounded-lg ${ne?"border-red-500":"border-gray-300"}`}),D&&D.planting_date&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Minimum harvest date: ",V," (40 days after planting on ",D.planting_date,")"]}),ne&&e.jsxs("p",{className:"mt-1 text-xs text-red-600",children:["Harvest date must be at least 40 days after the planting date (",D.planting_date,")"]})]})})()]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:R.notes,onChange:D=>G({...R,notes:D.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),!E&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," After creating the harvest record, click the ",e.jsx("strong",{children:"Package icon"})," to view details and add crates with grade breakdown (A/B/C) and weights."]})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[E?"Update":"Create"," Record"]})]})]})]})}),f&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Harvest Record Details - ",c.harvest_date]}),e.jsx("button",{onClick:()=>{j(!1),p(null),i([])},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Production Cycle"}),e.jsx("p",{className:"text-lg font-semibold",children:c.production_cycle?.production_cycle_code||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Greenhouse"}),e.jsx("p",{className:"text-lg font-semibold",children:c.greenhouse?.name||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${v(c.status)}`,children:c.status})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Crates (",h.length,")"]}),c.status==="DRAFT"&&e.jsxs("button",{onClick:()=>Y(c),className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Add Crate"]})]}),h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ke,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No crates recorded yet"}),c.status==="DRAFT"&&e.jsx("button",{onClick:()=>Y(c),className:"mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add First Crate"})]}):e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crate #"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Grade"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Weight (kg)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Weighed At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Label Code"}),c.status==="DRAFT"&&e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(D=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:D.crate_number}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${D.grade==="A"?"bg-green-100 text-green-800":D.grade==="B"?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"}`,children:["Grade ",D.grade]})}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:[Number(D.weight_kg||0).toFixed(2)," kg"]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:D.weighed_at?new Date(D.weighed_at).toLocaleString():"N/A"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:D.label_code||"-"}),c.status==="DRAFT"&&e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm",children:e.jsx("button",{onClick:()=>N(D.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})})]},D.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Grade A Total"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[Number(c.totals?.a_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.totals?.crate_count_a||0," crates"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Grade B Total"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[Number(c.totals?.b_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.totals?.crate_count_b||0," crates"]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Grade C Total"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[Number(c.totals?.c_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.totals?.crate_count_c||0," crates"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Grand Total"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[Number(c.totals?.total_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.totals?.crate_count_total||0," crates"]})]})]}),c.notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-600",children:c.notes})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx("button",{onClick:()=>{j(!1),p(null),i([])},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Close"})})]})]})}),x&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add Crate"}),e.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:Z,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Grade ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:w.grade,onChange:D=>y({...w,grade:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"A",children:"Grade A"}),e.jsx("option",{value:"B",children:"Grade B"}),e.jsx("option",{value:"C",children:"Grade C"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Crate Count ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"1",required:!0,value:w.crate_count,onChange:D=>y({...w,crate_count:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Number of crates"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the number of crates of this grade"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Total Weight (kg) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",required:!0,value:w.total_weight_kg,onChange:D=>y({...w,total_weight_kg:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Total weight for all crates"}),w.crate_count>1&&w.total_weight_kg&&e.jsxs("p",{className:"mt-1 text-xs text-blue-600",children:["Weight per crate: ",(parseFloat(w.total_weight_kg)/parseInt(w.crate_count)).toFixed(2)," kg"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Storage Location ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:w.storage_location_id,onChange:D=>y({...w,storage_location_id:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Storage Location"}),b.map(D=>e.jsxs("option",{value:D.id,children:[D.name," (",D.type,")"]},D.id))]}),e.jsxs("p",{className:"mt-1 text-xs text-amber-600",children:[e.jsx("strong",{children:"Required:"})," All harvested items must be allocated to a storage location if not immediately sold."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:w.notes,onChange:D=>y({...w,notes:D.target.value}),rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:w.crate_count>1?`Add ${w.crate_count} Crates`:"Add Crate"})]})]})]})})]})}function Cg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState(!0),[T,A]=m.useState(!1),[x,P]=m.useState(null),[f,j]=m.useState({farm_id:"",season_number:"",name:"",start_date:"",end_date:"",status:"PLANNED",notes:""});m.useEffect(()=>{E()},[]),m.useEffect(()=>{if(f.season_number&&f.start_date){const w=new Date(f.start_date).getFullYear(),y=`${f.season_number} - ${w}`;j(b=>({...b,name:y}))}},[f.season_number,f.start_date]);const E=async()=>{try{const[w,y]=await Promise.all([O.get("/api/v1/seasons?per_page=1000"),O.get("/api/v1/farms?per_page=1000")]),b=w.data?.data||w.data||[],I=y.data?.data||y.data||[];d(Array.isArray(b)?b:[]),_(Array.isArray(I)?I:[])}catch(w){console.error("Error fetching data:",w),alert("Error loading data: "+(w.response?.data?.message||w.message))}finally{C(!1)}},q=()=>{P(null),j({farm_id:"",season_number:"",name:"",start_date:"",end_date:"",status:"PLANNED",notes:""}),A(!0)},c=w=>{P(w);let y="";if(w.name){const b=w.name.match(/^(Season\s+[12])/i);b&&(y=b[1])}j({farm_id:w.farm_id||"",season_number:y,name:w.name||"",start_date:w.start_date?w.start_date.split("T")[0]:"",end_date:w.end_date?w.end_date.split("T")[0]:"",status:w.status||"PLANNED",notes:w.notes||""}),A(!0)},p=async w=>{w.preventDefault();try{x?await O.patch(`/api/v1/seasons/${x.id}`,f):await O.post("/api/v1/seasons",f),A(!1),E()}catch(y){const b=y.response?.data?.message||y.response?.data?.errors||"Unknown error";alert("Error saving season: "+(typeof b=="string"?b:JSON.stringify(b)))}},h=async w=>{if(confirm("Delete this season?"))try{await O.delete(`/api/v1/seasons/${w}`),E()}catch(y){alert("Error deleting season: "+(y.response?.data?.message||y.message))}},i=(w,y)=>{if(!w||!y)return"N/A";const b=new Date(w).toLocaleDateString(),I=new Date(y).toLocaleDateString();return`${b} - ${I}`},R=w=>({PLANNED:"bg-blue-100 text-blue-800",ACTIVE:"bg-green-100 text-green-800",COMPLETED:"bg-gray-100 text-gray-800",CANCELLED:"bg-red-100 text-red-800"})[w]||"bg-gray-100 text-gray-800",G=w=>{const y=u.find(b=>b.id===w);return y?y.name:"N/A"};return S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Seasons"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage farming seasons"})]}),e.jsxs("button",{onClick:q,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Season"]})]}),e.jsx("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Tip:"})," Typically, there are 2 seasons within 12 months. Note that the two seasons may not fall in the same calendar year."]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Range"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No seasons found"})}):o.map(w=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G(w.farm_id)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:i(w.start_date,w.end_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${R(w.status)}`,children:w.status||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>c(w),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h(w.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},w.id))})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:x?"Edit Season":"New Season"}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Farm ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:f.farm_id,onChange:w=>j({...f,farm_id:w.target.value}),disabled:!!x,className:`w-full px-3 py-2 border border-gray-300 rounded-lg ${x?"bg-gray-100 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(w=>e.jsx("option",{value:w.id,children:w.name},w.id))]}),x&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Farm cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Season Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:f.season_number,onChange:w=>j({...f,season_number:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Season"}),e.jsx("option",{value:"Season 1",children:"Season 1"}),e.jsx("option",{value:"Season 2",children:"Season 2"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Season Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:f.name,onChange:w=>j({...f,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",placeholder:"Auto-generated from Season Number and Start Date",readOnly:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Auto-generated from Season Number and Start Date year"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:f.start_date,onChange:w=>j({...f,start_date:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["End Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:f.end_date,min:f.start_date||void 0,onChange:w=>j({...f,end_date:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:f.status,onChange:w=>j({...f,status:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"PLANNED",children:"Planned"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:f.notes,onChange:w=>j({...f,notes:w.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Optional notes about this season"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[x?"Update":"Create"," Season"]})]})]})]})})]})}function Eg(){const[o,d]=m.useState([]),[u,_]=m.useState([]),[S,C]=m.useState([]),[T,A]=m.useState([]),[x,P]=m.useState(!0),[f,j]=m.useState({farm_id:"",greenhouse_id:"",grade:"",storage_location_id:"",show_unassigned_only:!1});m.useEffect(()=>{E(),q(),p()},[]),m.useEffect(()=>{f.farm_id?c(f.farm_id):C([])},[f.farm_id]),m.useEffect(()=>{E()},[f]);const E=async()=>{try{const y=new URLSearchParams;f.farm_id&&y.append("farm_id",f.farm_id),f.greenhouse_id&&y.append("greenhouse_id",f.greenhouse_id),f.grade&&y.append("grade",f.grade),f.storage_location_id&&y.append("storage_location_id",f.storage_location_id),f.show_unassigned_only&&y.append("show_unassigned_only","1");const I=(await O.get(`/api/v1/bell-pepper-inventory?${y.toString()}`)).data.data||[];d(Array.isArray(I)?I:[])}catch(y){console.error("Error fetching inventory:",y)}finally{P(!1)}},q=async()=>{try{const y=await O.get("/api/v1/farms"),b=y.data.data||y.data;_(Array.isArray(b)?b:[])}catch(y){console.error("Error fetching farms:",y)}},c=async y=>{try{const b=await O.get(`/api/v1/greenhouses?farm_id=${y}`),I=b.data.data||b.data;C(Array.isArray(I)?I:[])}catch(b){console.error("Error fetching greenhouses:",b)}},p=async()=>{try{const y=await O.get("/api/v1/inventory-locations"),b=y.data.data||y.data;A(Array.isArray(b)?b:[])}catch(y){console.error("Error fetching storage locations:",y)}};if(x)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const h=o.reduce((y,b)=>y+(b.available_weight_kg||0),0),i=o.reduce((y,b)=>y+(b.crate_count||0),0),R=o.filter(y=>!y.storage_location).length,G=o.filter(y=>!y.storage_location).reduce((y,b)=>y+(b.available_weight_kg||0),0),w=o.reduce((y,b)=>{const I=b.grade||"Unknown";return y[I]||(y[I]={weight:0,crates:0}),y[I].weight+=b.available_weight_kg||0,y[I].crates+=b.crate_count||0,y},{});return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bell Pepper Inventory"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track harvested bell peppers that are not yet sold"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Stock"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[h.toFixed(2)," kg"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Crates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i})]}),e.jsxs("div",{className:`rounded-lg shadow p-6 ${R>0?"bg-red-50 border-2 border-red-300":"bg-white"}`,children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Unassigned Location"}),e.jsxs("p",{className:`text-2xl font-bold ${R>0?"text-red-600":"text-gray-900"}`,children:[G.toFixed(2)," kg (",R," items)"]}),R>0&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Action Required"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Grade A"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[w.A?.weight.toFixed(2)||"0.00"," kg (",w.A?.crates||0," crates)"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Grade B"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[w.B?.weight.toFixed(2)||"0.00"," kg (",w.B?.crates||0," crates)"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4 flex-wrap",children:[e.jsx(au,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:f.farm_id,onChange:y=>j({...f,farm_id:y.target.value,greenhouse_id:""}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Farms"}),u.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]}),e.jsxs("select",{value:f.greenhouse_id,onChange:y=>j({...f,greenhouse_id:y.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",disabled:!f.farm_id,children:[e.jsx("option",{value:"",children:"All Greenhouses"}),S.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]}),e.jsxs("select",{value:f.grade,onChange:y=>j({...f,grade:y.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Grades"}),e.jsx("option",{value:"A",children:"Grade A"}),e.jsx("option",{value:"B",children:"Grade B"}),e.jsx("option",{value:"C",children:"Grade C"})]}),e.jsxs("select",{value:f.storage_location_id,onChange:y=>j({...f,storage_location_id:y.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Locations"}),e.jsx("option",{value:"unassigned",children:"Unassigned (No Location)"}),T.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:f.show_unassigned_only,onChange:y=>j({...f,show_unassigned_only:y.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show unassigned only"})]})]})}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Ke,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory items"}),e.jsx("p",{className:"text-gray-500",children:"Inventory will appear here after harvest records are created"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Harvest Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Production Cycle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Greenhouse"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Grade"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crates"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Weight (kg)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Storage Location"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map((y,b)=>e.jsxs("tr",{className:`hover:bg-gray-50 ${y.storage_location?"":"bg-red-50"}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.harvest_date?new Date(y.harvest_date).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.production_cycle?.code||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.greenhouse?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded ${y.grade==="A"?"bg-green-100 text-green-800":y.grade==="B"?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"}`,children:["Grade ",y.grade]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.crate_count}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[y.available_weight_kg.toFixed(2)," kg"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.storage_location?e.jsxs("div",{className:"flex items-center",children:[e.jsx(xn,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsx("span",{children:y.storage_location.name})]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(xn,{className:"h-4 w-4 text-red-400 mr-1"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Not assigned - Action Required"})]})})]},`${y.harvest_record_id}-${y.grade}-${y.storage_location?.id||"none"}-${b}`))})]})})})]})}function Ag({children:o}){const{user:d,logout:u}=hn(),_=ir(),S=Zr(),[C,T]=m.useState(!1),[A,x]=m.useState([]),[P,f]=m.useState(!1),j=()=>{const H=_.pathname;return{gari:H.startsWith("/gari"),bellPepper:H.startsWith("/bell-pepper"),tomatoes:H.startsWith("/tomatoes"),habaneros:H.startsWith("/habaneros"),sales:H.startsWith("/sales"),livestock:!1}},[E,q]=m.useState(j());m.useEffect(()=>{const H=_.pathname;q(k=>({...k,gari:H.startsWith("/gari")?!0:k.gari,bellPepper:H.startsWith("/bell-pepper")?!0:k.bellPepper,tomatoes:H.startsWith("/tomatoes")?!0:k.tomatoes,habaneros:H.startsWith("/habaneros")?!0:k.habaneros,sales:H.startsWith("/sales")?!0:k.sales}))},[_.pathname]),m.useEffect(()=>{if(d){const H=d.permissions?.map(k=>k.name)||d.roles?.flatMap(k=>k.permissions?.map(ie=>ie.name)||[])||[];x(H)}},[d]);const c=()=>{u(),S("/login")},p=H=>{q(k=>({...k,[H]:!k[H]}))},h=[{name:"Bell Pepper",key:"bellPepper",icon:dn,items:[{name:"Production Cycles",href:"/bell-pepper/production-cycles",icon:yi},{name:"Daily Logs",href:"/bell-pepper/daily-logs",icon:ru},{name:"Harvest Records",href:"/bell-pepper/harvest-records",icon:Ke},{name:"Inventory",href:"/bell-pepper-inventory",icon:Ke},{name:"KPIs",href:"/bell-pepper-kpis",icon:ot}]},{name:"Habaneros",key:"habaneros",icon:dn,items:[{name:"Production",href:"/habaneros-production",icon:xt},{name:"Inventory",href:"/habaneros-inventory",icon:Ke},{name:"KPIs",href:"/habaneros-kpis",icon:ot}]},{name:"Tomatoes",key:"tomatoes",icon:dn,items:[{name:"Production",href:"/tomatoes-production",icon:xt},{name:"Inventory",href:"/tomatoes-inventory",icon:Ke},{name:"KPIs",href:"/tomatoes-kpis",icon:ot}]},{name:"Gari",key:"gari",icon:xt,items:[{name:"Production Batches",href:"/gari-production-batches",icon:xt},{name:"Inventory",href:"/gari-inventory",icon:Ke},{name:"KPIs",href:"/gari-kpis",icon:ot},{name:"Waste & Losses",href:"/gari-waste-losses",icon:ot},{name:"Packaging Materials",href:"/packaging-materials",icon:Ke}]},{name:"Sales",key:"sales",icon:pn,items:[{name:"Sales Orders",href:"/sales/orders",icon:pn},{name:"Customers",href:"/sales/customers",icon:un},{name:"Products",href:"/sales/products",icon:Ke},{name:"KPIs",href:"/sales/kpis",icon:ot}]},{name:"Reports",items:[{name:"Dashboard",href:"/",icon:Pp},{name:"Consolidated Expenses",href:"/reports/consolidated-expenses",icon:fn},{name:"Staff Allocation",href:"/reports/staff-allocation",icon:un}]},{name:"Admin Settings",items:[{name:"Farms",href:"/farms",icon:ar},{name:"Sites",href:"/admin/sites",icon:Up},{name:"Farm Zones",href:"/admin/farm-zones",icon:Ap},{name:"Factories",href:"/admin/factories",icon:$d},{name:"Borehole Management",href:"/admin/boreholes",icon:xt},{name:"Greenhouse Management",href:"/admin/greenhouses",icon:xt},{name:"Scale Devices",href:"/scale-devices",icon:vi},{name:"Label Templates",href:"/label-templates",icon:ji},{name:"Crops",href:"/admin/crops",icon:dn},{name:"Worker Job Roles",href:"/admin/worker-job-roles",icon:bp},{name:"Assets",href:"/admin/assets",icon:qp},{name:"Asset Categories",href:"/admin/asset-categories",icon:Ep},{name:"Site Types",href:"/admin/site-types",icon:$d},{name:"Activity Types",href:"/admin/activity-types",icon:Mp},{name:"Seasons",href:"/admin/seasons",icon:yi},{name:"Admin Zones",href:"/admin/admin-zones",icon:Dp},{name:"Roles",href:"/admin/roles",icon:bi},{name:"Users",href:"/admin/users",icon:un}]}],i=(H,k,ie="view")=>{if(d?.roles?.some(M=>M.name==="ADMIN"))return!0;const U=[H,k,ie].filter(Boolean).join(".");return A.includes(U)},R=(H,k)=>i(H,k,"view"),G=H=>H==="/"?_.pathname==="/":_.pathname.startsWith(H),w=H=>H.items.some(k=>G(k.href)),y=H=>({"/":{menu:"reports",submenu:"dashboard"},"/farms":{menu:"admin",submenu:"farms"},"/scale-devices":{menu:"admin",submenu:"scale-devices"},"/label-templates":{menu:"admin",submenu:"label-templates"},"/gari-production-batches":{menu:"gari",submenu:"production-batches"},"/gari-inventory":{menu:"gari",submenu:"inventory"},"/gari-kpis":{menu:"gari",submenu:"kpis"},"/gari-waste-losses":{menu:"gari",submenu:"waste-losses"},"/packaging-materials":{menu:"gari",submenu:"packaging-materials"},"/admin/boreholes":{menu:"admin",submenu:"boreholes"},"/admin/greenhouses":{menu:"admin",submenu:"greenhouses"},"/bell-pepper/production-cycles":{menu:"bell-pepper",submenu:"production-cycles"},"/bell-pepper/daily-logs":{menu:"bell-pepper",submenu:"daily-logs"},"/bell-pepper/harvest-records":{menu:"bell-pepper",submenu:"harvest-records"},"/bell-pepper-inventory":{menu:"bell-pepper",submenu:"inventory"},"/bell-pepper-kpis":{menu:"bell-pepper",submenu:"kpis"},"/tomatoes-production":{menu:"tomatoes",submenu:"production"},"/tomatoes-inventory":{menu:"tomatoes",submenu:"inventory"},"/tomatoes-kpis":{menu:"tomatoes",submenu:"kpis"},"/habaneros-production":{menu:"habaneros",submenu:"production"},"/habaneros-inventory":{menu:"habaneros",submenu:"inventory"},"/habaneros-kpis":{menu:"habaneros",submenu:"kpis"},"/reports/consolidated-expenses":{menu:"reports",submenu:"consolidated-expenses"},"/reports/staff-allocation":{menu:"reports",submenu:"staff-allocation"},"/sales/orders":{menu:"sales",submenu:"orders"},"/sales/customers":{menu:"sales",submenu:"customers"},"/sales/products":{menu:"sales",submenu:"products"},"/sales/kpis":{menu:"sales",submenu:"kpis"},"/admin/admin-zones":{menu:"admin",submenu:"admin-zones"},"/admin/sites":{menu:"admin",submenu:"sites"},"/admin/farm-zones":{menu:"admin",submenu:"farm-zones"},"/admin/factories":{menu:"admin",submenu:"factories"},"/admin/crops":{menu:"admin",submenu:"crops"},"/admin/worker-job-roles":{menu:"admin",submenu:"worker-job-roles"},"/admin/assets":{menu:"admin",submenu:"assets"},"/admin/asset-categories":{menu:"admin",submenu:"asset-categories"},"/admin/site-types":{menu:"admin",submenu:"site-types"},"/admin/activity-types":{menu:"admin",submenu:"activity-types"},"/admin/seasons":{menu:"admin",submenu:"seasons"},"/admin/roles":{menu:"admin",submenu:"roles"},"/admin/users":{menu:"admin",submenu:"users"}})[H]||{menu:null,submenu:null},b=H=>{const{menu:k,submenu:ie}=y(H.href);if(!R(k,ie))return null;const U=G(H.href);return e.jsxs(bt,{to:H.href,onClick:()=>T(!1),className:`flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors ml-4 ${U?"bg-green-50 text-green-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(H.icon,{className:"mr-3 h-4 w-4"}),H.name]},H.name)},I=H=>{if(H.key){const k=E[H.key]||!1,ie=w(H);return e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:U=>{U.preventDefault(),U.stopPropagation(),p(H.key)},className:`w-full flex items-center justify-between px-4 py-2.5 text-sm font-semibold rounded-lg transition-colors ${ie?"bg-green-50 text-green-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H.icon,{className:"mr-3 h-5 w-5"}),H.name]}),k?e.jsx(_p,{className:"h-4 w-4"}):e.jsx(wp,{className:"h-4 w-4"})]}),k&&e.jsx("div",{className:"mt-1 space-y-1",children:H.items.map(b)})]},H.name)}else return e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:H.name}),e.jsx("div",{className:"mt-1 space-y-1",children:H.items.map(b)})]},H.name)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:e.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[e.jsxs("div",{className:"flex items-center flex-shrink-0 px-4 py-4 border-b border-gray-200 flex-nowrap",children:[P?e.jsx(ar,{className:"h-8 w-8 text-green-600 flex-shrink-0"}):e.jsx("img",{src:"/images/ogenki-logo.png",alt:"Ogenki Farms",className:"h-12 w-auto object-contain max-w-[120px] flex-shrink-0",onError:()=>f(!0)}),e.jsx("h1",{className:"ml-2 text-sm font-bold text-gray-900 whitespace-nowrap truncate",children:"Ogenki Farms"})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-2 overflow-y-auto",children:h.map(I)})}),e.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 font-medium",children:d?.email?.charAt(0).toUpperCase()||"U"})})}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:d?.name||d?.email||"User"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:d?.email})]}),e.jsx("button",{onClick:c,className:"ml-2 p-2 text-gray-400 hover:text-gray-600",title:"Logout",children:e.jsx(Bd,{className:"h-5 w-5"})})]})})]})}),e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center flex-nowrap flex-1 min-w-0",children:[P?e.jsx(ar,{className:"h-6 w-6 text-green-600 flex-shrink-0"}):e.jsx("img",{src:"/images/ogenki-logo.png",alt:"Ogenki Farms",className:"h-10 w-auto object-contain max-w-[100px] flex-shrink-0",onError:()=>f(!0)}),e.jsx("h1",{className:"ml-2 text-sm font-bold text-gray-900 whitespace-nowrap truncate",children:"Ogenki Farms"})]}),e.jsx("button",{onClick:()=>T(!C),className:"p-2 text-gray-400 hover:text-gray-600",children:C?e.jsx(Ze,{className:"h-6 w-6"}):e.jsx(Rp,{className:"h-6 w-6"})})]}),C&&e.jsx("div",{className:"bg-white border-b border-gray-200 max-h-[calc(100vh-64px)] overflow-y-auto",children:e.jsxs("nav",{className:"px-2 py-2 space-y-2",children:[h.map(I),e.jsxs("button",{onClick:c,className:"w-full flex items-center px-4 py-3 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg",children:[e.jsx(Bd,{className:"mr-3 h-5 w-5"}),"Logout"]})]})})]}),e.jsx("div",{className:"md:pl-64",children:e.jsx("main",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o})})})]})}function Dg({children:o}){const{user:d,loading:u}=hn();return u?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):d?o:e.jsx(rr,{to:"/login"})}function Pg(){const{user:o,loading:d}=hn();if(d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})});if(!o)return e.jsx(rr,{to:"/login"});const u=o?.roles?.some(C=>C.name==="ADMIN"),_=o.permissions?.map(C=>C.name)||o.roles?.flatMap(C=>C.permissions?.map(T=>T.name)||[])||[];return u||_.includes("reports.dashboard.view")?e.jsx($p,{}):_.includes("bell-pepper.harvests.view")?e.jsx(rr,{to:"/bell-pepper-harvests",replace:!0}):_.includes("bell-pepper.inventory.view")?e.jsx(rr,{to:"/bell-pepper-inventory",replace:!0}):_.includes("gari.production-batches.view")?e.jsx(rr,{to:"/gari-production-batches",replace:!0}):_.includes("gari.inventory.view")?e.jsx(rr,{to:"/gari-inventory",replace:!0}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-yellow-800",children:"No Access"}),e.jsx("p",{className:"text-yellow-700",children:"You don't have access to any pages. Please contact your administrator."})]})})}function Rg(){return e.jsx(gp,{children:e.jsxs(Fd,{children:[e.jsx(ye,{path:"/login",element:e.jsx(zp,{})}),e.jsx(ye,{path:"/*",element:e.jsx(Dg,{children:e.jsx(Ag,{children:e.jsxs(Fd,{children:[e.jsx(ye,{path:"/",element:e.jsx(Pg,{})}),e.jsx(ye,{path:"/farms",element:e.jsx(Hp,{})}),e.jsx(ye,{path:"/farms/:id",element:e.jsx(Gp,{})}),e.jsx(ye,{path:"/scale-devices",element:e.jsx(Vp,{})}),e.jsx(ye,{path:"/label-templates",element:e.jsx(Wp,{})}),e.jsx(ye,{path:"/gari-production-batches",element:e.jsx(Kp,{})}),e.jsx(ye,{path:"/gari-production-batches/:id",element:e.jsx(Qp,{})}),e.jsx(ye,{path:"/gari-inventory",element:e.jsx(Yp,{})}),e.jsx(ye,{path:"/gari-sales",element:e.jsx(Jp,{})}),e.jsx(ye,{path:"/gari-kpis",element:e.jsx(Xp,{})}),e.jsx(ye,{path:"/packaging-materials",element:e.jsx(Zp,{})}),e.jsx(ye,{path:"/gari-waste-losses",element:e.jsx(eg,{})}),e.jsx(ye,{path:"/bell-pepper/production-cycles",element:e.jsx(vg,{})}),e.jsx(ye,{path:"/bell-pepper/daily-logs",element:e.jsx(bg,{})}),e.jsx(ye,{path:"/bell-pepper/harvest-records",element:e.jsx(Sg,{})}),e.jsx(ye,{path:"/bell-pepper-production",element:e.jsx(ag,{})}),e.jsx(ye,{path:"/bell-pepper-cycles/:id",element:e.jsx(ng,{})}),e.jsx(ye,{path:"/bell-pepper-harvests",element:e.jsx(lg,{})}),e.jsx(ye,{path:"/bell-pepper-inventory",element:e.jsx(Eg,{})}),e.jsx(ye,{path:"/bell-pepper-kpis",element:e.jsx(As,{cropName:"Bell Pepper",basePath:"bell-pepper"})}),e.jsx(ye,{path:"/tomatoes-production",element:e.jsx(As,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(ye,{path:"/tomatoes-inventory",element:e.jsx(As,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(ye,{path:"/tomatoes-kpis",element:e.jsx(As,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(ye,{path:"/habaneros-production",element:e.jsx(As,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(ye,{path:"/habaneros-inventory",element:e.jsx(As,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(ye,{path:"/habaneros-kpis",element:e.jsx(As,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(ye,{path:"/sales/orders",element:e.jsx(Ng,{})}),e.jsx(ye,{path:"/sales/customers",element:e.jsx(_g,{})}),e.jsx(ye,{path:"/sales/products",element:e.jsx(wg,{})}),e.jsx(ye,{path:"/sales/kpis",element:e.jsx(kg,{})}),e.jsx(ye,{path:"/reports/consolidated-expenses",element:e.jsx(tg,{})}),e.jsx(ye,{path:"/reports/staff-allocation",element:e.jsx(sg,{})}),e.jsx(ye,{path:"/admin/admin-zones",element:e.jsx(dg,{})}),e.jsx(ye,{path:"/admin/sites",element:e.jsx(ig,{})}),e.jsx(ye,{path:"/admin/boreholes",element:e.jsx(fg,{})}),e.jsx(ye,{path:"/admin/greenhouses",element:e.jsx(rg,{})}),e.jsx(ye,{path:"/admin/farm-zones",element:e.jsx(og,{})}),e.jsx(ye,{path:"/admin/factories",element:e.jsx(cg,{})}),e.jsx(ye,{path:"/admin/crops",element:e.jsx(mg,{})}),e.jsx(ye,{path:"/admin/worker-job-roles",element:e.jsx(hg,{})}),e.jsx(ye,{path:"/admin/assets",element:e.jsx(pg,{})}),e.jsx(ye,{path:"/admin/asset-categories",element:e.jsx(gg,{})}),e.jsx(ye,{path:"/admin/site-types",element:e.jsx(yg,{})}),e.jsx(ye,{path:"/admin/activity-types",element:e.jsx(jg,{})}),e.jsx(ye,{path:"/admin/seasons",element:e.jsx(Cg,{})}),e.jsx(ye,{path:"/admin/roles",element:e.jsx(ug,{})}),e.jsx(ye,{path:"/admin/users",element:e.jsx(xg,{})})]})})})})]})})}class Tg extends _i.Component{constructor(d){super(d),this.state={hasError:!1,error:null}}static getDerivedStateFromError(d){return{hasError:!0,error:d}}componentDidCatch(d,u){console.error("React Error:",d,u)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",fontFamily:"sans-serif"},children:[e.jsx("h1",{children:"Something went wrong"}),e.jsxs("p",{children:["Error: ",this.state.error?.message||"Unknown error"]}),e.jsx("pre",{style:{background:"#f5f5f5",padding:"10px",overflow:"auto"},children:this.state.error?.stack}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}const pi=document.getElementById("app");if(!pi)console.error('App element not found! Make sure <div id="app"></div> exists in the HTML.'),document.body.innerHTML='<div style="padding: 20px;"><h1>Error: App element not found</h1><p>Make sure the HTML includes: &lt;div id="app"&gt;&lt;/div&gt;</p></div>';else try{xx.createRoot(pi).render(e.jsx(_i.StrictMode,{children:e.jsx(Tg,{children:e.jsx(up,{children:e.jsx(Rg,{})})})}))}catch(o){console.error("Failed to render React app:",o),pi.innerHTML=`
            <div style="padding: 20px; font-family: sans-serif;">
                <h1>Failed to Load Application</h1>
                <p>Error: ${o.message}</p>
                <pre style="background: #f5f5f5; padding: 10px; overflow: auto;">${o.stack}</pre>
                <button onclick="window.location.reload()">Reload Page</button>
            </div>
        `}
