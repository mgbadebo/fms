import{a as tx}from"./index-B9ygI19o.js";/* empty css            */function sx(o,d){for(var u=0;u<d.length;u++){const N=d[u];if(typeof N!="string"&&!Array.isArray(N)){for(const k in N)if(k!=="default"&&!(k in o)){const S=Object.getOwnPropertyDescriptor(N,k);S&&Object.defineProperty(o,k,S.get?S:{enumerable:!0,get:()=>N[k]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}function Hd(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ii={exports:{}},Qr={},oi={exports:{}},Ne={};var jd;function rx(){if(jd)return Ne;jd=1;var o=Symbol.for("react.element"),d=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),P=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),D=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),j=Symbol.iterator;function C(y){return y===null||typeof y!="object"?null:(y=j&&y[j]||y["@@iterator"],typeof y=="function"?y:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c=Object.assign,x={};function h(y,f,W){this.props=y,this.context=f,this.refs=x,this.updater=W||q}h.prototype.isReactComponent={},h.prototype.setState=function(y,f){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,f,"setState")},h.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function i(){}i.prototype=h.prototype;function R(y,f,W){this.props=y,this.context=f,this.refs=x,this.updater=W||q}var B=R.prototype=new i;B.constructor=R,c(B,h.prototype),B.isPureReactComponent=!0;var w=Array.isArray,A=Object.prototype.hasOwnProperty,b={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function G(y,f,W){var Y,ce={},H=null,ne=null;if(f!=null)for(Y in f.ref!==void 0&&(ne=f.ref),f.key!==void 0&&(H=""+f.key),f)A.call(f,Y)&&!I.hasOwnProperty(Y)&&(ce[Y]=f[Y]);var X=arguments.length-2;if(X===1)ce.children=W;else if(1<X){for(var je=Array(X),Ue=0;Ue<X;Ue++)je[Ue]=arguments[Ue+2];ce.children=je}if(y&&y.defaultProps)for(Y in X=y.defaultProps,X)ce[Y]===void 0&&(ce[Y]=X[Y]);return{$$typeof:o,type:y,key:H,ref:ne,props:ce,_owner:b.current}}function _(y,f){return{$$typeof:o,type:y.type,key:f,ref:y.ref,props:y.props,_owner:y._owner}}function le(y){return typeof y=="object"&&y!==null&&y.$$typeof===o}function z(y){var f={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(W){return f[W]})}var L=/\/+/g;function re(y,f){return typeof y=="object"&&y!==null&&y.key!=null?z(""+y.key):f.toString(36)}function xe(y,f,W,Y,ce){var H=typeof y;(H==="undefined"||H==="boolean")&&(y=null);var ne=!1;if(y===null)ne=!0;else switch(H){case"string":case"number":ne=!0;break;case"object":switch(y.$$typeof){case o:case d:ne=!0}}if(ne)return ne=y,ce=ce(ne),y=Y===""?"."+re(ne,0):Y,w(ce)?(W="",y!=null&&(W=y.replace(L,"$&/")+"/"),xe(ce,f,W,"",function(Ue){return Ue})):ce!=null&&(le(ce)&&(ce=_(ce,W+(!ce.key||ne&&ne.key===ce.key?"":(""+ce.key).replace(L,"$&/")+"/")+y)),f.push(ce)),1;if(ne=0,Y=Y===""?".":Y+":",w(y))for(var X=0;X<y.length;X++){H=y[X];var je=Y+re(H,X);ne+=xe(H,f,W,je,ce)}else if(je=C(y),typeof je=="function")for(y=je.call(y),X=0;!(H=y.next()).done;)H=H.value,je=Y+re(H,X++),ne+=xe(H,f,W,je,ce);else if(H==="object")throw f=String(y),Error("Objects are not valid as a React child (found: "+(f==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":f)+"). If you meant to render a collection of children, use an array instead.");return ne}function Z(y,f,W){if(y==null)return y;var Y=[],ce=0;return xe(y,Y,"","",function(H){return f.call(W,H,ce++)}),Y}function te(y){if(y._status===-1){var f=y._result;f=f(),f.then(function(W){(y._status===0||y._status===-1)&&(y._status=1,y._result=W)},function(W){(y._status===0||y._status===-1)&&(y._status=2,y._result=W)}),y._status===-1&&(y._status=0,y._result=f)}if(y._status===1)return y._result.default;throw y._result}var ie={current:null},M={transition:null},J={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:M,ReactCurrentOwner:b};function O(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:Z,forEach:function(y,f,W){Z(y,function(){f.apply(this,arguments)},W)},count:function(y){var f=0;return Z(y,function(){f++}),f},toArray:function(y){return Z(y,function(f){return f})||[]},only:function(y){if(!le(y))throw Error("React.Children.only expected to receive a single React element child.");return y}},Ne.Component=h,Ne.Fragment=u,Ne.Profiler=k,Ne.PureComponent=R,Ne.StrictMode=N,Ne.Suspense=m,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Ne.act=O,Ne.cloneElement=function(y,f,W){if(y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+y+".");var Y=c({},y.props),ce=y.key,H=y.ref,ne=y._owner;if(f!=null){if(f.ref!==void 0&&(H=f.ref,ne=b.current),f.key!==void 0&&(ce=""+f.key),y.type&&y.type.defaultProps)var X=y.type.defaultProps;for(je in f)A.call(f,je)&&!I.hasOwnProperty(je)&&(Y[je]=f[je]===void 0&&X!==void 0?X[je]:f[je])}var je=arguments.length-2;if(je===1)Y.children=W;else if(1<je){X=Array(je);for(var Ue=0;Ue<je;Ue++)X[Ue]=arguments[Ue+2];Y.children=X}return{$$typeof:o,type:y.type,key:ce,ref:H,props:Y,_owner:ne}},Ne.createContext=function(y){return y={$$typeof:P,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},y.Provider={$$typeof:S,_context:y},y.Consumer=y},Ne.createElement=G,Ne.createFactory=function(y){var f=G.bind(null,y);return f.type=y,f},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(y){return{$$typeof:E,render:y}},Ne.isValidElement=le,Ne.lazy=function(y){return{$$typeof:v,_payload:{_status:-1,_result:y},_init:te}},Ne.memo=function(y,f){return{$$typeof:D,type:y,compare:f===void 0?null:f}},Ne.startTransition=function(y){var f=M.transition;M.transition={};try{y()}finally{M.transition=f}},Ne.unstable_act=O,Ne.useCallback=function(y,f){return ie.current.useCallback(y,f)},Ne.useContext=function(y){return ie.current.useContext(y)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(y){return ie.current.useDeferredValue(y)},Ne.useEffect=function(y,f){return ie.current.useEffect(y,f)},Ne.useId=function(){return ie.current.useId()},Ne.useImperativeHandle=function(y,f,W){return ie.current.useImperativeHandle(y,f,W)},Ne.useInsertionEffect=function(y,f){return ie.current.useInsertionEffect(y,f)},Ne.useLayoutEffect=function(y,f){return ie.current.useLayoutEffect(y,f)},Ne.useMemo=function(y,f){return ie.current.useMemo(y,f)},Ne.useReducer=function(y,f,W){return ie.current.useReducer(y,f,W)},Ne.useRef=function(y){return ie.current.useRef(y)},Ne.useState=function(y){return ie.current.useState(y)},Ne.useSyncExternalStore=function(y,f,W){return ie.current.useSyncExternalStore(y,f,W)},Ne.useTransition=function(){return ie.current.useTransition()},Ne.version="18.3.1",Ne}var Nd;function ji(){return Nd||(Nd=1,oi.exports=rx()),oi.exports}var _d;function ax(){if(_d)return Qr;_d=1;var o=ji(),d=Symbol.for("react.element"),u=Symbol.for("react.fragment"),N=Object.prototype.hasOwnProperty,k=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S={key:!0,ref:!0,__self:!0,__source:!0};function P(E,m,D){var v,j={},C=null,q=null;D!==void 0&&(C=""+D),m.key!==void 0&&(C=""+m.key),m.ref!==void 0&&(q=m.ref);for(v in m)N.call(m,v)&&!S.hasOwnProperty(v)&&(j[v]=m[v]);if(E&&E.defaultProps)for(v in m=E.defaultProps,m)j[v]===void 0&&(j[v]=m[v]);return{$$typeof:d,type:E,key:C,ref:q,props:j,_owner:k.current}}return Qr.Fragment=u,Qr.jsx=P,Qr.jsxs=P,Qr}var wd;function nx(){return wd||(wd=1,ii.exports=ax()),ii.exports}var e=nx(),g=ji();const Ni=Hd(g),lx=sx({__proto__:null,default:Ni},[g]);var cn={},ci={exports:{}},it={},di={exports:{}},ui={};var kd;function ix(){return kd||(kd=1,(function(o){function d(M,J){var O=M.length;M.push(J);e:for(;0<O;){var y=O-1>>>1,f=M[y];if(0<k(f,J))M[y]=J,M[O]=f,O=y;else break e}}function u(M){return M.length===0?null:M[0]}function N(M){if(M.length===0)return null;var J=M[0],O=M.pop();if(O!==J){M[0]=O;e:for(var y=0,f=M.length,W=f>>>1;y<W;){var Y=2*(y+1)-1,ce=M[Y],H=Y+1,ne=M[H];if(0>k(ce,O))H<f&&0>k(ne,ce)?(M[y]=ne,M[H]=O,y=H):(M[y]=ce,M[Y]=O,y=Y);else if(H<f&&0>k(ne,O))M[y]=ne,M[H]=O,y=H;else break e}}return J}function k(M,J){var O=M.sortIndex-J.sortIndex;return O!==0?O:M.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;o.unstable_now=function(){return S.now()}}else{var P=Date,E=P.now();o.unstable_now=function(){return P.now()-E}}var m=[],D=[],v=1,j=null,C=3,q=!1,c=!1,x=!1,h=typeof setTimeout=="function"?setTimeout:null,i=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(M){for(var J=u(D);J!==null;){if(J.callback===null)N(D);else if(J.startTime<=M)N(D),J.sortIndex=J.expirationTime,d(m,J);else break;J=u(D)}}function w(M){if(x=!1,B(M),!c)if(u(m)!==null)c=!0,te(A);else{var J=u(D);J!==null&&ie(w,J.startTime-M)}}function A(M,J){c=!1,x&&(x=!1,i(G),G=-1),q=!0;var O=C;try{for(B(J),j=u(m);j!==null&&(!(j.expirationTime>J)||M&&!z());){var y=j.callback;if(typeof y=="function"){j.callback=null,C=j.priorityLevel;var f=y(j.expirationTime<=J);J=o.unstable_now(),typeof f=="function"?j.callback=f:j===u(m)&&N(m),B(J)}else N(m);j=u(m)}if(j!==null)var W=!0;else{var Y=u(D);Y!==null&&ie(w,Y.startTime-J),W=!1}return W}finally{j=null,C=O,q=!1}}var b=!1,I=null,G=-1,_=5,le=-1;function z(){return!(o.unstable_now()-le<_)}function L(){if(I!==null){var M=o.unstable_now();le=M;var J=!0;try{J=I(!0,M)}finally{J?re():(b=!1,I=null)}}else b=!1}var re;if(typeof R=="function")re=function(){R(L)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Z=xe.port2;xe.port1.onmessage=L,re=function(){Z.postMessage(null)}}else re=function(){h(L,0)};function te(M){I=M,b||(b=!0,re())}function ie(M,J){G=h(function(){M(o.unstable_now())},J)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(M){M.callback=null},o.unstable_continueExecution=function(){c||q||(c=!0,te(A))},o.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<M?Math.floor(1e3/M):5},o.unstable_getCurrentPriorityLevel=function(){return C},o.unstable_getFirstCallbackNode=function(){return u(m)},o.unstable_next=function(M){switch(C){case 1:case 2:case 3:var J=3;break;default:J=C}var O=C;C=J;try{return M()}finally{C=O}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(M,J){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var O=C;C=M;try{return J()}finally{C=O}},o.unstable_scheduleCallback=function(M,J,O){var y=o.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?y+O:y):O=y,M){case 1:var f=-1;break;case 2:f=250;break;case 5:f=1073741823;break;case 4:f=1e4;break;default:f=5e3}return f=O+f,M={id:v++,callback:J,priorityLevel:M,startTime:O,expirationTime:f,sortIndex:-1},O>y?(M.sortIndex=O,d(D,M),u(m)===null&&M===u(D)&&(x?(i(G),G=-1):x=!0,ie(w,O-y))):(M.sortIndex=f,d(m,M),c||q||(c=!0,te(A))),M},o.unstable_shouldYield=z,o.unstable_wrapCallback=function(M){var J=C;return function(){var O=C;C=J;try{return M.apply(this,arguments)}finally{C=O}}}})(ui)),ui}var Sd;function ox(){return Sd||(Sd=1,di.exports=ix()),di.exports}var Cd;function cx(){if(Cd)return it;Cd=1;var o=ji(),d=ox();function u(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N=new Set,k={};function S(t,s){P(t,s),P(t+"Capture",s)}function P(t,s){for(k[t]=s,t=0;t<s.length;t++)N.add(s[t])}var E=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,D=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},j={};function C(t){return m.call(j,t)?!0:m.call(v,t)?!1:D.test(t)?j[t]=!0:(v[t]=!0,!1)}function q(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function c(t,s,r,a){if(s===null||typeof s>"u"||q(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function x(t,s,r,a,n,l,p){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=p}var h={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){h[t]=new x(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];h[s]=new x(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){h[t]=new x(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){h[t]=new x(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){h[t]=new x(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){h[t]=new x(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){h[t]=new x(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){h[t]=new x(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){h[t]=new x(t,5,!1,t.toLowerCase(),null,!1,!1)});var i=/[\-:]([a-z])/g;function R(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(i,R);h[s]=new x(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(i,R);h[s]=new x(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(i,R);h[s]=new x(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){h[t]=new x(t,1,!1,t.toLowerCase(),null,!1,!1)}),h.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){h[t]=new x(t,1,!1,t.toLowerCase(),null,!0,!0)});function B(t,s,r,a){var n=h.hasOwnProperty(s)?h[s]:null;(n!==null?n.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(c(s,r,n,a)&&(r=null),a||n===null?C(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(s=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(s):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var w=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),b=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),z=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),M=Symbol.iterator;function J(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var O=Object.assign,y;function f(t){if(y===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);y=s&&s[1]||""}return`
`+y+t}var W=!1;function Y(t,s){if(!t||W)return"";W=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Q){var a=Q}Reflect.construct(t,[],s)}else{try{s.call()}catch(Q){a=Q}t.call(s.prototype)}else{try{throw Error()}catch(Q){a=Q}t()}}catch(Q){if(Q&&a&&typeof Q.stack=="string"){for(var n=Q.stack.split(`
`),l=a.stack.split(`
`),p=n.length-1,T=l.length-1;1<=p&&0<=T&&n[p]!==l[T];)T--;for(;1<=p&&0<=T;p--,T--)if(n[p]!==l[T]){if(p!==1||T!==1)do if(p--,T--,0>T||n[p]!==l[T]){var U=`
`+n[p].replace(" at new "," at ");return t.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",t.displayName)),U}while(1<=p&&0<=T);break}}}finally{W=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?f(t):""}function ce(t){switch(t.tag){case 5:return f(t.type);case 16:return f("Lazy");case 13:return f("Suspense");case 19:return f("SuspenseList");case 0:case 2:case 15:return t=Y(t.type,!1),t;case 11:return t=Y(t.type.render,!1),t;case 1:return t=Y(t.type,!0),t;default:return""}}function H(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case I:return"Fragment";case b:return"Portal";case _:return"Profiler";case G:return"StrictMode";case re:return"Suspense";case xe:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case z:return(t.displayName||"Context")+".Consumer";case le:return(t._context.displayName||"Context")+".Provider";case L:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Z:return s=t.displayName||null,s!==null?s:H(t.type)||"Memo";case te:s=t._payload,t=t._init;try{return H(t(s))}catch{}}return null}function ne(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(s);case 8:return s===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function X(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function je(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ue(t){var s=je(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,l=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(p){a=""+p,l.call(this,p)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Lt(t){t._valueTracker||(t._valueTracker=Ue(t))}function gs(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=je(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function hs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ds(t,s){var r=s.checked;return O({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function or(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=X(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function cr(t,s){s=s.checked,s!=null&&B(t,"checked",s,!1)}function Ps(t,s){cr(t,s);var r=X(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Rs(t,s.type,r):s.hasOwnProperty("defaultValue")&&Rs(t,s.type,X(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function dr(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Rs(t,s,r){(s!=="number"||hs(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Vt=Array.isArray;function It(t,s,r,a){if(t=t.options,s){s={};for(var n=0;n<r.length;n++)s["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=s.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+X(r),s=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function fn(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(u(91));return O({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Di(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(u(92));if(Vt(r)){if(1<r.length)throw Error(u(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:X(r)}}function Pi(t,s){var r=X(s.value),a=X(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function Ri(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Ti(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yn(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Ti(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ea,Li=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,n)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(ea=ea||document.createElement("div"),ea.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ea.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function ur(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var mr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nu=["Webkit","ms","Moz","O"];Object.keys(mr).forEach(function(t){nu.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),mr[s]=mr[t]})});function Ii(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||mr.hasOwnProperty(t)&&mr[t]?(""+s).trim():s+"px"}function Mi(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=Ii(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var lu=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vn(t,s){if(s){if(lu[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(u(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(u(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(u(61))}if(s.style!=null&&typeof s.style!="object")throw Error(u(62))}}function bn(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jn=null;function Nn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _n=null,Ts=null,Ls=null;function Oi(t){if(t=Lr(t)){if(typeof _n!="function")throw Error(u(280));var s=t.stateNode;s&&(s=_a(s),_n(t.stateNode,t.type,s))}}function Fi(t){Ts?Ls?Ls.push(t):Ls=[t]:Ts=t}function Ui(){if(Ts){var t=Ts,s=Ls;if(Ls=Ts=null,Oi(t),s)for(t=0;t<s.length;t++)Oi(s[t])}}function qi(t,s){return t(s)}function zi(){}var wn=!1;function $i(t,s,r){if(wn)return t(s,r);wn=!0;try{return qi(t,s,r)}finally{wn=!1,(Ts!==null||Ls!==null)&&(zi(),Ui())}}function xr(t,s){var r=t.stateNode;if(r===null)return null;var a=_a(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(u(231,s,typeof r));return r}var kn=!1;if(E)try{var pr={};Object.defineProperty(pr,"passive",{get:function(){kn=!0}}),window.addEventListener("test",pr,pr),window.removeEventListener("test",pr,pr)}catch{kn=!1}function iu(t,s,r,a,n,l,p,T,U){var Q=Array.prototype.slice.call(arguments,3);try{s.apply(r,Q)}catch(se){this.onError(se)}}var gr=!1,ta=null,sa=!1,Sn=null,ou={onError:function(t){gr=!0,ta=t}};function cu(t,s,r,a,n,l,p,T,U){gr=!1,ta=null,iu.apply(ou,arguments)}function du(t,s,r,a,n,l,p,T,U){if(cu.apply(this,arguments),gr){if(gr){var Q=ta;gr=!1,ta=null}else throw Error(u(198));sa||(sa=!0,Sn=Q)}}function fs(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Hi(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Bi(t){if(fs(t)!==t)throw Error(u(188))}function uu(t){var s=t.alternate;if(!s){if(s=fs(t),s===null)throw Error(u(188));return s!==t?null:t}for(var r=t,a=s;;){var n=r.return;if(n===null)break;var l=n.alternate;if(l===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===r)return Bi(n),t;if(l===a)return Bi(n),s;l=l.sibling}throw Error(u(188))}if(r.return!==a.return)r=n,a=l;else{for(var p=!1,T=n.child;T;){if(T===r){p=!0,r=n,a=l;break}if(T===a){p=!0,a=n,r=l;break}T=T.sibling}if(!p){for(T=l.child;T;){if(T===r){p=!0,r=l,a=n;break}if(T===a){p=!0,a=l,r=n;break}T=T.sibling}if(!p)throw Error(u(189))}}if(r.alternate!==a)throw Error(u(190))}if(r.tag!==3)throw Error(u(188));return r.stateNode.current===r?t:s}function Vi(t){return t=uu(t),t!==null?Gi(t):null}function Gi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Gi(t);if(s!==null)return s;t=t.sibling}return null}var Wi=d.unstable_scheduleCallback,Ki=d.unstable_cancelCallback,mu=d.unstable_shouldYield,xu=d.unstable_requestPaint,Me=d.unstable_now,pu=d.unstable_getCurrentPriorityLevel,Cn=d.unstable_ImmediatePriority,Qi=d.unstable_UserBlockingPriority,ra=d.unstable_NormalPriority,gu=d.unstable_LowPriority,Yi=d.unstable_IdlePriority,aa=null,Et=null;function hu(t){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(aa,t,void 0,(t.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:vu,fu=Math.log,yu=Math.LN2;function vu(t){return t>>>=0,t===0?32:31-(fu(t)/yu|0)|0}var na=64,la=4194304;function hr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ia(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,l=t.pingedLanes,p=r&268435455;if(p!==0){var T=p&~n;T!==0?a=hr(T):(l&=p,l!==0&&(a=hr(l)))}else p=r&~n,p!==0?a=hr(p):l!==0&&(a=hr(l));if(a===0)return 0;if(s!==0&&s!==a&&(s&n)===0&&(n=a&-a,l=s&-s,n>=l||n===16&&(l&4194240)!==0))return s;if((a&4)!==0&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-jt(s),n=1<<r,a|=t[r],s&=~n;return a}function bu(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ju(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var p=31-jt(l),T=1<<p,U=n[p];U===-1?((T&r)===0||(T&a)!==0)&&(n[p]=bu(T,s)):U<=s&&(t.expiredLanes|=T),l&=~T}}function En(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ji(){var t=na;return na<<=1,(na&4194240)===0&&(na=64),t}function An(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function fr(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-jt(s),t[s]=r}function Nu(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-jt(r),l=1<<n;s[n]=0,a[n]=-1,t[n]=-1,r&=~l}}function Dn(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-jt(r),n=1<<a;n&s|t[a]&s&&(t[a]|=s),r&=~n}}var Se=0;function Xi(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Zi,Pn,eo,to,so,Rn=!1,oa=[],Gt=null,Wt=null,Kt=null,yr=new Map,vr=new Map,Qt=[],_u="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ro(t,s){switch(t){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":Kt=null;break;case"pointerover":case"pointerout":yr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vr.delete(s.pointerId)}}function br(t,s,r,a,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},s!==null&&(s=Lr(s),s!==null&&Pn(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function wu(t,s,r,a,n){switch(s){case"focusin":return Gt=br(Gt,t,s,r,a,n),!0;case"dragenter":return Wt=br(Wt,t,s,r,a,n),!0;case"mouseover":return Kt=br(Kt,t,s,r,a,n),!0;case"pointerover":var l=n.pointerId;return yr.set(l,br(yr.get(l)||null,t,s,r,a,n)),!0;case"gotpointercapture":return l=n.pointerId,vr.set(l,br(vr.get(l)||null,t,s,r,a,n)),!0}return!1}function ao(t){var s=ys(t.target);if(s!==null){var r=fs(s);if(r!==null){if(s=r.tag,s===13){if(s=Hi(r),s!==null){t.blockedOn=s,so(t.priority,function(){eo(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ca(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Ln(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);jn=a,r.target.dispatchEvent(a),jn=null}else return s=Lr(r),s!==null&&Pn(s),t.blockedOn=r,!1;s.shift()}return!0}function no(t,s,r){ca(t)&&r.delete(s)}function ku(){Rn=!1,Gt!==null&&ca(Gt)&&(Gt=null),Wt!==null&&ca(Wt)&&(Wt=null),Kt!==null&&ca(Kt)&&(Kt=null),yr.forEach(no),vr.forEach(no)}function jr(t,s){t.blockedOn===s&&(t.blockedOn=null,Rn||(Rn=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,ku)))}function Nr(t){function s(n){return jr(n,t)}if(0<oa.length){jr(oa[0],t);for(var r=1;r<oa.length;r++){var a=oa[r];a.blockedOn===t&&(a.blockedOn=null)}}for(Gt!==null&&jr(Gt,t),Wt!==null&&jr(Wt,t),Kt!==null&&jr(Kt,t),yr.forEach(s),vr.forEach(s),r=0;r<Qt.length;r++)a=Qt[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<Qt.length&&(r=Qt[0],r.blockedOn===null);)ao(r),r.blockedOn===null&&Qt.shift()}var Is=w.ReactCurrentBatchConfig,da=!0;function Su(t,s,r,a){var n=Se,l=Is.transition;Is.transition=null;try{Se=1,Tn(t,s,r,a)}finally{Se=n,Is.transition=l}}function Cu(t,s,r,a){var n=Se,l=Is.transition;Is.transition=null;try{Se=4,Tn(t,s,r,a)}finally{Se=n,Is.transition=l}}function Tn(t,s,r,a){if(da){var n=Ln(t,s,r,a);if(n===null)Jn(t,s,a,ua,r),ro(t,a);else if(wu(n,t,s,r,a))a.stopPropagation();else if(ro(t,a),s&4&&-1<_u.indexOf(t)){for(;n!==null;){var l=Lr(n);if(l!==null&&Zi(l),l=Ln(t,s,r,a),l===null&&Jn(t,s,a,ua,r),l===n)break;n=l}n!==null&&a.stopPropagation()}else Jn(t,s,a,null,r)}}var ua=null;function Ln(t,s,r,a){if(ua=null,t=Nn(a),t=ys(t),t!==null)if(s=fs(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Hi(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return ua=t,null}function lo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pu()){case Cn:return 1;case Qi:return 4;case ra:case gu:return 16;case Yi:return 536870912;default:return 16}default:return 16}}var Yt=null,In=null,ma=null;function io(){if(ma)return ma;var t,s=In,r=s.length,a,n="value"in Yt?Yt.value:Yt.textContent,l=n.length;for(t=0;t<r&&s[t]===n[t];t++);var p=r-t;for(a=1;a<=p&&s[r-a]===n[l-a];a++);return ma=n.slice(t,1<a?1-a:void 0)}function xa(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function pa(){return!0}function oo(){return!1}function ct(t){function s(r,a,n,l,p){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=l,this.target=p,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(r=t[T],this[T]=r?r(l):l[T]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?pa:oo,this.isPropagationStopped=oo,this}return O(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pa)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pa)},persist:function(){},isPersistent:pa}),s}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mn=ct(Ms),_r=O({},Ms,{view:0,detail:0}),Eu=ct(_r),On,Fn,wr,ga=O({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wr&&(wr&&t.type==="mousemove"?(On=t.screenX-wr.screenX,Fn=t.screenY-wr.screenY):Fn=On=0,wr=t),On)},movementY:function(t){return"movementY"in t?t.movementY:Fn}}),co=ct(ga),Au=O({},ga,{dataTransfer:0}),Du=ct(Au),Pu=O({},_r,{relatedTarget:0}),Un=ct(Pu),Ru=O({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Tu=ct(Ru),Lu=O({},Ms,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Iu=ct(Lu),Mu=O({},Ms,{data:0}),uo=ct(Mu),Ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Uu[t])?!!s[t]:!1}function qn(){return qu}var zu=O({},_r,{key:function(t){if(t.key){var s=Ou[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=xa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qn,charCode:function(t){return t.type==="keypress"?xa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$u=ct(zu),Hu=O({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mo=ct(Hu),Bu=O({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qn}),Vu=ct(Bu),Gu=O({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wu=ct(Gu),Ku=O({},ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qu=ct(Ku),Yu=[9,13,27,32],zn=E&&"CompositionEvent"in window,kr=null;E&&"documentMode"in document&&(kr=document.documentMode);var Ju=E&&"TextEvent"in window&&!kr,xo=E&&(!zn||kr&&8<kr&&11>=kr),po=" ",go=!1;function ho(t,s){switch(t){case"keyup":return Yu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Os=!1;function Xu(t,s){switch(t){case"compositionend":return fo(s);case"keypress":return s.which!==32?null:(go=!0,po);case"textInput":return t=s.data,t===po&&go?null:t;default:return null}}function Zu(t,s){if(Os)return t==="compositionend"||!zn&&ho(t,s)?(t=io(),ma=In=Yt=null,Os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return xo&&s.locale!=="ko"?null:s.data;default:return null}}var em={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yo(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!em[t.type]:s==="textarea"}function vo(t,s,r,a){Fi(a),s=ba(s,"onChange"),0<s.length&&(r=new Mn("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var Sr=null,Cr=null;function tm(t){Oo(t,0)}function ha(t){var s=$s(t);if(gs(s))return t}function sm(t,s){if(t==="change")return s}var bo=!1;if(E){var $n;if(E){var Hn="oninput"in document;if(!Hn){var jo=document.createElement("div");jo.setAttribute("oninput","return;"),Hn=typeof jo.oninput=="function"}$n=Hn}else $n=!1;bo=$n&&(!document.documentMode||9<document.documentMode)}function No(){Sr&&(Sr.detachEvent("onpropertychange",_o),Cr=Sr=null)}function _o(t){if(t.propertyName==="value"&&ha(Cr)){var s=[];vo(s,Cr,t,Nn(t)),$i(tm,s)}}function rm(t,s,r){t==="focusin"?(No(),Sr=s,Cr=r,Sr.attachEvent("onpropertychange",_o)):t==="focusout"&&No()}function am(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ha(Cr)}function nm(t,s){if(t==="click")return ha(s)}function lm(t,s){if(t==="input"||t==="change")return ha(s)}function im(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Nt=typeof Object.is=="function"?Object.is:im;function Er(t,s){if(Nt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!m.call(s,n)||!Nt(t[n],s[n]))return!1}return!0}function wo(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ko(t,s){var r=wo(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wo(r)}}function So(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?So(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Co(){for(var t=window,s=hs();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=hs(t.document)}return s}function Bn(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function om(t){var s=Co(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&So(r.ownerDocument.documentElement,r)){if(a!==null&&Bn(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,l=Math.min(a.start,n);a=a.end===void 0?l:Math.min(a.end,n),!t.extend&&l>a&&(n=a,a=l,l=n),n=ko(r,l);var p=ko(r,a);n&&p&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==p.node||t.focusOffset!==p.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),l>a?(t.addRange(s),t.extend(p.node,p.offset)):(s.setEnd(p.node,p.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cm=E&&"documentMode"in document&&11>=document.documentMode,Fs=null,Vn=null,Ar=null,Gn=!1;function Eo(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Gn||Fs==null||Fs!==hs(a)||(a=Fs,"selectionStart"in a&&Bn(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ar&&Er(Ar,a)||(Ar=a,a=ba(Vn,"onSelect"),0<a.length&&(s=new Mn("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=Fs)))}function fa(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Us={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionend:fa("Transition","TransitionEnd")},Wn={},Ao={};E&&(Ao=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function ya(t){if(Wn[t])return Wn[t];if(!Us[t])return t;var s=Us[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Ao)return Wn[t]=s[r];return t}var Do=ya("animationend"),Po=ya("animationiteration"),Ro=ya("animationstart"),To=ya("transitionend"),Lo=new Map,Io="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jt(t,s){Lo.set(t,s),S(s,[t])}for(var Kn=0;Kn<Io.length;Kn++){var Qn=Io[Kn],dm=Qn.toLowerCase(),um=Qn[0].toUpperCase()+Qn.slice(1);Jt(dm,"on"+um)}Jt(Do,"onAnimationEnd"),Jt(Po,"onAnimationIteration"),Jt(Ro,"onAnimationStart"),Jt("dblclick","onDoubleClick"),Jt("focusin","onFocus"),Jt("focusout","onBlur"),Jt(To,"onTransitionEnd"),P("onMouseEnter",["mouseout","mouseover"]),P("onMouseLeave",["mouseout","mouseover"]),P("onPointerEnter",["pointerout","pointerover"]),P("onPointerLeave",["pointerout","pointerover"]),S("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),S("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),S("onBeforeInput",["compositionend","keypress","textInput","paste"]),S("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Mo(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,du(a,s,void 0,t),t.currentTarget=null}function Oo(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var l=void 0;if(s)for(var p=a.length-1;0<=p;p--){var T=a[p],U=T.instance,Q=T.currentTarget;if(T=T.listener,U!==l&&n.isPropagationStopped())break e;Mo(n,T,Q),l=U}else for(p=0;p<a.length;p++){if(T=a[p],U=T.instance,Q=T.currentTarget,T=T.listener,U!==l&&n.isPropagationStopped())break e;Mo(n,T,Q),l=U}}}if(sa)throw t=Sn,sa=!1,Sn=null,t}function De(t,s){var r=s[rl];r===void 0&&(r=s[rl]=new Set);var a=t+"__bubble";r.has(a)||(Fo(s,t,2,!1),r.add(a))}function Yn(t,s,r){var a=0;s&&(a|=4),Fo(r,t,a,s)}var va="_reactListening"+Math.random().toString(36).slice(2);function Pr(t){if(!t[va]){t[va]=!0,N.forEach(function(r){r!=="selectionchange"&&(mm.has(r)||Yn(r,!1,t),Yn(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[va]||(s[va]=!0,Yn("selectionchange",!1,s))}}function Fo(t,s,r,a){switch(lo(s)){case 1:var n=Su;break;case 4:n=Cu;break;default:n=Tn}r=n.bind(null,s,r,t),n=void 0,!kn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(s,r,{capture:!0,passive:n}):t.addEventListener(s,r,!0):n!==void 0?t.addEventListener(s,r,{passive:n}):t.addEventListener(s,r,!1)}function Jn(t,s,r,a,n){var l=a;if((s&1)===0&&(s&2)===0&&a!==null)e:for(;;){if(a===null)return;var p=a.tag;if(p===3||p===4){var T=a.stateNode.containerInfo;if(T===n||T.nodeType===8&&T.parentNode===n)break;if(p===4)for(p=a.return;p!==null;){var U=p.tag;if((U===3||U===4)&&(U=p.stateNode.containerInfo,U===n||U.nodeType===8&&U.parentNode===n))return;p=p.return}for(;T!==null;){if(p=ys(T),p===null)return;if(U=p.tag,U===5||U===6){a=l=p;continue e}T=T.parentNode}}a=a.return}$i(function(){var Q=l,se=Nn(r),ae=[];e:{var ee=Lo.get(t);if(ee!==void 0){var de=Mn,me=t;switch(t){case"keypress":if(xa(r)===0)break e;case"keydown":case"keyup":de=$u;break;case"focusin":me="focus",de=Un;break;case"focusout":me="blur",de=Un;break;case"beforeblur":case"afterblur":de=Un;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Vu;break;case Do:case Po:case Ro:de=Tu;break;case To:de=Wu;break;case"scroll":de=Eu;break;case"wheel":de=Qu;break;case"copy":case"cut":case"paste":de=Iu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=mo}var pe=(s&4)!==0,Oe=!pe&&t==="scroll",V=pe?ee!==null?ee+"Capture":null:ee;pe=[];for(var $=Q,K;$!==null;){K=$;var oe=K.stateNode;if(K.tag===5&&oe!==null&&(K=oe,V!==null&&(oe=xr($,V),oe!=null&&pe.push(Rr($,oe,K)))),Oe)break;$=$.return}0<pe.length&&(ee=new de(ee,me,null,r,se),ae.push({event:ee,listeners:pe}))}}if((s&7)===0){e:{if(ee=t==="mouseover"||t==="pointerover",de=t==="mouseout"||t==="pointerout",ee&&r!==jn&&(me=r.relatedTarget||r.fromElement)&&(ys(me)||me[Mt]))break e;if((de||ee)&&(ee=se.window===se?se:(ee=se.ownerDocument)?ee.defaultView||ee.parentWindow:window,de?(me=r.relatedTarget||r.toElement,de=Q,me=me?ys(me):null,me!==null&&(Oe=fs(me),me!==Oe||me.tag!==5&&me.tag!==6)&&(me=null)):(de=null,me=Q),de!==me)){if(pe=co,oe="onMouseLeave",V="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(pe=mo,oe="onPointerLeave",V="onPointerEnter",$="pointer"),Oe=de==null?ee:$s(de),K=me==null?ee:$s(me),ee=new pe(oe,$+"leave",de,r,se),ee.target=Oe,ee.relatedTarget=K,oe=null,ys(se)===Q&&(pe=new pe(V,$+"enter",me,r,se),pe.target=K,pe.relatedTarget=Oe,oe=pe),Oe=oe,de&&me)t:{for(pe=de,V=me,$=0,K=pe;K;K=qs(K))$++;for(K=0,oe=V;oe;oe=qs(oe))K++;for(;0<$-K;)pe=qs(pe),$--;for(;0<K-$;)V=qs(V),K--;for(;$--;){if(pe===V||V!==null&&pe===V.alternate)break t;pe=qs(pe),V=qs(V)}pe=null}else pe=null;de!==null&&Uo(ae,ee,de,pe,!1),me!==null&&Oe!==null&&Uo(ae,Oe,me,pe,!0)}}e:{if(ee=Q?$s(Q):window,de=ee.nodeName&&ee.nodeName.toLowerCase(),de==="select"||de==="input"&&ee.type==="file")var ge=sm;else if(yo(ee))if(bo)ge=lm;else{ge=am;var he=rm}else(de=ee.nodeName)&&de.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ge=nm);if(ge&&(ge=ge(t,Q))){vo(ae,ge,r,se);break e}he&&he(t,ee,Q),t==="focusout"&&(he=ee._wrapperState)&&he.controlled&&ee.type==="number"&&Rs(ee,"number",ee.value)}switch(he=Q?$s(Q):window,t){case"focusin":(yo(he)||he.contentEditable==="true")&&(Fs=he,Vn=Q,Ar=null);break;case"focusout":Ar=Vn=Fs=null;break;case"mousedown":Gn=!0;break;case"contextmenu":case"mouseup":case"dragend":Gn=!1,Eo(ae,r,se);break;case"selectionchange":if(cm)break;case"keydown":case"keyup":Eo(ae,r,se)}var fe;if(zn)e:{switch(t){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else Os?ho(t,r)&&(ve="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(ve="onCompositionStart");ve&&(xo&&r.locale!=="ko"&&(Os||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&Os&&(fe=io()):(Yt=se,In="value"in Yt?Yt.value:Yt.textContent,Os=!0)),he=ba(Q,ve),0<he.length&&(ve=new uo(ve,t,null,r,se),ae.push({event:ve,listeners:he}),fe?ve.data=fe:(fe=fo(r),fe!==null&&(ve.data=fe)))),(fe=Ju?Xu(t,r):Zu(t,r))&&(Q=ba(Q,"onBeforeInput"),0<Q.length&&(se=new uo("onBeforeInput","beforeinput",null,r,se),ae.push({event:se,listeners:Q}),se.data=fe))}Oo(ae,s)})}function Rr(t,s,r){return{instance:t,listener:s,currentTarget:r}}function ba(t,s){for(var r=s+"Capture",a=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=xr(t,r),l!=null&&a.unshift(Rr(t,l,n)),l=xr(t,s),l!=null&&a.push(Rr(t,l,n))),t=t.return}return a}function qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Uo(t,s,r,a,n){for(var l=s._reactName,p=[];r!==null&&r!==a;){var T=r,U=T.alternate,Q=T.stateNode;if(U!==null&&U===a)break;T.tag===5&&Q!==null&&(T=Q,n?(U=xr(r,l),U!=null&&p.unshift(Rr(r,U,T))):n||(U=xr(r,l),U!=null&&p.push(Rr(r,U,T)))),r=r.return}p.length!==0&&t.push({event:s,listeners:p})}var xm=/\r\n?/g,pm=/\u0000|\uFFFD/g;function qo(t){return(typeof t=="string"?t:""+t).replace(xm,`
`).replace(pm,"")}function ja(t,s,r){if(s=qo(s),qo(t)!==s&&r)throw Error(u(425))}function Na(){}var Xn=null,Zn=null;function el(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var tl=typeof setTimeout=="function"?setTimeout:void 0,gm=typeof clearTimeout=="function"?clearTimeout:void 0,zo=typeof Promise=="function"?Promise:void 0,hm=typeof queueMicrotask=="function"?queueMicrotask:typeof zo<"u"?function(t){return zo.resolve(null).then(t).catch(fm)}:tl;function fm(t){setTimeout(function(){throw t})}function sl(t,s){var r=s,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),Nr(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Nr(s)}function Xt(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function $o(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var zs=Math.random().toString(36).slice(2),At="__reactFiber$"+zs,Tr="__reactProps$"+zs,Mt="__reactContainer$"+zs,rl="__reactEvents$"+zs,ym="__reactListeners$"+zs,vm="__reactHandles$"+zs;function ys(t){var s=t[At];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Mt]||r[At]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=$o(t);t!==null;){if(r=t[At])return r;t=$o(t)}return s}t=r,r=t.parentNode}return null}function Lr(t){return t=t[At]||t[Mt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(u(33))}function _a(t){return t[Tr]||null}var al=[],Hs=-1;function Zt(t){return{current:t}}function Pe(t){0>Hs||(t.current=al[Hs],al[Hs]=null,Hs--)}function Ee(t,s){Hs++,al[Hs]=t.current,t.current=s}var es={},Ke=Zt(es),st=Zt(!1),vs=es;function Bs(t,s){var r=t.type.contextTypes;if(!r)return es;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in r)n[l]=s[l];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function rt(t){return t=t.childContextTypes,t!=null}function wa(){Pe(st),Pe(Ke)}function Ho(t,s,r){if(Ke.current!==es)throw Error(u(168));Ee(Ke,s),Ee(st,r)}function Bo(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in s))throw Error(u(108,ne(t)||"Unknown",n));return O({},r,a)}function ka(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,vs=Ke.current,Ee(Ke,t),Ee(st,st.current),!0}function Vo(t,s,r){var a=t.stateNode;if(!a)throw Error(u(169));r?(t=Bo(t,s,vs),a.__reactInternalMemoizedMergedChildContext=t,Pe(st),Pe(Ke),Ee(Ke,t)):Pe(st),Ee(st,r)}var Ot=null,Sa=!1,nl=!1;function Go(t){Ot===null?Ot=[t]:Ot.push(t)}function bm(t){Sa=!0,Go(t)}function ts(){if(!nl&&Ot!==null){nl=!0;var t=0,s=Se;try{var r=Ot;for(Se=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}Ot=null,Sa=!1}catch(n){throw Ot!==null&&(Ot=Ot.slice(t+1)),Wi(Cn,ts),n}finally{Se=s,nl=!1}}return null}var Vs=[],Gs=0,Ca=null,Ea=0,pt=[],gt=0,bs=null,Ft=1,Ut="";function js(t,s){Vs[Gs++]=Ea,Vs[Gs++]=Ca,Ca=t,Ea=s}function Wo(t,s,r){pt[gt++]=Ft,pt[gt++]=Ut,pt[gt++]=bs,bs=t;var a=Ft;t=Ut;var n=32-jt(a)-1;a&=~(1<<n),r+=1;var l=32-jt(s)+n;if(30<l){var p=n-n%5;l=(a&(1<<p)-1).toString(32),a>>=p,n-=p,Ft=1<<32-jt(s)+n|r<<n|a,Ut=l+t}else Ft=1<<l|r<<n|a,Ut=t}function ll(t){t.return!==null&&(js(t,1),Wo(t,1,0))}function il(t){for(;t===Ca;)Ca=Vs[--Gs],Vs[Gs]=null,Ea=Vs[--Gs],Vs[Gs]=null;for(;t===bs;)bs=pt[--gt],pt[gt]=null,Ut=pt[--gt],pt[gt]=null,Ft=pt[--gt],pt[gt]=null}var dt=null,ut=null,Re=!1,_t=null;function Ko(t,s){var r=vt(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function Qo(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,dt=t,ut=Xt(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,dt=t,ut=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=bs!==null?{id:Ft,overflow:Ut}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=vt(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,dt=t,ut=null,!0):!1;default:return!1}}function ol(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cl(t){if(Re){var s=ut;if(s){var r=s;if(!Qo(t,s)){if(ol(t))throw Error(u(418));s=Xt(r.nextSibling);var a=dt;s&&Qo(t,s)?Ko(a,r):(t.flags=t.flags&-4097|2,Re=!1,dt=t)}}else{if(ol(t))throw Error(u(418));t.flags=t.flags&-4097|2,Re=!1,dt=t}}}function Yo(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dt=t}function Aa(t){if(t!==dt)return!1;if(!Re)return Yo(t),Re=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!el(t.type,t.memoizedProps)),s&&(s=ut)){if(ol(t))throw Jo(),Error(u(418));for(;s;)Ko(t,s),s=Xt(s.nextSibling)}if(Yo(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){ut=Xt(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}ut=null}}else ut=dt?Xt(t.stateNode.nextSibling):null;return!0}function Jo(){for(var t=ut;t;)t=Xt(t.nextSibling)}function Ws(){ut=dt=null,Re=!1}function dl(t){_t===null?_t=[t]:_t.push(t)}var jm=w.ReactCurrentBatchConfig;function Ir(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(u(309));var a=r.stateNode}if(!a)throw Error(u(147,t));var n=a,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(p){var T=n.refs;p===null?delete T[l]:T[l]=p},s._stringRef=l,s)}if(typeof t!="string")throw Error(u(284));if(!r._owner)throw Error(u(290,t))}return t}function Da(t,s){throw t=Object.prototype.toString.call(s),Error(u(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Xo(t){var s=t._init;return s(t._payload)}function Zo(t){function s(V,$){if(t){var K=V.deletions;K===null?(V.deletions=[$],V.flags|=16):K.push($)}}function r(V,$){if(!t)return null;for(;$!==null;)s(V,$),$=$.sibling;return null}function a(V,$){for(V=new Map;$!==null;)$.key!==null?V.set($.key,$):V.set($.index,$),$=$.sibling;return V}function n(V,$){return V=cs(V,$),V.index=0,V.sibling=null,V}function l(V,$,K){return V.index=K,t?(K=V.alternate,K!==null?(K=K.index,K<$?(V.flags|=2,$):K):(V.flags|=2,$)):(V.flags|=1048576,$)}function p(V){return t&&V.alternate===null&&(V.flags|=2),V}function T(V,$,K,oe){return $===null||$.tag!==6?($=ti(K,V.mode,oe),$.return=V,$):($=n($,K),$.return=V,$)}function U(V,$,K,oe){var ge=K.type;return ge===I?se(V,$,K.props.children,oe,K.key):$!==null&&($.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===te&&Xo(ge)===$.type)?(oe=n($,K.props),oe.ref=Ir(V,$,K),oe.return=V,oe):(oe=en(K.type,K.key,K.props,null,V.mode,oe),oe.ref=Ir(V,$,K),oe.return=V,oe)}function Q(V,$,K,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==K.containerInfo||$.stateNode.implementation!==K.implementation?($=si(K,V.mode,oe),$.return=V,$):($=n($,K.children||[]),$.return=V,$)}function se(V,$,K,oe,ge){return $===null||$.tag!==7?($=As(K,V.mode,oe,ge),$.return=V,$):($=n($,K),$.return=V,$)}function ae(V,$,K){if(typeof $=="string"&&$!==""||typeof $=="number")return $=ti(""+$,V.mode,K),$.return=V,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return K=en($.type,$.key,$.props,null,V.mode,K),K.ref=Ir(V,null,$),K.return=V,K;case b:return $=si($,V.mode,K),$.return=V,$;case te:var oe=$._init;return ae(V,oe($._payload),K)}if(Vt($)||J($))return $=As($,V.mode,K,null),$.return=V,$;Da(V,$)}return null}function ee(V,$,K,oe){var ge=$!==null?$.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return ge!==null?null:T(V,$,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case A:return K.key===ge?U(V,$,K,oe):null;case b:return K.key===ge?Q(V,$,K,oe):null;case te:return ge=K._init,ee(V,$,ge(K._payload),oe)}if(Vt(K)||J(K))return ge!==null?null:se(V,$,K,oe,null);Da(V,K)}return null}function de(V,$,K,oe,ge){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return V=V.get(K)||null,T($,V,""+oe,ge);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case A:return V=V.get(oe.key===null?K:oe.key)||null,U($,V,oe,ge);case b:return V=V.get(oe.key===null?K:oe.key)||null,Q($,V,oe,ge);case te:var he=oe._init;return de(V,$,K,he(oe._payload),ge)}if(Vt(oe)||J(oe))return V=V.get(K)||null,se($,V,oe,ge,null);Da($,oe)}return null}function me(V,$,K,oe){for(var ge=null,he=null,fe=$,ve=$=0,Ve=null;fe!==null&&ve<K.length;ve++){fe.index>ve?(Ve=fe,fe=null):Ve=fe.sibling;var ke=ee(V,fe,K[ve],oe);if(ke===null){fe===null&&(fe=Ve);break}t&&fe&&ke.alternate===null&&s(V,fe),$=l(ke,$,ve),he===null?ge=ke:he.sibling=ke,he=ke,fe=Ve}if(ve===K.length)return r(V,fe),Re&&js(V,ve),ge;if(fe===null){for(;ve<K.length;ve++)fe=ae(V,K[ve],oe),fe!==null&&($=l(fe,$,ve),he===null?ge=fe:he.sibling=fe,he=fe);return Re&&js(V,ve),ge}for(fe=a(V,fe);ve<K.length;ve++)Ve=de(fe,V,ve,K[ve],oe),Ve!==null&&(t&&Ve.alternate!==null&&fe.delete(Ve.key===null?ve:Ve.key),$=l(Ve,$,ve),he===null?ge=Ve:he.sibling=Ve,he=Ve);return t&&fe.forEach(function(ds){return s(V,ds)}),Re&&js(V,ve),ge}function pe(V,$,K,oe){var ge=J(K);if(typeof ge!="function")throw Error(u(150));if(K=ge.call(K),K==null)throw Error(u(151));for(var he=ge=null,fe=$,ve=$=0,Ve=null,ke=K.next();fe!==null&&!ke.done;ve++,ke=K.next()){fe.index>ve?(Ve=fe,fe=null):Ve=fe.sibling;var ds=ee(V,fe,ke.value,oe);if(ds===null){fe===null&&(fe=Ve);break}t&&fe&&ds.alternate===null&&s(V,fe),$=l(ds,$,ve),he===null?ge=ds:he.sibling=ds,he=ds,fe=Ve}if(ke.done)return r(V,fe),Re&&js(V,ve),ge;if(fe===null){for(;!ke.done;ve++,ke=K.next())ke=ae(V,ke.value,oe),ke!==null&&($=l(ke,$,ve),he===null?ge=ke:he.sibling=ke,he=ke);return Re&&js(V,ve),ge}for(fe=a(V,fe);!ke.done;ve++,ke=K.next())ke=de(fe,V,ve,ke.value,oe),ke!==null&&(t&&ke.alternate!==null&&fe.delete(ke.key===null?ve:ke.key),$=l(ke,$,ve),he===null?ge=ke:he.sibling=ke,he=ke);return t&&fe.forEach(function(ex){return s(V,ex)}),Re&&js(V,ve),ge}function Oe(V,$,K,oe){if(typeof K=="object"&&K!==null&&K.type===I&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case A:e:{for(var ge=K.key,he=$;he!==null;){if(he.key===ge){if(ge=K.type,ge===I){if(he.tag===7){r(V,he.sibling),$=n(he,K.props.children),$.return=V,V=$;break e}}else if(he.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===te&&Xo(ge)===he.type){r(V,he.sibling),$=n(he,K.props),$.ref=Ir(V,he,K),$.return=V,V=$;break e}r(V,he);break}else s(V,he);he=he.sibling}K.type===I?($=As(K.props.children,V.mode,oe,K.key),$.return=V,V=$):(oe=en(K.type,K.key,K.props,null,V.mode,oe),oe.ref=Ir(V,$,K),oe.return=V,V=oe)}return p(V);case b:e:{for(he=K.key;$!==null;){if($.key===he)if($.tag===4&&$.stateNode.containerInfo===K.containerInfo&&$.stateNode.implementation===K.implementation){r(V,$.sibling),$=n($,K.children||[]),$.return=V,V=$;break e}else{r(V,$);break}else s(V,$);$=$.sibling}$=si(K,V.mode,oe),$.return=V,V=$}return p(V);case te:return he=K._init,Oe(V,$,he(K._payload),oe)}if(Vt(K))return me(V,$,K,oe);if(J(K))return pe(V,$,K,oe);Da(V,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,$!==null&&$.tag===6?(r(V,$.sibling),$=n($,K),$.return=V,V=$):(r(V,$),$=ti(K,V.mode,oe),$.return=V,V=$),p(V)):r(V,$)}return Oe}var Ks=Zo(!0),ec=Zo(!1),Pa=Zt(null),Ra=null,Qs=null,ul=null;function ml(){ul=Qs=Ra=null}function xl(t){var s=Pa.current;Pe(Pa),t._currentValue=s}function pl(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function Ys(t,s){Ra=t,ul=Qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(at=!0),t.firstContext=null)}function ht(t){var s=t._currentValue;if(ul!==t)if(t={context:t,memoizedValue:s,next:null},Qs===null){if(Ra===null)throw Error(u(308));Qs=t,Ra.dependencies={lanes:0,firstContext:t}}else Qs=Qs.next=t;return s}var Ns=null;function gl(t){Ns===null?Ns=[t]:Ns.push(t)}function tc(t,s,r,a){var n=s.interleaved;return n===null?(r.next=r,gl(s)):(r.next=n.next,n.next=r),s.interleaved=r,qt(t,a)}function qt(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ss=!1;function hl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sc(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zt(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function rs(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(we&2)!==0){var n=a.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),a.pending=s,qt(t,r)}return n=a.interleaved,n===null?(s.next=s,gl(a)):(s.next=n.next,n.next=s),a.interleaved=s,qt(t,r)}function Ta(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,Dn(t,r)}}function rc(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var p={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?n=l=p:l=l.next=p,r=r.next}while(r!==null);l===null?n=l=s:l=l.next=s}else n=l=s;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function La(t,s,r,a){var n=t.updateQueue;ss=!1;var l=n.firstBaseUpdate,p=n.lastBaseUpdate,T=n.shared.pending;if(T!==null){n.shared.pending=null;var U=T,Q=U.next;U.next=null,p===null?l=Q:p.next=Q,p=U;var se=t.alternate;se!==null&&(se=se.updateQueue,T=se.lastBaseUpdate,T!==p&&(T===null?se.firstBaseUpdate=Q:T.next=Q,se.lastBaseUpdate=U))}if(l!==null){var ae=n.baseState;p=0,se=Q=U=null,T=l;do{var ee=T.lane,de=T.eventTime;if((a&ee)===ee){se!==null&&(se=se.next={eventTime:de,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var me=t,pe=T;switch(ee=s,de=r,pe.tag){case 1:if(me=pe.payload,typeof me=="function"){ae=me.call(de,ae,ee);break e}ae=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=pe.payload,ee=typeof me=="function"?me.call(de,ae,ee):me,ee==null)break e;ae=O({},ae,ee);break e;case 2:ss=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,ee=n.effects,ee===null?n.effects=[T]:ee.push(T))}else de={eventTime:de,lane:ee,tag:T.tag,payload:T.payload,callback:T.callback,next:null},se===null?(Q=se=de,U=ae):se=se.next=de,p|=ee;if(T=T.next,T===null){if(T=n.shared.pending,T===null)break;ee=T,T=ee.next,ee.next=null,n.lastBaseUpdate=ee,n.shared.pending=null}}while(!0);if(se===null&&(U=ae),n.baseState=U,n.firstBaseUpdate=Q,n.lastBaseUpdate=se,s=n.shared.interleaved,s!==null){n=s;do p|=n.lane,n=n.next;while(n!==s)}else l===null&&(n.shared.lanes=0);ks|=p,t.lanes=p,t.memoizedState=ae}}function ac(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(u(191,n));n.call(a)}}}var Mr={},Dt=Zt(Mr),Or=Zt(Mr),Fr=Zt(Mr);function _s(t){if(t===Mr)throw Error(u(174));return t}function fl(t,s){switch(Ee(Fr,s),Ee(Or,t),Ee(Dt,Mr),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:yn(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=yn(s,t)}Pe(Dt),Ee(Dt,s)}function Js(){Pe(Dt),Pe(Or),Pe(Fr)}function nc(t){_s(Fr.current);var s=_s(Dt.current),r=yn(s,t.type);s!==r&&(Ee(Or,t),Ee(Dt,r))}function yl(t){Or.current===t&&(Pe(Dt),Pe(Or))}var Te=Zt(0);function Ia(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var vl=[];function bl(){for(var t=0;t<vl.length;t++)vl[t]._workInProgressVersionPrimary=null;vl.length=0}var Ma=w.ReactCurrentDispatcher,jl=w.ReactCurrentBatchConfig,ws=0,Le=null,ze=null,He=null,Oa=!1,Ur=!1,qr=0,Nm=0;function Qe(){throw Error(u(321))}function Nl(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Nt(t[r],s[r]))return!1;return!0}function _l(t,s,r,a,n,l){if(ws=l,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ma.current=t===null||t.memoizedState===null?Sm:Cm,t=r(a,n),Ur){l=0;do{if(Ur=!1,qr=0,25<=l)throw Error(u(301));l+=1,He=ze=null,s.updateQueue=null,Ma.current=Em,t=r(a,n)}while(Ur)}if(Ma.current=qa,s=ze!==null&&ze.next!==null,ws=0,He=ze=Le=null,Oa=!1,s)throw Error(u(300));return t}function wl(){var t=qr!==0;return qr=0,t}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Le.memoizedState=He=t:He=He.next=t,He}function ft(){if(ze===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var s=He===null?Le.memoizedState:He.next;if(s!==null)He=s,ze=t;else{if(t===null)throw Error(u(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},He===null?Le.memoizedState=He=t:He=He.next=t}return He}function zr(t,s){return typeof s=="function"?s(t):s}function kl(t){var s=ft(),r=s.queue;if(r===null)throw Error(u(311));r.lastRenderedReducer=t;var a=ze,n=a.baseQueue,l=r.pending;if(l!==null){if(n!==null){var p=n.next;n.next=l.next,l.next=p}a.baseQueue=n=l,r.pending=null}if(n!==null){l=n.next,a=a.baseState;var T=p=null,U=null,Q=l;do{var se=Q.lane;if((ws&se)===se)U!==null&&(U=U.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),a=Q.hasEagerState?Q.eagerState:t(a,Q.action);else{var ae={lane:se,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};U===null?(T=U=ae,p=a):U=U.next=ae,Le.lanes|=se,ks|=se}Q=Q.next}while(Q!==null&&Q!==l);U===null?p=a:U.next=T,Nt(a,s.memoizedState)||(at=!0),s.memoizedState=a,s.baseState=p,s.baseQueue=U,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do l=n.lane,Le.lanes|=l,ks|=l,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function Sl(t){var s=ft(),r=s.queue;if(r===null)throw Error(u(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,l=s.memoizedState;if(n!==null){r.pending=null;var p=n=n.next;do l=t(l,p.action),p=p.next;while(p!==n);Nt(l,s.memoizedState)||(at=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,a]}function lc(){}function ic(t,s){var r=Le,a=ft(),n=s(),l=!Nt(a.memoizedState,n);if(l&&(a.memoizedState=n,at=!0),a=a.queue,Cl(dc.bind(null,r,a,t),[t]),a.getSnapshot!==s||l||He!==null&&He.memoizedState.tag&1){if(r.flags|=2048,$r(9,cc.bind(null,r,a,n,s),void 0,null),Be===null)throw Error(u(349));(ws&30)!==0||oc(r,s,n)}return n}function oc(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Le.updateQueue,s===null?(s={lastEffect:null,stores:null},Le.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function cc(t,s,r,a){s.value=r,s.getSnapshot=a,uc(s)&&mc(t)}function dc(t,s,r){return r(function(){uc(s)&&mc(t)})}function uc(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Nt(t,r)}catch{return!0}}function mc(t){var s=qt(t,1);s!==null&&Ct(s,t,1,-1)}function xc(t){var s=Pt();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:t},s.queue=t,t=t.dispatch=km.bind(null,Le,t),[s.memoizedState,t]}function $r(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=Le.updateQueue,s===null?(s={lastEffect:null,stores:null},Le.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function pc(){return ft().memoizedState}function Fa(t,s,r,a){var n=Pt();Le.flags|=t,n.memoizedState=$r(1|s,r,void 0,a===void 0?null:a)}function Ua(t,s,r,a){var n=ft();a=a===void 0?null:a;var l=void 0;if(ze!==null){var p=ze.memoizedState;if(l=p.destroy,a!==null&&Nl(a,p.deps)){n.memoizedState=$r(s,r,l,a);return}}Le.flags|=t,n.memoizedState=$r(1|s,r,l,a)}function gc(t,s){return Fa(8390656,8,t,s)}function Cl(t,s){return Ua(2048,8,t,s)}function hc(t,s){return Ua(4,2,t,s)}function fc(t,s){return Ua(4,4,t,s)}function yc(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function vc(t,s,r){return r=r!=null?r.concat([t]):null,Ua(4,4,yc.bind(null,s,t),r)}function El(){}function bc(t,s){var r=ft();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Nl(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function jc(t,s){var r=ft();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Nl(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function Nc(t,s,r){return(ws&21)===0?(t.baseState&&(t.baseState=!1,at=!0),t.memoizedState=r):(Nt(r,s)||(r=Ji(),Le.lanes|=r,ks|=r,t.baseState=!0),s)}function _m(t,s){var r=Se;Se=r!==0&&4>r?r:4,t(!0);var a=jl.transition;jl.transition={};try{t(!1),s()}finally{Se=r,jl.transition=a}}function _c(){return ft().memoizedState}function wm(t,s,r){var a=is(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},wc(t))kc(s,r);else if(r=tc(t,s,r,a),r!==null){var n=tt();Ct(r,t,a,n),Sc(r,s,a)}}function km(t,s,r){var a=is(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(wc(t))kc(s,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var p=s.lastRenderedState,T=l(p,r);if(n.hasEagerState=!0,n.eagerState=T,Nt(T,p)){var U=s.interleaved;U===null?(n.next=n,gl(s)):(n.next=U.next,U.next=n),s.interleaved=n;return}}catch{}r=tc(t,s,n,a),r!==null&&(n=tt(),Ct(r,t,a,n),Sc(r,s,a))}}function wc(t){var s=t.alternate;return t===Le||s!==null&&s===Le}function kc(t,s){Ur=Oa=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function Sc(t,s,r){if((r&4194240)!==0){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,Dn(t,r)}}var qa={readContext:ht,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},Sm={readContext:ht,useCallback:function(t,s){return Pt().memoizedState=[t,s===void 0?null:s],t},useContext:ht,useEffect:gc,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Fa(4194308,4,yc.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Fa(4194308,4,t,s)},useInsertionEffect:function(t,s){return Fa(4,2,t,s)},useMemo:function(t,s){var r=Pt();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=Pt();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=wm.bind(null,Le,t),[a.memoizedState,t]},useRef:function(t){var s=Pt();return t={current:t},s.memoizedState=t},useState:xc,useDebugValue:El,useDeferredValue:function(t){return Pt().memoizedState=t},useTransition:function(){var t=xc(!1),s=t[0];return t=_m.bind(null,t[1]),Pt().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=Le,n=Pt();if(Re){if(r===void 0)throw Error(u(407));r=r()}else{if(r=s(),Be===null)throw Error(u(349));(ws&30)!==0||oc(a,s,r)}n.memoizedState=r;var l={value:r,getSnapshot:s};return n.queue=l,gc(dc.bind(null,a,l,t),[t]),a.flags|=2048,$r(9,cc.bind(null,a,l,r,s),void 0,null),r},useId:function(){var t=Pt(),s=Be.identifierPrefix;if(Re){var r=Ut,a=Ft;r=(a&~(1<<32-jt(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=qr++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=Nm++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Cm={readContext:ht,useCallback:bc,useContext:ht,useEffect:Cl,useImperativeHandle:vc,useInsertionEffect:hc,useLayoutEffect:fc,useMemo:jc,useReducer:kl,useRef:pc,useState:function(){return kl(zr)},useDebugValue:El,useDeferredValue:function(t){var s=ft();return Nc(s,ze.memoizedState,t)},useTransition:function(){var t=kl(zr)[0],s=ft().memoizedState;return[t,s]},useMutableSource:lc,useSyncExternalStore:ic,useId:_c,unstable_isNewReconciler:!1},Em={readContext:ht,useCallback:bc,useContext:ht,useEffect:Cl,useImperativeHandle:vc,useInsertionEffect:hc,useLayoutEffect:fc,useMemo:jc,useReducer:Sl,useRef:pc,useState:function(){return Sl(zr)},useDebugValue:El,useDeferredValue:function(t){var s=ft();return ze===null?s.memoizedState=t:Nc(s,ze.memoizedState,t)},useTransition:function(){var t=Sl(zr)[0],s=ft().memoizedState;return[t,s]},useMutableSource:lc,useSyncExternalStore:ic,useId:_c,unstable_isNewReconciler:!1};function wt(t,s){if(t&&t.defaultProps){s=O({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function Al(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:O({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var za={isMounted:function(t){return(t=t._reactInternals)?fs(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=tt(),n=is(t),l=zt(a,n);l.payload=s,r!=null&&(l.callback=r),s=rs(t,l,n),s!==null&&(Ct(s,t,n,a),Ta(s,t,n))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=tt(),n=is(t),l=zt(a,n);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=rs(t,l,n),s!==null&&(Ct(s,t,n,a),Ta(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=tt(),a=is(t),n=zt(r,a);n.tag=2,s!=null&&(n.callback=s),s=rs(t,n,a),s!==null&&(Ct(s,t,a,r),Ta(s,t,a))}};function Cc(t,s,r,a,n,l,p){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,l,p):s.prototype&&s.prototype.isPureReactComponent?!Er(r,a)||!Er(n,l):!0}function Ec(t,s,r){var a=!1,n=es,l=s.contextType;return typeof l=="object"&&l!==null?l=ht(l):(n=rt(s)?vs:Ke.current,a=s.contextTypes,l=(a=a!=null)?Bs(t,n):es),s=new s(r,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=za,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),s}function Ac(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&za.enqueueReplaceState(s,s.state,null)}function Dl(t,s,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},hl(t);var l=s.contextType;typeof l=="object"&&l!==null?n.context=ht(l):(l=rt(s)?vs:Ke.current,n.context=Bs(t,l)),n.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Al(t,s,l,r),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&za.enqueueReplaceState(n,n.state,null),La(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Xs(t,s){try{var r="",a=s;do r+=ce(a),a=a.return;while(a);var n=r}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:n,digest:null}}function Pl(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function Rl(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var Am=typeof WeakMap=="function"?WeakMap:Map;function Dc(t,s,r){r=zt(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){Ka||(Ka=!0,Wl=a),Rl(t,s)},r}function Pc(t,s,r){r=zt(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=s.value;r.payload=function(){return a(n)},r.callback=function(){Rl(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Rl(t,s),typeof a!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var p=s.stack;this.componentDidCatch(s.value,{componentStack:p!==null?p:""})}),r}function Rc(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new Am;var n=new Set;a.set(s,n)}else n=a.get(s),n===void 0&&(n=new Set,a.set(s,n));n.has(r)||(n.add(r),t=Hm.bind(null,t,s,r),s.then(t,t))}function Tc(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Lc(t,s,r,a,n){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=zt(-1,1),s.tag=2,rs(r,s,1))),r.lanes|=1),t):(t.flags|=65536,t.lanes=n,t)}var Dm=w.ReactCurrentOwner,at=!1;function et(t,s,r,a){s.child=t===null?ec(s,null,r,a):Ks(s,t.child,r,a)}function Ic(t,s,r,a,n){r=r.render;var l=s.ref;return Ys(s,n),a=_l(t,s,r,a,l,n),r=wl(),t!==null&&!at?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,$t(t,s,n)):(Re&&r&&ll(s),s.flags|=1,et(t,s,a,n),s.child)}function Mc(t,s,r,a,n){if(t===null){var l=r.type;return typeof l=="function"&&!ei(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,Oc(t,s,l,a,n)):(t=en(r.type,null,a,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,(t.lanes&n)===0){var p=l.memoizedProps;if(r=r.compare,r=r!==null?r:Er,r(p,a)&&t.ref===s.ref)return $t(t,s,n)}return s.flags|=1,t=cs(l,a),t.ref=s.ref,t.return=s,s.child=t}function Oc(t,s,r,a,n){if(t!==null){var l=t.memoizedProps;if(Er(l,a)&&t.ref===s.ref)if(at=!1,s.pendingProps=a=l,(t.lanes&n)!==0)(t.flags&131072)!==0&&(at=!0);else return s.lanes=t.lanes,$t(t,s,n)}return Tl(t,s,r,a,n)}function Fc(t,s,r){var a=s.pendingProps,n=a.children,l=t!==null?t.memoizedState:null;if(a.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(er,mt),mt|=r;else{if((r&1073741824)===0)return t=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Ee(er,mt),mt|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:r,Ee(er,mt),mt|=a}else l!==null?(a=l.baseLanes|r,s.memoizedState=null):a=r,Ee(er,mt),mt|=a;return et(t,s,n,r),s.child}function Uc(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Tl(t,s,r,a,n){var l=rt(r)?vs:Ke.current;return l=Bs(s,l),Ys(s,n),r=_l(t,s,r,a,l,n),a=wl(),t!==null&&!at?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,$t(t,s,n)):(Re&&a&&ll(s),s.flags|=1,et(t,s,r,n),s.child)}function qc(t,s,r,a,n){if(rt(r)){var l=!0;ka(s)}else l=!1;if(Ys(s,n),s.stateNode===null)Ha(t,s),Ec(s,r,a),Dl(s,r,a,n),a=!0;else if(t===null){var p=s.stateNode,T=s.memoizedProps;p.props=T;var U=p.context,Q=r.contextType;typeof Q=="object"&&Q!==null?Q=ht(Q):(Q=rt(r)?vs:Ke.current,Q=Bs(s,Q));var se=r.getDerivedStateFromProps,ae=typeof se=="function"||typeof p.getSnapshotBeforeUpdate=="function";ae||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==a||U!==Q)&&Ac(s,p,a,Q),ss=!1;var ee=s.memoizedState;p.state=ee,La(s,a,p,n),U=s.memoizedState,T!==a||ee!==U||st.current||ss?(typeof se=="function"&&(Al(s,r,se,a),U=s.memoizedState),(T=ss||Cc(s,r,T,a,ee,U,Q))?(ae||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=U),p.props=a,p.state=U,p.context=Q,a=T):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{p=s.stateNode,sc(t,s),T=s.memoizedProps,Q=s.type===s.elementType?T:wt(s.type,T),p.props=Q,ae=s.pendingProps,ee=p.context,U=r.contextType,typeof U=="object"&&U!==null?U=ht(U):(U=rt(r)?vs:Ke.current,U=Bs(s,U));var de=r.getDerivedStateFromProps;(se=typeof de=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==ae||ee!==U)&&Ac(s,p,a,U),ss=!1,ee=s.memoizedState,p.state=ee,La(s,a,p,n);var me=s.memoizedState;T!==ae||ee!==me||st.current||ss?(typeof de=="function"&&(Al(s,r,de,a),me=s.memoizedState),(Q=ss||Cc(s,r,Q,a,ee,me,U)||!1)?(se||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(a,me,U),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(a,me,U)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&ee===t.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ee===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=me),p.props=a,p.state=me,p.context=U,a=Q):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&ee===t.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ee===t.memoizedState||(s.flags|=1024),a=!1)}return Ll(t,s,r,a,l,n)}function Ll(t,s,r,a,n,l){Uc(t,s);var p=(s.flags&128)!==0;if(!a&&!p)return n&&Vo(s,r,!1),$t(t,s,l);a=s.stateNode,Dm.current=s;var T=p&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&p?(s.child=Ks(s,t.child,null,l),s.child=Ks(s,null,T,l)):et(t,s,T,l),s.memoizedState=a.state,n&&Vo(s,r,!0),s.child}function zc(t){var s=t.stateNode;s.pendingContext?Ho(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Ho(t,s.context,!1),fl(t,s.containerInfo)}function $c(t,s,r,a,n){return Ws(),dl(n),s.flags|=256,et(t,s,r,a),s.child}var Il={dehydrated:null,treeContext:null,retryLane:0};function Ml(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hc(t,s,r){var a=s.pendingProps,n=Te.current,l=!1,p=(s.flags&128)!==0,T;if((T=p)||(T=t!==null&&t.memoizedState===null?!1:(n&2)!==0),T?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Ee(Te,n&1),t===null)return cl(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(p=a.children,t=a.fallback,l?(a=s.mode,l=s.child,p={mode:"hidden",children:p},(a&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=p):l=tn(p,a,0,null),t=As(t,a,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=Ml(r),s.memoizedState=Il,t):Ol(s,p));if(n=t.memoizedState,n!==null&&(T=n.dehydrated,T!==null))return Pm(t,s,p,a,T,n,r);if(l){l=a.fallback,p=s.mode,n=t.child,T=n.sibling;var U={mode:"hidden",children:a.children};return(p&1)===0&&s.child!==n?(a=s.child,a.childLanes=0,a.pendingProps=U,s.deletions=null):(a=cs(n,U),a.subtreeFlags=n.subtreeFlags&14680064),T!==null?l=cs(T,l):(l=As(l,p,r,null),l.flags|=2),l.return=s,a.return=s,a.sibling=l,s.child=a,a=l,l=s.child,p=t.child.memoizedState,p=p===null?Ml(r):{baseLanes:p.baseLanes|r,cachePool:null,transitions:p.transitions},l.memoizedState=p,l.childLanes=t.childLanes&~r,s.memoizedState=Il,a}return l=t.child,t=l.sibling,a=cs(l,{mode:"visible",children:a.children}),(s.mode&1)===0&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function Ol(t,s){return s=tn({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function $a(t,s,r,a){return a!==null&&dl(a),Ks(s,t.child,null,r),t=Ol(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Pm(t,s,r,a,n,l,p){if(r)return s.flags&256?(s.flags&=-257,a=Pl(Error(u(422))),$a(t,s,p,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=a.fallback,n=s.mode,a=tn({mode:"visible",children:a.children},n,0,null),l=As(l,n,p,null),l.flags|=2,a.return=s,l.return=s,a.sibling=l,s.child=a,(s.mode&1)!==0&&Ks(s,t.child,null,p),s.child.memoizedState=Ml(p),s.memoizedState=Il,l);if((s.mode&1)===0)return $a(t,s,p,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var T=a.dgst;return a=T,l=Error(u(419)),a=Pl(l,a,void 0),$a(t,s,p,a)}if(T=(p&t.childLanes)!==0,at||T){if(a=Be,a!==null){switch(p&-p){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=(n&(a.suspendedLanes|p))!==0?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,qt(t,n),Ct(a,t,n,-1))}return Zl(),a=Pl(Error(u(421))),$a(t,s,p,a)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=Bm.bind(null,t),n._reactRetry=s,null):(t=l.treeContext,ut=Xt(n.nextSibling),dt=s,Re=!0,_t=null,t!==null&&(pt[gt++]=Ft,pt[gt++]=Ut,pt[gt++]=bs,Ft=t.id,Ut=t.overflow,bs=s),s=Ol(s,a.children),s.flags|=4096,s)}function Bc(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),pl(t.return,s,r)}function Fl(t,s,r,a,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=n)}function Vc(t,s,r){var a=s.pendingProps,n=a.revealOrder,l=a.tail;if(et(t,s,a.children,r),a=Te.current,(a&2)!==0)a=a&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bc(t,r,s);else if(t.tag===19)Bc(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(Ee(Te,a),(s.mode&1)===0)s.memoizedState=null;else switch(n){case"forwards":for(r=s.child,n=null;r!==null;)t=r.alternate,t!==null&&Ia(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=s.child,s.child=null):(n=r.sibling,r.sibling=null),Fl(s,!1,n,r,l);break;case"backwards":for(r=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&Ia(t)===null){s.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}Fl(s,!0,r,null,l);break;case"together":Fl(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ha(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function $t(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),ks|=s.lanes,(r&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(u(153));if(s.child!==null){for(t=s.child,r=cs(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=cs(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function Rm(t,s,r){switch(s.tag){case 3:zc(s),Ws();break;case 5:nc(s);break;case 1:rt(s.type)&&ka(s);break;case 4:fl(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;Ee(Pa,a._currentValue),a._currentValue=n;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(Ee(Te,Te.current&1),s.flags|=128,null):(r&s.child.childLanes)!==0?Hc(t,s,r):(Ee(Te,Te.current&1),t=$t(t,s,r),t!==null?t.sibling:null);Ee(Te,Te.current&1);break;case 19:if(a=(r&s.childLanes)!==0,(t.flags&128)!==0){if(a)return Vc(t,s,r);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ee(Te,Te.current),a)break;return null;case 22:case 23:return s.lanes=0,Fc(t,s,r)}return $t(t,s,r)}var Gc,Ul,Wc,Kc;Gc=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ul=function(){},Wc=function(t,s,r,a){var n=t.memoizedProps;if(n!==a){t=s.stateNode,_s(Dt.current);var l=null;switch(r){case"input":n=Ds(t,n),a=Ds(t,a),l=[];break;case"select":n=O({},n,{value:void 0}),a=O({},a,{value:void 0}),l=[];break;case"textarea":n=fn(t,n),a=fn(t,a),l=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Na)}vn(r,a);var p;r=null;for(Q in n)if(!a.hasOwnProperty(Q)&&n.hasOwnProperty(Q)&&n[Q]!=null)if(Q==="style"){var T=n[Q];for(p in T)T.hasOwnProperty(p)&&(r||(r={}),r[p]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(k.hasOwnProperty(Q)?l||(l=[]):(l=l||[]).push(Q,null));for(Q in a){var U=a[Q];if(T=n?.[Q],a.hasOwnProperty(Q)&&U!==T&&(U!=null||T!=null))if(Q==="style")if(T){for(p in T)!T.hasOwnProperty(p)||U&&U.hasOwnProperty(p)||(r||(r={}),r[p]="");for(p in U)U.hasOwnProperty(p)&&T[p]!==U[p]&&(r||(r={}),r[p]=U[p])}else r||(l||(l=[]),l.push(Q,r)),r=U;else Q==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,T=T?T.__html:void 0,U!=null&&T!==U&&(l=l||[]).push(Q,U)):Q==="children"?typeof U!="string"&&typeof U!="number"||(l=l||[]).push(Q,""+U):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(k.hasOwnProperty(Q)?(U!=null&&Q==="onScroll"&&De("scroll",t),l||T===U||(l=[])):(l=l||[]).push(Q,U))}r&&(l=l||[]).push("style",r);var Q=l;(s.updateQueue=Q)&&(s.flags|=4)}},Kc=function(t,s,r,a){r!==a&&(s.flags|=4)};function Hr(t,s){if(!Re)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Ye(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function Tm(t,s,r){var a=s.pendingProps;switch(il(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(s),null;case 1:return rt(s.type)&&wa(),Ye(s),null;case 3:return a=s.stateNode,Js(),Pe(st),Pe(Ke),bl(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Aa(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,_t!==null&&(Yl(_t),_t=null))),Ul(t,s),Ye(s),null;case 5:yl(s);var n=_s(Fr.current);if(r=s.type,t!==null&&s.stateNode!=null)Wc(t,s,r,a,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(u(166));return Ye(s),null}if(t=_s(Dt.current),Aa(s)){a=s.stateNode,r=s.type;var l=s.memoizedProps;switch(a[At]=s,a[Tr]=l,t=(s.mode&1)!==0,r){case"dialog":De("cancel",a),De("close",a);break;case"iframe":case"object":case"embed":De("load",a);break;case"video":case"audio":for(n=0;n<Dr.length;n++)De(Dr[n],a);break;case"source":De("error",a);break;case"img":case"image":case"link":De("error",a),De("load",a);break;case"details":De("toggle",a);break;case"input":or(a,l),De("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},De("invalid",a);break;case"textarea":Di(a,l),De("invalid",a)}vn(r,l),n=null;for(var p in l)if(l.hasOwnProperty(p)){var T=l[p];p==="children"?typeof T=="string"?a.textContent!==T&&(l.suppressHydrationWarning!==!0&&ja(a.textContent,T,t),n=["children",T]):typeof T=="number"&&a.textContent!==""+T&&(l.suppressHydrationWarning!==!0&&ja(a.textContent,T,t),n=["children",""+T]):k.hasOwnProperty(p)&&T!=null&&p==="onScroll"&&De("scroll",a)}switch(r){case"input":Lt(a),dr(a,l,!0);break;case"textarea":Lt(a),Ri(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=Na)}a=n,s.updateQueue=a,a!==null&&(s.flags|=4)}else{p=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ti(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=p.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=p.createElement(r,{is:a.is}):(t=p.createElement(r),r==="select"&&(p=t,a.multiple?p.multiple=!0:a.size&&(p.size=a.size))):t=p.createElementNS(t,r),t[At]=s,t[Tr]=a,Gc(t,s,!1,!1),s.stateNode=t;e:{switch(p=bn(r,a),r){case"dialog":De("cancel",t),De("close",t),n=a;break;case"iframe":case"object":case"embed":De("load",t),n=a;break;case"video":case"audio":for(n=0;n<Dr.length;n++)De(Dr[n],t);n=a;break;case"source":De("error",t),n=a;break;case"img":case"image":case"link":De("error",t),De("load",t),n=a;break;case"details":De("toggle",t),n=a;break;case"input":or(t,a),n=Ds(t,a),De("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=O({},a,{value:void 0}),De("invalid",t);break;case"textarea":Di(t,a),n=fn(t,a),De("invalid",t);break;default:n=a}vn(r,n),T=n;for(l in T)if(T.hasOwnProperty(l)){var U=T[l];l==="style"?Mi(t,U):l==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Li(t,U)):l==="children"?typeof U=="string"?(r!=="textarea"||U!=="")&&ur(t,U):typeof U=="number"&&ur(t,""+U):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(k.hasOwnProperty(l)?U!=null&&l==="onScroll"&&De("scroll",t):U!=null&&B(t,l,U,p))}switch(r){case"input":Lt(t),dr(t,a,!1);break;case"textarea":Lt(t),Ri(t);break;case"option":a.value!=null&&t.setAttribute("value",""+X(a.value));break;case"select":t.multiple=!!a.multiple,l=a.value,l!=null?It(t,!!a.multiple,l,!1):a.defaultValue!=null&&It(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Na)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ye(s),null;case 6:if(t&&s.stateNode!=null)Kc(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(u(166));if(r=_s(Fr.current),_s(Dt.current),Aa(s)){if(a=s.stateNode,r=s.memoizedProps,a[At]=s,(l=a.nodeValue!==r)&&(t=dt,t!==null))switch(t.tag){case 3:ja(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ja(a.nodeValue,r,(t.mode&1)!==0)}l&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[At]=s,s.stateNode=a}return Ye(s),null;case 13:if(Pe(Te),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&ut!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Jo(),Ws(),s.flags|=98560,l=!1;else if(l=Aa(s),a!==null&&a.dehydrated!==null){if(t===null){if(!l)throw Error(u(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(u(317));l[At]=s}else Ws(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ye(s),l=!1}else _t!==null&&(Yl(_t),_t=null),l=!0;if(!l)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(Te.current&1)!==0?$e===0&&($e=3):Zl())),s.updateQueue!==null&&(s.flags|=4),Ye(s),null);case 4:return Js(),Ul(t,s),t===null&&Pr(s.stateNode.containerInfo),Ye(s),null;case 10:return xl(s.type._context),Ye(s),null;case 17:return rt(s.type)&&wa(),Ye(s),null;case 19:if(Pe(Te),l=s.memoizedState,l===null)return Ye(s),null;if(a=(s.flags&128)!==0,p=l.rendering,p===null)if(a)Hr(l,!1);else{if($e!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(p=Ia(t),p!==null){for(s.flags|=128,Hr(l,!1),a=p.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)l=r,t=a,l.flags&=14680066,p=l.alternate,p===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,t=p.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ee(Te,Te.current&1|2),s.child}t=t.sibling}l.tail!==null&&Me()>tr&&(s.flags|=128,a=!0,Hr(l,!1),s.lanes=4194304)}else{if(!a)if(t=Ia(p),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),Hr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!Re)return Ye(s),null}else 2*Me()-l.renderingStartTime>tr&&r!==1073741824&&(s.flags|=128,a=!0,Hr(l,!1),s.lanes=4194304);l.isBackwards?(p.sibling=s.child,s.child=p):(r=l.last,r!==null?r.sibling=p:s.child=p,l.last=p)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Me(),s.sibling=null,r=Te.current,Ee(Te,a?r&1|2:r&1),s):(Ye(s),null);case 22:case 23:return Xl(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&(s.mode&1)!==0?(mt&1073741824)!==0&&(Ye(s),s.subtreeFlags&6&&(s.flags|=8192)):Ye(s),null;case 24:return null;case 25:return null}throw Error(u(156,s.tag))}function Lm(t,s){switch(il(s),s.tag){case 1:return rt(s.type)&&wa(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Js(),Pe(st),Pe(Ke),bl(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return yl(s),null;case 13:if(Pe(Te),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(u(340));Ws()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Pe(Te),null;case 4:return Js(),null;case 10:return xl(s.type._context),null;case 22:case 23:return Xl(),null;case 24:return null;default:return null}}var Ba=!1,Je=!1,Im=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Zs(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Ie(t,s,a)}else r.current=null}function ql(t,s,r){try{r()}catch(a){Ie(t,s,a)}}var Qc=!1;function Mm(t,s){if(Xn=da,t=Co(),Bn(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var p=0,T=-1,U=-1,Q=0,se=0,ae=t,ee=null;t:for(;;){for(var de;ae!==r||n!==0&&ae.nodeType!==3||(T=p+n),ae!==l||a!==0&&ae.nodeType!==3||(U=p+a),ae.nodeType===3&&(p+=ae.nodeValue.length),(de=ae.firstChild)!==null;)ee=ae,ae=de;for(;;){if(ae===t)break t;if(ee===r&&++Q===n&&(T=p),ee===l&&++se===a&&(U=p),(de=ae.nextSibling)!==null)break;ae=ee,ee=ae.parentNode}ae=de}r=T===-1||U===-1?null:{start:T,end:U}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zn={focusedElem:t,selectionRange:r},da=!1,ue=s;ue!==null;)if(s=ue,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ue=t;else for(;ue!==null;){s=ue;try{var me=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var pe=me.memoizedProps,Oe=me.memoizedState,V=s.stateNode,$=V.getSnapshotBeforeUpdate(s.elementType===s.type?pe:wt(s.type,pe),Oe);V.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var K=s.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(oe){Ie(s,s.return,oe)}if(t=s.sibling,t!==null){t.return=s.return,ue=t;break}ue=s.return}return me=Qc,Qc=!1,me}function Br(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&ql(s,r,l)}n=n.next}while(n!==a)}}function Va(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function zl(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function Yc(t){var s=t.alternate;s!==null&&(t.alternate=null,Yc(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[At],delete s[Tr],delete s[rl],delete s[ym],delete s[vm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jc(t){return t.tag===5||t.tag===3||t.tag===4}function Xc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jc(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $l(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Na));else if(a!==4&&(t=t.child,t!==null))for($l(t,s,r),t=t.sibling;t!==null;)$l(t,s,r),t=t.sibling}function Hl(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Hl(t,s,r),t=t.sibling;t!==null;)Hl(t,s,r),t=t.sibling}var Ge=null,kt=!1;function as(t,s,r){for(r=r.child;r!==null;)Zc(t,s,r),r=r.sibling}function Zc(t,s,r){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(aa,r)}catch{}switch(r.tag){case 5:Je||Zs(r,s);case 6:var a=Ge,n=kt;Ge=null,as(t,s,r),Ge=a,kt=n,Ge!==null&&(kt?(t=Ge,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ge.removeChild(r.stateNode));break;case 18:Ge!==null&&(kt?(t=Ge,r=r.stateNode,t.nodeType===8?sl(t.parentNode,r):t.nodeType===1&&sl(t,r),Nr(t)):sl(Ge,r.stateNode));break;case 4:a=Ge,n=kt,Ge=r.stateNode.containerInfo,kt=!0,as(t,s,r),Ge=a,kt=n;break;case 0:case 11:case 14:case 15:if(!Je&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var l=n,p=l.destroy;l=l.tag,p!==void 0&&((l&2)!==0||(l&4)!==0)&&ql(r,s,p),n=n.next}while(n!==a)}as(t,s,r);break;case 1:if(!Je&&(Zs(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(T){Ie(r,s,T)}as(t,s,r);break;case 21:as(t,s,r);break;case 22:r.mode&1?(Je=(a=Je)||r.memoizedState!==null,as(t,s,r),Je=a):as(t,s,r);break;default:as(t,s,r)}}function ed(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Im),s.forEach(function(a){var n=Vm.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function St(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var l=t,p=s,T=p;e:for(;T!==null;){switch(T.tag){case 5:Ge=T.stateNode,kt=!1;break e;case 3:Ge=T.stateNode.containerInfo,kt=!0;break e;case 4:Ge=T.stateNode.containerInfo,kt=!0;break e}T=T.return}if(Ge===null)throw Error(u(160));Zc(l,p,n),Ge=null,kt=!1;var U=n.alternate;U!==null&&(U.return=null),n.return=null}catch(Q){Ie(n,s,Q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)td(s,t),s=s.sibling}function td(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(St(s,t),Rt(t),a&4){try{Br(3,t,t.return),Va(3,t)}catch(pe){Ie(t,t.return,pe)}try{Br(5,t,t.return)}catch(pe){Ie(t,t.return,pe)}}break;case 1:St(s,t),Rt(t),a&512&&r!==null&&Zs(r,r.return);break;case 5:if(St(s,t),Rt(t),a&512&&r!==null&&Zs(r,r.return),t.flags&32){var n=t.stateNode;try{ur(n,"")}catch(pe){Ie(t,t.return,pe)}}if(a&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,p=r!==null?r.memoizedProps:l,T=t.type,U=t.updateQueue;if(t.updateQueue=null,U!==null)try{T==="input"&&l.type==="radio"&&l.name!=null&&cr(n,l),bn(T,p);var Q=bn(T,l);for(p=0;p<U.length;p+=2){var se=U[p],ae=U[p+1];se==="style"?Mi(n,ae):se==="dangerouslySetInnerHTML"?Li(n,ae):se==="children"?ur(n,ae):B(n,se,ae,Q)}switch(T){case"input":Ps(n,l);break;case"textarea":Pi(n,l);break;case"select":var ee=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var de=l.value;de!=null?It(n,!!l.multiple,de,!1):ee!==!!l.multiple&&(l.defaultValue!=null?It(n,!!l.multiple,l.defaultValue,!0):It(n,!!l.multiple,l.multiple?[]:"",!1))}n[Tr]=l}catch(pe){Ie(t,t.return,pe)}}break;case 6:if(St(s,t),Rt(t),a&4){if(t.stateNode===null)throw Error(u(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(pe){Ie(t,t.return,pe)}}break;case 3:if(St(s,t),Rt(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Nr(s.containerInfo)}catch(pe){Ie(t,t.return,pe)}break;case 4:St(s,t),Rt(t);break;case 13:St(s,t),Rt(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(Gl=Me())),a&4&&ed(t);break;case 22:if(se=r!==null&&r.memoizedState!==null,t.mode&1?(Je=(Q=Je)||se,St(s,t),Je=Q):St(s,t),Rt(t),a&8192){if(Q=t.memoizedState!==null,(t.stateNode.isHidden=Q)&&!se&&(t.mode&1)!==0)for(ue=t,se=t.child;se!==null;){for(ae=ue=se;ue!==null;){switch(ee=ue,de=ee.child,ee.tag){case 0:case 11:case 14:case 15:Br(4,ee,ee.return);break;case 1:Zs(ee,ee.return);var me=ee.stateNode;if(typeof me.componentWillUnmount=="function"){a=ee,r=ee.return;try{s=a,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(pe){Ie(a,r,pe)}}break;case 5:Zs(ee,ee.return);break;case 22:if(ee.memoizedState!==null){ad(ae);continue}}de!==null?(de.return=ee,ue=de):ad(ae)}se=se.sibling}e:for(se=null,ae=t;;){if(ae.tag===5){if(se===null){se=ae;try{n=ae.stateNode,Q?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(T=ae.stateNode,U=ae.memoizedProps.style,p=U!=null&&U.hasOwnProperty("display")?U.display:null,T.style.display=Ii("display",p))}catch(pe){Ie(t,t.return,pe)}}}else if(ae.tag===6){if(se===null)try{ae.stateNode.nodeValue=Q?"":ae.memoizedProps}catch(pe){Ie(t,t.return,pe)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===t)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===t)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===t)break e;se===ae&&(se=null),ae=ae.return}se===ae&&(se=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:St(s,t),Rt(t),a&4&&ed(t);break;case 21:break;default:St(s,t),Rt(t)}}function Rt(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(Jc(r)){var a=r;break e}r=r.return}throw Error(u(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(ur(n,""),a.flags&=-33);var l=Xc(t);Hl(t,l,n);break;case 3:case 4:var p=a.stateNode.containerInfo,T=Xc(t);$l(t,T,p);break;default:throw Error(u(161))}}catch(U){Ie(t,t.return,U)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Om(t,s,r){ue=t,sd(t)}function sd(t,s,r){for(var a=(t.mode&1)!==0;ue!==null;){var n=ue,l=n.child;if(n.tag===22&&a){var p=n.memoizedState!==null||Ba;if(!p){var T=n.alternate,U=T!==null&&T.memoizedState!==null||Je;T=Ba;var Q=Je;if(Ba=p,(Je=U)&&!Q)for(ue=n;ue!==null;)p=ue,U=p.child,p.tag===22&&p.memoizedState!==null?nd(n):U!==null?(U.return=p,ue=U):nd(n);for(;l!==null;)ue=l,sd(l),l=l.sibling;ue=n,Ba=T,Je=Q}rd(t)}else(n.subtreeFlags&8772)!==0&&l!==null?(l.return=n,ue=l):rd(t)}}function rd(t){for(;ue!==null;){var s=ue;if((s.flags&8772)!==0){var r=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Je||Va(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!Je)if(r===null)a.componentDidMount();else{var n=s.elementType===s.type?r.memoizedProps:wt(s.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&ac(s,l,a);break;case 3:var p=s.updateQueue;if(p!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}ac(s,p,r)}break;case 5:var T=s.stateNode;if(r===null&&s.flags&4){r=T;var U=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&r.focus();break;case"img":U.src&&(r.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Q=s.alternate;if(Q!==null){var se=Q.memoizedState;if(se!==null){var ae=se.dehydrated;ae!==null&&Nr(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(u(163))}Je||s.flags&512&&zl(s)}catch(ee){Ie(s,s.return,ee)}}if(s===t){ue=null;break}if(r=s.sibling,r!==null){r.return=s.return,ue=r;break}ue=s.return}}function ad(t){for(;ue!==null;){var s=ue;if(s===t){ue=null;break}var r=s.sibling;if(r!==null){r.return=s.return,ue=r;break}ue=s.return}}function nd(t){for(;ue!==null;){var s=ue;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Va(4,s)}catch(U){Ie(s,r,U)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var n=s.return;try{a.componentDidMount()}catch(U){Ie(s,n,U)}}var l=s.return;try{zl(s)}catch(U){Ie(s,l,U)}break;case 5:var p=s.return;try{zl(s)}catch(U){Ie(s,p,U)}}}catch(U){Ie(s,s.return,U)}if(s===t){ue=null;break}var T=s.sibling;if(T!==null){T.return=s.return,ue=T;break}ue=s.return}}var Fm=Math.ceil,Ga=w.ReactCurrentDispatcher,Bl=w.ReactCurrentOwner,yt=w.ReactCurrentBatchConfig,we=0,Be=null,qe=null,We=0,mt=0,er=Zt(0),$e=0,Vr=null,ks=0,Wa=0,Vl=0,Gr=null,nt=null,Gl=0,tr=1/0,Ht=null,Ka=!1,Wl=null,ns=null,Qa=!1,ls=null,Ya=0,Wr=0,Kl=null,Ja=-1,Xa=0;function tt(){return(we&6)!==0?Me():Ja!==-1?Ja:Ja=Me()}function is(t){return(t.mode&1)===0?1:(we&2)!==0&&We!==0?We&-We:jm.transition!==null?(Xa===0&&(Xa=Ji()),Xa):(t=Se,t!==0||(t=window.event,t=t===void 0?16:lo(t.type)),t)}function Ct(t,s,r,a){if(50<Wr)throw Wr=0,Kl=null,Error(u(185));fr(t,r,a),((we&2)===0||t!==Be)&&(t===Be&&((we&2)===0&&(Wa|=r),$e===4&&os(t,We)),lt(t,a),r===1&&we===0&&(s.mode&1)===0&&(tr=Me()+500,Sa&&ts()))}function lt(t,s){var r=t.callbackNode;ju(t,s);var a=ia(t,t===Be?We:0);if(a===0)r!==null&&Ki(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&Ki(r),s===1)t.tag===0?bm(id.bind(null,t)):Go(id.bind(null,t)),hm(function(){(we&6)===0&&ts()}),r=null;else{switch(Xi(a)){case 1:r=Cn;break;case 4:r=Qi;break;case 16:r=ra;break;case 536870912:r=Yi;break;default:r=ra}r=gd(r,ld.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function ld(t,s){if(Ja=-1,Xa=0,(we&6)!==0)throw Error(u(327));var r=t.callbackNode;if(sr()&&t.callbackNode!==r)return null;var a=ia(t,t===Be?We:0);if(a===0)return null;if((a&30)!==0||(a&t.expiredLanes)!==0||s)s=Za(t,a);else{s=a;var n=we;we|=2;var l=cd();(Be!==t||We!==s)&&(Ht=null,tr=Me()+500,Cs(t,s));do try{zm();break}catch(T){od(t,T)}while(!0);ml(),Ga.current=l,we=n,qe!==null?s=0:(Be=null,We=0,s=$e)}if(s!==0){if(s===2&&(n=En(t),n!==0&&(a=n,s=Ql(t,n))),s===1)throw r=Vr,Cs(t,0),os(t,a),lt(t,Me()),r;if(s===6)os(t,a);else{if(n=t.current.alternate,(a&30)===0&&!Um(n)&&(s=Za(t,a),s===2&&(l=En(t),l!==0&&(a=l,s=Ql(t,l))),s===1))throw r=Vr,Cs(t,0),os(t,a),lt(t,Me()),r;switch(t.finishedWork=n,t.finishedLanes=a,s){case 0:case 1:throw Error(u(345));case 2:Es(t,nt,Ht);break;case 3:if(os(t,a),(a&130023424)===a&&(s=Gl+500-Me(),10<s)){if(ia(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){tt(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=tl(Es.bind(null,t,nt,Ht),s);break}Es(t,nt,Ht);break;case 4:if(os(t,a),(a&4194240)===a)break;for(s=t.eventTimes,n=-1;0<a;){var p=31-jt(a);l=1<<p,p=s[p],p>n&&(n=p),a&=~l}if(a=n,a=Me()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Fm(a/1960))-a,10<a){t.timeoutHandle=tl(Es.bind(null,t,nt,Ht),a);break}Es(t,nt,Ht);break;case 5:Es(t,nt,Ht);break;default:throw Error(u(329))}}}return lt(t,Me()),t.callbackNode===r?ld.bind(null,t):null}function Ql(t,s){var r=Gr;return t.current.memoizedState.isDehydrated&&(Cs(t,s).flags|=256),t=Za(t,s),t!==2&&(s=nt,nt=r,s!==null&&Yl(s)),t}function Yl(t){nt===null?nt=t:nt.push.apply(nt,t)}function Um(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],l=n.getSnapshot;n=n.value;try{if(!Nt(l(),n))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function os(t,s){for(s&=~Vl,s&=~Wa,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-jt(s),a=1<<r;t[r]=-1,s&=~a}}function id(t){if((we&6)!==0)throw Error(u(327));sr();var s=ia(t,0);if((s&1)===0)return lt(t,Me()),null;var r=Za(t,s);if(t.tag!==0&&r===2){var a=En(t);a!==0&&(s=a,r=Ql(t,a))}if(r===1)throw r=Vr,Cs(t,0),os(t,s),lt(t,Me()),r;if(r===6)throw Error(u(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Es(t,nt,Ht),lt(t,Me()),null}function Jl(t,s){var r=we;we|=1;try{return t(s)}finally{we=r,we===0&&(tr=Me()+500,Sa&&ts())}}function Ss(t){ls!==null&&ls.tag===0&&(we&6)===0&&sr();var s=we;we|=1;var r=yt.transition,a=Se;try{if(yt.transition=null,Se=1,t)return t()}finally{Se=a,yt.transition=r,we=s,(we&6)===0&&ts()}}function Xl(){mt=er.current,Pe(er)}function Cs(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,gm(r)),qe!==null)for(r=qe.return;r!==null;){var a=r;switch(il(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&wa();break;case 3:Js(),Pe(st),Pe(Ke),bl();break;case 5:yl(a);break;case 4:Js();break;case 13:Pe(Te);break;case 19:Pe(Te);break;case 10:xl(a.type._context);break;case 22:case 23:Xl()}r=r.return}if(Be=t,qe=t=cs(t.current,null),We=mt=s,$e=0,Vr=null,Vl=Wa=ks=0,nt=Gr=null,Ns!==null){for(s=0;s<Ns.length;s++)if(r=Ns[s],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,l=r.pending;if(l!==null){var p=l.next;l.next=n,a.next=p}r.pending=a}Ns=null}return t}function od(t,s){do{var r=qe;try{if(ml(),Ma.current=qa,Oa){for(var a=Le.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Oa=!1}if(ws=0,He=ze=Le=null,Ur=!1,qr=0,Bl.current=null,r===null||r.return===null){$e=1,Vr=s,qe=null;break}e:{var l=t,p=r.return,T=r,U=s;if(s=We,T.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var Q=U,se=T,ae=se.tag;if((se.mode&1)===0&&(ae===0||ae===11||ae===15)){var ee=se.alternate;ee?(se.updateQueue=ee.updateQueue,se.memoizedState=ee.memoizedState,se.lanes=ee.lanes):(se.updateQueue=null,se.memoizedState=null)}var de=Tc(p);if(de!==null){de.flags&=-257,Lc(de,p,T,l,s),de.mode&1&&Rc(l,Q,s),s=de,U=Q;var me=s.updateQueue;if(me===null){var pe=new Set;pe.add(U),s.updateQueue=pe}else me.add(U);break e}else{if((s&1)===0){Rc(l,Q,s),Zl();break e}U=Error(u(426))}}else if(Re&&T.mode&1){var Oe=Tc(p);if(Oe!==null){(Oe.flags&65536)===0&&(Oe.flags|=256),Lc(Oe,p,T,l,s),dl(Xs(U,T));break e}}l=U=Xs(U,T),$e!==4&&($e=2),Gr===null?Gr=[l]:Gr.push(l),l=p;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var V=Dc(l,U,s);rc(l,V);break e;case 1:T=U;var $=l.type,K=l.stateNode;if((l.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(ns===null||!ns.has(K)))){l.flags|=65536,s&=-s,l.lanes|=s;var oe=Pc(l,T,s);rc(l,oe);break e}}l=l.return}while(l!==null)}ud(r)}catch(ge){s=ge,qe===r&&r!==null&&(qe=r=r.return);continue}break}while(!0)}function cd(){var t=Ga.current;return Ga.current=qa,t===null?qa:t}function Zl(){($e===0||$e===3||$e===2)&&($e=4),Be===null||(ks&268435455)===0&&(Wa&268435455)===0||os(Be,We)}function Za(t,s){var r=we;we|=2;var a=cd();(Be!==t||We!==s)&&(Ht=null,Cs(t,s));do try{qm();break}catch(n){od(t,n)}while(!0);if(ml(),we=r,Ga.current=a,qe!==null)throw Error(u(261));return Be=null,We=0,$e}function qm(){for(;qe!==null;)dd(qe)}function zm(){for(;qe!==null&&!mu();)dd(qe)}function dd(t){var s=pd(t.alternate,t,mt);t.memoizedProps=t.pendingProps,s===null?ud(t):qe=s,Bl.current=null}function ud(t){var s=t;do{var r=s.alternate;if(t=s.return,(s.flags&32768)===0){if(r=Tm(r,s,mt),r!==null){qe=r;return}}else{if(r=Lm(r,s),r!==null){r.flags&=32767,qe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,qe=null;return}}if(s=s.sibling,s!==null){qe=s;return}qe=s=t}while(s!==null);$e===0&&($e=5)}function Es(t,s,r){var a=Se,n=yt.transition;try{yt.transition=null,Se=1,$m(t,s,r,a)}finally{yt.transition=n,Se=a}return null}function $m(t,s,r,a){do sr();while(ls!==null);if((we&6)!==0)throw Error(u(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(u(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(Nu(t,l),t===Be&&(qe=Be=null,We=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Qa||(Qa=!0,gd(ra,function(){return sr(),null})),l=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||l){l=yt.transition,yt.transition=null;var p=Se;Se=1;var T=we;we|=4,Bl.current=null,Mm(t,r),td(r,t),om(Zn),da=!!Xn,Zn=Xn=null,t.current=r,Om(r),xu(),we=T,Se=p,yt.transition=l}else t.current=r;if(Qa&&(Qa=!1,ls=t,Ya=n),l=t.pendingLanes,l===0&&(ns=null),hu(r.stateNode),lt(t,Me()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)n=s[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(Ka)throw Ka=!1,t=Wl,Wl=null,t;return(Ya&1)!==0&&t.tag!==0&&sr(),l=t.pendingLanes,(l&1)!==0?t===Kl?Wr++:(Wr=0,Kl=t):Wr=0,ts(),null}function sr(){if(ls!==null){var t=Xi(Ya),s=yt.transition,r=Se;try{if(yt.transition=null,Se=16>t?16:t,ls===null)var a=!1;else{if(t=ls,ls=null,Ya=0,(we&6)!==0)throw Error(u(331));var n=we;for(we|=4,ue=t.current;ue!==null;){var l=ue,p=l.child;if((ue.flags&16)!==0){var T=l.deletions;if(T!==null){for(var U=0;U<T.length;U++){var Q=T[U];for(ue=Q;ue!==null;){var se=ue;switch(se.tag){case 0:case 11:case 15:Br(8,se,l)}var ae=se.child;if(ae!==null)ae.return=se,ue=ae;else for(;ue!==null;){se=ue;var ee=se.sibling,de=se.return;if(Yc(se),se===Q){ue=null;break}if(ee!==null){ee.return=de,ue=ee;break}ue=de}}}var me=l.alternate;if(me!==null){var pe=me.child;if(pe!==null){me.child=null;do{var Oe=pe.sibling;pe.sibling=null,pe=Oe}while(pe!==null)}}ue=l}}if((l.subtreeFlags&2064)!==0&&p!==null)p.return=l,ue=p;else e:for(;ue!==null;){if(l=ue,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:Br(9,l,l.return)}var V=l.sibling;if(V!==null){V.return=l.return,ue=V;break e}ue=l.return}}var $=t.current;for(ue=$;ue!==null;){p=ue;var K=p.child;if((p.subtreeFlags&2064)!==0&&K!==null)K.return=p,ue=K;else e:for(p=$;ue!==null;){if(T=ue,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Va(9,T)}}catch(ge){Ie(T,T.return,ge)}if(T===p){ue=null;break e}var oe=T.sibling;if(oe!==null){oe.return=T.return,ue=oe;break e}ue=T.return}}if(we=n,ts(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(aa,t)}catch{}a=!0}return a}finally{Se=r,yt.transition=s}}return!1}function md(t,s,r){s=Xs(r,s),s=Dc(t,s,1),t=rs(t,s,1),s=tt(),t!==null&&(fr(t,1,s),lt(t,s))}function Ie(t,s,r){if(t.tag===3)md(t,t,r);else for(;s!==null;){if(s.tag===3){md(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ns===null||!ns.has(a))){t=Xs(r,t),t=Pc(s,t,1),s=rs(s,t,1),t=tt(),s!==null&&(fr(s,1,t),lt(s,t));break}}s=s.return}}function Hm(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=tt(),t.pingedLanes|=t.suspendedLanes&r,Be===t&&(We&r)===r&&($e===4||$e===3&&(We&130023424)===We&&500>Me()-Gl?Cs(t,0):Vl|=r),lt(t,s)}function xd(t,s){s===0&&((t.mode&1)===0?s=1:(s=la,la<<=1,(la&130023424)===0&&(la=4194304)));var r=tt();t=qt(t,s),t!==null&&(fr(t,s,r),lt(t,r))}function Bm(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),xd(t,r)}function Vm(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(u(314))}a!==null&&a.delete(s),xd(t,r)}var pd;pd=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||st.current)at=!0;else{if((t.lanes&r)===0&&(s.flags&128)===0)return at=!1,Rm(t,s,r);at=(t.flags&131072)!==0}else at=!1,Re&&(s.flags&1048576)!==0&&Wo(s,Ea,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Ha(t,s),t=s.pendingProps;var n=Bs(s,Ke.current);Ys(s,r),n=_l(null,s,a,t,n,r);var l=wl();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,rt(a)?(l=!0,ka(s)):l=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,hl(s),n.updater=za,s.stateNode=n,n._reactInternals=s,Dl(s,a,t,r),s=Ll(null,s,a,!0,l,r)):(s.tag=0,Re&&l&&ll(s),et(null,s,n,r),s=s.child),s;case 16:a=s.elementType;e:{switch(Ha(t,s),t=s.pendingProps,n=a._init,a=n(a._payload),s.type=a,n=s.tag=Wm(a),t=wt(a,t),n){case 0:s=Tl(null,s,a,t,r);break e;case 1:s=qc(null,s,a,t,r);break e;case 11:s=Ic(null,s,a,t,r);break e;case 14:s=Mc(null,s,a,wt(a.type,t),r);break e}throw Error(u(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:wt(a,n),Tl(t,s,a,n,r);case 1:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:wt(a,n),qc(t,s,a,n,r);case 3:e:{if(zc(s),t===null)throw Error(u(387));a=s.pendingProps,l=s.memoizedState,n=l.element,sc(t,s),La(s,a,null,r);var p=s.memoizedState;if(a=p.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){n=Xs(Error(u(423)),s),s=$c(t,s,a,r,n);break e}else if(a!==n){n=Xs(Error(u(424)),s),s=$c(t,s,a,r,n);break e}else for(ut=Xt(s.stateNode.containerInfo.firstChild),dt=s,Re=!0,_t=null,r=ec(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ws(),a===n){s=$t(t,s,r);break e}et(t,s,a,r)}s=s.child}return s;case 5:return nc(s),t===null&&cl(s),a=s.type,n=s.pendingProps,l=t!==null?t.memoizedProps:null,p=n.children,el(a,n)?p=null:l!==null&&el(a,l)&&(s.flags|=32),Uc(t,s),et(t,s,p,r),s.child;case 6:return t===null&&cl(s),null;case 13:return Hc(t,s,r);case 4:return fl(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=Ks(s,null,a,r):et(t,s,a,r),s.child;case 11:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:wt(a,n),Ic(t,s,a,n,r);case 7:return et(t,s,s.pendingProps,r),s.child;case 8:return et(t,s,s.pendingProps.children,r),s.child;case 12:return et(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,l=s.memoizedProps,p=n.value,Ee(Pa,a._currentValue),a._currentValue=p,l!==null)if(Nt(l.value,p)){if(l.children===n.children&&!st.current){s=$t(t,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var T=l.dependencies;if(T!==null){p=l.child;for(var U=T.firstContext;U!==null;){if(U.context===a){if(l.tag===1){U=zt(-1,r&-r),U.tag=2;var Q=l.updateQueue;if(Q!==null){Q=Q.shared;var se=Q.pending;se===null?U.next=U:(U.next=se.next,se.next=U),Q.pending=U}}l.lanes|=r,U=l.alternate,U!==null&&(U.lanes|=r),pl(l.return,r,s),T.lanes|=r;break}U=U.next}}else if(l.tag===10)p=l.type===s.type?null:l.child;else if(l.tag===18){if(p=l.return,p===null)throw Error(u(341));p.lanes|=r,T=p.alternate,T!==null&&(T.lanes|=r),pl(p,r,s),p=l.sibling}else p=l.child;if(p!==null)p.return=l;else for(p=l;p!==null;){if(p===s){p=null;break}if(l=p.sibling,l!==null){l.return=p.return,p=l;break}p=p.return}l=p}et(t,s,n.children,r),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,Ys(s,r),n=ht(n),a=a(n),s.flags|=1,et(t,s,a,r),s.child;case 14:return a=s.type,n=wt(a,s.pendingProps),n=wt(a.type,n),Mc(t,s,a,n,r);case 15:return Oc(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:wt(a,n),Ha(t,s),s.tag=1,rt(a)?(t=!0,ka(s)):t=!1,Ys(s,r),Ec(s,a,n),Dl(s,a,n,r),Ll(null,s,a,!0,t,r);case 19:return Vc(t,s,r);case 22:return Fc(t,s,r)}throw Error(u(156,s.tag))};function gd(t,s){return Wi(t,s)}function Gm(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(t,s,r,a){return new Gm(t,s,r,a)}function ei(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wm(t){if(typeof t=="function")return ei(t)?1:0;if(t!=null){if(t=t.$$typeof,t===L)return 11;if(t===Z)return 14}return 2}function cs(t,s){var r=t.alternate;return r===null?(r=vt(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function en(t,s,r,a,n,l){var p=2;if(a=t,typeof t=="function")ei(t)&&(p=1);else if(typeof t=="string")p=5;else e:switch(t){case I:return As(r.children,n,l,s);case G:p=8,n|=8;break;case _:return t=vt(12,r,s,n|2),t.elementType=_,t.lanes=l,t;case re:return t=vt(13,r,s,n),t.elementType=re,t.lanes=l,t;case xe:return t=vt(19,r,s,n),t.elementType=xe,t.lanes=l,t;case ie:return tn(r,n,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case le:p=10;break e;case z:p=9;break e;case L:p=11;break e;case Z:p=14;break e;case te:p=16,a=null;break e}throw Error(u(130,t==null?t:typeof t,""))}return s=vt(p,r,s,n),s.elementType=t,s.type=a,s.lanes=l,s}function As(t,s,r,a){return t=vt(7,t,a,s),t.lanes=r,t}function tn(t,s,r,a){return t=vt(22,t,a,s),t.elementType=ie,t.lanes=r,t.stateNode={isHidden:!1},t}function ti(t,s,r){return t=vt(6,t,null,s),t.lanes=r,t}function si(t,s,r){return s=vt(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Km(t,s,r,a,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=An(0),this.expirationTimes=An(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=An(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function ri(t,s,r,a,n,l,p,T,U){return t=new Km(t,s,r,T,U),s===1?(s=1,l===!0&&(s|=8)):s=0,l=vt(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},hl(l),t}function Qm(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:b,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function hd(t){if(!t)return es;t=t._reactInternals;e:{if(fs(t)!==t||t.tag!==1)throw Error(u(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(rt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(u(171))}if(t.tag===1){var r=t.type;if(rt(r))return Bo(t,r,s)}return s}function fd(t,s,r,a,n,l,p,T,U){return t=ri(r,a,!0,t,n,l,p,T,U),t.context=hd(null),r=t.current,a=tt(),n=is(r),l=zt(a,n),l.callback=s??null,rs(r,l,n),t.current.lanes=n,fr(t,n,a),lt(t,a),t}function sn(t,s,r,a){var n=s.current,l=tt(),p=is(n);return r=hd(r),s.context===null?s.context=r:s.pendingContext=r,s=zt(l,p),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=rs(n,s,p),t!==null&&(Ct(t,n,p,l),Ta(t,n,p)),p}function rn(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yd(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function ai(t,s){yd(t,s),(t=t.alternate)&&yd(t,s)}function Ym(){return null}var vd=typeof reportError=="function"?reportError:function(t){console.error(t)};function ni(t){this._internalRoot=t}an.prototype.render=ni.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(u(409));sn(t,s,null,null)},an.prototype.unmount=ni.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Ss(function(){sn(null,t,null,null)}),s[Mt]=null}};function an(t){this._internalRoot=t}an.prototype.unstable_scheduleHydration=function(t){if(t){var s=to();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Qt.length&&s!==0&&s<Qt[r].priority;r++);Qt.splice(r,0,t),r===0&&ao(t)}};function li(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nn(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bd(){}function Jm(t,s,r,a,n){if(n){if(typeof a=="function"){var l=a;a=function(){var Q=rn(p);l.call(Q)}}var p=fd(s,a,t,0,null,!1,!1,"",bd);return t._reactRootContainer=p,t[Mt]=p.current,Pr(t.nodeType===8?t.parentNode:t),Ss(),p}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var T=a;a=function(){var Q=rn(U);T.call(Q)}}var U=ri(t,0,!1,null,null,!1,!1,"",bd);return t._reactRootContainer=U,t[Mt]=U.current,Pr(t.nodeType===8?t.parentNode:t),Ss(function(){sn(s,U,r,a)}),U}function ln(t,s,r,a,n){var l=r._reactRootContainer;if(l){var p=l;if(typeof n=="function"){var T=n;n=function(){var U=rn(p);T.call(U)}}sn(s,p,t,n)}else p=Jm(r,s,t,n,a);return rn(p)}Zi=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=hr(s.pendingLanes);r!==0&&(Dn(s,r|1),lt(s,Me()),(we&6)===0&&(tr=Me()+500,ts()))}break;case 13:Ss(function(){var a=qt(t,1);if(a!==null){var n=tt();Ct(a,t,1,n)}}),ai(t,1)}},Pn=function(t){if(t.tag===13){var s=qt(t,134217728);if(s!==null){var r=tt();Ct(s,t,134217728,r)}ai(t,134217728)}},eo=function(t){if(t.tag===13){var s=is(t),r=qt(t,s);if(r!==null){var a=tt();Ct(r,t,s,a)}ai(t,s)}},to=function(){return Se},so=function(t,s){var r=Se;try{return Se=t,s()}finally{Se=r}},_n=function(t,s,r){switch(s){case"input":if(Ps(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var n=_a(a);if(!n)throw Error(u(90));gs(a),Ps(a,n)}}}break;case"textarea":Pi(t,r);break;case"select":s=r.value,s!=null&&It(t,!!r.multiple,s,!1)}},qi=Jl,zi=Ss;var Xm={usingClientEntryPoint:!1,Events:[Lr,$s,_a,Fi,Ui,Jl]},Kr={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zm={bundleType:Kr.bundleType,version:Kr.version,rendererPackageName:Kr.rendererPackageName,rendererConfig:Kr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vi(t),t===null?null:t.stateNode},findFiberByHostInstance:Kr.findFiberByHostInstance||Ym,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var on=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!on.isDisabled&&on.supportsFiber)try{aa=on.inject(Zm),Et=on}catch{}}return it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xm,it.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!li(s))throw Error(u(200));return Qm(t,s,null,r)},it.createRoot=function(t,s){if(!li(t))throw Error(u(299));var r=!1,a="",n=vd;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=ri(t,1,!1,null,null,r,!1,a,n),t[Mt]=s.current,Pr(t.nodeType===8?t.parentNode:t),new ni(s)},it.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(u(188)):(t=Object.keys(t).join(","),Error(u(268,t)));return t=Vi(s),t=t===null?null:t.stateNode,t},it.flushSync=function(t){return Ss(t)},it.hydrate=function(t,s,r){if(!nn(s))throw Error(u(200));return ln(null,t,s,!0,r)},it.hydrateRoot=function(t,s,r){if(!li(t))throw Error(u(405));var a=r!=null&&r.hydratedSources||null,n=!1,l="",p=vd;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),s=fd(s,null,t,1,r??null,n,!1,l,p),t[Mt]=s.current,Pr(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,n]:s.mutableSourceEagerHydrationData.push(r,n);return new an(s)},it.render=function(t,s,r){if(!nn(s))throw Error(u(200));return ln(null,t,s,!1,r)},it.unmountComponentAtNode=function(t){if(!nn(t))throw Error(u(40));return t._reactRootContainer?(Ss(function(){ln(null,null,t,!1,function(){t._reactRootContainer=null,t[Mt]=null})}),!0):!1},it.unstable_batchedUpdates=Jl,it.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!nn(r))throw Error(u(200));if(t==null||t._reactInternals===void 0)throw Error(u(38));return ln(t,s,r,!1,a)},it.version="18.3.1-next-f1338f8080-20240426",it}var Ed;function Bd(){if(Ed)return ci.exports;Ed=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(d){console.error(d)}}return o(),ci.exports=cx(),ci.exports}var Ad;function dx(){if(Ad)return cn;Ad=1;var o=Bd();return cn.createRoot=o.createRoot,cn.hydrateRoot=o.hydrateRoot,cn}var ux=dx();const mx=Hd(ux);Bd();function Yr(){return Yr=Object.assign?Object.assign.bind():function(o){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var N in u)Object.prototype.hasOwnProperty.call(u,N)&&(o[N]=u[N])}return o},Yr.apply(this,arguments)}var ms;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(ms||(ms={}));const Dd="popstate";function xx(o){o===void 0&&(o={});function d(N,k){let{pathname:S,search:P,hash:E}=N.location;return pi("",{pathname:S,search:P,hash:E},k.state&&k.state.usr||null,k.state&&k.state.key||"default")}function u(N,k){return typeof k=="string"?k:mn(k)}return gx(d,u,null,o)}function Fe(o,d){if(o===!1||o===null||typeof o>"u")throw new Error(d)}function _i(o,d){if(!o){typeof console<"u"&&console.warn(d);try{throw new Error(d)}catch{}}}function px(){return Math.random().toString(36).substr(2,8)}function Pd(o,d){return{usr:o.state,key:o.key,idx:d}}function pi(o,d,u,N){return u===void 0&&(u=null),Yr({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof d=="string"?nr(d):d,{state:u,key:d&&d.key||N||px()})}function mn(o){let{pathname:d="/",search:u="",hash:N=""}=o;return u&&u!=="?"&&(d+=u.charAt(0)==="?"?u:"?"+u),N&&N!=="#"&&(d+=N.charAt(0)==="#"?N:"#"+N),d}function nr(o){let d={};if(o){let u=o.indexOf("#");u>=0&&(d.hash=o.substr(u),o=o.substr(0,u));let N=o.indexOf("?");N>=0&&(d.search=o.substr(N),o=o.substr(0,N)),o&&(d.pathname=o)}return d}function gx(o,d,u,N){N===void 0&&(N={});let{window:k=document.defaultView,v5Compat:S=!1}=N,P=k.history,E=ms.Pop,m=null,D=v();D==null&&(D=0,P.replaceState(Yr({},P.state,{idx:D}),""));function v(){return(P.state||{idx:null}).idx}function j(){E=ms.Pop;let h=v(),i=h==null?null:h-D;D=h,m&&m({action:E,location:x.location,delta:i})}function C(h,i){E=ms.Push;let R=pi(x.location,h,i);D=v()+1;let B=Pd(R,D),w=x.createHref(R);try{P.pushState(B,"",w)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;k.location.assign(w)}S&&m&&m({action:E,location:x.location,delta:1})}function q(h,i){E=ms.Replace;let R=pi(x.location,h,i);D=v();let B=Pd(R,D),w=x.createHref(R);P.replaceState(B,"",w),S&&m&&m({action:E,location:x.location,delta:0})}function c(h){let i=k.location.origin!=="null"?k.location.origin:k.location.href,R=typeof h=="string"?h:mn(h);return R=R.replace(/ $/,"%20"),Fe(i,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,i)}let x={get action(){return E},get location(){return o(k,P)},listen(h){if(m)throw new Error("A history only accepts one active listener");return k.addEventListener(Dd,j),m=h,()=>{k.removeEventListener(Dd,j),m=null}},createHref(h){return d(k,h)},createURL:c,encodeLocation(h){let i=c(h);return{pathname:i.pathname,search:i.search,hash:i.hash}},push:C,replace:q,go(h){return P.go(h)}};return x}var Rd;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(Rd||(Rd={}));function hx(o,d,u){return u===void 0&&(u="/"),fx(o,d,u)}function fx(o,d,u,N){let k=typeof d=="string"?nr(d):d,S=wi(k.pathname||"/",u);if(S==null)return null;let P=Vd(o);yx(P);let E=null;for(let m=0;E==null&&m<P.length;++m){let D=Dx(S);E=Cx(P[m],D)}return E}function Vd(o,d,u,N){d===void 0&&(d=[]),u===void 0&&(u=[]),N===void 0&&(N="");let k=(S,P,E)=>{let m={relativePath:E===void 0?S.path||"":E,caseSensitive:S.caseSensitive===!0,childrenIndex:P,route:S};m.relativePath.startsWith("/")&&(Fe(m.relativePath.startsWith(N),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+N+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(N.length));let D=xs([N,m.relativePath]),v=u.concat(m);S.children&&S.children.length>0&&(Fe(S.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+D+'".')),Vd(S.children,d,v,D)),!(S.path==null&&!S.index)&&d.push({path:D,score:kx(D,S.index),routesMeta:v})};return o.forEach((S,P)=>{var E;if(S.path===""||!((E=S.path)!=null&&E.includes("?")))k(S,P);else for(let m of Gd(S.path))k(S,P,m)}),d}function Gd(o){let d=o.split("/");if(d.length===0)return[];let[u,...N]=d,k=u.endsWith("?"),S=u.replace(/\?$/,"");if(N.length===0)return k?[S,""]:[S];let P=Gd(N.join("/")),E=[];return E.push(...P.map(m=>m===""?S:[S,m].join("/"))),k&&E.push(...P),E.map(m=>o.startsWith("/")&&m===""?"/":m)}function yx(o){o.sort((d,u)=>d.score!==u.score?u.score-d.score:Sx(d.routesMeta.map(N=>N.childrenIndex),u.routesMeta.map(N=>N.childrenIndex)))}const vx=/^:[\w-]+$/,bx=3,jx=2,Nx=1,_x=10,wx=-2,Td=o=>o==="*";function kx(o,d){let u=o.split("/"),N=u.length;return u.some(Td)&&(N+=wx),d&&(N+=jx),u.filter(k=>!Td(k)).reduce((k,S)=>k+(vx.test(S)?bx:S===""?Nx:_x),N)}function Sx(o,d){return o.length===d.length&&o.slice(0,-1).every((N,k)=>N===d[k])?o[o.length-1]-d[d.length-1]:0}function Cx(o,d,u){let{routesMeta:N}=o,k={},S="/",P=[];for(let E=0;E<N.length;++E){let m=N[E],D=E===N.length-1,v=S==="/"?d:d.slice(S.length)||"/",j=Ex({path:m.relativePath,caseSensitive:m.caseSensitive,end:D},v),C=m.route;if(!j)return null;Object.assign(k,j.params),P.push({params:k,pathname:xs([S,j.pathname]),pathnameBase:Ix(xs([S,j.pathnameBase])),route:C}),j.pathnameBase!=="/"&&(S=xs([S,j.pathnameBase]))}return P}function Ex(o,d){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[u,N]=Ax(o.path,o.caseSensitive,o.end),k=d.match(u);if(!k)return null;let S=k[0],P=S.replace(/(.)\/+$/,"$1"),E=k.slice(1);return{params:N.reduce((D,v,j)=>{let{paramName:C,isOptional:q}=v;if(C==="*"){let x=E[j]||"";P=S.slice(0,S.length-x.length).replace(/(.)\/+$/,"$1")}const c=E[j];return q&&!c?D[C]=void 0:D[C]=(c||"").replace(/%2F/g,"/"),D},{}),pathname:S,pathnameBase:P,pattern:o}}function Ax(o,d,u){d===void 0&&(d=!1),u===void 0&&(u=!0),_i(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let N=[],k="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(P,E,m)=>(N.push({paramName:E,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(N.push({paramName:"*"}),k+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):u?k+="\\/*$":o!==""&&o!=="/"&&(k+="(?:(?=\\/|$))"),[new RegExp(k,d?void 0:"i"),N]}function Dx(o){try{return o.split("/").map(d=>decodeURIComponent(d).replace(/\//g,"%2F")).join("/")}catch(d){return _i(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+d+").")),o}}function wi(o,d){if(d==="/")return o;if(!o.toLowerCase().startsWith(d.toLowerCase()))return null;let u=d.endsWith("/")?d.length-1:d.length,N=o.charAt(u);return N&&N!=="/"?null:o.slice(u)||"/"}const Px=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rx=o=>Px.test(o);function Tx(o,d){d===void 0&&(d="/");let{pathname:u,search:N="",hash:k=""}=typeof o=="string"?nr(o):o,S;if(u)if(Rx(u))S=u;else{if(u.includes("//")){let P=u;u=u.replace(/\/\/+/g,"/"),_i(!1,"Pathnames cannot have embedded double slashes - normalizing "+(P+" -> "+u))}u.startsWith("/")?S=Ld(u.substring(1),"/"):S=Ld(u,d)}else S=d;return{pathname:S,search:Mx(N),hash:Ox(k)}}function Ld(o,d){let u=d.replace(/\/+$/,"").split("/");return o.split("/").forEach(k=>{k===".."?u.length>1&&u.pop():k!=="."&&u.push(k)}),u.length>1?u.join("/"):"/"}function mi(o,d,u,N){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+d+"` field ["+JSON.stringify(N)+"].  Please separate it out to the ")+("`to."+u+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Lx(o){return o.filter((d,u)=>u===0||d.route.path&&d.route.path.length>0)}function ki(o,d){let u=Lx(o);return d?u.map((N,k)=>k===u.length-1?N.pathname:N.pathnameBase):u.map(N=>N.pathnameBase)}function Si(o,d,u,N){N===void 0&&(N=!1);let k;typeof o=="string"?k=nr(o):(k=Yr({},o),Fe(!k.pathname||!k.pathname.includes("?"),mi("?","pathname","search",k)),Fe(!k.pathname||!k.pathname.includes("#"),mi("#","pathname","hash",k)),Fe(!k.search||!k.search.includes("#"),mi("#","search","hash",k)));let S=o===""||k.pathname==="",P=S?"/":k.pathname,E;if(P==null)E=u;else{let j=d.length-1;if(!N&&P.startsWith("..")){let C=P.split("/");for(;C[0]==="..";)C.shift(),j-=1;k.pathname=C.join("/")}E=j>=0?d[j]:"/"}let m=Tx(k,E),D=P&&P!=="/"&&P.endsWith("/"),v=(S||P===".")&&u.endsWith("/");return!m.pathname.endsWith("/")&&(D||v)&&(m.pathname+="/"),m}const xs=o=>o.join("/").replace(/\/\/+/g,"/"),Ix=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),Mx=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,Ox=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function Fx(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const Wd=["post","put","patch","delete"];new Set(Wd);const Ux=["get",...Wd];new Set(Ux);function Jr(){return Jr=Object.assign?Object.assign.bind():function(o){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var N in u)Object.prototype.hasOwnProperty.call(u,N)&&(o[N]=u[N])}return o},Jr.apply(this,arguments)}const Ci=g.createContext(null),qx=g.createContext(null),ps=g.createContext(null),pn=g.createContext(null),Bt=g.createContext({outlet:null,matches:[],isDataRoute:!1}),Kd=g.createContext(null);function zx(o,d){let{relative:u}=d===void 0?{}:d;lr()||Fe(!1);let{basename:N,navigator:k}=g.useContext(ps),{hash:S,pathname:P,search:E}=Yd(o,{relative:u}),m=P;return N!=="/"&&(m=P==="/"?N:xs([N,P])),k.createHref({pathname:m,search:E,hash:S})}function lr(){return g.useContext(pn)!=null}function ir(){return lr()||Fe(!1),g.useContext(pn).location}function Qd(o){g.useContext(ps).static||g.useLayoutEffect(o)}function Zr(){let{isDataRoute:o}=g.useContext(Bt);return o?ep():$x()}function $x(){lr()||Fe(!1);let o=g.useContext(Ci),{basename:d,future:u,navigator:N}=g.useContext(ps),{matches:k}=g.useContext(Bt),{pathname:S}=ir(),P=JSON.stringify(ki(k,u.v7_relativeSplatPath)),E=g.useRef(!1);return Qd(()=>{E.current=!0}),g.useCallback(function(D,v){if(v===void 0&&(v={}),!E.current)return;if(typeof D=="number"){N.go(D);return}let j=Si(D,JSON.parse(P),S,v.relative==="path");o==null&&d!=="/"&&(j.pathname=j.pathname==="/"?d:xs([d,j.pathname])),(v.replace?N.replace:N.push)(j,v.state,v)},[d,N,P,S,o])}function Ei(){let{matches:o}=g.useContext(Bt),d=o[o.length-1];return d?d.params:{}}function Yd(o,d){let{relative:u}=d===void 0?{}:d,{future:N}=g.useContext(ps),{matches:k}=g.useContext(Bt),{pathname:S}=ir(),P=JSON.stringify(ki(k,N.v7_relativeSplatPath));return g.useMemo(()=>Si(o,JSON.parse(P),S,u==="path"),[o,P,S,u])}function Hx(o,d){return Bx(o,d)}function Bx(o,d,u,N){lr()||Fe(!1);let{navigator:k}=g.useContext(ps),{matches:S}=g.useContext(Bt),P=S[S.length-1],E=P?P.params:{};P&&P.pathname;let m=P?P.pathnameBase:"/";P&&P.route;let D=ir(),v;if(d){var j;let h=typeof d=="string"?nr(d):d;m==="/"||(j=h.pathname)!=null&&j.startsWith(m)||Fe(!1),v=h}else v=D;let C=v.pathname||"/",q=C;if(m!=="/"){let h=m.replace(/^\//,"").split("/");q="/"+C.replace(/^\//,"").split("/").slice(h.length).join("/")}let c=hx(o,{pathname:q}),x=Qx(c&&c.map(h=>Object.assign({},h,{params:Object.assign({},E,h.params),pathname:xs([m,k.encodeLocation?k.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?m:xs([m,k.encodeLocation?k.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),S,u,N);return d&&x?g.createElement(pn.Provider,{value:{location:Jr({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:ms.Pop}},x):x}function Vx(){let o=Zx(),d=Fx(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),u=o instanceof Error?o.stack:null,k={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},d),u?g.createElement("pre",{style:k},u):null,null)}const Gx=g.createElement(Vx,null);class Wx extends g.Component{constructor(d){super(d),this.state={location:d.location,revalidation:d.revalidation,error:d.error}}static getDerivedStateFromError(d){return{error:d}}static getDerivedStateFromProps(d,u){return u.location!==d.location||u.revalidation!=="idle"&&d.revalidation==="idle"?{error:d.error,location:d.location,revalidation:d.revalidation}:{error:d.error!==void 0?d.error:u.error,location:u.location,revalidation:d.revalidation||u.revalidation}}componentDidCatch(d,u){console.error("React Router caught the following error during render",d,u)}render(){return this.state.error!==void 0?g.createElement(Bt.Provider,{value:this.props.routeContext},g.createElement(Kd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kx(o){let{routeContext:d,match:u,children:N}=o,k=g.useContext(Ci);return k&&k.static&&k.staticContext&&(u.route.errorElement||u.route.ErrorBoundary)&&(k.staticContext._deepestRenderedBoundaryId=u.route.id),g.createElement(Bt.Provider,{value:d},N)}function Qx(o,d,u,N){var k;if(d===void 0&&(d=[]),u===void 0&&(u=null),N===void 0&&(N=null),o==null){var S;if(!u)return null;if(u.errors)o=u.matches;else if((S=N)!=null&&S.v7_partialHydration&&d.length===0&&!u.initialized&&u.matches.length>0)o=u.matches;else return null}let P=o,E=(k=u)==null?void 0:k.errors;if(E!=null){let v=P.findIndex(j=>j.route.id&&E?.[j.route.id]!==void 0);v>=0||Fe(!1),P=P.slice(0,Math.min(P.length,v+1))}let m=!1,D=-1;if(u&&N&&N.v7_partialHydration)for(let v=0;v<P.length;v++){let j=P[v];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(D=v),j.route.id){let{loaderData:C,errors:q}=u,c=j.route.loader&&C[j.route.id]===void 0&&(!q||q[j.route.id]===void 0);if(j.route.lazy||c){m=!0,D>=0?P=P.slice(0,D+1):P=[P[0]];break}}}return P.reduceRight((v,j,C)=>{let q,c=!1,x=null,h=null;u&&(q=E&&j.route.id?E[j.route.id]:void 0,x=j.route.errorElement||Gx,m&&(D<0&&C===0?(tp("route-fallback"),c=!0,h=null):D===C&&(c=!0,h=j.route.hydrateFallbackElement||null)));let i=d.concat(P.slice(0,C+1)),R=()=>{let B;return q?B=x:c?B=h:j.route.Component?B=g.createElement(j.route.Component,null):j.route.element?B=j.route.element:B=v,g.createElement(Kx,{match:j,routeContext:{outlet:v,matches:i,isDataRoute:u!=null},children:B})};return u&&(j.route.ErrorBoundary||j.route.errorElement||C===0)?g.createElement(Wx,{location:u.location,revalidation:u.revalidation,component:x,error:q,children:R(),routeContext:{outlet:null,matches:i,isDataRoute:!0}}):R()},null)}var Jd=(function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o})(Jd||{}),Xd=(function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o})(Xd||{});function Yx(o){let d=g.useContext(Ci);return d||Fe(!1),d}function Jx(o){let d=g.useContext(qx);return d||Fe(!1),d}function Xx(o){let d=g.useContext(Bt);return d||Fe(!1),d}function Zd(o){let d=Xx(),u=d.matches[d.matches.length-1];return u.route.id||Fe(!1),u.route.id}function Zx(){var o;let d=g.useContext(Kd),u=Jx(),N=Zd();return d!==void 0?d:(o=u.errors)==null?void 0:o[N]}function ep(){let{router:o}=Yx(Jd.UseNavigateStable),d=Zd(Xd.UseNavigateStable),u=g.useRef(!1);return Qd(()=>{u.current=!0}),g.useCallback(function(k,S){S===void 0&&(S={}),u.current&&(typeof k=="number"?o.navigate(k):o.navigate(k,Jr({fromRouteId:d},S)))},[o,d])}const Id={};function tp(o,d,u){Id[o]||(Id[o]=!0)}function sp(o,d){o?.v7_startTransition,o?.v7_relativeSplatPath}function rr(o){let{to:d,replace:u,state:N,relative:k}=o;lr()||Fe(!1);let{future:S,static:P}=g.useContext(ps),{matches:E}=g.useContext(Bt),{pathname:m}=ir(),D=Zr(),v=Si(d,ki(E,S.v7_relativeSplatPath),m,k==="path"),j=JSON.stringify(v);return g.useEffect(()=>D(JSON.parse(j),{replace:u,state:N,relative:k}),[D,j,k,u,N]),null}function ye(o){Fe(!1)}function rp(o){let{basename:d="/",children:u=null,location:N,navigationType:k=ms.Pop,navigator:S,static:P=!1,future:E}=o;lr()&&Fe(!1);let m=d.replace(/^\/*/,"/"),D=g.useMemo(()=>({basename:m,navigator:S,static:P,future:Jr({v7_relativeSplatPath:!1},E)}),[m,E,S,P]);typeof N=="string"&&(N=nr(N));let{pathname:v="/",search:j="",hash:C="",state:q=null,key:c="default"}=N,x=g.useMemo(()=>{let h=wi(v,m);return h==null?null:{location:{pathname:h,search:j,hash:C,state:q,key:c},navigationType:k}},[m,v,j,C,q,c,k]);return x==null?null:g.createElement(ps.Provider,{value:D},g.createElement(pn.Provider,{children:u,value:x}))}function Md(o){let{children:d,location:u}=o;return Hx(gi(d),u)}new Promise(()=>{});function gi(o,d){d===void 0&&(d=[]);let u=[];return g.Children.forEach(o,(N,k)=>{if(!g.isValidElement(N))return;let S=[...d,k];if(N.type===g.Fragment){u.push.apply(u,gi(N.props.children,S));return}N.type!==ye&&Fe(!1),!N.props.index||!N.props.children||Fe(!1);let P={id:N.props.id||S.join("-"),caseSensitive:N.props.caseSensitive,element:N.props.element,Component:N.props.Component,index:N.props.index,path:N.props.path,loader:N.props.loader,action:N.props.action,errorElement:N.props.errorElement,ErrorBoundary:N.props.ErrorBoundary,hasErrorBoundary:N.props.ErrorBoundary!=null||N.props.errorElement!=null,shouldRevalidate:N.props.shouldRevalidate,handle:N.props.handle,lazy:N.props.lazy};N.props.children&&(P.children=gi(N.props.children,S)),u.push(P)}),u}function hi(){return hi=Object.assign?Object.assign.bind():function(o){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var N in u)Object.prototype.hasOwnProperty.call(u,N)&&(o[N]=u[N])}return o},hi.apply(this,arguments)}function ap(o,d){if(o==null)return{};var u={},N=Object.keys(o),k,S;for(S=0;S<N.length;S++)k=N[S],!(d.indexOf(k)>=0)&&(u[k]=o[k]);return u}function np(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function lp(o,d){return o.button===0&&(!d||d==="_self")&&!np(o)}const ip=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],op="6";try{window.__reactRouterVersion=op}catch{}const cp="startTransition",Od=lx[cp];function dp(o){let{basename:d,children:u,future:N,window:k}=o,S=g.useRef();S.current==null&&(S.current=xx({window:k,v5Compat:!0}));let P=S.current,[E,m]=g.useState({action:P.action,location:P.location}),{v7_startTransition:D}=N||{},v=g.useCallback(j=>{D&&Od?Od(()=>m(j)):m(j)},[m,D]);return g.useLayoutEffect(()=>P.listen(v),[P,v]),g.useEffect(()=>sp(N),[N]),g.createElement(rp,{basename:d,children:u,location:E.location,navigationType:E.action,navigator:P,future:N})}const up=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bt=g.forwardRef(function(d,u){let{onClick:N,relative:k,reloadDocument:S,replace:P,state:E,target:m,to:D,preventScrollReset:v,viewTransition:j}=d,C=ap(d,ip),{basename:q}=g.useContext(ps),c,x=!1;if(typeof D=="string"&&mp.test(D)&&(c=D,up))try{let B=new URL(window.location.href),w=D.startsWith("//")?new URL(B.protocol+D):new URL(D),A=wi(w.pathname,q);w.origin===B.origin&&A!=null?D=A+w.search+w.hash:x=!0}catch{}let h=zx(D,{relative:k}),i=xp(D,{replace:P,state:E,target:m,preventScrollReset:v,relative:k,viewTransition:j});function R(B){N&&N(B),B.defaultPrevented||i(B)}return g.createElement("a",hi({},C,{href:c||h,onClick:x||S?N:R,ref:u,target:m}))});var Fd;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})(Fd||(Fd={}));var Ud;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(Ud||(Ud={}));function xp(o,d){let{target:u,replace:N,state:k,preventScrollReset:S,relative:P,viewTransition:E}=d===void 0?{}:d,m=Zr(),D=ir(),v=Yd(o,{relative:P});return g.useCallback(j=>{if(lp(j,u)){j.preventDefault();let C=N!==void 0?N:mn(D)===mn(v);m(o,{replace:C,state:k,preventScrollReset:S,relative:P,viewTransition:E})}},[D,m,v,N,k,u,o,S,P,E])}const F=tx.create({baseURL:window.location.origin,headers:{"Content-Type":"application/json",Accept:"application/json"}}),qd=localStorage.getItem("token");qd&&(F.defaults.headers.common.Authorization=`Bearer ${qd}`);F.interceptors.response.use(o=>o,o=>(o.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user_email"),window.location.href="/login"),Promise.reject(o)));const eu=g.createContext(null);function pp({children:o}){const[d,u]=g.useState(null),[N,k]=g.useState(localStorage.getItem("token")),[S,P]=g.useState(!0);g.useEffect(()=>{N?(F.defaults.headers.common.Authorization=`Bearer ${N}`,E()):P(!1)},[N]);const E=async()=>{try{if(!N){P(!1);return}try{const v=await F.get("/api/v1/me"),j=v.data?.data||v.data;u(j),localStorage.setItem("user_email",j.email),localStorage.setItem("user_name",j.name)}catch{const j=localStorage.getItem("user_email"),C=localStorage.getItem("user_name");if(j)u({email:j,name:C||j.split("@")[0]});else{D();return}}P(!1)}catch(v){console.error("Error fetching user:",v),D()}},m=async(v,j)=>{try{const C=await F.post("/api/v1/login",{email:v,password:j}),{token:q,user:c}=C.data;k(q),localStorage.setItem("token",q),F.defaults.headers.common.Authorization=`Bearer ${q}`;try{const x=await F.get("/api/v1/me"),h=x.data?.data||x.data;u(h),localStorage.setItem("user_email",h.email||v),localStorage.setItem("user_name",h.name||v.split("@")[0])}catch{u(c||{email:v,name:v.split("@")[0]}),localStorage.setItem("user_email",c?.email||v),localStorage.setItem("user_name",c?.name||v.split("@")[0])}return{success:!0}}catch(C){return console.error("Login error:",C),{success:!1,message:C.response?.data?.message||C.message||"Login failed"}}},D=()=>{k(null),u(null),localStorage.removeItem("token"),localStorage.removeItem("user_email"),delete F.defaults.headers.common.Authorization};return e.jsx(eu.Provider,{value:{user:d,token:N,login:m,logout:D,loading:S},children:o})}function gn(){const o=g.useContext(eu);if(!o)throw new Error("useAuth must be used within AuthProvider");return o}const gp=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tu=(...o)=>o.filter((d,u,N)=>!!d&&N.indexOf(d)===u).join(" ");var hp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fp=g.forwardRef(({color:o="currentColor",size:d=24,strokeWidth:u=2,absoluteStrokeWidth:N,className:k="",children:S,iconNode:P,...E},m)=>g.createElement("svg",{ref:m,...hp,width:d,height:d,stroke:o,strokeWidth:N?Number(u)*24/Number(d):u,className:tu("lucide",k),...E},[...P.map(([D,v])=>g.createElement(D,v)),...Array.isArray(S)?S:[S]]));const be=(o,d)=>{const u=g.forwardRef(({className:N,...k},S)=>g.createElement(fp,{ref:S,iconNode:d,className:tu(`lucide-${gp(o)}`,N),...k}));return u.displayName=`${o}`,u};const Ai=be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const yp=be("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const vp=be("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const zd=be("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const fi=be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const bp=be("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const hn=be("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const jp=be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Np=be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const _p=be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Xr=be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const wp=be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Tt=be("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const kp=be("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);const Sp=be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const xt=be("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);const su=be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Cp=be("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Ep=be("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);const Ap=be("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Dp=be("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Pp=be("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const $d=be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const ru=be("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Rp=be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Xe=be("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Tp=be("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const _e=be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const yi=be("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Lp=be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Ip=be("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const Mp=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const vi=be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const xn=be("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const dn=be("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);const Ae=be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const bi=be("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const ar=be("Tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]]);const Ce=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const ot=be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Op=be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Fp=be("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);const au=be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const un=be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Up=be("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);const qp=be("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const Ze=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function zp(){const[o,d]=g.useState(""),[u,N]=g.useState(""),[k,S]=g.useState(""),[P,E]=g.useState(!1),{login:m}=gn(),D=Zr(),v=async j=>{j.preventDefault(),S(""),E(!0);const C=await m(o,u);C.success?D("/"):S(C.message||"Invalid credentials"),E(!1)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-green-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-green-600 p-3 rounded-full",children:e.jsx(ar,{className:"h-12 w-12 text-white"})})}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Farm Management System"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to manage your farm operations"})]}),e.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-lg shadow-lg",onSubmit:v,children:[k&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:k}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:j=>d(j.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:u,onChange:j=>N(j.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Enter your password"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:P,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Signing in...":"Sign in"})}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Demo credentials:"}),e.jsx("p",{className:"font-mono text-xs mt-1",children:"admin@fms.test / password"})]})]})]})})}function $p(){const[o,d]=g.useState({totalSales:0,totalExpenses:0,totalRevenue:0,totalMargin:0,crops:{},loading:!0}),[u,N]=g.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});g.useEffect(()=>{k()},[u]);const k=async()=>{try{d(q=>({...q,loading:!0}));const[S,P]=await Promise.all([F.get(`/api/v1/gari-sales/summary?date_from=${u.from}&date_to=${u.to}`).catch(()=>({data:{overall:{}}})),F.get(`/api/v1/gari-production-batches?date_from=${u.from}&date_to=${u.to}`).catch(()=>({data:{data:[]}}))]),E=S.data?.overall||{},m=Array.isArray(P.data?.data)?P.data.data:[],D=Number(E.total_revenue||0),v=Number(E.total_cost||0),j=Number(E.total_margin||0),C=m.reduce((q,c)=>q+Number(c.total_cost||0),0);d({totalSales:Number(E.total_sales||0),totalExpenses:C,totalRevenue:D,totalMargin:j,crops:{gari:{sales:D,expenses:C,margin:j,batches:m.length},bellPepper:{sales:0,expenses:0,margin:0,batches:0},tomatoes:{sales:0,expenses:0,margin:0,batches:0},habaneros:{sales:0,expenses:0,margin:0,batches:0}},loading:!1})}catch(S){console.error("Error fetching consolidated data:",S),d(P=>({...P,loading:!1}))}};return o.loading?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Dashboard"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Overview across all crops and livestock"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:u.from,onChange:S=>N({...u,from:S.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:u.to,onChange:S=>N({...u,to:S.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx(Tt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(o.totalRevenue||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All crops combined"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx(hn,{className:"h-5 w-5 text-red-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(o.totalExpenses||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Production costs"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),e.jsx(ot,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(o.totalMargin||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.totalRevenue>0?Number(o.totalMargin/o.totalRevenue*100).toFixed(1)+"% margin":"No sales"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Sales"}),e.jsx(Xe,{className:"h-5 w-5 text-blue-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:o.totalSales}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Transactions"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance by Crop"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expenses"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Batches"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(o.crops).map(([S,P])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:S==="bellPepper"?"Bell Pepper":S}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(P.sales||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(P.expenses||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(P.margin||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.batches})]},S))})]})})]})]})}const Hp=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"];function Bp(){const[o,d]=g.useState([]),[u,N]=g.useState(!0),[k,S]=g.useState(!1),[P,E]=g.useState(null),[m,D]=g.useState({name:"",legal_name:"",farm_type:"MIXED",country:"Nigeria",state:"Ondo",town:"",default_currency:"NGN",default_unit_system:"METRIC",default_timezone:"Africa/Lagos",accounting_method:"ACCRUAL",status:"ACTIVE"});g.useEffect(()=>{v()},[]);const v=async()=>{N(!0);try{const i=await F.get("/api/v1/farms?per_page=1000"),R=i.data?.data||(Array.isArray(i.data)?i.data:[]);d(Array.isArray(R)?R:[])}catch(i){console.error("Error fetching farms:",i),d([])}finally{N(!1)}},j=async(i=null)=>{if(E(i),i)try{const B=(await F.get(`/api/v1/farms/${i.id}`)).data?.data||i;D({name:B.name||"",legal_name:B.legal_name||"",farm_type:B.farm_type||"MIXED",country:B.country||"Nigeria",state:B.state||"",town:B.town||"",default_currency:B.default_currency||"NGN",default_unit_system:B.default_unit_system||"METRIC",default_timezone:B.default_timezone||"Africa/Lagos",accounting_method:B.accounting_method||"ACCRUAL",status:B.status||"ACTIVE"})}catch(R){console.error("Error fetching farm:",R),D({name:i.name||"",legal_name:i.legal_name||"",farm_type:i.farm_type||"MIXED",country:i.country||"Nigeria",state:i.state||"",town:i.town||"",default_currency:i.default_currency||"NGN",default_unit_system:i.default_unit_system||"METRIC",default_timezone:i.default_timezone||"Africa/Lagos",accounting_method:i.accounting_method||"ACCRUAL",status:i.status||"ACTIVE"})}else D({name:"",legal_name:"",farm_type:"MIXED",country:"Nigeria",state:"Ondo",town:"",default_currency:"NGN",default_unit_system:"METRIC",default_timezone:"Africa/Lagos",accounting_method:"ACCRUAL",status:"ACTIVE"});S(!0)},C=async i=>{i.preventDefault();try{P?await F.put(`/api/v1/farms/${P.id}`,m):await F.post("/api/v1/farms",m),S(!1),v()}catch(R){console.error("Error saving farm:",R),alert(R.response?.data?.message||"Error saving farm")}},q=async i=>{if(confirm("Are you sure you want to delete this farm?"))try{await F.delete(`/api/v1/farms/${i}`),v()}catch(R){console.error("Error deleting farm:",R),alert(R.response?.data?.message||"Error deleting farm")}},c=i=>({CROP:"Crop",LIVESTOCK:"Livestock",MIXED:"Mixed",AQUACULTURE:"Aquaculture",HORTICULTURE:"Horticulture"})[i]||i,x=i=>({ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",ARCHIVED:"bg-red-100 text-red-800"})[i]||"bg-gray-100 text-gray-800",h=i=>{const R=[i.town,i.state,i.country].filter(Boolean);return R.length>0?R.join(", "):"Location not specified"};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Farms"}),e.jsxs("button",{onClick:()=>j(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Add Farm"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(ar,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No farms yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first farm"}),e.jsx("button",{onClick:()=>j(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create Farm"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Legal Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:i.farm_code||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:i.legal_name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c(i.farm_type)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ru,{size:14,className:"mr-1"}),h(i)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${x(i.status)}`,children:i.status||"ACTIVE"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx(bt,{to:`/farms/${i.id}`,className:"text-blue-600 hover:text-blue-900 mr-4",title:"View Details",children:"View"}),e.jsx("button",{onClick:()=>j(i),className:"text-green-600 hover:text-green-900 mr-4",children:e.jsx(Ae,{size:16,className:"inline"})}),e.jsx("button",{onClick:()=>q(i.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16,className:"inline"})})]})]},i.id))})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:P?"Edit Farm":"Create New Farm"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:i=>D({...m,name:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Name"}),e.jsx("input",{type:"text",value:m.legal_name,onChange:i=>D({...m,legal_name:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm Type *"}),e.jsxs("select",{required:!0,value:m.farm_type,onChange:i=>D({...m,farm_type:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"CROP",children:"Crop"}),e.jsx("option",{value:"LIVESTOCK",children:"Livestock"}),e.jsx("option",{value:"MIXED",children:"Mixed"}),e.jsx("option",{value:"AQUACULTURE",children:"Aquaculture"}),e.jsx("option",{value:"HORTICULTURE",children:"Horticulture"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:m.status,onChange:i=>D({...m,status:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"ARCHIVED",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country *"}),e.jsx("input",{type:"text",required:!0,value:m.country,onChange:i=>D({...m,country:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),e.jsx("select",{required:!0,value:m.state,onChange:i=>D({...m,state:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:Hp.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Town *"}),e.jsx("input",{type:"text",required:!0,value:m.town,onChange:i=>D({...m,town:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Currency *"}),e.jsx("input",{type:"text",required:!0,maxLength:"3",value:m.default_currency,onChange:i=>D({...m,default_currency:i.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Unit System *"}),e.jsxs("select",{required:!0,value:m.default_unit_system,onChange:i=>D({...m,default_unit_system:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"METRIC",children:"Metric"}),e.jsx("option",{value:"IMPERIAL",children:"Imperial"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Timezone *"}),e.jsx("input",{type:"text",required:!0,value:m.default_timezone,onChange:i=>D({...m,default_timezone:i.target.value}),placeholder:"Africa/Lagos",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Accounting Method *"}),e.jsxs("select",{required:!0,value:m.accounting_method,onChange:i=>D({...m,accounting_method:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"ACCRUAL",children:"Accrual"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[P?"Update":"Create"," Farm"]})]})]})]})})]})}function Vp(){const{id:o}=Ei(),[d,u]=g.useState(null),[N,k]=g.useState(!0);g.useEffect(()=>{S()},[o]);const S=async()=>{try{const P=await F.get(`/api/v1/farms/${o}`);u(P.data.data||P.data)}catch(P){console.error("Error fetching farm:",P)}finally{k(!1)}};return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):d?e.jsxs("div",{children:[e.jsxs(bt,{to:"/farms",className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[e.jsx(Ai,{className:"h-5 w-5 mr-2"}),"Back to Farms"]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(ar,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:d.name}),d.location&&e.jsxs("div",{className:"flex items-center text-gray-600 mt-1",children:[e.jsx(ru,{className:"h-4 w-4 mr-1"}),d.location]})]})]}),d.is_active?e.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-green-100 text-green-800 rounded",children:"Active"}):e.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-gray-100 text-gray-800 rounded",children:"Inactive"})]})}),e.jsxs("div",{className:"px-6 py-4",children:[d.description&&e.jsx("p",{className:"text-gray-700 mb-4",children:d.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.total_area&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Area"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[d.total_area," ",d.area_unit||"hectares"]})]}),d.fields&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Fields"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d.fields?.length||0})]}),d.seasons&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Seasons"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d.seasons?.length||0})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.fields&&d.fields.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Fields"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:d.fields.map(P=>e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:P.name}),P.area&&e.jsxs("p",{className:"text-sm text-gray-600",children:[P.area," ",P.area_unit||"hectares"]})]},P.id))})]}),d.seasons&&d.seasons.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Seasons"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:d.seasons.map(P=>e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:P.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(P.start_date).toLocaleDateString()," - ",new Date(P.end_date).toLocaleDateString()]})]},P.id))})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Farm not found"}),e.jsx(bt,{to:"/farms",className:"text-green-600 hover:text-green-700 mt-4 inline-block",children:" Back to Farms"})]})}function Gp(){const[o,d]=g.useState([]),[u,N]=g.useState(!0),[k,S]=g.useState(!1),[P,E]=g.useState({name:"",connection_type:"MOCK",is_active:!0});g.useEffect(()=>{m()},[]);const m=async()=>{try{const v=await F.get("/api/v1/scale-devices");d(v.data.data||v.data)}catch(v){console.error("Error fetching devices:",v)}finally{N(!1)}},D=async v=>{v.preventDefault();try{await F.post("/api/v1/scale-devices",P),S(!1),E({name:"",connection_type:"MOCK",is_active:!0}),m()}catch(j){alert("Error creating device: "+(j.response?.data?.message||"Unknown error"))}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Scale Devices"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your weighing scale devices"})]}),e.jsxs("button",{onClick:()=>S(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"Add Device"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(yi,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No scale devices yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first scale device to get started"}),e.jsx("button",{onClick:()=>S(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Add Device"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:o.map(v=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:e.jsx(yi,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:v.name})]}),v.is_active?e.jsx(Xr,{className:"h-5 w-5 text-green-500"}):e.jsx(wp,{className:"h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Connection Type"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:v.connection_type})]}),v.last_calibration_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last Calibration"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(v.last_calibration_date).toLocaleDateString()})]})]})]},v.id))}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Scale Device"}),e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Name *"}),e.jsx("input",{type:"text",required:!0,value:P.name,onChange:v=>E({...P,name:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Main Weighing Scale"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Connection Type"}),e.jsxs("select",{value:P.connection_type,onChange:v=>E({...P,connection_type:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"MOCK",children:"Mock (Testing)"}),e.jsx("option",{value:"SERIAL",children:"Serial Port"}),e.jsx("option",{value:"USB",children:"USB"}),e.jsx("option",{value:"NETWORK",children:"Network"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Device"})]})]})]})})]})}function Wp(){const[o,d]=g.useState([]),[u,N]=g.useState(!0);g.useEffect(()=>{k()},[]);const k=async()=>{try{const S=await F.get("/api/v1/label-templates");d(S.data.data||S.data)}catch(S){console.error("Error fetching templates:",S)}finally{N(!1)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Label Templates"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your label printing templates"})]})}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(bi,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No label templates yet"}),e.jsx("p",{className:"text-gray-500",children:"Label templates are created through the API. Use the default template for now."})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:o.map(S=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:e.jsx(bi,{className:"h-6 w-6 text-orange-600"})}),e.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:S.name})]}),S.is_default&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded",children:"Default"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Code"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Target Type"}),e.jsx("p",{className:"text-sm text-gray-900",children:S.target_type?.split("\\").pop()||"N/A"})]}),S.template_body&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Template Preview"}),e.jsxs("pre",{className:"text-xs bg-gray-50 p-2 rounded mt-1 overflow-auto max-h-32",children:[S.template_body.substring(0,200),"..."]})]})]})]},S.id))})]})}function Kp(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState(!0),[m,D]=g.useState(!1),[v,j]=g.useState({farm_id:"",factory_id:"",processing_date:new Date().toISOString().slice(0,10),cassava_source:"HARVESTED",cassava_quantity_tonnes:"",cassava_cost_per_tonne:"",gari_produced_kg:"",gari_type:"WHITE",gari_grade:"FINE",labour_cost:0,fuel_cost:0,equipment_cost:0,water_cost:0,transport_cost:0,other_costs:0,waste_kg:0,notes:""});g.useEffect(()=>{C()},[]);const C=async()=>{try{const[i,R]=await Promise.all([F.get("/api/v1/gari-production-batches"),F.get("/api/v1/farms")]),B=i.data,w=B?.data||(Array.isArray(B)?B:[]);d(w);const A=R.data,b=A?.data||(Array.isArray(A)?A:[]);N(b)}catch(i){console.error("Error fetching data:",i)}finally{E(!1)}},q=async()=>{try{const i=await F.get("/api/v1/farms");N(i.data.data||i.data)}catch(i){console.error("Error fetching farms:",i)}},c=async i=>{if(!i){S([]);return}try{const B=(await F.get(`/api/v1/factories?farm_id=${i}&production_type=gari`)).data,w=B?.data||(Array.isArray(B)?B:[]);S(w)}catch(R){console.error("Error fetching factories:",R),S([])}},x=()=>{D(!0),q(),j(i=>({...i,factory_id:""})),S([])},h=async i=>{i.preventDefault();try{const R=await F.post("/api/v1/gari-production-batches",v);console.log("Created batch response:",R.data),D(!1),j({farm_id:"",factory_id:"",processing_date:new Date().toISOString().slice(0,10),cassava_source:"HARVESTED",cassava_quantity_tonnes:"",cassava_cost_per_tonne:"",gari_produced_kg:"",gari_type:"WHITE",gari_grade:"FINE",labour_cost:0,fuel_cost:0,equipment_cost:0,water_cost:0,transport_cost:0,other_costs:0,waste_kg:0,notes:""}),C()}catch(R){alert("Error creating batch: "+(R.response?.data?.message||"Unknown error"))}};return P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Production Batches"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track production from cassava to finished gari"})]}),e.jsxs("button",{onClick:x,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Batch"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(xt,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No production batches yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production batch to get started"}),e.jsx("button",{onClick:x,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Batch"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:o.map(i=>e.jsxs(bt,{to:`/gari-production-batches/${i.id}`,className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i.batch_code}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(i.processing_date).toLocaleDateString(),"  ",i.farm?.name,i.factory&&`  ${i.factory.name}`]})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded ${i.status==="COMPLETED"?"bg-green-100 text-green-800":i.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:i.status})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cassava Input"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:i.cassava_quantity_tonnes?`${i.cassava_quantity_tonnes} tonnes`:`${(i.cassava_quantity_kg/1e3).toFixed(3)} tonnes`}),e.jsx("p",{className:"text-xs text-gray-500",children:i.cassava_source==="HARVESTED"?"Harvested":i.cassava_source==="PURCHASED"?"Purchased":"Mixed"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Gari Produced"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[i.gari_produced_kg," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i.gari_type,"  ",i.gari_grade]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Yield"}),e.jsxs("p",{className:"text-sm font-semibold text-green-600",children:[i.conversion_yield_percent!=null?Number(i.conversion_yield_percent).toFixed(1):"N/A","%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cost per kg"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",i.cost_per_kg_gari!=null?Number(i.cost_per_kg_gari).toFixed(2):"N/A"]})]})]})]},i.id))}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create Production Batch"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:v.farm_id,onChange:i=>{const R=i.target.value;j({...v,farm_id:R,factory_id:""}),c(R)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Factory *"}),e.jsxs("select",{required:!0,value:v.factory_id,onChange:i=>j({...v,factory_id:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",disabled:!v.farm_id||k.length===0,children:[e.jsx("option",{value:"",children:v.farm_id?k.length===0?"No factories available":"Select factory":"Select farm first"}),k.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Date *"}),e.jsx("input",{type:"date",required:!0,value:v.processing_date,onChange:i=>j({...v,processing_date:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Source *"}),e.jsxs("select",{required:!0,value:v.cassava_source,onChange:i=>j({...v,cassava_source:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"HARVESTED",children:"Harvested"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Quantity (tonnes) *"}),e.jsx("input",{type:"number",step:"0.001",required:!0,value:v.cassava_quantity_tonnes,onChange:i=>j({...v,cassava_quantity_tonnes:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1 tonne = 1,000 kg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per tonne ()"}),e.jsx("input",{type:"number",step:"0.01",value:v.cassava_cost_per_tonne,onChange:i=>j({...v,cassava_cost_per_tonne:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 150000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Produced (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:v.gari_produced_kg,onChange:i=>j({...v,gari_produced_kg:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),e.jsxs("select",{required:!0,value:v.gari_type,onChange:i=>j({...v,gari_type:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),e.jsxs("select",{required:!0,value:v.gari_grade,onChange:i=>j({...v,gari_grade:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"FINE",children:"Fine"}),e.jsx("option",{value:"COARSE",children:"Coarse"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Processing Costs ()"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour"}),e.jsx("input",{type:"number",step:"0.01",value:v.labour_cost,onChange:i=>j({...v,labour_cost:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuel"}),e.jsx("input",{type:"number",step:"0.01",value:v.fuel_cost,onChange:i=>j({...v,fuel_cost:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment"}),e.jsx("input",{type:"number",step:"0.01",value:v.equipment_cost,onChange:i=>j({...v,equipment_cost:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Water"}),e.jsx("input",{type:"number",step:"0.01",value:v.water_cost,onChange:i=>j({...v,water_cost:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport"}),e.jsx("input",{type:"number",step:"0.01",value:v.transport_cost,onChange:i=>j({...v,transport_cost:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other"}),e.jsx("input",{type:"number",step:"0.01",value:v.other_costs,onChange:i=>j({...v,other_costs:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste (kg)"}),e.jsx("input",{type:"number",step:"0.01",value:v.waste_kg,onChange:i=>j({...v,waste_kg:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:v.notes,onChange:i=>j({...v,notes:i.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Batch"})]})]})]})})]})}function Qp(){const{id:o}=Ei(),[d,u]=g.useState(null),[N,k]=g.useState(!0),[S,P]=g.useState(!1),[E,m]=g.useState(null);g.useEffect(()=>{D()},[o]);const D=async()=>{try{console.log("Fetching batch with ID:",o);const C=await F.get(`/api/v1/gari-production-batches/${o}`);console.log("Full API response:",C),console.log("Response data:",C.data),console.log("Response data.data:",C.data?.data);const q=C.data?.data||C.data;console.log("Extracted batch data:",q),console.log("Batch data type:",typeof q),console.log("Batch data is object:",q&&typeof q=="object"),q&&typeof q=="object"&&!Array.isArray(q)?(console.log("Setting batch:",q),u(q)):(console.error("Invalid batch data structure:",q),console.error("Batch data keys:",q?Object.keys(q):"null"),u(null))}catch(C){console.error("Error fetching batch:",C),console.error("Error response:",C.response),console.error("Error response data:",C.response?.data),console.error("Error status:",C.response?.status),console.error("Error message:",C.message),console.error("Request URL:",C.config?.url),console.error("Batch ID from URL:",o),u(null)}finally{k(!1)}},v=()=>{d&&(m({processing_date:d.processing_date?new Date(d.processing_date).toISOString().slice(0,10):"",cassava_source:d.cassava_source||"HARVESTED",cassava_quantity_tonnes:d.cassava_quantity_tonnes||(d.cassava_quantity_kg?(d.cassava_quantity_kg/1e3).toString():""),cassava_cost_per_tonne:d.cassava_cost_per_tonne||"",gari_produced_kg:d.gari_produced_kg||"",gari_type:d.gari_type||"WHITE",gari_grade:d.gari_grade||"FINE",labour_cost:d.labour_cost||0,fuel_cost:d.fuel_cost||0,equipment_cost:d.equipment_cost||0,water_cost:d.water_cost||0,transport_cost:d.transport_cost||0,other_costs:d.other_costs||0,waste_kg:d.waste_kg||0,status:d.status||"PLANNED",notes:d.notes||""}),P(!0))},j=async C=>{C.preventDefault();try{await F.put(`/api/v1/gari-production-batches/${o}`,E),P(!1),m(null),D()}catch(q){alert("Error updating batch: "+(q.response?.data?.message||"Unknown error"))}};return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):!d&&!N?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Production batch not found"}),e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["ID: ",o]}),e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Check the browser console for detailed error information"}),e.jsx(bt,{to:"/gari-production-batches",className:"text-green-600 hover:text-green-700 mt-4 inline-block",children:" Back to Batches"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(bt,{to:"/gari-production-batches",className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(Ai,{className:"h-5 w-5 mr-2"}),"Back to Batches"]}),d.status!=="COMPLETED"&&e.jsxs("button",{onClick:v,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Ae,{className:"h-5 w-5 mr-2"}),"Edit Batch"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(xt,{className:"h-8 w-8 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:d.batch_code}),e.jsxs("p",{className:"text-gray-600",children:[d.farm?.name,"  ",new Date(d.processing_date).toLocaleDateString()]})]})]}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded ${d.status==="COMPLETED"?"bg-green-100 text-green-800":d.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.status})]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cassava Input"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d.cassava_quantity_tonnes?`${d.cassava_quantity_tonnes} tonnes`:`${(d.cassava_quantity_kg/1e3).toFixed(3)} tonnes`}),d.total_cassava_cost&&e.jsxs("p",{className:"text-xs text-gray-500",children:["",Number(d.total_cassava_cost).toFixed(2)," total"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Gari Produced"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[d.gari_produced_kg," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[d.gari_type,"  ",d.gari_grade]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conversion Yield"}),e.jsxs("p",{className:"text-lg font-semibold text-green-600",children:[d.conversion_yield_percent!=null?Number(d.conversion_yield_percent).toFixed(1):"N/A","%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cost per kg"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",d.cost_per_kg_gari!=null?Number(d.cost_per_kg_gari).toFixed(2):"N/A"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Tt,{className:"h-5 w-5 mr-2 text-green-600"}),"Cost Breakdown"]}),e.jsxs("div",{className:"space-y-3",children:[Number(d.total_cassava_cost||0)>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cassava Cost"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.total_cassava_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Labour"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.labour_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Fuel"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.fuel_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Equipment"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.equipment_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Water"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.water_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Transport"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.transport_cost||0).toFixed(2)]})]}),Number(d.other_costs||0)>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Other"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(d.other_costs||0).toFixed(2)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Total Processing"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["",Number(d.total_processing_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[e.jsx("span",{className:"text-base font-bold text-gray-900",children:"Total Cost"}),e.jsxs("span",{className:"text-base font-bold text-gray-900",children:["",d.total_cost!=null?Number(d.total_cost).toFixed(2):"0.00"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ot,{className:"h-5 w-5 mr-2 text-blue-600"}),"Performance Metrics"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conversion Yield"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(Number(d.conversion_yield_percent)||0,100)}%`}})}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[d.conversion_yield_percent!=null?Number(d.conversion_yield_percent).toFixed(1):"0","%"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target: 22-30%"})]}),d.waste_kg>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Waste"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[d.waste_kg," kg (",d.waste_percent!=null?Number(d.waste_percent).toFixed(1):"0","%)"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cost Efficiency"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",d.cost_per_kg_gari!=null?Number(d.cost_per_kg_gari).toFixed(2):"N/A"," per kg"]})]})]})]})]}),d.cassava_inputs&&d.cassava_inputs.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Cassava Inputs"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:d.cassava_inputs.map(C=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[C.quantity_kg," kg"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[C.source_type==="HARVESTED"?"Harvested":"Purchased",C.variety&&`  ${C.variety}`,C.harvest_lot&&`  Lot: ${C.harvest_lot.code||C.harvest_lot.id}`]})]}),Number(C.total_cost||0)>0&&e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",Number(C.total_cost||0).toFixed(2)]})]})},C.id))})]}),d.notes&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Notes"}),e.jsx("p",{className:"text-gray-700",children:d.notes})]}),S&&E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Production Batch"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Date *"}),e.jsx("input",{type:"date",required:!0,value:E.processing_date,onChange:C=>m({...E,processing_date:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:E.status,onChange:C=>m({...E,status:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"PLANNED",children:"Planned"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Source *"}),e.jsxs("select",{required:!0,value:E.cassava_source,onChange:C=>m({...E,cassava_source:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"HARVESTED",children:"Harvested"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cassava Quantity (tonnes) *"}),e.jsx("input",{type:"number",step:"0.001",required:!0,value:E.cassava_quantity_tonnes,onChange:C=>m({...E,cassava_quantity_tonnes:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1 tonne = 1,000 kg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per tonne ()"}),e.jsx("input",{type:"number",step:"0.01",value:E.cassava_cost_per_tonne,onChange:C=>m({...E,cassava_cost_per_tonne:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 150000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Produced (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:E.gari_produced_kg,onChange:C=>m({...E,gari_produced_kg:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),e.jsxs("select",{required:!0,value:E.gari_type,onChange:C=>m({...E,gari_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),e.jsxs("select",{required:!0,value:E.gari_grade,onChange:C=>m({...E,gari_grade:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"FINE",children:"Fine"}),e.jsx("option",{value:"COARSE",children:"Coarse"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Processing Costs ()"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour"}),e.jsx("input",{type:"number",step:"0.01",value:E.labour_cost,onChange:C=>m({...E,labour_cost:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuel"}),e.jsx("input",{type:"number",step:"0.01",value:E.fuel_cost,onChange:C=>m({...E,fuel_cost:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment"}),e.jsx("input",{type:"number",step:"0.01",value:E.equipment_cost,onChange:C=>m({...E,equipment_cost:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Water"}),e.jsx("input",{type:"number",step:"0.01",value:E.water_cost,onChange:C=>m({...E,water_cost:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport"}),e.jsx("input",{type:"number",step:"0.01",value:E.transport_cost,onChange:C=>m({...E,transport_cost:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other"}),e.jsx("input",{type:"number",step:"0.01",value:E.other_costs,onChange:C=>m({...E,other_costs:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste (kg)"}),e.jsx("input",{type:"number",step:"0.01",value:E.waste_kg,onChange:C=>m({...E,waste_kg:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:E.notes,onChange:C=>m({...E,notes:C.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{P(!1),m(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Update Batch"})]})]})]})})]})}function Yp(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState(0),[P,E]=g.useState(!0),[m,D]=g.useState({gari_type:"",packaging_type:"",status:"IN_STOCK"});g.useEffect(()=>{v()},[m]);const v=async()=>{try{const q=new URLSearchParams;m.gari_type&&q.append("gari_type",m.gari_type),m.packaging_type&&q.append("packaging_type",m.packaging_type),m.status&&q.append("status",m.status);const[c,x]=await Promise.all([F.get(`/api/v1/gari-inventory?${q.toString()}`),F.get("/api/v1/gari-inventory/summary")]),h=c.data.data||c.data,i=Array.isArray(h)?h:[];d(i),N(x.data.data||x.data),S(x.data.totalStock||0),console.log("Inventory response:",c.data),console.log("Inventory items:",i)}catch(q){console.error("Error fetching inventory:",q)}finally{E(!1)}};if(P)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const j=o.reduce((q,c)=>q+(c.quantity_kg||0),0),C=o.reduce((q,c)=>q+(c.total_cost||0),0);return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Inventory"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track finished goods stock"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Stock"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[k>0?k.toFixed(2):j.toFixed(2)," kg"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",C.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Items in Stock"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Cp,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:m.gari_type,onChange:q=>D({...m,gari_type:q.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]}),e.jsxs("select",{value:m.packaging_type,onChange:q=>D({...m,packaging_type:q.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Packaging"}),e.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),e.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),e.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),e.jsx("option",{value:"50KG_BAG",children:"50kg Bag"}),e.jsx("option",{value:"BULK",children:"Bulk"})]}),e.jsxs("select",{value:m.status,onChange:q=>D({...m,status:q.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"IN_STOCK",children:"In Stock"}),e.jsx("option",{value:"RESERVED",children:"Reserved"}),e.jsx("option",{value:"SOLD",children:"Sold"}),e.jsx("option",{value:"SPOILED",children:"Spoiled"}),e.jsx("option",{value:"DAMAGED",children:"Damaged"})]})]})}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Xe,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory items"}),e.jsx("p",{className:"text-gray-500",children:"Inventory will appear here after production batches are created"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Grade"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Packaging"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost per kg"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${q.gari_type==="WHITE"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:q.gari_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.gari_grade}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.packaging_type?.replace("_"," ").toLowerCase()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[q.quantity_kg," kg",q.quantity_units>0&&` (${q.quantity_units} units)`]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",q.cost_per_kg?.toFixed(2)||"N/A"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",q.total_cost?.toFixed(2)||"0.00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${q.status==="IN_STOCK"?"bg-green-100 text-green-800":q.status==="SOLD"?"bg-blue-100 text-blue-800":q.status==="SPOILED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:q.status})})]},q.id))})]})})})]})}function Jp(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState([]),[m,D]=g.useState(!1),[v,j]=g.useState(!0),[C,q]=g.useState(!1),[c,x]=g.useState(null),[h,i]=g.useState(null),[R,B]=g.useState({farm_id:"",gari_production_batch_id:"",sale_date:new Date().toISOString().slice(0,10),customer_name:"",customer_type:"RETAIL",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",quantity_kg:"",quantity_units:"",unit_price:"",discount:0,cost_per_kg:"",payment_method:"CASH",amount_paid:"",sales_channel:"",notes:""});g.useEffect(()=>{w()},[]);const w=async()=>{try{const[M,J,O]=await Promise.all([F.get("/api/v1/gari-sales"),F.get("/api/v1/farms"),F.get("/api/v1/gari-sales/summary")]);d(M.data.data||M.data),S(J.data.data||J.data),N(O.data.data||O.data)}catch(M){console.error("Error fetching data:",M)}finally{j(!1)}},A=async()=>{try{const M=await F.get("/api/v1/farms");S(M.data.data||M.data)}catch(M){console.error("Error fetching farms:",M)}},b=()=>{q(!0),A(),B({farm_id:"",gari_production_batch_id:"",sale_date:new Date().toISOString().slice(0,10),customer_name:"",customer_type:"RETAIL",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",quantity_kg:"",quantity_units:"",unit_price:"",discount:0,cost_per_kg:"",payment_method:"CASH",amount_paid:"",sales_channel:"",notes:""}),E([]),E([])},I=async()=>{if(!R.farm_id){E([]),D(!1);return}D(!0);try{const M=new URLSearchParams({farm_id:R.farm_id}),O=(await F.get(`/api/v1/gari-sales/available-batches?${M.toString()}`)).data.data||[];if(E(O),O.length>0&&!R.gari_production_batch_id){const y=O[0];G(y.batch_id)}else O.length===0&&B(y=>({...y,gari_production_batch_id:"",gari_type:"WHITE",gari_grade:"FINE",packaging_type:"1KG_POUCH",cost_per_kg:""}))}catch(M){console.error("Error fetching available batches:",M),E([]),alert("Error loading available batches: "+(M.response?.data?.message||"Unknown error"))}finally{D(!1)}},G=M=>{const J=P.find(O=>O.batch_id==M);if(J){const O=J.packaging_options&&J.packaging_options.length>0?J.packaging_options[0].packaging_type:"1KG_POUCH";B(y=>({...y,gari_production_batch_id:M,gari_type:J.gari_type||y.gari_type,gari_grade:J.gari_grade||y.gari_grade,packaging_type:O,cost_per_kg:J.cost_per_kg_gari||y.cost_per_kg,quantity_units:"",quantity_kg:""}))}},_=(M,J)=>!M||!J||J<=0?0:({"1KG_POUCH":1,"2KG_POUCH":2,"5KG_PACK":5,"50KG_BAG":50}[M]||0)*J,le=M=>{B(J=>{const O=_(M,J.quantity_units||0);return{...J,packaging_type:M,quantity_kg:O}})},z=M=>{B(J=>{const O=_(J.packaging_type,M||0);return{...J,quantity_units:M,quantity_kg:O}})};g.useEffect(()=>{C&&R.farm_id&&I()},[C,R.farm_id]);const L=async M=>{M.preventDefault();try{await F.post("/api/v1/gari-sales",R),q(!1),w()}catch(J){alert("Error creating sale: "+(J.response?.data?.message||"Unknown error"))}},re=M=>{x(M),i({payment_status:M.payment_status||"PAID",payment_method:M.payment_method||"CASH",amount_paid:M.amount_paid||0,discount:M.discount||0,unit_price:M.unit_price||0,notes:M.notes||""})},xe=async M=>{M.preventDefault();try{console.log("Updating sale with data:",h);const J=await F.put(`/api/v1/gari-sales/${c.id}`,h);console.log("Update response:",J.data),x(null),i(null),w()}catch(J){console.error("Error updating sale:",J),alert("Error updating sale: "+(J.response?.data?.message||"Unknown error"))}},Z=M=>{const J=Number(c?.final_amount||0),O=Number(M||0);let y="OUTSTANDING";O>=J?y="PAID":O>0&&(y="PARTIAL"),i({...h,amount_paid:M,payment_status:y})};if(v)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const te=o.reduce((M,J)=>M+(Number(J.final_amount)||0),0),ie=o.reduce((M,J)=>M+(Number(J.gross_margin)||0),0);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Sales"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track sales and revenue"})]}),e.jsxs("button",{onClick:b,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Sale"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",Number(te||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Margin"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",Number(ie||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Sales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(xn,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sales yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first sale to get started"}),e.jsx("button",{onClick:b,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Sale"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sale Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(M=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:M.sale_code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(M.sale_date).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[M.customer_name||M.customer?.name||"Walk-in",e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",M.customer_type,")"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[M.gari_type,"  ",M.packaging_type?.replace("_"," ")]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[M.quantity_kg," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["",Number(M.final_amount||0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["",Number(M.gross_margin||0).toFixed(2),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",Number(M.gross_margin_percent||0).toFixed(1),"%)"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${M.payment_status==="PAID"?"bg-green-100 text-green-800":M.payment_status==="PARTIAL"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:M.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("button",{onClick:()=>re(M),className:"text-green-600 hover:text-green-700 flex items-center",children:[e.jsx(Ae,{className:"h-4 w-4 mr-1"}),"Edit"]})})]},M.id))})]})})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Sale"}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:R.farm_id,onChange:M=>B({...R,farm_id:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),k.map(M=>e.jsx("option",{value:M.id,children:M.name},M.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sale Date *"}),e.jsx("input",{type:"date",required:!0,value:R.sale_date,onChange:M=>B({...R,sale_date:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",value:R.customer_name,onChange:M=>B({...R,customer_name:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Walk-in customer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Type *"}),e.jsxs("select",{required:!0,value:R.customer_type,onChange:M=>B({...R,customer_type:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"RETAIL",children:"Retail"}),e.jsx("option",{value:"BULK_BUYER",children:"Bulk Buyer"}),e.jsx("option",{value:"DISTRIBUTOR",children:"Distributor"}),e.jsx("option",{value:"CATERING",children:"Catering"}),e.jsx("option",{value:"HOTEL",children:"Hotel"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Batch (FIFO) *"}),e.jsxs("select",{required:!0,disabled:!R.farm_id||m,value:R.gari_production_batch_id,onChange:M=>G(M.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${!R.farm_id||m?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`,children:[e.jsx("option",{value:"",children:m?"Loading batches...":R.farm_id?P.length===0?"No inventory available for this farm":"Select batch (oldest first - FIFO)":"Select farm first"}),P.map(M=>e.jsxs("option",{value:M.batch_id,children:[M.batch_code," - ",Number(M.total_available_kg||0).toFixed(2)," kg available",M.processing_date&&` (${new Date(M.processing_date).toLocaleDateString()})`,M.gari_type&&` - ${M.gari_type}`,M.gari_grade&&` ${M.gari_grade}`,M.cost_per_kg_gari&&` - ${Number(M.cost_per_kg_gari).toFixed(2)}/kg`]},M.batch_id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m?"Loading available batches...":"Batches are sorted by production date (FIFO - First In, First Out). Selecting a batch will auto-fill product details."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type *"}),e.jsxs("select",{required:!0,disabled:!R.gari_production_batch_id,value:R.gari_type,onChange:M=>B({...R,gari_type:M.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${R.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from selected batch"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Grade *"}),e.jsxs("select",{required:!0,disabled:!R.gari_production_batch_id,value:R.gari_grade,onChange:M=>B({...R,gari_grade:M.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${R.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("option",{value:"FINE",children:"Fine"}),e.jsx("option",{value:"COARSE",children:"Coarse"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from selected batch"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packaging *"}),e.jsxs("select",{required:!0,disabled:!R.gari_production_batch_id,value:R.packaging_type,onChange:M=>le(M.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${R.gari_production_batch_id?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),e.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),e.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),e.jsx("option",{value:"50KG_BAG",children:"50kg Bag"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:R.gari_production_batch_id?"Select packaging size":"Select a batch first"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity (units) *"}),e.jsx("input",{type:"number",step:"1",min:"1",required:!0,disabled:!R.packaging_type,value:R.quantity_units,onChange:M=>z(M.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${R.packaging_type?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,placeholder:"Enter number of units"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Number of ",R.packaging_type?.replace("_"," ").toLowerCase()||"units"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Quantity (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,readOnly:!0,value:R.quantity_kg||0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated from packaging and quantity"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price () *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:R.unit_price,onChange:M=>B({...R,unit_price:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount ()"}),e.jsx("input",{type:"number",step:"0.01",value:R.discount,onChange:M=>B({...R,discount:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ()"}),e.jsx("input",{type:"number",step:"0.01",value:R.cost_per_kg,onChange:M=>B({...R,cost_per_kg:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"From inventory"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method *"}),e.jsxs("select",{required:!0,value:R.payment_method,onChange:M=>B({...R,payment_method:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"TRANSFER",children:"Transfer"}),e.jsx("option",{value:"POS",children:"POS"}),e.jsx("option",{value:"CHEQUE",children:"Cheque"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid ()"}),e.jsx("input",{type:"number",step:"0.01",value:R.amount_paid,onChange:M=>B({...R,amount_paid:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sales Channel"}),e.jsx("input",{type:"text",value:R.sales_channel,onChange:M=>B({...R,sales_channel:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Warehouse, Shop, Distributor"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>q(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Sale"})]})]})]})}),c&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Edit Sale - ",c.sale_code]}),e.jsxs("form",{onSubmit:xe,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("span",{className:"ml-2 font-medium",children:c.customer_name||"Walk-in"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Product:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[c.gari_type,"  ",c.packaging_type?.replace("_"," ")]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Quantity:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[c.quantity_kg," kg"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["",Number(c.final_amount||0).toFixed(2)]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status *"}),e.jsxs("select",{required:!0,value:h.payment_status,onChange:M=>i({...h,payment_status:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"PAID",children:"Paid"}),e.jsx("option",{value:"PARTIAL",children:"Partial"}),e.jsx("option",{value:"OUTSTANDING",children:"Outstanding"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method *"}),e.jsxs("select",{required:!0,value:h.payment_method,onChange:M=>i({...h,payment_method:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"TRANSFER",children:"Transfer"}),e.jsx("option",{value:"POS",children:"POS"}),e.jsx("option",{value:"CHEQUE",children:"Cheque"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid () *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:Number(c.final_amount||0),required:!0,value:h.amount_paid,onChange:M=>Z(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Outstanding: ",Number(Number(c.final_amount||0)-Number(h.amount_paid||0)).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount ()"}),e.jsx("input",{type:"number",step:"0.01",value:h.discount,onChange:M=>i({...h,discount:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price ()"}),e.jsx("input",{type:"number",step:"0.01",value:h.unit_price,onChange:M=>i({...h,unit_price:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:h.notes,onChange:M=>i({...h,notes:M.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{x(null),i(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Update Sale"})]})]})]})})]})}function Xp(){const[o,d]=g.useState({batches:[],inventory:[],sales:[],summary:null}),[u,N]=g.useState(!0),[k,S]=g.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});g.useEffect(()=>{P()},[k]);const P=async()=>{try{const m=new URLSearchParams({date_from:k.from,date_to:k.to}),D=new URLSearchParams({date_from:k.from,date_to:k.to,per_page:"1000"}),[v,j,C,q]=await Promise.all([F.get(`/api/v1/gari-production-batches?${m.toString()}`),F.get("/api/v1/gari-inventory?status=IN_STOCK"),F.get(`/api/v1/gari-sales?${D.toString()}`),F.get(`/api/v1/gari-sales/summary?${m.toString()}`)]),c=Array.isArray(v.data.data)?v.data.data:Array.isArray(v.data)?v.data:[],x=Array.isArray(j.data.data)?j.data.data:Array.isArray(j.data)?j.data:[];let h=[];C.data.data&&Array.isArray(C.data.data)?h=C.data.data:Array.isArray(C.data)&&(h=C.data),console.log("Summary API Response:",q.data),console.log("Date Range:",k),console.log("Sales Response:",C.data);const i=q.data.overall||{},R=q.data.data||q.data;console.log("Overall Summary:",i),console.log("Sales array length:",h.length),console.log("Sample sale (first):",h[0]);const B=c.reduce((re,xe)=>re+(Number(xe.cassava_quantity_kg)||0),0),w=c.reduce((re,xe)=>re+(Number(xe.gari_produced_kg)||0),0),A=B>0?w/B*100:0,b=c.length>0?c.reduce((re,xe)=>re+(Number(xe.cost_per_kg_gari)||0),0)/c.length:0,I=i.total_revenue!==void 0?i.total_revenue:h.reduce((re,xe)=>re+(Number(xe.final_amount)||0),0),G=i.total_margin!==void 0?i.total_margin:h.reduce((re,xe)=>re+(Number(xe.gross_margin)||0),0),_=i.total_kg_sold!==void 0?i.total_kg_sold:h.reduce((re,xe)=>re+(Number(xe.quantity_kg)||0),0),le=i.avg_price_per_kg!==void 0?i.avg_price_per_kg:(()=>{let re=0,xe=0;return h.forEach(Z=>{const te=Number(Z.quantity_kg)||0,ie=Number(Z.unit_price)||0;te>0&&ie>0&&(re+=ie*te,xe+=te)}),xe>0?re/xe:0})();console.log("Calculated KPIs:",{totalRevenue:I,totalMargin:G,totalSalesVolumeKg:_,avgPricePerKg:le,totalSales:i.total_sales!==void 0?i.total_sales:h.length});const z=x.reduce((re,xe)=>re+(Number(xe.quantity_kg)||0),0),L={totalCassava:B,totalGari:w,avgYield:A,avgCostPerKg:b,totalRevenue:I,totalMargin:G,totalStock:z,avgPricePerKg:le,totalSalesVolumeKg:_,totalBatches:c.length,totalSales:i.total_sales!==void 0?i.total_sales:h.length};console.log("Setting KPIs summary:",L),d({batches:c,inventory:x,sales:h,summary:L})}catch(m){console.error("Error fetching KPI data:",m)}finally{N(!1)}};if(u)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const E=o.summary||{};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gari Production KPIs"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Key performance indicators for gari production"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:k.from,onChange:m=>S({...k,from:m.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:k.to,onChange:m=>S({...k,to:m.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conversion Yield"}),e.jsx(ot,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(E.avgYield||0).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target: 22-30%"}),E.avgYield&&e.jsx("div",{className:`mt-2 text-xs ${E.avgYield>=22&&E.avgYield<=30?"text-green-600":E.avgYield<22?"text-red-600":"text-yellow-600"}`,children:E.avgYield<22?" Below target":E.avgYield>30?" Above target":" On target"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cost per kg"}),e.jsx(Tt,{className:"h-5 w-5 text-blue-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(E.avgCostPerKg||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Average production cost"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Stock on Hand"}),e.jsx(Xe,{className:"h-5 w-5 text-purple-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(E.totalStock||0).toFixed(2)," kg"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Current inventory"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sales Volume"}),e.jsx(ot,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Number(E.totalSalesVolumeKg||0).toFixed(2)," kg"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total kg sold in period"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Selling Price"}),e.jsx(Tt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(E.avgPricePerKg||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Per kg"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gross Margin"}),e.jsx(Tt,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",Number(E.totalMargin||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Number(E.totalRevenue||0)>0?Number(Number(E.totalMargin||0)/Number(E.totalRevenue||1)*100).toFixed(1)+"% margin":"No sales"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(xt,{className:"h-5 w-5 mr-2 text-orange-600"}),"Production Summary"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Batches"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.totalBatches||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cassava Processed"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(E.totalCassava||0).toFixed(2)," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Gari Produced"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(E.totalGari||0).toFixed(2)," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Yield"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(E.avgYield||0).toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Tt,{className:"h-5 w-5 mr-2 text-green-600"}),"Sales Summary"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(E.totalRevenue||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Margin"}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["",Number(E.totalMargin||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Price"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",Number(E.avgPricePerKg||0).toFixed(2),"/kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Sales"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.totalSales||0})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Production Batches"})}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[o.batches.slice(0,5).map(m=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.batch_code}),e.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(m.processing_date).toLocaleDateString()," ",m.cassava_quantity_kg," kg cassava  ",m.gari_produced_kg," kg gari"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-green-600",children:[m.conversion_yield_percent!=null?Number(m.conversion_yield_percent).toFixed(1):"0","% yield"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["",m.cost_per_kg_gari!=null?Number(m.cost_per_kg_gari).toFixed(2):"0","/kg"]})]})]})},m.id)),o.batches.length===0&&e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No production batches in this period"})]})]})]})}function Zp(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState(!0),[P,E]=g.useState(!1),[m,D]=g.useState({farm_id:"",name:"",material_type:"POUCH",size:"",unit:"pieces",opening_balance:0,quantity_purchased:0,quantity_used:0,cost_per_unit:"",notes:""});g.useEffect(()=>{v()},[]);const v=async()=>{try{const[c,x]=await Promise.all([F.get("/api/v1/packaging-materials"),F.get("/api/v1/farms")]);d(c.data.data||c.data),N(x.data.data||x.data)}catch(c){console.error("Error fetching data:",c)}finally{S(!1)}},j=async()=>{try{const c=await F.get("/api/v1/farms");N(c.data.data||c.data)}catch(c){console.error("Error fetching farms:",c)}},C=()=>{E(!0),j()},q=async c=>{c.preventDefault();try{await F.post("/api/v1/packaging-materials",m),E(!1),v()}catch(x){alert("Error creating material: "+(x.response?.data?.message||"Unknown error"))}};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Packaging Materials"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track packaging inventory"})]}),e.jsxs("button",{onClick:C,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"Add Material"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(yp,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No packaging materials yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first packaging material to get started"}),e.jsx("button",{onClick:C,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Add Material"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Opening"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purchased"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Used"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Closing"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(c=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[c.name,c.size&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",c.size,")"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.material_type}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[c.opening_balance," ",c.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[c.quantity_purchased," ",c.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[c.quantity_used," ",c.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:[c.closing_balance," ",c.unit]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.total_cost?`${c.total_cost.toFixed(2)}`:"N/A"})]},c.id))})]})})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Packaging Material"}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:m.farm_id,onChange:c=>D({...m,farm_id:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:c=>D({...m,name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1kg Pouch"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{required:!0,value:m.material_type,onChange:c=>D({...m,material_type:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"POUCH",children:"Pouch"}),e.jsx("option",{value:"SACK",children:"Sack"}),e.jsx("option",{value:"LABEL",children:"Label"}),e.jsx("option",{value:"SEALING_ROLL",children:"Sealing Roll"}),e.jsx("option",{value:"CARTON",children:"Carton"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),e.jsx("input",{type:"text",value:m.size,onChange:c=>D({...m,size:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 1kg"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opening"}),e.jsx("input",{type:"number",step:"0.01",value:m.opening_balance,onChange:c=>D({...m,opening_balance:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchased"}),e.jsx("input",{type:"number",step:"0.01",value:m.quantity_purchased,onChange:c=>D({...m,quantity_purchased:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Used"}),e.jsx("input",{type:"number",step:"0.01",value:m.quantity_used,onChange:c=>D({...m,quantity_used:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per Unit ()"}),e.jsx("input",{type:"number",step:"0.01",value:m.cost_per_unit,onChange:c=>D({...m,cost_per_unit:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Material"})]})]})]})})]})}function eg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState(!0),[P,E]=g.useState(!1),[m,D]=g.useState({farm_id:"",loss_date:new Date().toISOString().slice(0,10),loss_type:"SPOILAGE",gari_type:"WHITE",packaging_type:"1KG_POUCH",quantity_kg:"",cost_per_kg:"",description:"",notes:""});g.useEffect(()=>{v()},[]);const v=async()=>{try{const[x,h]=await Promise.all([F.get("/api/v1/gari-waste-losses"),F.get("/api/v1/farms")]);d(x.data.data||x.data),N(h.data.data||h.data)}catch(x){console.error("Error fetching data:",x)}finally{S(!1)}},j=async()=>{try{const x=await F.get("/api/v1/farms");N(x.data.data||x.data)}catch(x){console.error("Error fetching farms:",x)}},C=()=>{E(!0),j()},q=async x=>{x.preventDefault();try{await F.post("/api/v1/gari-waste-losses",m),E(!1),v()}catch(h){alert("Error creating loss record: "+(h.response?.data?.message||"Unknown error"))}};if(k)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});const c=o.reduce((x,h)=>x+(h.total_loss_value||0),0);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Waste & Losses"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track waste and losses in gari production"})]}),e.jsxs("button",{onClick:C,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"Record Loss"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Loss Value"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["",c.toFixed(2)]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Op,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No waste/loss records yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Record waste and losses to track efficiency"}),e.jsx("button",{onClick:C,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:"Record Loss"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Loss Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Loss Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(x=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(x.loss_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:x.loss_type.replace("_"," ")})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[x.gari_type,"  ",x.packaging_type?.replace("_"," ")]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[x.quantity_kg," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600",children:["",x.total_loss_value?.toFixed(2)||"0.00"]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:x.description||"-"})]},x.id))})]})})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Record Waste/Loss"}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:m.farm_id,onChange:x=>D({...m,farm_id:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loss Date *"}),e.jsx("input",{type:"date",required:!0,value:m.loss_date,onChange:x=>D({...m,loss_date:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loss Type *"}),e.jsxs("select",{required:!0,value:m.loss_type,onChange:x=>D({...m,loss_type:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"SPOILAGE",children:"Spoilage"}),e.jsx("option",{value:"MOISTURE_DAMAGE",children:"Moisture Damage"}),e.jsx("option",{value:"SPILLAGE",children:"Spillage"}),e.jsx("option",{value:"REJECTED_BATCH",children:"Rejected Batch"}),e.jsx("option",{value:"CUSTOMER_RETURN",children:"Customer Return"}),e.jsx("option",{value:"THEFT",children:"Theft"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gari Type"}),e.jsxs("select",{value:m.gari_type,onChange:x=>D({...m,gari_type:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"WHITE",children:"White"}),e.jsx("option",{value:"YELLOW",children:"Yellow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packaging"}),e.jsxs("select",{value:m.packaging_type,onChange:x=>D({...m,packaging_type:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"1KG_POUCH",children:"1kg Pouch"}),e.jsx("option",{value:"2KG_POUCH",children:"2kg Pouch"}),e.jsx("option",{value:"5KG_PACK",children:"5kg Pack"}),e.jsx("option",{value:"50KG_BAG",children:"50kg Bag"}),e.jsx("option",{value:"BULK",children:"Bulk"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:m.quantity_kg,onChange:x=>D({...m,quantity_kg:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ()"}),e.jsx("input",{type:"number",step:"0.01",value:m.cost_per_kg,onChange:x=>D({...m,cost_per_kg:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:x=>D({...m,description:x.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Describe the loss..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Record Loss"})]})]})]})})]})}function tg(){const[o,d]=g.useState({total:0,byCrop:{},byCategory:{}}),[u,N]=g.useState(!0),[k,S]=g.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});g.useEffect(()=>{P()},[k]);const P=async()=>{try{N(!0);const[E]=await Promise.all([F.get(`/api/v1/gari-production-batches?date_from=${k.from}&date_to=${k.to}`).catch(()=>({data:{data:[]}}))]),D=(Array.isArray(E.data?.data)?E.data.data:[]).reduce((v,j)=>v+Number(j.total_cost||0),0);d({total:D,byCrop:{gari:D,bellPepper:0,tomatoes:0,habaneros:0},byCategory:{production:D,labor:0,materials:0,other:0}})}catch(E){console.error("Error fetching expenses data:",E)}finally{N(!1)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consolidated Expenses"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Expenses across all crops and activities"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:k.from,onChange:E=>S({...k,from:E.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:k.to,onChange:E=>S({...k,to:E.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx(hn,{className:"h-5 w-5 text-red-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",Number(o.total||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Expenses by Crop"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crop"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Percentage"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(o.byCrop).map(([E,m])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:E==="bellPepper"?"Bell Pepper":E}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(m||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.total>0?Number(m/o.total*100).toFixed(1)+"%":"0%"})]},E))})]})})]})]})}function sg(){const[o,d]=g.useState([]),[u,N]=g.useState({}),[k,S]=g.useState(!0),[P,E]=g.useState({from:new Date(Date.now()-10080*60*1e3).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});g.useEffect(()=>{m()},[P]);const m=async()=>{try{S(!0),d([]),N({totalHours:0,byStaff:{},byCrop:{}})}catch(D){console.error("Error fetching allocations:",D)}finally{S(!1)}};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Staff Allocation Report"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Time allocation across all activities"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:P.from,onChange:D=>E({...P,from:D.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("input",{type:"date",value:P.to,onChange:D=>E({...P,to:D.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center text-gray-500",children:[e.jsx(un,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"Staff allocation reporting coming soon"}),e.jsx("p",{className:"text-sm mt-2",children:"This will show time allocation by staff, crop, and activity type"})]})]})}function us({cropName:o,basePath:d}){const u=[{name:"Production",path:`${d}-production`,icon:xt},{name:"Inventory",path:`${d}-inventory`,icon:Xe},{name:"Sales",path:`${d}-sales`,icon:xn},{name:"KPIs",path:`${d}-kpis`,icon:ot}];return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[o," Management"]}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Coming soon - ",o," tracking and management"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map(N=>e.jsxs(bt,{to:`/${N.path}`,className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsx(N.icon,{className:"h-8 w-8 text-green-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["View ",N.name.toLowerCase()," for ",o]})]},N.path))}),e.jsxs("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Feature Coming Soon"}),e.jsxs("p",{className:"text-yellow-700",children:["The ",o," management module is under development. This will include production tracking, inventory management, sales tracking, and performance KPIs specific to ",o,"."]})]})]})}function rg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState(!0),[m,D]=g.useState(!1),[v,j]=g.useState(null),[C,q]=g.useState(!1),[c,x]=g.useState(""),[h,i]=g.useState(""),[R,B]=g.useState(""),[w,A]=g.useState({site_id:"",name:"",type:"POLYHOUSE",status:"ACTIVE",length:"",width:"",height:"",orientation:"",plant_capacity:"",primary_crop_type:"",cropping_system:"",notes:"",track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1});g.useEffect(()=>{b()},[c,h,R]);const b=async()=>{try{const L=new URLSearchParams;c&&L.append("search",c),h&&L.append("status",h),R&&L.append("type",R);const[re,xe,Z]=await Promise.all([F.get(`/api/v1/greenhouses?${L.toString()}`),F.get("/api/v1/sites?per_page=1000"),F.get("/api/v1/asset-categories?per_page=1000")]),te=re.data,ie=te?.data||(Array.isArray(te)?te:[]);d(ie);const M=xe.data,J=M?.data||(Array.isArray(M)?M:[]);N(J);let O=[];Z.data&&(Array.isArray(Z.data)?O=Z.data:Z.data.data&&Array.isArray(Z.data.data)&&(O=Z.data.data)),S(O)}catch(L){console.error("Error fetching data:",L),alert("Error loading data: "+(L.response?.data?.message||L.message))}finally{E(!1)}},I=async()=>{try{const L=await F.get("/api/v1/asset-categories?per_page=1000");let re=[];L.data&&(Array.isArray(L.data)?re=L.data:L.data.data&&Array.isArray(L.data.data)&&(re=L.data.data)),S(re)}catch(L){console.error("Error fetching asset categories:",L),S([])}},G=()=>{D(!0),j(null),q(!1),A({site_id:"",name:"",type:"POLYHOUSE",status:"ACTIVE",length:"",width:"",height:"",orientation:"",plant_capacity:"",primary_crop_type:"",cropping_system:"",notes:"",track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1})},_=L=>{j(L);const re=!!L.asset_id;q(re),k.length===0&&I(),A({site_id:L.site?.id||"",name:L.name||"",type:L.type||"POLYHOUSE",status:L.status||(L.is_active?"ACTIVE":"INACTIVE"),length:L.length||"",width:L.width||"",height:L.height||"",orientation:L.orientation||"",plant_capacity:L.plant_capacity||"",primary_crop_type:L.primary_crop_type||"",cropping_system:L.cropping_system||"",notes:L.notes||"",track_as_asset:re,asset_category_id:L.asset?.asset_category_id||"",asset_description:L.asset?.description||"",asset_acquisition_type:L.asset?.acquisition_type||"",asset_purchase_date:L.asset?.purchase_date?new Date(L.asset.purchase_date).toISOString().slice(0,10):"",asset_purchase_cost:L.asset?.purchase_cost||"",asset_currency:L.asset?.currency||"NGN",asset_supplier_name:L.asset?.supplier_name||"",asset_serial_number:L.asset?.serial_number||"",asset_model:L.asset?.model||"",asset_manufacturer:L.asset?.manufacturer||"",asset_year_of_make:L.asset?.year_of_make||"",asset_warranty_expiry:L.asset?.warranty_expiry?new Date(L.asset.warranty_expiry).toISOString().slice(0,10):"",asset_is_trackable:L.asset?.is_trackable||!1}),D(!0)},le=async L=>{L.preventDefault();try{const re={...w};re.track_as_asset=C,C||Object.keys(re).forEach(xe=>{xe.startsWith("asset_")&&delete re[xe]}),v?await F.patch(`/api/v1/greenhouses/${v.id}`,re):await F.post("/api/v1/greenhouses",re),D(!1),b()}catch(re){const xe=re.response?.data?.message||(re.response?.data?.errors?JSON.stringify(re.response.data.errors):"")||re.message;alert("Error saving greenhouse: "+xe)}},z=async L=>{if(confirm("Are you sure you want to delete this greenhouse?"))try{await F.delete(`/api/v1/greenhouses/${L}`),b()}catch(re){alert("Error deleting greenhouse: "+(re.response?.data?.message||re.message))}};return P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Greenhouse Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage greenhouses across all sites"})]}),e.jsxs("button",{onClick:G,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Greenhouse"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Lp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:c,onChange:L=>x(L.target.value),placeholder:"Search by name or code...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:h,onChange:L=>i(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"DECOMMISSIONED",children:"Decommissioned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:R,onChange:L=>B(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"TUNNEL",children:"Tunnel"}),e.jsx("option",{value:"GLASSHOUSE",children:"Glasshouse"}),e.jsx("option",{value:"POLYHOUSE",children:"Polyhouse"}),e.jsx("option",{value:"SHADE_HOUSE",children:"Shade House"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{x(""),i(""),B("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear Filters"})})]})}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(xt,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No greenhouses found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first greenhouse to get started"}),e.jsx("button",{onClick:G,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Greenhouse"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area (m)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(L=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:L.greenhouse_code||L.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.site?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.farm?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.type||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${L.status==="ACTIVE"?"bg-green-100 text-green-800":L.status==="MAINTENANCE"?"bg-yellow-100 text-yellow-800":L.status==="DECOMMISSIONED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:L.status||(L.is_active?"ACTIVE":"INACTIVE")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.total_area?Number(L.total_area).toFixed(2):L.size_sqm?Number(L.size_sqm).toFixed(2):"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>_(L),className:"text-green-600 hover:text-green-900 mr-4",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>z(L.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]},L.id))})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:v?"Edit Greenhouse":"Create Greenhouse"}),e.jsxs("form",{onSubmit:le,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site *"}),e.jsxs("select",{required:!0,value:w.site_id,onChange:L=>A({...w,site_id:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select site"}),u.map(L=>e.jsxs("option",{value:L.id,children:[L.name," (",L.farm?.name||"No Farm",")"]},L.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Farm will be automatically set from the selected site. Greenhouse code will be auto-generated."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:w.name,onChange:L=>A({...w,name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{required:!0,value:w.type,onChange:L=>A({...w,type:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"TUNNEL",children:"Tunnel"}),e.jsx("option",{value:"GLASSHOUSE",children:"Glasshouse"}),e.jsx("option",{value:"POLYHOUSE",children:"Polyhouse"}),e.jsx("option",{value:"SHADE_HOUSE",children:"Shade House"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:w.status,onChange:L=>A({...w,status:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"DECOMMISSIONED",children:"Decommissioned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Length (m) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:w.length,onChange:L=>A({...w,length:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width (m) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:w.width,onChange:L=>A({...w,width:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height (m)"}),e.jsx("input",{type:"number",step:"0.01",value:w.height,onChange:L=>A({...w,height:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orientation"}),e.jsxs("select",{value:w.orientation,onChange:L=>A({...w,orientation:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select orientation"}),e.jsx("option",{value:"N_S",children:"North-South"}),e.jsx("option",{value:"E_W",children:"East-West"}),e.jsx("option",{value:"NE_SW",children:"Northeast-Southwest"}),e.jsx("option",{value:"NW_SE",children:"Northwest-Southeast"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plant Capacity"}),e.jsx("input",{type:"number",value:w.plant_capacity,onChange:L=>A({...w,plant_capacity:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Crop Type"}),e.jsx("input",{type:"text",value:w.primary_crop_type,onChange:L=>A({...w,primary_crop_type:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Bell Pepper"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cropping System"}),e.jsxs("select",{value:w.cropping_system,onChange:L=>A({...w,cropping_system:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select system"}),e.jsx("option",{value:"SOIL",children:"Soil"}),e.jsx("option",{value:"COCOPEAT",children:"Cocopeat"}),e.jsx("option",{value:"HYDROPONIC",children:"Hydroponic"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:L=>{q(L.target.checked),A({...w,track_as_asset:L.target.checked})},className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Track as Asset"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check this box to create an asset record for this greenhouse. You can enter asset details below."})]}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:col-span-2 border-t pt-4 mt-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asset Information"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Category"}),e.jsxs("select",{value:w.asset_category_id?String(w.asset_category_id):"",onChange:L=>A({...w,asset_category_id:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select category"}),k.map(L=>e.jsx("option",{value:String(L.id),children:L.name},L.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:w.asset_acquisition_type,onChange:L=>A({...w,asset_acquisition_type:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:w.asset_purchase_date,onChange:L=>A({...w,asset_purchase_date:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:w.asset_purchase_cost,onChange:L=>A({...w,asset_purchase_cost:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",maxLength:3,value:w.asset_currency,onChange:L=>A({...w,asset_currency:L.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"NGN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:w.asset_supplier_name,onChange:L=>A({...w,asset_supplier_name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:w.asset_serial_number,onChange:L=>A({...w,asset_serial_number:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",value:w.asset_model,onChange:L=>A({...w,asset_model:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:w.asset_manufacturer,onChange:L=>A({...w,asset_manufacturer:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year of Make"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,value:w.asset_year_of_make,onChange:L=>A({...w,asset_year_of_make:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty Expiry"}),e.jsx("input",{type:"date",value:w.asset_warranty_expiry,onChange:L=>A({...w,asset_warranty_expiry:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Description"}),e.jsx("textarea",{value:w.asset_description,onChange:L=>A({...w,asset_description:L.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:w.asset_is_trackable,onChange:L=>A({...w,asset_is_trackable:L.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Is Trackable"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:w.notes,onChange:L=>A({...w,notes:L.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:v?"Update":"Create"})]})]})]})})]})}function ag(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState(!0),[m,D]=g.useState(!1),v=()=>{const R=new Date,B=new Date(R);return B.setMonth(B.getMonth()+6),B.toISOString().slice(0,10)},[j,C]=g.useState({farm_id:"",greenhouse_id:"",start_date:new Date().toISOString().slice(0,10),expected_end_date:v(),expected_yield_kg:"",notes:""});g.useEffect(()=>{q()},[]);const q=async()=>{try{const[R,B]=await Promise.all([F.get("/api/v1/bell-pepper-cycles"),F.get("/api/v1/farms")]),w=R.data?.data||R.data||[],A=B.data?.data||B.data||[];d(Array.isArray(w)?w:[]),N(Array.isArray(A)?A:[])}catch(R){console.error("Error fetching data:",R)}finally{E(!1)}},c=async R=>{if(!R){S([]);return}try{const B=await F.get(`/api/v1/greenhouses?farm_id=${R}`),w=B.data?.data||B.data||[];S(Array.isArray(w)?w:[])}catch(B){console.error("Error fetching greenhouses:",B),S([])}},x=()=>{const R=new Date,B=R.toISOString().slice(0,10),w=new Date(R);w.setMonth(w.getMonth()+6);const A=w.toISOString().slice(0,10);C({farm_id:"",greenhouse_id:"",start_date:B,expected_end_date:A,expected_yield_kg:"",notes:""}),S([]),D(!0)},h=R=>{C({...j,farm_id:R,greenhouse_id:""}),c(R)},i=async R=>{R.preventDefault();try{await F.post("/api/v1/bell-pepper-cycles",j),D(!1),q()}catch(B){alert("Error creating cycle: "+(B.response?.data?.message||"Unknown error"))}};return P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bell Pepper Production Cycles"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track production cycles and yield per sqm"})]}),e.jsxs("button",{onClick:x,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Cycle"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(xt,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cycles yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production cycle to get started"}),e.jsx("button",{onClick:x,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Cycle"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cycle Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Greenhouse"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Start Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expected Yield"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actual Yield"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Yield/Sqm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Variance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(R=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.jsx(bt,{to:`/bell-pepper-cycles/${R.id}`,className:"text-green-600 hover:text-green-700",children:R.cycle_code})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.greenhouse?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(R.start_date).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(R.expected_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(R.actual_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(R.actual_yield_per_sqm||0).toFixed(2)," kg/sqm"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("span",{className:`${Number(R.yield_variance_percent||0)>=0?"text-green-600":"text-red-600"}`,children:[Number(R.yield_variance_percent||0).toFixed(1),"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${R.status==="COMPLETED"?"bg-green-100 text-green-800":R.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:R.status})})]},R.id))})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Production Cycle"}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:j.farm_id,onChange:R=>h(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select farm"}),u.map(R=>e.jsx("option",{value:R.id,children:R.name},R.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse *"}),e.jsxs("select",{required:!0,disabled:!j.farm_id||k.length===0,value:j.greenhouse_id,onChange:R=>C({...j,greenhouse_id:R.target.value}),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 ${!j.farm_id||k.length===0?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`,children:[e.jsx("option",{value:"",children:j.farm_id?k.length===0?"No greenhouses available":"Select greenhouse":"Select farm first"}),k.map(R=>e.jsxs("option",{value:R.id,children:[R.name," (",R.size_sqm," sqm)"]},R.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),e.jsx("input",{type:"date",required:!0,value:j.start_date,onChange:R=>{const B=R.target.value;let w="";if(B){const A=new Date(B),b=new Date(A);b.setMonth(b.getMonth()+6),w=b.toISOString().slice(0,10)}C({...j,start_date:B,expected_end_date:w})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected End Date *"}),e.jsx("input",{type:"date",required:!0,value:j.expected_end_date,onChange:R=>C({...j,expected_end_date:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"6 months from start date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Yield (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:j.expected_yield_kg,onChange:R=>C({...j,expected_yield_kg:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:j.notes,onChange:R=>C({...j,notes:R.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Cycle"})]})]})]})})]})}function ng(){const{id:o}=Ei(),[d,u]=g.useState(null),[N,k]=g.useState([]),[S,P]=g.useState([]),[E,m]=g.useState(!0),[D,v]=g.useState(!1),[j,C]=g.useState(!1),[q,c]=g.useState(null),[x,h]=g.useState({cost_type:"SEEDS",description:"",quantity:"",unit:"",unit_cost:"",total_cost:"",cost_date:new Date().toISOString().slice(0,10),staff_id:"",hours_allocated:"",notes:""}),[i,R]=g.useState({harvest_date:new Date().toISOString().slice(0,10),weight_kg:"",crates_count:"",grade:"MIXED",status:"HARVESTED",notes:""});g.useEffect(()=>{B()},[o]);const B=async()=>{try{const[_,le,z]=await Promise.all([F.get(`/api/v1/bell-pepper-cycles/${o}`),F.get(`/api/v1/bell-pepper-cycle-costs?bell_pepper_cycle_id=${o}`),F.get(`/api/v1/bell-pepper-harvests?bell_pepper_cycle_id=${o}`)]),L=_.data?.data||_.data,re=le.data?.data||le.data||[],xe=z.data?.data||z.data||[];u(L),k(Array.isArray(re)?re:[]),P(Array.isArray(xe)?xe:[])}catch(_){console.error("Error fetching cycle data:",_)}finally{m(!1)}},w=async _=>{_.preventDefault();try{const le={...x,bell_pepper_cycle_id:o,farm_id:d?.farm_id};q?await F.put(`/api/v1/bell-pepper-cycle-costs/${q.id}`,le):await F.post("/api/v1/bell-pepper-cycle-costs",le),v(!1),c(null),B()}catch(le){alert("Error saving cost: "+(le.response?.data?.message||"Unknown error"))}},A=async _=>{_.preventDefault();try{const le={...i,farm_id:d?.farm_id,bell_pepper_cycle_id:o,greenhouse_id:d?.greenhouse_id};await F.post("/api/v1/bell-pepper-harvests",le),C(!1),B()}catch(le){alert("Error saving harvest: "+(le.response?.data?.message||"Unknown error"))}},b=async _=>{if(confirm("Are you sure you want to delete this cost?"))try{await F.delete(`/api/v1/bell-pepper-cycle-costs/${_}`),B()}catch(le){alert("Error deleting cost: "+(le.response?.data?.message||"Unknown error"))}};if(E)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});if(!d)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Cycle not found"}),e.jsx(bt,{to:"/bell-pepper-production",className:"text-green-600 hover:text-green-700",children:" Back to Cycles"})]});const I=[{value:"SEEDS",label:"Seeds"},{value:"FERTILIZER_CHEMICALS",label:"Fertilizer/Chemicals"},{value:"FUEL_WATER_PUMPING",label:"Fuel (Water Pumping)"},{value:"LABOUR_DEDICATED",label:"Labour (Dedicated)"},{value:"LABOUR_SHARED",label:"Labour (Shared)"},{value:"SPRAY_GUNS",label:"Spray Guns"},{value:"IRRIGATION_EQUIPMENT",label:"Irrigation Equipment"},{value:"PROTECTIVE_CLOTHING",label:"Protective Clothing"},{value:"GREENHOUSE_AMORTIZATION",label:"Greenhouse Amortization"},{value:"BOREHOLE_AMORTIZATION",label:"Borehole Amortization"},{value:"LOGISTICS",label:"Logistics"},{value:"OTHER",label:"Other"}],G=N.reduce((_,le)=>_+Number(le.total_cost||0),0);return S.reduce((_,le)=>_+Number(le.weight_kg||0),0),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(bt,{to:"/bell-pepper-production",className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(Ai,{className:"h-5 w-5 mr-2"}),"Back to Cycles"]}),d.status!=="COMPLETED"&&e.jsxs("button",{onClick:()=>{alert("Cycle update coming soon")},className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Ae,{className:"h-5 w-5 mr-2"}),"Edit Cycle"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(xt,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:d.cycle_code}),e.jsxs("p",{className:"text-gray-600",children:[d.greenhouse?.name,"  ",d.farm?.name]})]})]}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded ${d.status==="COMPLETED"?"bg-green-100 text-green-800":d.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.status})]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Expected Yield"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Number(d.expected_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Number(d.expected_yield_per_sqm||0).toFixed(2)," kg/sqm"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Actual Yield"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Number(d.actual_yield_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Number(d.actual_yield_per_sqm||0).toFixed(2)," kg/sqm"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Yield Variance"}),e.jsxs("p",{className:`text-lg font-semibold ${Number(d.yield_variance_percent||0)>=0?"text-green-600":"text-red-600"}`,children:[Number(d.yield_variance_percent||0).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Costs"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",Number(G||0).toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Costs"}),e.jsxs("button",{onClick:()=>{c(null),h({cost_type:"SEEDS",description:"",quantity:"",unit:"",unit_cost:"",total_cost:"",cost_date:new Date().toISOString().slice(0,10),staff_id:"",hours_allocated:"",notes:""}),v(!0)},className:"bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 flex items-center text-sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Add Cost"]})]}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[N.map(_=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:I.find(le=>le.value===_.cost_type)?.label||_.cost_type}),_.description&&e.jsx("p",{className:"text-sm text-gray-600",children:_.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(_.cost_date).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",Number(_.total_cost||0).toFixed(2)]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>{c(_),h({cost_type:_.cost_type,description:_.description||"",quantity:_.quantity||"",unit:_.unit||"",unit_cost:_.unit_cost||"",total_cost:_.total_cost||"",cost_date:_.cost_date?new Date(_.cost_date).toISOString().slice(0,10):new Date().toISOString().slice(0,10),staff_id:_.staff_id||"",hours_allocated:_.hours_allocated||"",notes:_.notes||""}),v(!0)},className:"text-green-600 hover:text-green-700",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(_.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]})]})},_.id)),N.length===0&&e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No costs recorded yet"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Harvests"}),e.jsxs("button",{onClick:()=>{R({harvest_date:new Date().toISOString().slice(0,10),weight_kg:"",crates_count:"",grade:"MIXED",status:"HARVESTED",notes:""}),C(!0)},className:"bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 flex items-center text-sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Add Harvest"]})]}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[S.map(_=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:_.harvest_code}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Number(_.weight_kg||0).toFixed(2)," kg  ",_.crates_count," crates"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(_.harvest_date).toLocaleDateString(),"  Grade: ",_.grade]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${_.status==="SOLD"?"bg-green-100 text-green-800":_.status==="DELIVERED"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:_.status})]})},_.id)),S.length===0&&e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No harvests recorded yet"})]})]})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:q?"Edit Cost":"Add Cost"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Type *"}),e.jsx("select",{required:!0,value:x.cost_type,onChange:_=>h({...x,cost_type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:I.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Date *"}),e.jsx("input",{type:"date",required:!0,value:x.cost_date,onChange:_=>h({...x,cost_date:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:x.description,onChange:_=>h({...x,description:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Cost () *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:x.total_cost,onChange:_=>h({...x,total_cost:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),(x.cost_type==="SEEDS"||x.cost_type==="FERTILIZER_CHEMICALS")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",step:"0.01",value:x.quantity,onChange:_=>h({...x,quantity:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("input",{type:"text",value:x.unit,onChange:_=>h({...x,unit:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"kg, litres, etc"})]})]}),(x.cost_type==="LABOUR_DEDICATED"||x.cost_type==="LABOUR_SHARED")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours Allocated"}),e.jsx("input",{type:"number",step:"0.5",value:x.hours_allocated,onChange:_=>h({...x,hours_allocated:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:x.notes,onChange:_=>h({...x,notes:_.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{v(!1),c(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[q?"Update":"Add"," Cost"]})]})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Harvest"}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Date *"}),e.jsx("input",{type:"date",required:!0,value:i.harvest_date,onChange:_=>R({...i,harvest_date:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:i.weight_kg,onChange:_=>{const le=_.target.value;R({...i,weight_kg:le,crates_count:le?Math.ceil(le/9.5):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crates Count"}),e.jsx("input",{type:"number",value:i.crates_count,onChange:_=>R({...i,crates_count:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated (9-10kg per crate)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade *"}),e.jsxs("select",{required:!0,value:i.grade,onChange:_=>R({...i,grade:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"A",children:"Grade A"}),e.jsx("option",{value:"B",children:"Grade B"}),e.jsx("option",{value:"C",children:"Grade C"}),e.jsx("option",{value:"MIXED",children:"Mixed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:i.status,onChange:_=>R({...i,status:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"HARVESTED",children:"Harvested"}),e.jsx("option",{value:"PACKED",children:"Packed"}),e.jsx("option",{value:"IN_TRANSIT",children:"In Transit"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"}),e.jsx("option",{value:"SOLD",children:"Sold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:i.notes,onChange:_=>R({...i,notes:_.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Harvest"})]})]})]})})]})}function lg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState([]),[m,D]=g.useState([]),[v,j]=g.useState(!0),C=(f,W=2)=>{const Y=Number(f);return isNaN(Y)||Y===null||Y===void 0?"0.00":Y.toFixed(W)},[q,c]=g.useState(!1),[x,h]=g.useState(!1),[i,R]=g.useState({farm_id:"",bell_pepper_cycle_id:"",greenhouse_id:"",harvest_date:new Date().toISOString().slice(0,10),grade_a_kg:"0",grade_b_kg:"0",grade_c_kg:"0",crates_count:"",notes:""}),[B,w]=g.useState({farm_id:"",cycle_id:"",greenhouse_id:""}),[A,b]=g.useState(null);g.useEffect(()=>{I()},[B]),g.useEffect(()=>{if(A&&A.start_date&&i.harvest_date){const f=te(i.harvest_date,A);console.log("useEffect validation:",f,"showPopup:",!f.valid),h(!f.valid)}else h(!1)},[A,i.harvest_date]);const I=async()=>{try{const f=new URLSearchParams;B.farm_id&&f.append("farm_id",B.farm_id),B.cycle_id&&f.append("bell_pepper_cycle_id",B.cycle_id),B.greenhouse_id&&f.append("greenhouse_id",B.greenhouse_id);const[W,Y,ce]=await Promise.all([F.get(`/api/v1/bell-pepper-harvests?${f.toString()}`),F.get("/api/v1/bell-pepper-cycles?per_page=1000"),F.get("/api/v1/farms?per_page=1000")]),H=W.data?.data||(Array.isArray(W.data)?W.data:[]),ne=Y.data?.data||(Array.isArray(Y.data)?Y.data:[]),X=ce.data?.data||(Array.isArray(ce.data)?ce.data:[]);d(Array.isArray(H)?H:[]),N(Array.isArray(ne)?ne:[]),E(Array.isArray(X)?X:[])}catch(f){console.error("Error fetching data:",f)}finally{j(!1)}},G=async f=>{if(!f){D([]);return}try{const W=await F.get(`/api/v1/greenhouses?farm_id=${f}`),Y=W.data?.data||W.data||[];D(Array.isArray(Y)?Y:[])}catch(W){console.error("Error fetching greenhouses:",W),D([])}},_=async f=>{if(!f){S([]);return}try{const W=await F.get(`/api/v1/bell-pepper-cycles?greenhouse_id=${f}&status=IN_PROGRESS&per_page=1000`),Y=W.data?.data||(Array.isArray(W.data)?W.data:[]),ce=Array.isArray(Y)?Y:[];if(ce.length===0){const H=await F.get(`/api/v1/bell-pepper-cycles?greenhouse_id=${f}&status=PLANNED&per_page=1000`),ne=H.data?.data||(Array.isArray(H.data)?H.data:[]);S(Array.isArray(ne)?ne:[])}else S(ce);console.log("Cycles loaded for greenhouse:",f,ce.length)}catch(W){console.error("Error fetching cycles:",W),S([])}},le=async()=>{if(R({farm_id:"",bell_pepper_cycle_id:"",greenhouse_id:"",harvest_date:new Date().toISOString().slice(0,10),grade_a_kg:"0",grade_b_kg:"0",grade_c_kg:"0",crates_count:"",notes:""}),D([]),S([]),b(null),h(!1),P.length===0)try{const f=await F.get("/api/v1/farms?per_page=1000"),W=f.data?.data||(Array.isArray(f.data)?f.data:[]);E(Array.isArray(W)?W:[])}catch(f){console.error("Error fetching farms:",f)}c(!0)},z=f=>{R({...i,farm_id:f,greenhouse_id:"",bell_pepper_cycle_id:""}),G(f)},L=f=>{R({...i,greenhouse_id:f,bell_pepper_cycle_id:"",harvest_date:new Date().toISOString().slice(0,10)}),b(null),_(f)},re=f=>{const W=k.find(Y=>String(Y.id)===String(f));if(console.log("handleCycleChange called with cycleId:",f,"cycle:",W,"current harvest_date:",i.harvest_date),b(W),R({...i,bell_pepper_cycle_id:f}),W&&W.start_date&&i.harvest_date){const Y=te(i.harvest_date,W);console.log("Immediate validation after cycle selection:",{harvestDate:i.harvest_date,cycleStartDate:W.start_date,validation:Y,willShowPopup:!Y.valid}),Y.valid?h(!1):(console.log("Setting popup to true immediately"),h(!0))}else h(!1)},xe=()=>{if(A&&A.start_date){const f=new Date(A.start_date),W=new Date(f);return W.setDate(W.getDate()+70),W.toISOString().slice(0,10)}return null},Z=()=>{if(A&&A.expected_end_date){const f=new Date(A.expected_end_date),W=new Date;return f<W?f.toISOString().slice(0,10):W.toISOString().slice(0,10)}return new Date().toISOString().slice(0,10)},te=(f,W=A)=>{if(!W||!W.start_date||!f)return{valid:!0};const Y=new Date(W.start_date),ce=new Date(f),H=new Date(Y);H.setDate(H.getDate()+70);const ne=ce.getTime()-Y.getTime(),X=Math.floor(ne/(1e3*60*60*24));return console.log("Validating date:",{harvestDate:f,cycleStartDate:W.start_date,daysDifference:X,minRequired:70,isValid:X>=70}),X<70?{valid:!1,minDate:H.toISOString().slice(0,10),cycleStartDate:Y.toISOString().slice(0,10),daysDifference:X}:{valid:!0}},ie=f=>{console.log("handleHarvestDateChange called with:",f,"selectedCycle:",A),R({...i,harvest_date:f})},M=()=>{if(!A||!A.start_date)return;te(i.harvest_date).valid||h(!0)},J=()=>{const f=Number(i.grade_a_kg)||0,W=Number(i.grade_b_kg)||0,Y=Number(i.grade_c_kg)||0,ce=f+W+Y;return isNaN(ce)?0:ce},O=()=>{const f=J();return f>0?Math.ceil(f/9.5):0},y=async f=>{if(f.preventDefault(),A&&A.start_date&&!te(i.harvest_date).valid){h(!0);return}try{const W={...i,grade_a_kg:parseFloat(i.grade_a_kg)||0,grade_b_kg:parseFloat(i.grade_b_kg)||0,grade_c_kg:parseFloat(i.grade_c_kg)||0,crates_count:i.crates_count||O()};await F.post("/api/v1/bell-pepper-harvests",W),c(!1),h(!1),I()}catch(W){alert("Error creating harvest: "+(W.response?.data?.message||"Unknown error"))}};return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Bell Pepper Harvests"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Record and track harvests by grade"})]}),e.jsxs("button",{onClick:le,className:"w-full md:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(_e,{className:"w-5 h-5"}),"Record Harvest"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm"}),e.jsxs("select",{value:B.farm_id,onChange:f=>w({...B,farm_id:f.target.value,greenhouse_id:"",cycle_id:""}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"All Farms"}),P.map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse"}),e.jsxs("select",{value:B.greenhouse_id,onChange:f=>w({...B,greenhouse_id:f.target.value,cycle_id:""}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:!B.farm_id,children:[e.jsx("option",{value:"",children:"All Greenhouses"}),m.filter(f=>!B.farm_id||f.farm_id==B.farm_id).map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cycle"}),e.jsxs("select",{value:B.cycle_id,onChange:f=>w({...B,cycle_id:f.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:!B.greenhouse_id,children:[e.jsx("option",{value:"",children:"All Cycles"}),u.filter(f=>!B.greenhouse_id||f.greenhouse_id==B.greenhouse_id).map(f=>e.jsx("option",{value:f.id,children:f.cycle_code},f.id))]})]})]})}),e.jsx("div",{className:"space-y-4",children:o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx(Xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No harvests found. Record your first harvest!"})]}):o.map(f=>{const W=Number(f.grade_a_kg)||0,Y=Number(f.grade_b_kg)||0,ce=Number(f.grade_c_kg)||0,H=W+Y+ce||0;return e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.harvest_code}),f.harvest_number&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:["Harvest #",f.harvest_number]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fi,{className:"w-4 h-4"}),new Date(f.harvest_date).toLocaleDateString()]}),f.greenhouse&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ot,{className:"w-4 h-4"}),f.greenhouse.name]}),f.harvester&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(au,{className:"w-4 h-4"}),f.harvester.name]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[C(H)," kg"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[f.crates_count||0," crates"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-green-700 mb-1",children:"Grade A"}),e.jsxs("div",{className:"text-lg font-semibold text-green-900",children:[C(W)," kg"]})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-yellow-700 mb-1",children:"Grade B"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-900",children:[C(Y)," kg"]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-orange-700 mb-1",children:"Grade C"}),e.jsxs("div",{className:"text-lg font-semibold text-orange-900",children:[C(ce)," kg"]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-2 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.status==="HARVESTED"?"bg-blue-100 text-blue-800":f.status==="PACKED"?"bg-purple-100 text-purple-800":f.status==="SOLD"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:f.status})}),f.cycle&&e.jsx(bt,{to:`/bell-pepper-cycles/${f.cycle.id}`,className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"View Cycle "})]})]},f.id)})}),x&&A&&A.start_date&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[100]",onClick:f=>{f.target,f.currentTarget},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",onClick:f=>f.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-red-600",children:"Invalid Harvest Date"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"The selected harvest date is less than 70 days from the cycle start date. This is not possible."}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Cycle Start Date:"})," ",new Date(A.start_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Selected Harvest Date:"})," ",new Date(i.harvest_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Minimum Harvest Date:"})," ",new Date(new Date(A.start_date).setDate(new Date(A.start_date).getDate()+70)).toLocaleDateString()]})]})}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Please select a date that is at least 70 days after the cycle start date."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1);const f=new Date(A.start_date),W=new Date(f);W.setDate(W.getDate()+70),R({...i,harvest_date:W.toISOString().slice(0,10)})},className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Use Minimum Date"}),e.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Choose Different Date"})]})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Record New Harvest"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Enter harvest details by grade"})]}),e.jsxs("form",{onSubmit:y,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{value:i.farm_id,onChange:f=>z(f.target.value),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select Farm"}),P.length===0?e.jsx("option",{value:"",disabled:!0,children:"Loading farms..."}):P.map(f=>e.jsx("option",{value:String(f.id),children:f.name},f.id))]}),P.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No farms available. Please create a farm first."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greenhouse *"}),e.jsxs("select",{value:i.greenhouse_id,onChange:f=>L(f.target.value),required:!0,disabled:!i.farm_id,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Select Greenhouse"}),m.map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Cycle *"}),e.jsxs("select",{value:i.bell_pepper_cycle_id,onChange:f=>re(f.target.value),required:!0,disabled:!i.greenhouse_id||k.length===0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Select Cycle"}),k.length===0&&i.greenhouse_id?e.jsx("option",{value:"",disabled:!0,children:"No active cycles found for this greenhouse"}):k.map(f=>e.jsxs("option",{value:String(f.id),children:[f.cycle_code," ",f.start_date?`(${new Date(f.start_date).toLocaleDateString()})`:""]},f.id))]}),i.greenhouse_id&&k.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No in-progress or planned cycles found. Please create a production cycle first."}),A&&A.start_date&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Cycle started: ",new Date(A.start_date).toLocaleDateString(),". First harvest can be recorded from ",new Date(new Date(A.start_date).setDate(new Date(A.start_date).getDate()+70)).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Date *"}),e.jsx("input",{type:"date",value:i.harvest_date,onChange:f=>{const W=f.target.value;console.log("Date changed to:",W,"Selected cycle:",A),ie(W)},onBlur:M,onInput:f=>{const W=f.target.value;if(console.log("Date input event:",W),W&&A&&A.start_date){const Y=te(W,A);console.log("Validation result:",Y),Y.valid?h(!1):(console.log("Showing validation popup"),h(!0))}},min:xe()||void 0,max:Z(),required:!0,className:`w-full border rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ${x?"border-red-500 bg-red-50":"border-gray-300"}`}),A&&A.start_date&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Harvest date must be at least 70 days after cycle start (",new Date(A.start_date).toLocaleDateString(),")"]}),!A&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please select a production cycle first to set date constraints"})]}),e.jsxs("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Harvest by Grade (kg)"}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Grade A (Premium) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.grade_a_kg,onChange:f=>R({...i,grade_a_kg:f.target.value}),required:!0,className:"w-full border border-green-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-2",children:"Grade B (Standard) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.grade_b_kg,onChange:f=>R({...i,grade_b_kg:f.target.value}),required:!0,className:"w-full border border-yellow-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Grade C (Lower) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.grade_c_kg,onChange:f=>R({...i,grade_c_kg:f.target.value}),required:!0,className:"w-full border border-orange-300 rounded-lg px-4 py-3 text-xl font-semibold focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total Weight"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[C(J())," kg"]}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Estimated crates: ",O()]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crates Count"}),e.jsx("input",{type:"number",min:"0",value:i.crates_count,onChange:f=>R({...i,crates_count:f.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:`Auto: ${O()}`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to auto-calculate (9.5kg per crate)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:i.notes,onChange:f=>R({...i,notes:f.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Additional notes about this harvest..."})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Record Harvest"})]})]})]})})]})}function ig(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState([]),[m,D]=g.useState(!0),[v,j]=g.useState(!1),[C,q]=g.useState(null),[c,x]=g.useState(!1),[h,i]=g.useState({farm_id:"",name:"",code:"",type:"",description:"",address:"",latitude:"",longitude:"",total_area:"",area_unit:"hectares",notes:"",is_active:!0,track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1});g.useEffect(()=>{R(),B(),w(),A()},[]);const R=async()=>{D(!0);try{const z=await F.get("/api/v1/sites?per_page=1000"),L=z.data?.data||(Array.isArray(z.data)?z.data:[]);d(Array.isArray(L)?L:[])}catch(z){console.error("Error fetching sites:",z),d([])}finally{D(!1)}},B=async()=>{try{const z=await F.get("/api/v1/farms?per_page=1000");console.log("Farms API full response:",z),console.log("Farms API response.data:",z.data);let L=[];z.data?.data&&Array.isArray(z.data.data)?L=z.data.data:Array.isArray(z.data)?L=z.data:z.data&&typeof z.data=="object"&&(Object.keys(z.data).includes("data")&&Array.isArray(z.data.data)?L=z.data.data:L=Object.values(z.data).filter(xe=>xe&&typeof xe=="object"&&xe.id)),console.log("Farms parsed:",L.length,L),N(L)}catch(z){console.error("Error fetching farms:",z),console.error("Error response:",z.response),N([])}},w=async()=>{try{const z=await F.get("/api/v1/site-types?per_page=1000&is_active=true");let L=[];z.data&&(Array.isArray(z.data)?L=z.data:z.data.data&&Array.isArray(z.data.data)&&(L=z.data.data)),S(L)}catch(z){console.error("Error fetching site types:",z),S([])}},A=async()=>{try{const z=await F.get("/api/v1/asset-categories?per_page=1000");let L=[];z.data&&(Array.isArray(z.data)?L=z.data:z.data.data&&Array.isArray(z.data.data)&&(L=z.data.data)),E(L)}catch(z){console.error("Error fetching asset categories:",z),E([])}},b=()=>{q(null),x(!1),k.length===0&&w();const z=k.length>0?k[0].code:"";i({farm_id:"",name:"",code:"",type:z,description:"",address:"",latitude:"",longitude:"",total_area:"",area_unit:"hectares",notes:"",is_active:!0,track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1}),j(!0)},I=z=>{q(z);const L=!!z.asset_id;x(L),P.length===0&&A(),i({farm_id:z.farm_id||"",name:z.name||"",code:z.code||"",type:z.type||"farmland",description:z.description||"",address:z.address||"",latitude:z.latitude||"",longitude:z.longitude||"",total_area:z.total_area||"",area_unit:z.area_unit||"hectares",notes:z.notes||"",is_active:z.is_active!==void 0?z.is_active:!0,track_as_asset:L,asset_category_id:z.asset?.asset_category_id||"",asset_description:z.asset?.description||"",asset_acquisition_type:z.asset?.acquisition_type||"",asset_purchase_date:z.asset?.purchase_date?new Date(z.asset.purchase_date).toISOString().slice(0,10):"",asset_purchase_cost:z.asset?.purchase_cost||"",asset_currency:z.asset?.currency||"NGN",asset_supplier_name:z.asset?.supplier_name||"",asset_serial_number:z.asset?.serial_number||"",asset_model:z.asset?.model||"",asset_manufacturer:z.asset?.manufacturer||"",asset_year_of_make:z.asset?.year_of_make||"",asset_warranty_expiry:z.asset?.warranty_expiry?new Date(z.asset.warranty_expiry).toISOString().slice(0,10):"",asset_is_trackable:z.asset?.is_trackable||!1}),j(!0)},G=async z=>{z.preventDefault();try{const L={...h};L.track_as_asset=c,c||Object.keys(L).forEach(re=>{re.startsWith("asset_")&&delete L[re]}),C?await F.put(`/api/v1/sites/${C.id}`,L):await F.post("/api/v1/sites",L),j(!1),R()}catch(L){console.error("Error saving site:",L),alert(L.response?.data?.message||"Error saving site")}},_=async z=>{if(confirm("Are you sure you want to delete this site?"))try{await F.delete(`/api/v1/sites/${z}`),R()}catch(L){console.error("Error deleting site:",L),alert(L.response?.data?.message||"Error deleting site")}},le=z=>{const L=k.find(re=>re.code===z);return L?L.name:z};return m?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Sites"}),e.jsxs("button",{onClick:b,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Create Site"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No sites found"})}):o.map(z=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:z.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:le(z.type)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:z.farm?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${z.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:z.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>I(z),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>_(z.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},z.id))})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:C?"Edit Site":"Create Site"}),e.jsxs("form",{onSubmit:G,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm"}),e.jsxs("select",{value:h.farm_id,onChange:z=>i({...h,farm_id:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(z=>e.jsx("option",{value:z.id,children:z.name},z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{required:!0,value:h.type,onChange:z=>i({...h,type:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select type"}),k.filter(z=>z.is_active).map(z=>e.jsx("option",{value:z.code,children:z.name},z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:h.name,onChange:z=>i({...h,name:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:h.code,onChange:z=>i({...h,code:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if not provided"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("textarea",{value:h.address,onChange:z=>i({...h,address:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),e.jsx("input",{type:"number",step:"any",value:h.latitude,onChange:z=>i({...h,latitude:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),e.jsx("input",{type:"number",step:"any",value:h.longitude,onChange:z=>i({...h,longitude:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Area"}),e.jsx("input",{type:"number",step:"0.01",value:h.total_area,onChange:z=>i({...h,total_area:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area Unit"}),e.jsxs("select",{value:h.area_unit,onChange:z=>i({...h,area_unit:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"hectares",children:"Hectares"}),e.jsx("option",{value:"acres",children:"Acres"}),e.jsx("option",{value:"sqm",children:"Sqm"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:h.description,onChange:z=>i({...h,description:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:z=>{x(z.target.checked),i({...h,track_as_asset:z.target.checked})},className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Track as Asset"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check this box to create an asset record for this site. You can enter asset details below."})]}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-2 border-t pt-4 mt-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asset Information"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Category"}),e.jsxs("select",{value:h.asset_category_id?String(h.asset_category_id):"",onChange:z=>i({...h,asset_category_id:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select category"}),P.map(z=>e.jsx("option",{value:String(z.id),children:z.name},z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:h.asset_acquisition_type,onChange:z=>i({...h,asset_acquisition_type:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:h.asset_purchase_date,onChange:z=>i({...h,asset_purchase_date:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:h.asset_purchase_cost,onChange:z=>i({...h,asset_purchase_cost:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",maxLength:3,value:h.asset_currency,onChange:z=>i({...h,asset_currency:z.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500",placeholder:"NGN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:h.asset_supplier_name,onChange:z=>i({...h,asset_supplier_name:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:h.asset_serial_number,onChange:z=>i({...h,asset_serial_number:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",value:h.asset_model,onChange:z=>i({...h,asset_model:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:h.asset_manufacturer,onChange:z=>i({...h,asset_manufacturer:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year of Make"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,value:h.asset_year_of_make,onChange:z=>i({...h,asset_year_of_make:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty Expiry"}),e.jsx("input",{type:"date",value:h.asset_warranty_expiry,onChange:z=>i({...h,asset_warranty_expiry:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Description"}),e.jsx("textarea",{value:h.asset_description,onChange:z=>i({...h,asset_description:z.target.value}),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h.asset_is_trackable,onChange:z=>i({...h,asset_is_trackable:z.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Is Trackable"})]})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:h.notes,onChange:z=>i({...h,notes:z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h.is_active,onChange:z=>i({...h,is_active:z.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:C?"Update":"Create"})]})]})]})})]})}function og(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState(!0),[m,D]=g.useState(!1),[v,j]=g.useState(null),[C,q]=g.useState({site_id:"",crop_id:"",name:"",code:"",description:"",area:"",area_unit:"hectares",produce_type:"",soil_type:"",is_active:!0});g.useEffect(()=>{c(),x(),h()},[]);const c=async()=>{E(!0);try{const A=await F.get("/api/v1/farm-zones?per_page=1000"),b=A.data?.data||(Array.isArray(A.data)?A.data:[]);d(Array.isArray(b)?b:[])}catch(A){console.error("Error fetching farm zones:",A),d([])}finally{E(!1)}},x=async()=>{try{const A=await F.get("/api/v1/sites?type=farmland&per_page=1000"),b=A.data?.data||(Array.isArray(A.data)?A.data:[]);N(Array.isArray(b)?b:[])}catch(A){console.error("Error fetching sites:",A)}},h=async()=>{try{const A=await F.get("/api/v1/crops?per_page=1000"),b=A.data?.data||(Array.isArray(A.data)?A.data:[]);S(Array.isArray(b)?b:[])}catch(A){console.error("Error fetching crops:",A)}},i=()=>{j(null),q({site_id:"",crop_id:"",name:"",code:"",description:"",area:"",area_unit:"hectares",produce_type:"",soil_type:"",is_active:!0}),D(!0)},R=A=>{j(A),q({site_id:A.site_id||"",crop_id:A.crop_id||"",name:A.name||"",code:A.code||"",description:A.description||"",area:A.area||"",area_unit:A.area_unit||"hectares",produce_type:A.produce_type||"",soil_type:A.soil_type||"",is_active:A.is_active!==void 0?A.is_active:!0}),D(!0)},B=async A=>{A.preventDefault();try{v?await F.put(`/api/v1/farm-zones/${v.id}`,C):await F.post("/api/v1/farm-zones",C),D(!1),c()}catch(b){console.error("Error saving farm zone:",b),alert(b.response?.data?.message||"Error saving farm zone")}},w=async A=>{if(confirm("Are you sure you want to delete this farm zone?"))try{await F.delete(`/api/v1/farm-zones/${A}`),c()}catch(b){console.error("Error deleting farm zone:",b),alert(b.response?.data?.message||"Error deleting farm zone")}};return P?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Farm Zones"}),e.jsxs("button",{onClick:i,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Create Farm Zone"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produce Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No farm zones found"})}):o.map(A=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.code||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:A.site?.name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:A.produce_type||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:A.area?`${A.area} ${A.area_unit}`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${A.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>R(A),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>w(A.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},A.id))})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:v?"Edit Farm Zone":"Create Farm Zone"}),e.jsxs("form",{onSubmit:B,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site (Farmland) *"}),e.jsxs("select",{required:!0,value:C.site_id,onChange:A=>q({...C,site_id:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Site"}),u.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crop"}),e.jsxs("select",{value:C.crop_id,onChange:A=>q({...C,crop_id:A.target.value||null}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Crop"}),k.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:C.name,onChange:A=>q({...C,name:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:C.code,onChange:A=>q({...C,code:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Produce Type"}),e.jsx("input",{type:"text",value:C.produce_type,onChange:A=>q({...C,produce_type:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., tomatoes, corn"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soil Type"}),e.jsx("input",{type:"text",value:C.soil_type,onChange:A=>q({...C,soil_type:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area"}),e.jsx("input",{type:"number",step:"0.01",value:C.area,onChange:A=>q({...C,area:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area Unit"}),e.jsxs("select",{value:C.area_unit,onChange:A=>q({...C,area_unit:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"hectares",children:"Hectares"}),e.jsx("option",{value:"acres",children:"Acres"}),e.jsx("option",{value:"sqm",children:"Sqm"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:C.description,onChange:A=>q({...C,description:A.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:C.is_active,onChange:A=>q({...C,is_active:A.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:v?"Update":"Create"})]})]})]})})]})}function cg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState(!0),[m,D]=g.useState(!1),[v,j]=g.useState(null),[C,q]=g.useState(!1),[c,x]=g.useState({site_id:"",name:"",code:"",production_type:"gari",description:"",area_sqm:"",established_date:"",is_active:!0,track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1});g.useEffect(()=>{h(),i(),R()},[]);const h=async()=>{E(!0);try{const I=await F.get("/api/v1/factories?per_page=1000"),G=I.data?.data||(Array.isArray(I.data)?I.data:[]);d(Array.isArray(G)?G:[])}catch(I){console.error("Error fetching factories:",I),d([])}finally{E(!1)}},i=async()=>{try{const I=await F.get("/api/v1/sites?type=factory&per_page=1000"),G=I.data?.data||(Array.isArray(I.data)?I.data:[]);N(Array.isArray(G)?G:[])}catch(I){console.error("Error fetching sites:",I)}},R=async()=>{try{const I=await F.get("/api/v1/asset-categories?per_page=1000");let G=[];I.data&&(Array.isArray(I.data)?G=I.data:I.data.data&&Array.isArray(I.data.data)&&(G=I.data.data)),S(G)}catch(I){console.error("Error fetching asset categories:",I)}},B=()=>{j(null),q(!1),x({site_id:"",name:"",code:"",production_type:"gari",description:"",area_sqm:"",established_date:"",is_active:!0,track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1}),D(!0)},w=I=>{j(I);const G=!!I.asset_id;q(G),k.length===0&&R(),x({site_id:I.site_id||"",name:I.name||"",code:I.code||"",production_type:I.production_type||"gari",description:I.description||"",area_sqm:I.area_sqm||"",established_date:I.established_date||"",is_active:I.is_active!==void 0?I.is_active:!0,track_as_asset:G,asset_category_id:I.asset?.asset_category_id||"",asset_description:I.asset?.description||"",asset_acquisition_type:I.asset?.acquisition_type||"",asset_purchase_date:I.asset?.purchase_date?new Date(I.asset.purchase_date).toISOString().slice(0,10):"",asset_purchase_cost:I.asset?.purchase_cost||"",asset_currency:I.asset?.currency||"NGN",asset_supplier_name:I.asset?.supplier_name||"",asset_serial_number:I.asset?.serial_number||"",asset_model:I.asset?.model||"",asset_manufacturer:I.asset?.manufacturer||"",asset_year_of_make:I.asset?.year_of_make||"",asset_warranty_expiry:I.asset?.warranty_expiry?new Date(I.asset.warranty_expiry).toISOString().slice(0,10):"",asset_is_trackable:I.asset?.is_trackable||!1}),D(!0)},A=async I=>{I.preventDefault();try{const G={...c};G.track_as_asset=C,C||Object.keys(G).forEach(_=>{_.startsWith("asset_")&&delete G[_]}),v?await F.put(`/api/v1/factories/${v.id}`,G):await F.post("/api/v1/factories",G),D(!1),h()}catch(G){console.error("Error saving factory:",G);const _=G.response?.data?.message||(G.response?.data?.errors?JSON.stringify(G.response.data.errors):"")||G.message;alert("Error saving factory: "+_)}},b=async I=>{if(confirm("Are you sure you want to delete this factory?"))try{await F.delete(`/api/v1/factories/${I}`),h()}catch(G){console.error("Error deleting factory:",G),alert(G.response?.data?.message||"Error deleting factory")}};return P?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Factories"}),e.jsxs("button",{onClick:B,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Create Factory"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Production Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No factories found"})}):o.map(I=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:I.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:I.site?.name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 capitalize",children:I.production_type||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${I.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>w(I),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>b(I.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},I.id))})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:v?"Edit Factory":"Create Factory"}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site (Factory Type) *"}),e.jsxs("select",{required:!0,value:c.site_id,onChange:I=>x({...c,site_id:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Site"}),u.map(I=>e.jsx("option",{value:I.id,children:I.name},I.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Type *"}),e.jsxs("select",{required:!0,value:c.production_type,onChange:I=>x({...c,production_type:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"gari",children:"Gari"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:c.name,onChange:I=>x({...c,name:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:c.code,onChange:I=>x({...c,code:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area (sqm)"}),e.jsx("input",{type:"number",step:"0.01",value:c.area_sqm,onChange:I=>x({...c,area_sqm:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Established Date"}),e.jsx("input",{type:"date",value:c.established_date,onChange:I=>x({...c,established_date:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:I=>x({...c,description:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.is_active,onChange:I=>x({...c,is_active:I.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:I=>{q(I.target.checked),x({...c,track_as_asset:I.target.checked})},className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Track as Asset"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check this box to create an asset record for this factory. You can enter asset details below."})]}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asset Information"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Category"}),e.jsxs("select",{value:c.asset_category_id?String(c.asset_category_id):"",onChange:I=>x({...c,asset_category_id:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select category"}),k.map(I=>e.jsx("option",{value:String(I.id),children:I.name},I.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:c.asset_acquisition_type,onChange:I=>x({...c,asset_acquisition_type:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:c.asset_purchase_date,onChange:I=>x({...c,asset_purchase_date:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:c.asset_purchase_cost,onChange:I=>x({...c,asset_purchase_cost:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",maxLength:3,value:c.asset_currency,onChange:I=>x({...c,asset_currency:I.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"NGN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:c.asset_supplier_name,onChange:I=>x({...c,asset_supplier_name:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:c.asset_serial_number,onChange:I=>x({...c,asset_serial_number:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",value:c.asset_model,onChange:I=>x({...c,asset_model:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:c.asset_manufacturer,onChange:I=>x({...c,asset_manufacturer:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year of Make"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,value:c.asset_year_of_make,onChange:I=>x({...c,asset_year_of_make:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty Expiry"}),e.jsx("input",{type:"date",value:c.asset_warranty_expiry,onChange:I=>x({...c,asset_warranty_expiry:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Description"}),e.jsx("textarea",{value:c.asset_description,onChange:I=>x({...c,asset_description:I.target.value}),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:c.asset_is_trackable,onChange:I=>x({...c,asset_is_trackable:I.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Is Trackable"})]})})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:v?"Update":"Create"})]})]})]})})]})}function dg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState(!0),[P,E]=g.useState(!1),[m,D]=g.useState(null),[v,j]=g.useState({location_id:"",name:"",code:"",description:"",notes:"",is_active:!0});g.useEffect(()=>{C()},[]);const C=async()=>{S(!0);try{const[i,R]=await Promise.all([F.get("/api/v1/admin-zones?per_page=1000"),F.get("/api/v1/locations?per_page=1000&is_active=1")]),B=i.data?.data||(Array.isArray(i.data)?i.data:[]),w=R.data?.data||(Array.isArray(R.data)?R.data:[]);d(Array.isArray(B)?B:[]),N(Array.isArray(w)?w:[])}catch(i){console.error("Error fetching data:",i),d([]),N([])}finally{S(!1)}},q=()=>{D(null),j({location_id:"",name:"",code:"",description:"",notes:"",is_active:!0}),E(!0)},c=i=>{D(i),j({location_id:i.location_id||"",name:i.name||"",code:i.code||"",description:i.description||"",notes:i.notes||"",is_active:i.is_active!==void 0?i.is_active:!0}),E(!0)},x=async i=>{i.preventDefault();try{m?await F.put(`/api/v1/admin-zones/${m.id}`,v):await F.post("/api/v1/admin-zones",v),E(!1),C()}catch(R){console.error("Error saving zone:",R),alert(R.response?.data?.message||"Error saving zone")}},h=async i=>{if(confirm("Are you sure you want to delete this zone?"))try{await F.delete(`/api/v1/admin-zones/${i}`),C()}catch(R){console.error("Error deleting zone:",R),alert(R.response?.data?.message||"Error deleting zone")}};return k?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Zones"}),e.jsxs("button",{onClick:q,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Create Zone"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No zones found"})}):o.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:i.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:i.location?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${i.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>c(i),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>h(i.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},i.id))})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:m?"Edit Zone":"Create Zone"}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),e.jsxs("select",{required:!0,value:v.location_id,onChange:i=>j({...v,location_id:i.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Location"}),u.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:v.name,onChange:i=>j({...v,name:i.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),e.jsx("input",{type:"text",value:v.code,onChange:i=>j({...v,code:i.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if empty"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:v.description,onChange:i=>j({...v,description:i.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:v.notes,onChange:i=>j({...v,notes:i.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:v.is_active,onChange:i=>j({...v,is_active:i.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:m?"Update":"Create"})]})]})]})})]})}function ug(){const[o,d]=g.useState([]),[u,N]=g.useState({}),[k,S]=g.useState(!0),[P,E]=g.useState(!1),[m,D]=g.useState(null),[v,j]=g.useState({name:"",permissions:[]});g.useEffect(()=>{C()},[]);const C=async()=>{try{const[w,A]=await Promise.all([F.get("/api/v1/roles"),F.get("/api/v1/roles/menu-permissions")]);d(w.data?.data||w.data||[]),N(A.data?.data||{})}catch(w){console.error("Error fetching data:",w),alert("Error loading roles: "+(w.response?.data?.message||"Unknown error"))}finally{S(!1)}},q=(w=null)=>{if(w)if(D(w),w.name==="ADMIN"){const A=Object.values(u).flatMap(b=>Object.values(b)).flatMap(b=>b.map(I=>[I.menu_key,I.submenu_key,I.permission_type].filter(Boolean).join(".")));j({name:w.name,permissions:A})}else j({name:w.name,permissions:w.permissions?.map(A=>A.name)||[]});else D(null),j({name:"",permissions:[]});E(!0)},c=()=>{E(!1),D(null),j({name:"",permissions:[]})},x=w=>{v.name!=="ADMIN"&&j(A=>({...A,permissions:A.permissions.includes(w)?A.permissions.filter(b=>b!==w):[...A.permissions,w]}))},h=(w,A,b)=>{const I=[w,A,b].filter(Boolean).join(".");x(I)},i=(w,A,b)=>{const I=[w,A,b].filter(Boolean).join(".");return v.permissions.includes(I)},R=async w=>{w.preventDefault();try{const A={...v};if(A.name==="ADMIN"){const b=Object.values(u).flatMap(I=>Object.values(I)).flatMap(I=>I.map(G=>[G.menu_key,G.submenu_key,G.permission_type].filter(Boolean).join(".")));A.permissions=b}m?await F.put(`/api/v1/roles/${m.id}`,A):await F.post("/api/v1/roles",A),c(),C()}catch(A){alert("Error saving role: "+(A.response?.data?.message||"Unknown error"))}},B=async(w,A)=>{if(confirm(`Are you sure you want to delete the role "${A}"?`))try{await F.delete(`/api/v1/roles/${w}`),C()}catch(b){alert("Error deleting role: "+(b.response?.data?.message||"Unknown error"))}};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Roles & Permissions"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage user roles and their access permissions"})]}),e.jsxs("button",{onClick:()=>q(),className:"w-full md:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(_e,{className:"w-5 h-5"}),"Create Role"]})]}),e.jsx("div",{className:"space-y-4",children:o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx(vi,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No roles found. Create your first role!"})]}):o.map(w=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(vi,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:w.name})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[w.permissions?.length||0," permission(s) assigned"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>q(w),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Edit"]}),w.name!=="ADMIN"&&e.jsxs("button",{onClick:()=>B(w.id,w.name),className:"flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Delete"]})]})]}),w.permissions&&w.permissions.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Permissions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.permissions.map(A=>e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded",children:A.name},A.id))})]})]},w.id))}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Role":"Create New Role"})}),e.jsxs("form",{onSubmit:R,className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Name *"}),e.jsx("input",{type:"text",value:v.name,onChange:w=>{const A=w.target.value;if(j({...v,name:A}),A==="ADMIN"){const b=Object.values(u).flatMap(I=>Object.values(I)).flatMap(I=>I.map(G=>[G.menu_key,G.submenu_key,G.permission_type].filter(Boolean).join(".")));j(I=>({...I,name:A,permissions:b}))}},required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Manager, Worker, Viewer"}),v.name==="ADMIN"&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:" ADMIN role automatically has all permissions and cannot be modified."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permissions"}),v.name==="ADMIN"&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," The ADMIN role has all permissions automatically. All permissions are selected and cannot be deselected."]})}),e.jsx("div",{className:"space-y-6 max-h-96 overflow-y-auto",children:Object.entries(u).map(([w,A])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3 capitalize",children:w.replace("-"," ")}),Object.entries(A).map(([b,I])=>e.jsxs("div",{className:"ml-4 mb-4 last:mb-0",children:[b!=="main"&&e.jsx("h5",{className:"font-medium text-gray-700 mb-2 capitalize",children:b.replace("-"," ")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(G=>e.jsxs("button",{type:"button",onClick:()=>h(G.menu_key,G.submenu_key,G.permission_type),disabled:v.name==="ADMIN",className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${i(G.menu_key,G.submenu_key,G.permission_type)?"bg-green-100 border-green-500 text-green-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"} ${v.name==="ADMIN"?"opacity-75 cursor-not-allowed":"cursor-pointer"}`,children:[i(G.menu_key,G.submenu_key,G.permission_type)?e.jsx(jp,{className:"w-4 h-4"}):e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm capitalize",children:G.permission_type})]},G.id))})]},b))]},w))})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:c,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:m?"Update Role":"Create Role"})]})]})]})})]})}function mg(){const[o,d]=g.useState([]),[u,N]=g.useState(!0),[k,S]=g.useState(!1),[P,E]=g.useState(null),[m,D]=g.useState({name:"",category:"",default_maturity_days:"",description:""}),v=["VEGETABLE","FRUIT","GRAIN","LEGUME","ROOT","HERB","SPICE","OTHER"];g.useEffect(()=>{j()},[]);const j=async()=>{N(!0);try{const h=await F.get("/api/v1/crops?per_page=1000"),i=h.data?.data||(Array.isArray(h.data)?h.data:[]);d(Array.isArray(i)?i:[])}catch(h){console.error("Error fetching crops:",h),d([])}finally{N(!1)}},C=()=>{E(null),D({name:"",category:"",default_maturity_days:"",description:""}),S(!0)},q=h=>{E(h),D({name:h.name||"",category:h.category||"",default_maturity_days:h.default_maturity_days||"",description:h.description||""}),S(!0)},c=async h=>{h.preventDefault();try{P?await F.put(`/api/v1/crops/${P.id}`,m):await F.post("/api/v1/crops",m),S(!1),j()}catch(i){console.error("Error saving crop:",i),alert(i.response?.data?.message||"Error saving crop")}},x=async h=>{if(confirm("Are you sure you want to delete this crop? This action cannot be undone."))try{await F.delete(`/api/v1/crops/${h}`),j()}catch(i){console.error("Error deleting crop:",i),alert(i.response?.data?.message||"Error deleting crop")}};return u?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Crops"}),e.jsxs("button",{onClick:C,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Create Crop"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Default Maturity Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No crops found"})}):o.map(h=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.category||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.default_maturity_days||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:h.description||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>q(h),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>x(h.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},h.id))})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:P?"Edit Crop":"Create Crop"}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:h=>D({...m,name:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsxs("select",{required:!0,value:m.category,onChange:h=>D({...m,category:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Category"}),v.map(h=>e.jsx("option",{value:h,children:h},h))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Maturity Days"}),e.jsx("input",{type:"number",min:"1",value:m.default_maturity_days,onChange:h=>D({...m,default_maturity_days:h.target.value||null}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Days to maturity"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:h=>D({...m,description:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:P?"Update":"Create"})]})]})]})})]})}function xg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState({}),[m,D]=g.useState(!0),[v,j]=g.useState(!1),[C,q]=g.useState(null),[c,x]=g.useState(null),[h,i]=g.useState({name:"",email:"",phone:"",password:"",photo:null,farms:[],permissions:[],job_roles:[]});g.useEffect(()=>{R()},[]);const R=async()=>{try{const[Z,te,ie]=await Promise.all([F.get("/api/v1/users?per_page=1000"),F.get("/api/v1/farms?per_page=1000"),F.get("/api/v1/permissions")]);let M=[];Z.data?.data&&Array.isArray(Z.data.data)?M=Z.data.data:Array.isArray(Z.data)&&(M=Z.data),d(M);const J=te.data?.data||(Array.isArray(te.data)?te.data:[]);N(Array.isArray(J)?J:[]);const O=ie.data?.data||(Array.isArray(ie.data)?ie.data:[]);S(Array.isArray(O)?O:[])}catch(Z){console.error("Error fetching data:",Z),alert("Error loading data: "+(Z.response?.data?.message||"Unknown error"))}finally{D(!1)}},B=async()=>{try{const Z=await F.get("/api/v1/worker-job-roles?is_active=1"),te=Z.data?.data||(Array.isArray(Z.data)?Z.data:[]);return Array.isArray(te)?te:[]}catch(Z){return console.error("Error fetching job roles:",Z),[]}},w=async(Z=null)=>{if(Z){q(Z);const ie=(await F.get(`/api/v1/users/${Z.id}?include_permissions=1`)).data.data,M=[],J=await B();if(E({global:J}),ie.farms&&ie.farms.length>0)for(const y of ie.farms)try{((await F.get(`/api/v1/users/${Z.id}/farms/${y.id}/job-roles`)).data?.data||[]).forEach(Y=>{Y.ended_at||M.push({farm_id:y.id,worker_job_role_id:Y.worker_job_role_id})})}catch(f){console.error(`Error loading job roles for farm ${y.id}:`,f)}const O=(ie.farms||[]).map(y=>({farm_id:y.id,membership_status:y.membership_status||"ACTIVE",employment_category:y.employment_category||"",pay_type:y.pay_type||"",pay_rate:y.pay_rate||"",start_date:y.start_date||"",end_date:y.end_date||"",notes:y.notes||""}));i({name:ie.name||"",email:ie.email||"",phone:ie.phone||"",password:"",photo:null,farms:O,permissions:ie.permissions||[],job_roles:M}),x(ie.profile_photo_url)}else q(null),i({name:"",email:"",phone:"",password:"",photo:null,farms:[],permissions:[],job_roles:[]}),x(null);j(!0)},A=Z=>{const te=Z.target.files[0];if(te){i({...h,photo:te});const ie=new FileReader;ie.onloadend=()=>{x(ie.result)},ie.readAsDataURL(te)}},b=()=>{i({...h,farms:[...h.farms,{farm_id:"",membership_status:"ACTIVE",employment_category:"",pay_type:"",pay_rate:"",start_date:""}]})},I=Z=>{i({...h,farms:h.farms.filter((te,ie)=>ie!==Z)})},G=async(Z,te,ie)=>{const M=[...h.farms];if(M[Z][te]=ie,Object.keys(P).length===0){const J=await B();E({global:J})}i({...h,farms:M})},_=Z=>{i({...h,job_roles:[...h.job_roles,{farm_id:parseInt(Z),worker_job_role_id:""}]})},le=Z=>{i({...h,job_roles:h.job_roles.filter((te,ie)=>ie!==Z)})},z=(Z,te,ie)=>{const M=[...h.job_roles];M[Z][te]=parseInt(ie),i({...h,job_roles:M})},L=async Z=>{Z.preventDefault();try{const te=new FormData;if(te.append("name",h.name),te.append("email",h.email),h.phone&&te.append("phone",h.phone),h.password&&te.append("password",h.password),h.photo&&te.append("photo",h.photo),h.farms.length>0&&te.append("farms",JSON.stringify(h.farms)),h.permissions.length>0&&te.append("permissions",JSON.stringify(h.permissions)),h.job_roles.length>0&&te.append("job_roles",JSON.stringify(h.job_roles)),C){const ie={name:h.name,email:h.email,phone:h.phone};if(h.password&&(ie.password=h.password),h.farms.length>0&&(ie.farms=h.farms),h.permissions.length>0&&(ie.permissions=h.permissions),await F.put(`/api/v1/users/${C.id}`,ie),h.photo){const M=new FormData;M.append("photo",h.photo),await F.post(`/api/v1/users/${C.id}/photo`,M,{headers:{"Content-Type":"multipart/form-data"}})}if(h.job_roles.length>0){for(const M of h.farms)if(M.farm_id)try{const O=(await F.get(`/api/v1/users/${C.id}/farms/${M.farm_id}/job-roles`)).data?.data||[];for(const y of O)y.ended_at||await F.post(`/api/v1/users/${C.id}/farms/${M.farm_id}/job-roles/${y.id}/end`)}catch(J){console.error("Error ending existing job roles:",J)}for(const M of h.job_roles)if(M.worker_job_role_id&&M.farm_id)try{await F.post(`/api/v1/users/${C.id}/farms/${M.farm_id}/job-roles/assign`,{worker_job_role_id:M.worker_job_role_id})}catch(J){console.error("Error assigning job role:",J)}}}else await F.post("/api/v1/users",te,{headers:{"Content-Type":"multipart/form-data"}});j(!1),R()}catch(te){console.error("Error saving user:",te),alert("Error saving user: "+(te.response?.data?.message||"Unknown error"))}},re=async(Z,te)=>{if(confirm(`Are you sure you want to delete the user "${te}"?`))try{await F.delete(`/api/v1/users/${Z}`),R()}catch(ie){alert("Error deleting user: "+(ie.response?.data?.message||"Unknown error"))}},xe=Z=>{i(te=>({...te,permissions:te.permissions.includes(Z)?te.permissions.filter(ie=>ie!==Z):[...te.permissions,Z]}))};return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),e.jsxs("button",{onClick:()=>w(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Create User"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Photo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Farms"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):o.map(Z=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:Z.profile_photo_url?e.jsx("img",{src:Z.profile_photo_url,alt:Z.name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(au,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:Z.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Z.email}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Z.phone||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Z.farms?.length>0?e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:[Z.farms.length," farm(s)"]}):"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>w(Z),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16,className:"inline"})}),e.jsx("button",{onClick:()=>re(Z.id,Z.name),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16,className:"inline"})})]})]},Z.id))})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:C?"Edit User":"Create New User"}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[c&&e.jsx("img",{src:c,alt:"Preview",className:"w-20 h-20 rounded-full object-cover"}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx(bp,{size:20}),c?"Change Photo":"Upload Photo",e.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"hidden"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:h.name,onChange:Z=>i({...h,name:Z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:h.email,onChange:Z=>i({...h,email:Z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:h.phone,onChange:Z=>i({...h,phone:Z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",C?"(leave blank to keep current)":"*"]}),e.jsx("input",{type:"password",required:!C,value:h.password,onChange:Z=>i({...h,password:Z.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Farm Memberships"}),e.jsx("button",{type:"button",onClick:b,className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Add Farm"})]}),h.farms.map((Z,te)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Farm ",te+1]}),e.jsx("button",{type:"button",onClick:()=>I(te),className:"text-red-600 hover:text-red-800",children:e.jsx(Ze,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("select",{required:!0,value:Z.farm_id,onChange:ie=>G(te,"farm_id",ie.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(ie=>e.jsx("option",{value:ie.id,children:ie.name},ie.id))]}),e.jsxs("select",{required:!0,value:Z.membership_status,onChange:ie=>G(te,"membership_status",ie.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]}),e.jsxs("select",{value:Z.employment_category,onChange:ie=>G(te,"employment_category",ie.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Employment Category"}),e.jsx("option",{value:"PERMANENT",children:"Permanent"}),e.jsx("option",{value:"CASUAL",children:"Casual"}),e.jsx("option",{value:"CONTRACTOR",children:"Contractor"}),e.jsx("option",{value:"SEASONAL",children:"Seasonal"})]}),e.jsxs("select",{value:Z.pay_type,onChange:ie=>G(te,"pay_type",ie.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Pay Type"}),e.jsx("option",{value:"MONTHLY",children:"Monthly"}),e.jsx("option",{value:"DAILY",children:"Daily"}),e.jsx("option",{value:"HOURLY",children:"Hourly"}),e.jsx("option",{value:"TASK",children:"Task"})]}),e.jsx("input",{type:"number",step:"0.01",placeholder:"Pay Rate",value:Z.pay_rate,onChange:ie=>G(te,"pay_rate",ie.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"date",placeholder:"Start Date",value:Z.start_date,onChange:ie=>G(te,"start_date",ie.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"})]})]},te))]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Job Roles (per Farm)"})}),h.farms.map(Z=>{const te=Z.farm_id;if(!te)return null;const ie=P.global||[],M=h.job_roles.filter(J=>J.farm_id===parseInt(te));return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:u.find(J=>J.id===parseInt(te))?.name||`Farm ${te}`}),e.jsx("button",{type:"button",onClick:()=>_(te),className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Add Job Role"})]}),M.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No job roles assigned"}):M.map((J,O)=>{const y=h.job_roles.findIndex(f=>f.farm_id===parseInt(te)&&f.worker_job_role_id===J.worker_job_role_id);return e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("select",{value:J.worker_job_role_id,onChange:f=>z(y,"worker_job_role_id",f.target.value),className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Select Job Role"}),ie.map(f=>e.jsxs("option",{value:f.id,children:[f.name," (",f.code,")"]},f.id))]}),e.jsx("button",{type:"button",onClick:()=>le(y),className:"text-red-600 hover:text-red-800",children:e.jsx(Ze,{size:16})})]},O)})]},te)})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-2",children:k.map(Z=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.permissions.includes(Z.name),onChange:()=>xe(Z.name),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:Z.name})]},Z.id))})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[C?"Update":"Create"," User"]})]})]})]})})]})}function pg(){const o=Zr(),[d,u]=g.useState([]),[N,k]=g.useState([]),[S,P]=g.useState([]),[E,m]=g.useState(!0),[D,v]=g.useState(!1),[j,C]=g.useState(null),[q,c]=g.useState({farm_id:"",asset_category_id:"",asset_code:"",name:"",description:"",status:"ACTIVE",acquisition_type:"PURCHASED",purchase_date:"",purchase_cost:"",currency:"NGN",serial_number:"",is_trackable:!0});g.useEffect(()=>{x(),h(),i()},[]);const x=async()=>{m(!0);try{const b=await F.get("/api/v1/assets?per_page=1000"),I=b.data?.data||(Array.isArray(b.data)?b.data:[]);u(Array.isArray(I)?I:[])}catch(b){console.error("Error fetching assets:",b),u([])}finally{m(!1)}},h=async()=>{try{const b=await F.get("/api/v1/asset-categories?per_page=1000");let I=[];b.data&&(b.data.data&&Array.isArray(b.data.data)?I=b.data.data:Array.isArray(b.data)&&(I=b.data)),k(I)}catch(b){console.error("Error fetching categories:",b),k([])}},i=async()=>{try{const b=await F.get("/api/v1/farms?per_page=1000"),I=b.data?.data||(Array.isArray(b.data)?b.data:[]);P(Array.isArray(I)?I:[])}catch(b){console.error("Error fetching farms:",b),P([])}},R=(b=null)=>{C(b),c({farm_id:b?.farm_id||"",asset_category_id:b?.asset_category_id||"",asset_code:b?.asset_code||"",name:b?.name||"",description:b?.description||"",status:b?.status||"ACTIVE",acquisition_type:b?.acquisition_type||"PURCHASED",purchase_date:b?.purchase_date||"",purchase_cost:b?.purchase_cost||"",currency:b?.currency||"NGN",serial_number:b?.serial_number||"",is_trackable:b?.is_trackable!==void 0?b?.is_trackable:!0}),v(!0)},B=async b=>{b.preventDefault();try{j?await F.put(`/api/v1/assets/${j.id}`,q):await F.post("/api/v1/assets",q),v(!1),x()}catch(I){console.error("Error saving asset:",I),alert(I.response?.data?.message||"Error saving asset")}},w=async b=>{if(confirm("Are you sure you want to delete this asset?"))try{await F.delete(`/api/v1/assets/${b}`),x()}catch(I){console.error("Error deleting asset:",I),alert(I.response?.data?.message||"Error deleting asset")}},A=b=>({ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",UNDER_REPAIR:"bg-yellow-100 text-yellow-800",DISPOSED:"bg-red-100 text-red-800",SOLD:"bg-blue-100 text-blue-800",LOST:"bg-red-100 text-red-800"})[b]||"bg-gray-100 text-gray-800";return E?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Assets"}),e.jsxs("button",{onClick:()=>R(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Add Asset"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No assets found"})}):d.map(b=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:b.asset_code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:b.category?.name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${A(b.status)}`,children:b.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:b.farm?.name||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>o(`/admin/assets/${b.id}`),className:"text-green-600 hover:text-green-900 mr-4",title:"View Details",children:e.jsx(Sp,{size:16})}),e.jsx("button",{onClick:()=>R(b),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>w(b.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},b.id))})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:j?"Edit Asset":"Add Asset"}),e.jsxs("form",{onSubmit:B,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:q.farm_id,onChange:b=>c({...q,farm_id:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",disabled:!!j,children:[e.jsx("option",{value:"",children:"Select Farm"}),S.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:q.asset_category_id?String(q.asset_category_id):"",onChange:b=>c({...q,asset_category_id:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Category"}),N.length===0?e.jsx("option",{value:"",disabled:!0,children:"No categories available"}):N.map(b=>e.jsx("option",{value:String(b.id),children:b.name},b.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Code"}),e.jsx("input",{type:"text",value:q.asset_code,onChange:b=>c({...q,asset_code:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Auto-generated if empty"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:q.status,onChange:b=>c({...q,status:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"UNDER_REPAIR",children:"Under Repair"}),e.jsx("option",{value:"DISPOSED",children:"Disposed"}),e.jsx("option",{value:"SOLD",children:"Sold"}),e.jsx("option",{value:"LOST",children:"Lost"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:q.name,onChange:b=>c({...q,name:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:q.description,onChange:b=>c({...q,description:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:q.acquisition_type,onChange:b=>c({...q,acquisition_type:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:q.purchase_date,onChange:b=>c({...q,purchase_date:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:q.purchase_cost,onChange:b=>c({...q,purchase_cost:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",value:q.currency,onChange:b=>c({...q,currency:b.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",maxLength:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:q.serial_number,onChange:b=>c({...q,serial_number:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 mt-6",children:[e.jsx("input",{type:"checkbox",checked:q.is_trackable,onChange:b=>c({...q,is_trackable:b.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Trackable"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:j?"Update":"Create"})]})]})]})})]})}function gg(){const[o,d]=g.useState([]),[u,N]=g.useState(!0),[k,S]=g.useState(!1),[P,E]=g.useState(null),[m,D]=g.useState({code:"",name:"",parent_id:"",is_active:!0});g.useEffect(()=>{v()},[]);const v=async()=>{N(!0);try{const x=await F.get("/api/v1/asset-categories?per_page=1000"),h=x.data?.data||(Array.isArray(x.data)?x.data:[]);d(Array.isArray(h)?h:[])}catch(x){console.error("Error fetching categories:",x),d([])}finally{N(!1)}},j=(x=null)=>{E(x),D({code:x?.code||"",name:x?.name||"",parent_id:x?.parent_id||"",is_active:x?.is_active!==void 0?x?.is_active:!0}),S(!0)},C=async x=>{x.preventDefault();try{P?await F.put(`/api/v1/asset-categories/${P.id}`,m):await F.post("/api/v1/asset-categories",m),S(!1),v()}catch(h){console.error("Error saving category:",h),alert(h.response?.data?.message||"Error saving category")}},q=async x=>{if(confirm("Are you sure you want to delete this category?"))try{await F.delete(`/api/v1/asset-categories/${x}`),v()}catch(h){console.error("Error deleting category:",h),alert(h.response?.data?.message||"Error deleting category")}},c=x=>{if(!x)return"-";const h=o.find(i=>i.id===x);return h?h.name:"-"};return u?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Asset Categories"}),e.jsxs("button",{onClick:()=>j(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Add Category"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No categories found"})}):o.map(x=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:c(x.parent_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${x.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>j(x),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>q(x.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},x.id))})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:P?"Edit Category":"Add Category"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:m.code,onChange:x=>D({...m,code:x.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:x=>D({...m,name:x.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Category"}),e.jsxs("select",{value:m.parent_id,onChange:x=>D({...m,parent_id:x.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"None"}),o.filter(x=>x.id!==P?.id).map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 mt-6",children:[e.jsx("input",{type:"checkbox",checked:m.is_active,onChange:x=>D({...m,is_active:x.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:P?"Update":"Create"})]})]})]})})]})}function hg(){const[o,d]=g.useState([]),[u,N]=g.useState(!0),[k,S]=g.useState(!1),[P,E]=g.useState(null),[m,D]=g.useState({code:"",name:"",description:"",is_active:!0});g.useEffect(()=>{v()},[]);const v=async()=>{N(!0);try{const c=await F.get("/api/v1/worker-job-roles?per_page=1000"),x=c.data?.data||(Array.isArray(c.data)?c.data:[]);d(Array.isArray(x)?x:[])}catch(c){console.error("Error fetching job roles:",c),d([])}finally{N(!1)}},j=(c=null)=>{E(c),D(c?{code:c.code||"",name:c.name||"",description:c.description||"",is_active:c.is_active!==void 0?c.is_active:!0}:{code:"",name:"",description:"",is_active:!0}),S(!0)},C=async c=>{c.preventDefault();try{P?await F.put(`/api/v1/worker-job-roles/${P.id}`,m):await F.post("/api/v1/worker-job-roles",m),S(!1),v()}catch(x){console.error("Error saving job role:",x),alert(x.response?.data?.message||"Error saving job role")}},q=async c=>{if(confirm("Are you sure you want to delete this job role?"))try{await F.delete(`/api/v1/worker-job-roles/${c}`),v()}catch(x){console.error("Error deleting job role:",x),alert(x.response?.data?.message||"Error deleting job role")}};return u?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Worker Job Roles"}),e.jsxs("button",{onClick:()=>j(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Add Job Role"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No job roles found"})}):o.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:c.description||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>j(c),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>q(c.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},c.id))})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:P?"Edit Job Role":"Add Job Role"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm *"}),e.jsxs("select",{required:!0,value:m.farm_id,onChange:c=>D({...m,farm_id:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",disabled:!!P,children:[e.jsx("option",{value:"",children:"Select Farm"}),farms.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:m.code,onChange:c=>D({...m,code:c.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., FLD_SUP"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:c=>D({...m,name:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., Field Supervisor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:c=>D({...m,description:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:m.is_active,onChange:c=>D({...m,is_active:c.target.checked})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:P?"Update":"Create"})]})]})]})})]})}function fg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState(!0),[m,D]=g.useState(!1),[v,j]=g.useState(null),[C,q]=g.useState(!1),[c,x]=g.useState({site_id:"",name:"",status:"ACTIVE",notes:"",track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1});g.useEffect(()=>{h()},[]),g.useEffect(()=>{k.length>0&&(document.title=`Boreholes (${k.length} categories loaded)`)},[k]);const h=async()=>{try{const[b,I,G]=await Promise.all([F.get("/api/v1/boreholes"),F.get("/api/v1/sites?per_page=1000"),F.get("/api/v1/asset-categories?per_page=1000")]);console.log("Boreholes API response:",b.data);const _=b.data?.data||(Array.isArray(b.data)?b.data:[]);console.log("Parsed boreholes data:",_),_.length>0&&console.log("First borehole sample:",JSON.stringify(_[0],null,2)),d(Array.isArray(_)?_:[]);let le=[];I.data&&(Array.isArray(I.data)?le=I.data:I.data.data&&Array.isArray(I.data.data)?le=I.data.data:Array.isArray(I.data)&&(le=I.data)),N(le);let z=[];G.data&&(G.data.data&&Array.isArray(G.data.data)?z=G.data.data:Array.isArray(G.data)&&(z=G.data)),S(z)}catch(b){console.error("Error fetching data:",b),console.error("Error response:",b.response?.data),alert("Error loading data: "+(b.response?.data?.message||b.message)),N([]),d([]),S([])}finally{E(!1)}},i=async()=>{try{const b=await F.get("/api/v1/asset-categories?per_page=1000");let I=[];return b.data&&(b.data.data&&Array.isArray(b.data.data)?I=b.data.data:Array.isArray(b.data)&&(I=b.data)),S(I),I}catch(b){const I=b.response?.data?.message||b.message||"Unknown error";return alert("Failed to load asset categories: "+I+`

Check if the API endpoint /api/v1/asset-categories is accessible.`),S([]),[]}},R=()=>{j(null),q(!1),x({site_id:"",name:"",status:"ACTIVE",notes:"",track_as_asset:!1,asset_category_id:"",asset_description:"",asset_acquisition_type:"",asset_purchase_date:"",asset_purchase_cost:"",asset_currency:"NGN",asset_supplier_name:"",asset_serial_number:"",asset_model:"",asset_manufacturer:"",asset_year_of_make:"",asset_warranty_expiry:"",asset_is_trackable:!1}),D(!0)},B=async b=>{j(b);const I=!!b.asset_id;q(I),k.length===0&&await i();const G=b.asset?.asset_category_id||"";x({site_id:b.site?.id||"",name:b.name||"",status:b.status||"ACTIVE",notes:b.notes||"",track_as_asset:I,asset_category_id:G,asset_description:b.asset?.description||"",asset_acquisition_type:b.asset?.acquisition_type||"",asset_purchase_date:b.asset?.purchase_date?new Date(b.asset.purchase_date).toISOString().slice(0,10):"",asset_purchase_cost:b.asset?.purchase_cost||"",asset_currency:b.asset?.currency||"NGN",asset_supplier_name:b.asset?.supplier_name||"",asset_serial_number:b.asset?.serial_number||"",asset_model:b.asset?.model||"",asset_manufacturer:b.asset?.manufacturer||"",asset_year_of_make:b.asset?.year_of_make||"",asset_warranty_expiry:b.asset?.warranty_expiry?new Date(b.asset.warranty_expiry).toISOString().slice(0,10):"",asset_is_trackable:b.asset?.is_trackable||!1}),D(!0)},w=async b=>{b.preventDefault();try{const I={...c};I.track_as_asset=C,C||Object.keys(I).forEach(G=>{G.startsWith("asset_")&&delete I[G]}),v?await F.patch(`/api/v1/boreholes/${v.id}`,I):await F.post("/api/v1/boreholes",I),D(!1),h()}catch(I){alert("Error saving borehole: "+(I.response?.data?.message||"Unknown error"))}},A=async b=>{if(confirm("Are you sure you want to delete this borehole?"))try{await F.delete(`/api/v1/boreholes/${b}`),h()}catch(I){alert("Error deleting borehole: "+(I.response?.data?.message||"Unknown error"))}};return P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Borehole Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage boreholes per Site; Farm is derived from Site"})]}),e.jsxs("button",{onClick:R,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Borehole"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(kp,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No boreholes yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first borehole to get started"}),e.jsx("button",{onClick:R,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Borehole"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Site"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:b.borehole_code||b.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b.site?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-gray-100 text-gray-800",children:b.status||"ACTIVE"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B(b),className:"text-green-600 hover:text-green-700",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>A(b.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},b.id))})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:v?"Edit Borehole":"Create New Borehole"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site *"}),e.jsxs("select",{required:!0,value:c.site_id,onChange:b=>x({...c,site_id:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select site"}),u.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Code will be auto-generated as BH-[Site]-XXX (e.g., BH-EMU-001 for Emure site)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:c.name,onChange:b=>x({...c,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:c.status,onChange:b=>x({...c,status:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"ACTIVE",children:"ACTIVE"}),e.jsx("option",{value:"INACTIVE",children:"INACTIVE"}),e.jsx("option",{value:"UNDER_REPAIR",children:"UNDER_REPAIR"}),e.jsx("option",{value:"DECOMMISSIONED",children:"DECOMMISSIONED"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:b=>{q(b.target.checked),x({...c,track_as_asset:b.target.checked})},className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Track as Asset"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check this box to create an asset record for this borehole. You can enter asset details below."})]}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:col-span-2 border-t pt-4 mt-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asset Information"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Category"}),e.jsxs("select",{value:c.asset_category_id?String(c.asset_category_id):"",onChange:b=>x({...c,asset_category_id:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:k.length===0?" No categories loaded (0)":`Select category (${k.length} available)`}),k.length===0?e.jsx("option",{value:"",disabled:!0,children:'Click "Retry" button below to load categories'}):k.map(b=>e.jsx("option",{value:String(b.id),children:b.name},b.id))]}),k.length===0&&e.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("p",{className:"text-xs text-yellow-800 mb-2",children:" Asset categories not loaded."}),e.jsx("button",{type:"button",onClick:async()=>{(await i()).length===0&&alert("Still no categories. Check if API endpoint /api/v1/asset-categories is working.")},className:"text-xs bg-yellow-600 text-white px-3 py-1 rounded hover:bg-yellow-700",children:"Retry Loading Categories"})]}),k.length>0&&c.asset_category_id&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" Selected category ID: ",c.asset_category_id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acquisition Type"}),e.jsxs("select",{value:c.asset_acquisition_type,onChange:b=>x({...c,asset_acquisition_type:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"PURCHASED",children:"Purchased"}),e.jsx("option",{value:"LEASED",children:"Leased"}),e.jsx("option",{value:"RENTED",children:"Rented"}),e.jsx("option",{value:"DONATED",children:"Donated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:c.asset_purchase_date,onChange:b=>x({...c,asset_purchase_date:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Cost"}),e.jsx("input",{type:"number",step:"0.01",value:c.asset_purchase_cost,onChange:b=>x({...c,asset_purchase_cost:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",maxLength:3,value:c.asset_currency,onChange:b=>x({...c,asset_currency:b.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"NGN"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:c.asset_supplier_name,onChange:b=>x({...c,asset_supplier_name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:c.asset_serial_number,onChange:b=>x({...c,asset_serial_number:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",value:c.asset_model,onChange:b=>x({...c,asset_model:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:c.asset_manufacturer,onChange:b=>x({...c,asset_manufacturer:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year of Make"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+1,value:c.asset_year_of_make,onChange:b=>x({...c,asset_year_of_make:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty Expiry"}),e.jsx("input",{type:"date",value:c.asset_warranty_expiry,onChange:b=>x({...c,asset_warranty_expiry:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset Description"}),e.jsx("textarea",{value:c.asset_description,onChange:b=>x({...c,asset_description:b.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[e.jsx("input",{type:"checkbox",checked:c.asset_is_trackable,onChange:b=>x({...c,asset_is_trackable:b.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{children:"Is Trackable"})]})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:c.notes,onChange:b=>x({...c,notes:b.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[v?"Update":"Create"," Borehole"]})]})]})]})})]})}function yg(){const[o,d]=g.useState([]),[u,N]=g.useState(!0),[k,S]=g.useState(!1),[P,E]=g.useState(null),[m,D]=g.useState({code:"",name:"",code_prefix:"",description:"",is_active:!0});g.useEffect(()=>{v()},[]);const v=async()=>{N(!0);try{const c=await F.get("/api/v1/site-types?per_page=1000"),x=c.data?.data||(Array.isArray(c.data)?c.data:[]);d(Array.isArray(x)?x:[])}catch(c){console.error("Error fetching site types:",c),d([])}finally{N(!1)}},j=(c=null)=>{E(c),D({code:c?.code||"",name:c?.name||"",code_prefix:c?.code_prefix||"",description:c?.description||"",is_active:c?.is_active!==void 0?c?.is_active:!0}),S(!0)},C=async c=>{c.preventDefault();try{P?await F.put(`/api/v1/site-types/${P.id}`,m):await F.post("/api/v1/site-types",m),S(!1),v()}catch(x){console.error("Error saving site type:",x);const h=x.response?.data?.message||(x.response?.data?.errors?JSON.stringify(x.response.data.errors):"")||x.message;alert("Error saving site type: "+h)}},q=async c=>{if(confirm("Are you sure you want to delete this site type? Sites using this type will not be affected, but you won't be able to create new sites with this type."))try{await F.delete(`/api/v1/site-types/${c}`),v()}catch(x){console.error("Error deleting site type:",x);const h=x.response?.data?.message||x.message;alert("Error deleting site type: "+h)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Site Types"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage site types for organizing locations"})]}),e.jsxs("button",{onClick:()=>j(),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(_e,{size:20}),"Add Site Type"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code Prefix"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sites Count"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No site types found"})}):o.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.code_prefix||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:c.description||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.sites?.length||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>j(c),className:"text-green-600 hover:text-green-900 mr-4",children:e.jsx(Ae,{size:16})}),e.jsx("button",{onClick:()=>q(c.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{size:16})})]})]},c.id))})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:P?"Edit Site Type":"Add Site Type"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),e.jsx("input",{type:"text",required:!0,value:m.code,onChange:c=>D({...m,code:c.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., farmland, warehouse",disabled:!!P}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique identifier (lowercase, no spaces)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:c=>D({...m,name:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., Farmland"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code Prefix"}),e.jsx("input",{type:"text",value:m.code_prefix,onChange:c=>D({...m,code_prefix:c.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., FL (for Farmland)",maxLength:10}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used when auto-generating site codes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:c=>D({...m,description:c.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3",placeholder:"Brief description of this site type"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:m.is_active,onChange:c=>D({...m,is_active:c.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:P?"Update":"Create"})]})]})]})})]})}function vg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState([]),[m,D]=g.useState(!0),[v,j]=g.useState(!1),[C,q]=g.useState(null),[c,x]=g.useState({greenhouse_id:"",season_id:"",crop:"BELL_PEPPER",variety:"",responsible_supervisor_user_id:"",planting_date:"",establishment_method:"TRANSPLANT",seed_supplier_name:"",seed_batch_number:"",nursery_start_date:"",transplant_date:"",plant_spacing_cm:"",row_spacing_cm:"",plant_density_per_sqm:"",initial_plant_count:"",cropping_system:"COCOPEAT",medium_type:"",bed_count:"",bench_count:"",mulching_used:!1,support_system:"TRELLIS",target_day_temperature_c:"",target_night_temperature_c:"",target_humidity_percent:"",target_light_hours:"",ventilation_strategy:"NATURAL",shade_net_percentage:"",notes:""});g.useEffect(()=>{h()},[]);const h=async()=>{try{const[_,le,z,L]=await Promise.all([F.get("/api/v1/production-cycles"),F.get("/api/v1/greenhouses?per_page=1000"),F.get("/api/v1/users?per_page=1000"),F.get("/api/v1/seasons?per_page=1000")]),re=_.data?.data||_.data||[],xe=le.data?.data||le.data||[],Z=z.data?.data||z.data||[],te=L.data?.data||L.data||[];d(Array.isArray(re)?re:[]),N(Array.isArray(xe)?xe:[]),S(Array.isArray(Z)?Z:[]),E(Array.isArray(te)?te:[])}catch(_){console.error("Error fetching data:",_),alert("Error loading data: "+(_.response?.data?.message||_.message))}finally{D(!1)}},i=()=>{q(null),x({greenhouse_id:"",season_id:"",crop:"BELL_PEPPER",variety:"",responsible_supervisor_user_id:"",planting_date:"",establishment_method:"TRANSPLANT",seed_supplier_name:"",seed_batch_number:"",nursery_start_date:"",transplant_date:"",plant_spacing_cm:"",row_spacing_cm:"",plant_density_per_sqm:"",initial_plant_count:"",cropping_system:"COCOPEAT",medium_type:"",bed_count:"",bench_count:"",mulching_used:!1,support_system:"TRELLIS",target_day_temperature_c:"",target_night_temperature_c:"",target_humidity_percent:"",target_light_hours:"",ventilation_strategy:"NATURAL",shade_net_percentage:"",notes:""}),j(!0)},R=_=>{q(_),x({greenhouse_id:_.greenhouse?.id||"",season_id:_.season?.id||"",crop:_.crop||"BELL_PEPPER",variety:_.variety||"",responsible_supervisor_user_id:_.responsible_supervisor?.id||"",planting_date:_.planting_date||"",establishment_method:_.establishment_method||"TRANSPLANT",seed_supplier_name:_.seed_supplier_name||"",seed_batch_number:_.seed_batch_number||"",nursery_start_date:_.nursery_start_date||"",transplant_date:_.transplant_date||"",plant_spacing_cm:_.plant_spacing_cm||"",row_spacing_cm:_.row_spacing_cm||"",plant_density_per_sqm:_.plant_density_per_sqm||"",initial_plant_count:_.initial_plant_count||"",cropping_system:_.cropping_system||"COCOPEAT",medium_type:_.medium_type||"",bed_count:_.bed_count||"",bench_count:_.bench_count||"",mulching_used:_.mulching_used||!1,support_system:_.support_system||"TRELLIS",target_day_temperature_c:_.target_day_temperature_c||"",target_night_temperature_c:_.target_night_temperature_c||"",target_humidity_percent:_.target_humidity_percent||"",target_light_hours:_.target_light_hours||"",ventilation_strategy:_.ventilation_strategy||"NATURAL",shade_net_percentage:_.shade_net_percentage||"",notes:_.notes||""}),j(!0)},B=async _=>{_.preventDefault();try{C?await F.patch(`/api/v1/production-cycles/${C.id}`,c):await F.post("/api/v1/production-cycles",c),j(!1),h()}catch(le){const z=le.response?.data?.message||le.response?.data?.errors||"Unknown error";alert("Error saving cycle: "+(typeof z=="string"?z:JSON.stringify(z)))}},w=async _=>{if(confirm("Start this production cycle?"))try{await F.post(`/api/v1/production-cycles/${_}/start`),h()}catch(le){alert("Error starting cycle: "+(le.response?.data?.message||le.message))}},A=async _=>{if(confirm("Mark this production cycle as completed?"))try{await F.post(`/api/v1/production-cycles/${_}/complete`),h()}catch(le){alert("Error completing cycle: "+(le.response?.data?.message||le.message))}},b=async _=>{if(confirm("Delete this production cycle?"))try{await F.delete(`/api/v1/production-cycles/${_}`),h()}catch(le){alert("Error deleting cycle: "+(le.response?.data?.message||le.message))}},I=_=>({PLANNED:"bg-gray-100 text-gray-800",ACTIVE:"bg-green-100 text-green-800",HARVESTING:"bg-blue-100 text-blue-800",COMPLETED:"bg-purple-100 text-purple-800",ABANDONED:"bg-red-100 text-red-800"})[_]||"bg-gray-100 text-gray-800",G=P.find(_=>_.id===parseInt(c.season_id));return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Production Cycles"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage greenhouse production cycles"})]}),e.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Cycle"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Greenhouse"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crop"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Planting Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supervisor"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No production cycles found"})}):o.map(_=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:_.production_cycle_code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.greenhouse?.name||"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[_.crop," ",_.variety?`- ${_.variety}`:""]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.planting_date||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${I(_.cycle_status)}`,children:_.cycle_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.responsible_supervisor?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[_.cycle_status==="PLANNED"&&e.jsx("button",{onClick:()=>w(_.id),className:"text-green-600 hover:text-green-900",title:"Start Cycle",children:e.jsx(Tp,{className:"h-4 w-4"})}),["ACTIVE","HARVESTING"].includes(_.cycle_status)&&e.jsx("button",{onClick:()=>A(_.id),className:"text-purple-600 hover:text-purple-900",title:"Complete Cycle",children:e.jsx(Xr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(_),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(_.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},_.id))})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:C?"Edit Production Cycle":"New Production Cycle"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:B,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Greenhouse ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.greenhouse_id,onChange:_=>x({...c,greenhouse_id:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Greenhouse"}),u.map(_=>e.jsxs("option",{value:_.id,children:[_.name," (",_.greenhouse_code||_.code,")"]},_.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Season"}),e.jsxs("select",{value:c.season_id,onChange:_=>x({...c,season_id:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Season"}),P.filter(_=>["PLANNED","ACTIVE"].includes(_.status)).map(_=>e.jsxs("option",{value:_.id,children:[_.name," (",_.status,")"]},_.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Crop ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{required:!0,value:c.crop,onChange:_=>x({...c,crop:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:e.jsx("option",{value:"BELL_PEPPER",children:"Bell Pepper"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Variety"}),e.jsx("input",{type:"text",value:c.variety,onChange:_=>x({...c,variety:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Responsible Supervisor ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.responsible_supervisor_user_id,onChange:_=>x({...c,responsible_supervisor_user_id:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Supervisor"}),k.map(_=>e.jsxs("option",{value:_.id,children:[_.name," (",_.email,")"]},_.id))]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Section 1: Planting & Establishment"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Planting Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:c.planting_date,min:G?.start_date?G.start_date.split("T")[0]:void 0,onChange:_=>x({...c,planting_date:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),G&&c.planting_date&&new Date(c.planting_date)<new Date(G.start_date)&&e.jsxs("p",{className:"mt-1 text-xs text-red-600",children:["Planting date cannot be earlier than season start date (",G.start_date.split("T")[0],")"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Establishment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.establishment_method,onChange:_=>x({...c,establishment_method:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"DIRECT_SEED",children:"Direct Seed"}),e.jsx("option",{value:"TRANSPLANT",children:"Transplant"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Seed Supplier Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:c.seed_supplier_name,onChange:_=>x({...c,seed_supplier_name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Seed Batch Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:c.seed_batch_number,onChange:_=>x({...c,seed_batch_number:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nursery Start Date"}),e.jsx("input",{type:"date",value:c.nursery_start_date,onChange:_=>x({...c,nursery_start_date:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transplant Date"}),e.jsx("input",{type:"date",value:c.transplant_date,onChange:_=>x({...c,transplant_date:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Plant Spacing (cm) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.plant_spacing_cm,onChange:_=>x({...c,plant_spacing_cm:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Row Spacing (cm) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.row_spacing_cm,onChange:_=>x({...c,row_spacing_cm:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plant Density (per sqm)"}),e.jsx("input",{type:"number",step:"0.01",value:c.plant_density_per_sqm,onChange:_=>x({...c,plant_density_per_sqm:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Initial Plant Count ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",required:!0,value:c.initial_plant_count,onChange:_=>x({...c,initial_plant_count:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Section 2: Growing Medium & Setup"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Cropping System ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.cropping_system,onChange:_=>x({...c,cropping_system:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"SOIL",children:"Soil"}),e.jsx("option",{value:"COCOPEAT",children:"Cocopeat"}),e.jsx("option",{value:"HYDROPONIC",children:"Hydroponic"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Medium Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:c.medium_type,onChange:_=>x({...c,medium_type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Bed Count ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",required:!0,value:c.bed_count,onChange:_=>x({...c,bed_count:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bench Count"}),e.jsx("input",{type:"number",value:c.bench_count,onChange:_=>x({...c,bench_count:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mulching Used ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.mulching_used,onChange:_=>x({...c,mulching_used:_.target.value==="true"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"false",children:"No"}),e.jsx("option",{value:"true",children:"Yes"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Support System ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.support_system,onChange:_=>x({...c,support_system:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"STAKES",children:"Stakes"}),e.jsx("option",{value:"TRELLIS",children:"Trellis"}),e.jsx("option",{value:"STRING",children:"String"}),e.jsx("option",{value:"NONE",children:"None"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Section 3: Environmental Targets"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Target Day Temperature (C) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.target_day_temperature_c,onChange:_=>x({...c,target_day_temperature_c:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Target Night Temperature (C) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.target_night_temperature_c,onChange:_=>x({...c,target_night_temperature_c:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Target Humidity (%) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.target_humidity_percent,onChange:_=>x({...c,target_humidity_percent:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Target Light Hours ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:c.target_light_hours,onChange:_=>x({...c,target_light_hours:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ventilation Strategy ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:c.ventilation_strategy,onChange:_=>x({...c,ventilation_strategy:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"NATURAL",children:"Natural"}),e.jsx("option",{value:"FORCED",children:"Forced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shade Net Percentage (%)"}),e.jsx("input",{type:"number",step:"0.01",value:c.shade_net_percentage,onChange:_=>x({...c,shade_net_percentage:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:c.notes,onChange:_=>x({...c,notes:_.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[C?"Update":"Create"," Cycle"]})]})]})]})})]})}function bg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState([]),[m,D]=g.useState([]),[v,j]=g.useState([]),[C,q]=g.useState(!0),[c,x]=g.useState(""),[h,i]=g.useState(!1),[R,B]=g.useState(null),[w,A]=g.useState({production_cycle_id:"",log_date:new Date().toISOString().slice(0,10),issues_notes:"",items:[]});g.useEffect(()=>{b()},[]),g.useEffect(()=>{c?(G(c),I(c)):(d([]),S([]))},[c]);const b=async()=>{try{const[y,f,W]=await Promise.all([F.get("/api/v1/greenhouses?per_page=1000"),F.get("/api/v1/activity-types?per_page=1000"),F.get("/api/v1/users?per_page=1000")]),Y=y.data?.data||y.data||[],ce=f.data?.data||f.data||[],H=W.data?.data||W.data||[];N(Array.isArray(Y)?Y:[]),E(Array.isArray(ce)?ce:[]),D(Array.isArray(H)?H:[]);try{const ne=await F.get("/api/v1/input-items?per_page=1000"),X=ne.data?.data||ne.data||[];j(Array.isArray(X)?X:[])}catch{console.warn("Input items endpoint not available, using input_name field only"),j([])}}catch(y){console.error("Error fetching data:",y),alert("Error loading data: "+(y.response?.data?.message||y.message))}finally{q(!1)}},I=async y=>{try{const f=await F.get(`/api/v1/production-cycles?greenhouse_id=${y}`),W=f.data?.data||f.data||[],Y=Array.isArray(W)?W.filter(ce=>["PLANNED","ACTIVE","HARVESTING"].includes(ce.cycle_status)):[];S(Y)}catch(f){console.error("Error fetching cycles:",f),S([])}},G=async y=>{try{const f=await F.get(`/api/v1/greenhouses/${y}/daily-logs`),W=f.data?.data||f.data||[];d(Array.isArray(W)?W:[])}catch(f){console.error("Error fetching logs:",f),d([])}},_=async()=>{if(!c){alert("Please select a greenhouse first");return}if(k.length===0){alert("No production cycles found for this greenhouse. Please create a production cycle first.");return}const y=k.filter(W=>W.cycle_status==="PLANNED"),f=k.filter(W=>["ACTIVE","HARVESTING"].includes(W.cycle_status));if(f.length===0&&y.length>0){const W=y[0];if(confirm(`No active production cycles found. Would you like to start the cycle "${W.production_cycle_code||W.id}" first?`))try{await F.post(`/api/v1/production-cycles/${W.id}/start`),await I(c),setTimeout(()=>{B(null),A({production_cycle_id:W.id,log_date:new Date().toISOString().slice(0,10),issues_notes:"",items:[]}),i(!0)},500);return}catch(Y){alert("Error starting cycle: "+(Y.response?.data?.message||Y.message));return}else return}B(null),A({production_cycle_id:f.length>0?f.length===1?f[0].id:"":k.length===1?k[0].id:"",log_date:new Date().toISOString().slice(0,10),issues_notes:"",items:[]}),i(!0)},le=y=>{if(y.status!=="DRAFT"){alert("Only DRAFT logs can be edited");return}B(y),A({production_cycle_id:y.production_cycle_id||(k.length===1?k[0].id:""),log_date:y.log_date||new Date().toISOString().slice(0,10),issues_notes:y.issues_notes||"",items:y.items?.map(f=>({id:f.id,activity_type_id:f.activity_type?.id||"",performed_by_user_id:f.performed_by?.id||"",started_at:f.started_at?new Date(f.started_at).toISOString().slice(0,16):"",ended_at:f.ended_at?new Date(f.ended_at).toISOString().slice(0,16):"",quantity:f.quantity||"",unit:f.unit||"",notes:f.notes||"",meta:f.meta||{},inputs:f.inputs?.map(W=>({id:W.id,input_item_id:W.input_item?.id||"",input_name:W.input_name||"",quantity:W.quantity||"",unit:W.unit||"",notes:W.notes||""}))||[]}))||[]}),i(!0)},z=()=>{A({...w,items:[...w.items,{activity_type_id:"",performed_by_user_id:"",started_at:"",ended_at:"",quantity:"",unit:"",notes:"",meta:{},inputs:[]}]})},L=y=>{A({...w,items:w.items.filter((f,W)=>W!==y)})},re=(y,f,W)=>{const Y=[...w.items];Y[y]={...Y[y],[f]:W},A({...w,items:Y})},xe=y=>{const f=[...w.items];f[y].inputs||(f[y].inputs=[]),f[y].inputs.push({input_item_id:"",input_name:"",quantity:"",unit:"",notes:""}),A({...w,items:f})},Z=(y,f)=>{const W=[...w.items];W[y].inputs=W[y].inputs.filter((Y,ce)=>ce!==f),A({...w,items:W})},te=(y,f,W,Y)=>{const ce=[...w.items];ce[y].inputs[f]={...ce[y].inputs[f],[W]:Y},A({...w,items:ce})},ie=async y=>{if(y.preventDefault(),w.items.length===0){alert("Please add at least one activity item");return}if(!w.production_cycle_id){alert("Please select a production cycle");return}try{const f=k.find(Y=>Y.id===parseInt(w.production_cycle_id));if(f&&f.cycle_status==="PLANNED")if(confirm(`The production cycle "${f.production_cycle_code||f.id}" is PLANNED. It needs to be started before creating daily logs. Would you like to start it now?`))try{await F.post(`/api/v1/production-cycles/${f.id}/start`),await I(c)}catch(Y){alert("Error starting cycle: "+(Y.response?.data?.message||Y.message));return}else return;const W={log_date:w.log_date,issues_notes:w.issues_notes,items:w.items.map(Y=>({activity_type_id:Y.activity_type_id,performed_by_user_id:Y.performed_by_user_id||null,started_at:Y.started_at||null,ended_at:Y.ended_at||null,quantity:Y.quantity||null,unit:Y.unit||null,notes:Y.notes||null,meta:Y.meta||null,inputs:Y.inputs?.map(ce=>({input_item_id:ce.input_item_id||null,input_name:ce.input_name||null,quantity:ce.quantity,unit:ce.unit,notes:ce.notes||null}))||[]}))};R?await F.patch(`/api/v1/daily-logs/${R.id}`,W):await F.post(`/api/v1/production-cycles/${w.production_cycle_id}/daily-logs`,W),i(!1),G(c)}catch(f){const W=f.response?.data?.message||f.response?.data?.errors||"Unknown error";alert("Error saving log: "+(typeof W=="string"?W:JSON.stringify(W)))}},M=async y=>{if(confirm("Submit this daily log? It cannot be edited after submission."))try{await F.post(`/api/v1/daily-logs/${y}/submit`),G(c)}catch(f){alert("Error submitting log: "+(f.response?.data?.message||f.message))}},J=async y=>{if(confirm("Delete this daily log?"))try{await F.delete(`/api/v1/daily-logs/${y}`),G(c)}catch(f){alert("Error deleting log: "+(f.response?.data?.message||f.message))}},O=y=>P.find(f=>f.id===parseInt(y));return C?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Daily Activity Logs"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Record daily activities for production cycles"})]}),e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Greenhouse"}),e.jsxs("select",{value:c,onChange:y=>x(y.target.value),className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select a greenhouse..."}),u.map(y=>e.jsxs("option",{value:y.id,children:[y.name," (",y.greenhouse_code||y.code,")"]},y.id))]})]}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs("button",{onClick:_,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Daily Log"]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Production Cycle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activities"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No daily logs found for this greenhouse"})}):o.map(y=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.log_date}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.production_cycle?.production_cycle_code||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${y.status==="SUBMITTED"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y.status})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[y.items?.length||0," activity(ies)"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.submitted_at?new Date(y.submitted_at).toLocaleString():"Not submitted"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[y.status==="DRAFT"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>le(y),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>M(y.id),className:"text-green-600 hover:text-green-900",title:"Submit",children:e.jsx(Ip,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>J(y.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},y.id))})]})})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:R?"Edit Daily Log":"New Daily Log"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:ie,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Production Cycle ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:w.production_cycle_id,onChange:y=>A({...w,production_cycle_id:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Production Cycle"}),k.map(y=>e.jsxs("option",{value:y.id,children:[y.production_cycle_code," (",y.cycle_status,")"]},y.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Log Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:w.log_date,onChange:y=>A({...w,log_date:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issues/Notes"}),e.jsx("textarea",{value:w.issues_notes,onChange:y=>A({...w,issues_notes:y.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Activity Items"}),e.jsxs("button",{type:"button",onClick:z,className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Add Activity"]})]}),w.items.map((y,f)=>{const W=O(y.activity_type_id);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Activity ",f+1]}),e.jsx("button",{type:"button",onClick:()=>L(f),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Activity Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:y.activity_type_id,onChange:Y=>re(f,"activity_type_id",Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Activity Type"}),P.map(Y=>e.jsxs("option",{value:Y.id,children:[Y.name," (",Y.code,")"]},Y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Performed By"}),e.jsxs("select",{value:y.performed_by_user_id,onChange:Y=>re(f,"performed_by_user_id",Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select User"}),m.map(Y=>e.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),W?.requires_time_range&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Started At"}),e.jsx("input",{type:"datetime-local",value:y.started_at,onChange:Y=>re(f,"started_at",Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ended At"}),e.jsx("input",{type:"datetime-local",value:y.ended_at,onChange:Y=>re(f,"ended_at",Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),W?.requires_quantity&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",step:"0.01",value:y.quantity,onChange:Y=>re(f,"quantity",Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("input",{type:"text",value:y.unit,onChange:Y=>re(f,"unit",Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"L, KG, hours, etc."})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:y.notes,onChange:Y=>re(f,"notes",Y.target.value),rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),W?.requires_inputs&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Inputs Used"}),e.jsxs("button",{type:"button",onClick:()=>xe(f),className:"text-sm text-green-600 hover:text-green-800",children:[e.jsx(_e,{className:"h-4 w-4 inline mr-1"}),"Add Input"]})]}),y.inputs?.map((Y,ce)=>e.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-2 p-2 bg-gray-50 rounded",children:[v.length>0?e.jsxs("select",{value:Y.input_item_id,onChange:H=>te(f,ce,"input_item_id",H.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select Input"}),v.map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]}):e.jsx("input",{type:"text",placeholder:"Input name (required)",value:Y.input_name,onChange:H=>te(f,ce,"input_name",H.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",required:!0}),v.length>0&&e.jsx("input",{type:"text",placeholder:"Or enter name",value:Y.input_name,onChange:H=>te(f,ce,"input_name",H.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"Quantity",required:!0,value:Y.quantity,onChange:H=>te(f,ce,"quantity",H.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsx("input",{type:"text",placeholder:"Unit",required:!0,value:Y.unit,onChange:H=>te(f,ce,"unit",H.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsx("button",{type:"button",onClick:()=>Z(f,ce),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{className:"h-4 w-4"})})]},ce))]})]},f)})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[R?"Update":"Save"," Log"]})]})]})]})})]})}function jg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState(!0),[P,E]=g.useState(!1),[m,D]=g.useState(null),[v,j]=g.useState({farm_id:"",code:"",name:"",description:"",category:"",requires_quantity:!1,requires_time_range:!1,requires_inputs:!1,requires_photos:!1,is_active:!0});g.useEffect(()=>{C()},[]);const C=async()=>{try{const[i,R]=await Promise.all([F.get("/api/v1/activity-types?per_page=1000"),F.get("/api/v1/farms?per_page=1000")]),B=i.data?.data||i.data||[],w=R.data?.data||R.data||[];d(Array.isArray(B)?B:[]),N(Array.isArray(w)?w:[])}catch(i){console.error("Error fetching data:",i),alert("Error loading data: "+(i.response?.data?.message||i.message))}finally{S(!1)}},q=()=>{D(null),j({farm_id:"",code:"",name:"",description:"",category:"",requires_quantity:!1,requires_time_range:!1,requires_inputs:!1,requires_photos:!1,is_active:!0}),E(!0)},c=i=>{D(i),j({farm_id:i.farm_id||"",code:i.code||"",name:i.name||"",description:i.description||"",category:i.category||"",requires_quantity:i.requires_quantity||!1,requires_time_range:i.requires_time_range||!1,requires_inputs:i.requires_inputs||!1,requires_photos:i.requires_photos||!1,is_active:i.is_active!==!1}),E(!0)},x=async i=>{i.preventDefault();try{m?await F.patch(`/api/v1/activity-types/${m.id}`,v):await F.post("/api/v1/activity-types",v),E(!1),C()}catch(R){const B=R.response?.data?.message||R.response?.data?.errors||"Unknown error";alert("Error saving activity type: "+(typeof B=="string"?B:JSON.stringify(B)))}},h=async i=>{if(confirm("Deactivate this activity type? (It will be soft-deleted)"))try{await F.delete(`/api/v1/activity-types/${i}`),C()}catch(R){alert("Error deleting activity type: "+(R.response?.data?.message||R.message))}};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Activity Types"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage activity types for daily logs"})]}),e.jsxs("button",{onClick:q,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Activity Type"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requirements"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No activity types found"})}):o.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:i.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.category||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.requires_quantity&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"Quantity"}),i.requires_time_range&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:"Time"}),i.requires_inputs&&e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:"Inputs"}),i.requires_photos&&e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded",children:"Photos"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${i.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:i.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>c(i),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h(i.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},i.id))})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:m?"Edit Activity Type":"New Activity Type"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[!m&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Farm ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:v.farm_id,onChange:i=>j({...v,farm_id:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:v.code,onChange:i=>j({...v,code:i.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"IRRIGATION"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:v.name,onChange:i=>j({...v,name:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:v.description,onChange:i=>j({...v,description:i.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:v.category,onChange:i=>j({...v,category:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"CULTURAL",children:"Cultural"}),e.jsx("option",{value:"WATER",children:"Water"}),e.jsx("option",{value:"NUTRITION",children:"Nutrition"}),e.jsx("option",{value:"PROTECTION",children:"Protection"}),e.jsx("option",{value:"HYGIENE",children:"Hygiene"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Requirements"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:v.requires_quantity,onChange:i=>j({...v,requires_quantity:i.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requires Quantity"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:v.requires_time_range,onChange:i=>j({...v,requires_time_range:i.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requires Time Range"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:v.requires_inputs,onChange:i=>j({...v,requires_inputs:i.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requires Inputs"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:v.requires_photos,onChange:i=>j({...v,requires_photos:i.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requires Photos"})]})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:v.is_active,onChange:i=>j({...v,is_active:i.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[m?"Update":"Create"," Activity Type"]})]})]})]})})]})}function Ng(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState([]),[P,E]=g.useState([]),[m,D]=g.useState([]),[v,j]=g.useState([]),[C,q]=g.useState([]),[c,x]=g.useState([]),[h,i]=g.useState(!0),[R,B]=g.useState(!1),[w,A]=g.useState(!1),[b,I]=g.useState(null),[G,_]=g.useState(null),[le,z]=g.useState({payment_date:new Date().toISOString().slice(0,10),amount:"",currency:"USD",method:"CASH",reference:"",notes:""}),[L,re]=g.useState({farm_id:"",site_id:"",customer_id:"",order_date:new Date().toISOString().slice(0,10),status:"DRAFT",currency:"USD",discount_total:0,tax_total:0,due_date:"",notes:"",items:[]});g.useEffect(()=>{xe()},[]);const xe=async()=>{try{const[H,ne,X,je,Ue,Lt,gs,hs]=await Promise.all([F.get("/api/v1/sales-orders"),F.get("/api/v1/farms?per_page=1000"),F.get("/api/v1/sites?per_page=1000"),F.get("/api/v1/customers?per_page=1000"),F.get("/api/v1/products?per_page=1000"),F.get("/api/v1/production-cycles?per_page=1000"),F.get("/api/v1/bell-pepper-harvests?per_page=1000"),F.get("/api/v1/harvest-lots?per_page=1000")]),Ds=H.data?.data||H.data||[],or=ne.data?.data||ne.data||[],cr=X.data?.data||X.data||[],Ps=je.data?.data||je.data||[],dr=Ue.data?.data||Ue.data||[],Rs=Lt.data?.data||Lt.data||[],Vt=gs.data?.data||gs.data||[],It=hs.data?.data||hs.data||[];d(Array.isArray(Ds)?Ds:[]),N(Array.isArray(or)?or:[]),S(Array.isArray(cr)?cr:[]),E(Array.isArray(Ps)?Ps:[]),D(Array.isArray(dr)?dr:[]),j(Array.isArray(Rs)?Rs:[]),q(Array.isArray(Vt)?Vt:[]),x(Array.isArray(It)?It:[])}catch(H){console.error("Error fetching data:",H),alert("Error loading data: "+(H.response?.data?.message||H.message))}finally{i(!1)}},Z=()=>{_(null);const H=u.length===1?u[0].id:"";re({farm_id:H,site_id:"",customer_id:"",order_date:new Date().toISOString().slice(0,10),status:"DRAFT",currency:H&&u.find(ne=>ne.id===H)?.default_currency||"USD",discount_total:0,tax_total:0,due_date:"",notes:"",items:[]}),B(!0)},te=H=>{I(H),z({payment_date:new Date().toISOString().slice(0,10),amount:"",currency:H.currency||"USD",method:"CASH",reference:"",notes:""}),A(!0)},ie=async H=>{H.preventDefault();try{await F.post(`/api/v1/sales-orders/${b.id}/payments`,le),A(!1),xe()}catch(ne){const X=ne.response?.data?.message||ne.response?.data?.errors||"Unknown error";alert("Error recording payment: "+(typeof X=="string"?X:JSON.stringify(X)))}},M=H=>{if(H.status!=="DRAFT"){alert("Only DRAFT orders can be edited");return}_(H),re({farm_id:H.farm?.id||"",site_id:H.site?.id||"",customer_id:H.customer?.id||"",order_date:H.order_date||new Date().toISOString().slice(0,10),status:H.status||"DRAFT",currency:H.currency||"USD",discount_total:H.discount_total||0,tax_total:H.tax_total||0,due_date:H.due_date||"",notes:H.notes||"",items:H.items?.map(ne=>({product_id:ne.product?.id||"",production_cycle_id:ne.production_cycle?.id||"",harvest_record_id:ne.harvest_record?.id||"",harvest_lot_id:ne.harvest_lot?.id||"",product_name:ne.product_name||ne.product?.name||"",quantity:ne.quantity||"",unit:ne.unit||"",unit_price:ne.unit_price||"",discount_amount:ne.discount_amount||0,quality_grade:ne.quality_grade||"",notes:ne.notes||""}))||[]}),B(!0)},J=()=>{re({...L,items:[...L.items,{product_id:"",production_cycle_id:"",harvest_record_id:"",harvest_lot_id:"",product_name:"",quantity:"",unit:"KG",unit_price:"",discount_amount:0,quality_grade:"",notes:""}]})},O=H=>{re({...L,items:L.items.filter((ne,X)=>X!==H)})},y=(H,ne,X)=>{const je=[...L.items];if(je[H]={...je[H],[ne]:X},ne==="quantity"||ne==="unit_price"||ne==="discount_amount"){const Ue=parseFloat(je[H].quantity)||0,Lt=parseFloat(je[H].unit_price)||0,gs=parseFloat(je[H].discount_amount)||0;je[H].line_total=Ue*Lt-gs}re({...L,items:je})},f=async H=>{if(H.preventDefault(),L.items.length===0){alert("Please add at least one item");return}try{const ne={...L,items:L.items.map(X=>({product_id:X.product_id||null,production_cycle_id:X.production_cycle_id||null,harvest_record_id:X.harvest_record_id||null,harvest_lot_id:X.harvest_lot_id||null,product_name:X.product_name||null,quantity:X.quantity,unit:X.unit,unit_price:X.unit_price,discount_amount:X.discount_amount||0,quality_grade:X.quality_grade||null,notes:X.notes||null}))};G?await F.patch(`/api/v1/sales-orders/${G.id}`,ne):await F.post("/api/v1/sales-orders",ne),B(!1),xe()}catch(ne){const X=ne.response?.data?.message||ne.response?.data?.errors||"Unknown error";alert("Error saving order: "+(typeof X=="string"?X:JSON.stringify(X)))}},W=async(H,ne)=>{try{await F.post(`/api/v1/sales-orders/${H}/${ne}`),xe()}catch(X){alert("Error: "+(X.response?.data?.message||X.message))}},Y=async H=>{if(confirm("Delete this sales order?"))try{await F.delete(`/api/v1/sales-orders/${H}`),xe()}catch(ne){alert("Error deleting order: "+(ne.response?.data?.message||ne.message))}},ce=H=>({DRAFT:"bg-gray-100 text-gray-800",CONFIRMED:"bg-blue-100 text-blue-800",DISPATCHED:"bg-green-100 text-green-800",INVOICED:"bg-purple-100 text-purple-800",PAID:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[H]||"bg-gray-100 text-gray-800";return h?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sales Orders"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage sales orders and track revenue"})]}),e.jsxs("button",{onClick:Z,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Order"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No sales orders found"})}):o.map(H=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:H.order_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H.customer?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H.order_date||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ce(H.status)}`,children:H.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[H.currency," ",Number(H.total_amount||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${H.payment_status==="PAID"?"bg-green-100 text-green-800":H.payment_status==="PART_PAID"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:H.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[H.status==="DRAFT"&&e.jsx("button",{onClick:()=>W(H.id,"confirm"),className:"text-blue-600 hover:text-blue-900",title:"Confirm",children:e.jsx(Xr,{className:"h-4 w-4"})}),["CONFIRMED","INVOICED"].includes(H.status)&&e.jsx("button",{onClick:()=>W(H.id,"dispatch"),className:"text-green-600 hover:text-green-900",title:"Dispatch",children:e.jsx(Fp,{className:"h-4 w-4"})}),["CONFIRMED","DISPATCHED"].includes(H.status)&&e.jsx("button",{onClick:()=>W(H.id,"invoice"),className:"text-purple-600 hover:text-purple-900",title:"Invoice",children:e.jsx(su,{className:"h-4 w-4"})}),!["PAID","CANCELLED"].includes(H.status)&&e.jsx("button",{onClick:()=>W(H.id,"cancel"),className:"text-red-600 hover:text-red-900",title:"Cancel",children:e.jsx(Ze,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>M(H),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),H.status==="DRAFT"&&e.jsx("button",{onClick:()=>Y(H.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})}),H.payment_status!=="PAID"&&e.jsx("button",{onClick:()=>te(H),className:"text-green-600 hover:text-green-900",title:"Record Payment",children:e.jsx(Tt,{className:"h-4 w-4"})})]})})]},H.id))})]})}),w&&b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Record Payment"}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:ie,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Payment Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:le.payment_date,onChange:H=>z({...le,payment_date:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:le.amount,onChange:H=>z({...le,amount:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Payment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:le.method,onChange:H=>z({...le,method:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"TRANSFER",children:"Transfer"}),e.jsx("option",{value:"POS",children:"POS"}),e.jsx("option",{value:"ONLINE",children:"Online"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reference"}),e.jsx("input",{type:"text",value:le.reference,onChange:H=>z({...le,reference:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:le.notes,onChange:H=>z({...le,notes:H.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Record Payment"})]})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:G?"Edit Sales Order":"New Sales Order"}),e.jsx("button",{onClick:()=>B(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[!G&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Farm ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:L.farm_id,onChange:H=>{const ne=u.find(X=>X.id===parseInt(H.target.value));re({...L,farm_id:H.target.value,currency:ne?.default_currency||"USD",site_id:""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site"}),e.jsxs("select",{value:L.site_id,onChange:H=>re({...L,site_id:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Site"}),k.filter(H=>!L.farm_id||H.farm_id===parseInt(L.farm_id)).map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Customer ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:L.customer_id,onChange:H=>re({...L,customer_id:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Customer"}),P.map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Order Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:L.order_date,onChange:H=>re({...L,order_date:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsx("input",{type:"text",value:L.currency,onChange:H=>re({...L,currency:H.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",maxLength:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:L.due_date,onChange:H=>re({...L,due_date:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Order Items"}),e.jsxs("button",{type:"button",onClick:J,className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),L.items.map((H,ne)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Item ",ne+1]}),e.jsx("button",{type:"button",onClick:()=>O(ne),className:"text-red-600 hover:text-red-900",children:e.jsx(Ce,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product"}),e.jsxs("select",{value:H.product_id,onChange:X=>{const je=m.find(Ue=>Ue.id===parseInt(X.target.value));y(ne,"product_id",X.target.value),je&&y(ne,"product_name",je.name)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Product"}),m.map(X=>e.jsxs("option",{value:X.id,children:[X.name," (",X.code,")"]},X.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name (if no product selected)"}),e.jsx("input",{type:"text",value:H.product_name,onChange:X=>y(ne,"product_name",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Cycle"}),e.jsxs("select",{value:H.production_cycle_id,onChange:X=>y(ne,"production_cycle_id",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Cycle"}),v.map(X=>e.jsx("option",{value:X.id,children:X.production_cycle_code},X.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Record"}),e.jsxs("select",{value:H.harvest_record_id,onChange:X=>y(ne,"harvest_record_id",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Harvest"}),C.map(X=>e.jsxs("option",{value:X.id,children:[X.harvest_code," - ",X.harvest_date]},X.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harvest Lot"}),e.jsxs("select",{value:H.harvest_lot_id,onChange:X=>y(ne,"harvest_lot_id",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Lot"}),c.map(X=>e.jsx("option",{value:X.id,children:X.code},X.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:H.quantity,onChange:X=>y(ne,"quantity",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:H.unit,onChange:X=>y(ne,"unit",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Unit Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:H.unit_price,onChange:X=>y(ne,"unit_price",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount"}),e.jsx("input",{type:"number",step:"0.01",value:H.discount_amount||0,onChange:X=>y(ne,"discount_amount",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Grade"}),e.jsx("input",{type:"text",value:H.quality_grade,onChange:X=>y(ne,"quality_grade",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:H.notes,onChange:X=>y(ne,"notes",X.target.value),rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]},ne))]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Total"}),e.jsx("input",{type:"number",step:"0.01",value:L.discount_total,onChange:H=>re({...L,discount_total:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Total"}),e.jsx("input",{type:"number",step:"0.01",value:L.tax_total,onChange:H=>re({...L,tax_total:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:L.notes,onChange:H=>re({...L,notes:H.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>B(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[G?"Update":"Create"," Order"]})]})]})]})})]})}function _g(){const[o,d]=g.useState([]),[u,N]=g.useState(!0),[k,S]=g.useState(!1),[P,E]=g.useState(null),[m,D]=g.useState({name:"",customer_type:"",contact_name:"",email:"",phone:"",address_line1:"",address_line2:"",city:"",state:"",country:"",is_active:!0,notes:""});g.useEffect(()=>{v()},[]);const v=async()=>{try{const x=await F.get("/api/v1/customers?per_page=1000"),h=x.data?.data||x.data||[];d(Array.isArray(h)?h:[])}catch(x){console.error("Error fetching data:",x),alert("Error loading data: "+(x.response?.data?.message||x.message))}finally{N(!1)}},j=()=>{E(null),D({name:"",customer_type:"",contact_name:"",email:"",phone:"",address_line1:"",address_line2:"",city:"",state:"",country:"",is_active:!0,notes:""}),S(!0)},C=x=>{E(x),D({name:x.name||"",customer_type:x.customer_type||"",contact_name:x.contact_name||"",email:x.email||"",phone:x.phone||"",address_line1:x.address_line1||"",address_line2:x.address_line2||"",city:x.city||"",state:x.state||"",country:x.country||"",is_active:x.is_active!==!1,notes:x.notes||""}),S(!0)},q=async x=>{x.preventDefault();try{P?await F.patch(`/api/v1/customers/${P.id}`,m):await F.post("/api/v1/customers",m),S(!1),v()}catch(h){const i=h.response?.data?.message||h.response?.data?.errors||"Unknown error";alert("Error saving customer: "+(typeof i=="string"?i:JSON.stringify(i)))}},c=async x=>{if(confirm("Delete this customer?"))try{await F.delete(`/api/v1/customers/${x}`),v()}catch(h){alert("Error deleting customer: "+(h.response?.data?.message||h.message))}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Customers"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage customer information"})]}),e.jsxs("button",{onClick:j,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Customer"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No customers found"})}):o.map(x=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.customer_type||"N/A"}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[e.jsx("div",{children:x.email||"N/A"}),e.jsx("div",{children:x.phone||""})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:[x.city,x.state,x.country].filter(Boolean).join(", ")||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${x.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:x.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>C(x),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>c(x.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},x.id))})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:P?"Edit Customer":"New Customer"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:q,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:x=>D({...m,name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Type"}),e.jsxs("select",{value:m.customer_type,onChange:x=>D({...m,customer_type:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"INDIVIDUAL",children:"Individual"}),e.jsx("option",{value:"BUSINESS",children:"Business"}),e.jsx("option",{value:"DISTRIBUTOR",children:"Distributor"}),e.jsx("option",{value:"RETAILER",children:"Retailer"}),e.jsx("option",{value:"EXPORTER",children:"Exporter"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name"}),e.jsx("input",{type:"text",value:m.contact_name,onChange:x=>D({...m,contact_name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:m.email,onChange:x=>D({...m,email:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"text",value:m.phone,onChange:x=>D({...m,phone:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1"}),e.jsx("input",{type:"text",value:m.address_line1,onChange:x=>D({...m,address_line1:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),e.jsx("input",{type:"text",value:m.address_line2,onChange:x=>D({...m,address_line2:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",value:m.city,onChange:x=>D({...m,city:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),e.jsx("input",{type:"text",value:m.state,onChange:x=>D({...m,state:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),e.jsx("input",{type:"text",value:m.country,onChange:x=>D({...m,country:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.is_active,onChange:x=>D({...m,is_active:x.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:m.notes,onChange:x=>D({...m,notes:x.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[P?"Update":"Create"," Customer"]})]})]})]})})]})}function wg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState(!0),[P,E]=g.useState(!1),[m,D]=g.useState(null),[v,j]=g.useState({farm_id:"",code:"",name:"",category:"",unit_of_measure:"KG",is_active:!0});g.useEffect(()=>{C()},[]);const C=async()=>{try{const[i,R]=await Promise.all([F.get("/api/v1/products?per_page=1000"),F.get("/api/v1/farms?per_page=1000")]),B=i.data?.data||i.data||[],w=R.data?.data||R.data||[];d(Array.isArray(B)?B:[]),N(Array.isArray(w)?w:[])}catch(i){console.error("Error fetching data:",i),alert("Error loading data: "+(i.response?.data?.message||i.message))}finally{S(!1)}},q=()=>{D(null),j({farm_id:"",code:"",name:"",category:"",unit_of_measure:"KG",is_active:!0}),E(!0)},c=i=>{D(i),j({farm_id:i.farm_id||"",code:i.code||"",name:i.name||"",category:i.category||"",unit_of_measure:i.unit_of_measure||"KG",is_active:i.is_active!==!1}),E(!0)},x=async i=>{i.preventDefault();try{m?await F.patch(`/api/v1/products/${m.id}`,v):await F.post("/api/v1/products",v),E(!1),C()}catch(R){const B=R.response?.data?.message||R.response?.data?.errors||"Unknown error";alert("Error saving product: "+(typeof B=="string"?B:JSON.stringify(B)))}},h=async i=>{if(confirm("Delete this product?"))try{await F.delete(`/api/v1/products/${i}`),C()}catch(R){alert("Error deleting product: "+(R.response?.data?.message||R.message))}};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Products"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage saleable products"})]}),e.jsxs("button",{onClick:q,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Product"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No products found"})}):o.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:i.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.category||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.unit_of_measure}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${i.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:i.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>c(i),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h(i.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},i.id))})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:m?"Edit Product":"New Product"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[!m&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Farm ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:v.farm_id,onChange:i=>j({...v,farm_id:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:v.code,onChange:i=>j({...v,code:i.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:v.name,onChange:i=>j({...v,name:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx("input",{type:"text",value:v.category,onChange:i=>j({...v,category:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"VEGETABLE, FRUIT, etc."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Unit of Measure ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:v.unit_of_measure,onChange:i=>j({...v,unit_of_measure:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"KG, CRATE, etc."})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:v.is_active,onChange:i=>j({...v,is_active:i.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[m?"Update":"Create"," Product"]})]})]})]})})]})}function kg(){const[o,d]=g.useState(null),[u,N]=g.useState([]),[k,S]=g.useState(null),[P,E]=g.useState(!0),[m,D]=g.useState({from:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)});g.useEffect(()=>{v()},[m]);const v=async()=>{E(!0);try{const[j,C,q]=await Promise.all([F.get(`/api/v1/kpis/sales-summary?from=${m.from}&to=${m.to}`),F.get(`/api/v1/kpis/production-profitability?from=${m.from}&to=${m.to}`),F.get(`/api/v1/kpis/operations-compliance?from=${m.from}&to=${m.to}`)]);d(j.data?.data||null),N(C.data?.data||[]),S(q.data?.data||null)}catch(j){console.error("Error fetching KPIs:",j),alert("Error loading KPIs: "+(j.response?.data?.message||j.message))}finally{E(!1)}};return P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sales & Operations KPIs"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Key performance indicators and analytics"})]}),e.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:m.from,onChange:j=>D({...m,from:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:m.to,onChange:j=>D({...m,to:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),o&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Sales Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Number(o.total_revenue||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),e.jsx(Tt,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Number(o.paid_revenue||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),e.jsx(Tt,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Outstanding"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Number(o.outstanding_revenue||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),e.jsx(Tt,{className:"h-8 w-8 text-yellow-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.number_of_orders||0}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Avg: ",Number(o.average_order_value||0).toFixed(2)]})]}),e.jsx(Xe,{className:"h-8 w-8 text-blue-600"})]})})]}),o.top_customers&&o.top_customers.length>0&&e.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Customers"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.top_customers.map((j,C)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:Number(j.revenue||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]},C))})]})})]})]}),u.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Production Profitability"}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cycle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Greenhouse"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sales Revenue"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Qty Sold"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Harvested"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sell Through"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(j=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:j.production_cycle_code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.greenhouse?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:Number(j.total_sales_revenue||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:Number(j.total_quantity_sold||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:Number(j.harvest_quantity_total||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${j.sell_through_rate>=80?"bg-green-100 text-green-800":j.sell_through_rate>=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[Number(j.sell_through_rate||0).toFixed(1),"%"]})})]},j.production_cycle_id))})]})})]}),k&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Operations Compliance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Daily Log Compliance"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Number(k.daily_log_compliance_rate||0).toFixed(1),"%"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[k.submitted_logs||0," / ",k.expected_logs||0," logs"]})]}),e.jsx(hn,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"On-Time Submission"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Number(k.on_time_submission_rate||0).toFixed(1),"%"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[k.on_time_submissions||0," on-time"]})]}),e.jsx(ot,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Missing Logs"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:k.missing_log_count||0})]}),e.jsx(ot,{className:"h-8 w-8 text-red-600"})]})})]})]})]})}function Sg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState(!0),[P,E]=g.useState(!1),[m,D]=g.useState(!1),[v,j]=g.useState(!1),[C,q]=g.useState(null),[c,x]=g.useState(null),[h,i]=g.useState([]),[R,B]=g.useState({production_cycle_id:"",harvest_date:new Date().toISOString().slice(0,10),notes:""}),[w,A]=g.useState({grade:"A",crate_count:1,total_weight_kg:"",notes:""}),[b,I]=g.useState({production_cycle_id:"",greenhouse_id:"",from:"",to:"",status:""});g.useEffect(()=>{G()},[]),g.useEffect(()=>{_()},[b]);const G=async()=>{try{const[O]=await Promise.all([F.get("/api/v1/production-cycles?per_page=1000")]),y=O.data?.data||O.data||[],f=Array.isArray(y)?y.filter(W=>{if(!W)return!1;const Y=W.cycle_status||W.status;return["ACTIVE","HARVESTING"].includes(Y)}):[];N(f)}catch(O){console.error("Error fetching data:",O),console.error("Error response:",O.response),alert("Error loading data: "+(O.response?.data?.message||O.message))}finally{S(!1)}},_=async()=>{try{const O=new URLSearchParams;b.production_cycle_id&&O.append("production_cycle_id",b.production_cycle_id),b.greenhouse_id&&O.append("greenhouse_id",b.greenhouse_id),b.from&&O.append("from",b.from),b.to&&O.append("to",b.to),b.status&&O.append("status",b.status);const y=await F.get(`/api/v1/harvest-records?${O.toString()}`),f=y.data?.data||y.data||[];d(Array.isArray(f)?f:[])}catch(O){console.error("Error fetching records:",O),alert("Error loading records: "+(O.response?.data?.message||O.message))}},le=async()=>{await G(),q(null),B({production_cycle_id:"",harvest_date:new Date().toISOString().slice(0,10),notes:""}),E(!0)},z=O=>{if(O.status!=="DRAFT"){alert("Only DRAFT records can be edited");return}q(O),B({production_cycle_id:O.production_cycle?.id||"",harvest_date:O.harvest_date||new Date().toISOString().slice(0,10),notes:O.notes||""}),E(!0)},L=async O=>{O.preventDefault();try{C?await F.patch(`/api/v1/harvest-records/${C.id}`,R):await F.post("/api/v1/harvest-records",R),E(!1),_()}catch(y){const f=y.response?.data?.message||y.response?.data?.errors||"Unknown error";alert("Error saving record: "+(typeof f=="string"?f:JSON.stringify(f)))}},re=async(O,y)=>{try{await F.post(`/api/v1/harvest-records/${O}/${y}`),_()}catch(f){alert("Error: "+(f.response?.data?.message||f.message))}},xe=async O=>{if(confirm("Delete this harvest record?"))try{await F.delete(`/api/v1/harvest-records/${O}`),_()}catch(y){alert("Error deleting record: "+(y.response?.data?.message||y.message))}},Z=async O=>{x(O);try{const y=await F.get(`/api/v1/harvest-records/${O.id}`);i(y.data.data?.crates||[]),j(!0)}catch(y){console.error("Error fetching record details:",y),alert("Error loading record details: "+(y.response?.data?.message||y.message))}},te=O=>{x(O),A({grade:"A",crate_count:1,total_weight_kg:"",notes:""}),D(!0)},ie=async O=>{O.preventDefault();try{const y={grade:w.grade,crate_count:parseInt(w.crate_count)||1,total_weight_kg:parseFloat(w.total_weight_kg)||0,notes:w.notes||""};if(await F.post(`/api/v1/harvest-records/${c.id}/crates`,y),D(!1),v&&c){const f=await F.get(`/api/v1/harvest-records/${c.id}`);i(f.data.data?.crates||[])}_()}catch(y){const f=y.response?.data?.message||y.response?.data?.errors||"Unknown error";alert("Error adding crate: "+(typeof f=="string"?f:JSON.stringify(f)))}},M=async O=>{if(confirm("Delete this crate?"))try{if(await F.delete(`/api/v1/harvest-crates/${O}`),v&&c){const y=await F.get(`/api/v1/harvest-records/${c.id}`);i(y.data.data?.crates||[])}_()}catch(y){alert("Error deleting crate: "+(y.response?.data?.message||y.message))}},J=O=>({DRAFT:"bg-gray-100 text-gray-800",SUBMITTED:"bg-blue-100 text-blue-800",APPROVED:"bg-green-100 text-green-800"})[O]||"bg-gray-100 text-gray-800";return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Harvest Records"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Record bell pepper harvests with grade breakdown"})]}),e.jsxs("button",{onClick:le,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Harvest Record"]})]}),e.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Production Cycle"}),e.jsxs("select",{value:b.production_cycle_id,onChange:O=>I({...b,production_cycle_id:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Cycles"}),u.map(O=>e.jsx("option",{value:O.id,children:O.production_cycle_code},O.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:b.from,onChange:O=>I({...b,from:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:b.to,onChange:O=>I({...b,to:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:b.status,onChange:O=>I({...b,status:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"DRAFT",children:"Draft"}),e.jsx("option",{value:"SUBMITTED",children:"Submitted"}),e.jsx("option",{value:"APPROVED",children:"Approved"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>I({production_cycle_id:"",greenhouse_id:"",from:"",to:"",status:""}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Clear Filters"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Production Cycle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Greenhouse"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade A (kg)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade B (kg)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade C (kg)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total (kg)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crates"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"px-6 py-4 text-center text-gray-500",children:"No harvest records found"})}):o.map(O=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.harvest_date||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.production_cycle?.production_cycle_code||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.greenhouse?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(O.totals?.a_kg||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(O.totals?.b_kg||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(O.totals?.c_kg||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Number(O.totals?.total_kg||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.totals?.crate_count_total||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${J(O.status)}`,children:O.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>Z(O),className:"text-blue-600 hover:text-blue-900",title:"View Details & Crates",children:e.jsx(Xe,{className:"h-4 w-4"})}),O.status==="DRAFT"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>te(O),className:"text-green-600 hover:text-green-900",title:"Add Crate",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>re(O.id,"submit"),className:"text-green-600 hover:text-green-900",title:"Submit",children:e.jsx(Xr,{className:"h-4 w-4"})})]}),O.status==="SUBMITTED"&&e.jsx("button",{onClick:()=>re(O.id,"approve"),className:"text-green-600 hover:text-green-900",title:"Approve",children:e.jsx(Xr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>z(O),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),O.status==="DRAFT"&&e.jsx("button",{onClick:()=>xe(O.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},O.id))})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:C?"Edit Harvest Record":"New Harvest Record"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:L,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Production Cycle ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:R.production_cycle_id,onChange:O=>B({...R,production_cycle_id:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!!C||u.length===0,children:[e.jsx("option",{value:"",children:u.length===0?"No active production cycles available":"Select Production Cycle"}),u.map(O=>e.jsxs("option",{value:O.id,children:[O.production_cycle_code," - ",O.greenhouse?.name||"N/A"," (",O.cycle_status,")"]},O.id))]}),u.length===0&&e.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"No active or harvesting production cycles found. Please start a production cycle first."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Harvest Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),(()=>{const O=u.find(W=>W.id===parseInt(R.production_cycle_id));let y=null;if(O&&O.planting_date){const W=new Date(O.planting_date),Y=new Date(W);Y.setDate(Y.getDate()+40),y=Y.toISOString().split("T")[0]}const f=y&&R.harvest_date&&new Date(R.harvest_date)<new Date(y);return e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",required:!0,value:R.harvest_date,min:y||void 0,onChange:W=>B({...R,harvest_date:W.target.value}),className:`w-full px-3 py-2 border rounded-lg ${f?"border-red-500":"border-gray-300"}`}),O&&O.planting_date&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Minimum harvest date: ",y," (40 days after planting on ",O.planting_date,")"]}),f&&e.jsxs("p",{className:"mt-1 text-xs text-red-600",children:["Harvest date must be at least 40 days after the planting date (",O.planting_date,")"]})]})})()]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:R.notes,onChange:O=>B({...R,notes:O.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),!C&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," After creating the harvest record, click the ",e.jsx("strong",{children:"Package icon"})," to view details and add crates with grade breakdown (A/B/C) and weights."]})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[C?"Update":"Create"," Record"]})]})]})]})}),v&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Harvest Record Details - ",c.harvest_date]}),e.jsx("button",{onClick:()=>{j(!1),x(null),i([])},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Production Cycle"}),e.jsx("p",{className:"text-lg font-semibold",children:c.production_cycle?.production_cycle_code||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Greenhouse"}),e.jsx("p",{className:"text-lg font-semibold",children:c.greenhouse?.name||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${J(c.status)}`,children:c.status})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Crates (",h.length,")"]}),c.status==="DRAFT"&&e.jsxs("button",{onClick:()=>te(c),className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Add Crate"]})]}),h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Xe,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No crates recorded yet"}),c.status==="DRAFT"&&e.jsx("button",{onClick:()=>te(c),className:"mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add First Crate"})]}):e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Crate #"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Grade"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Weight (kg)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Weighed At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Label Code"}),c.status==="DRAFT"&&e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(O=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:O.crate_number}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${O.grade==="A"?"bg-green-100 text-green-800":O.grade==="B"?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"}`,children:["Grade ",O.grade]})}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:[Number(O.weight_kg||0).toFixed(2)," kg"]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:O.weighed_at?new Date(O.weighed_at).toLocaleString():"N/A"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:O.label_code||"-"}),c.status==="DRAFT"&&e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm",children:e.jsx("button",{onClick:()=>M(O.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})})]},O.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Grade A Total"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[Number(c.totals?.a_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.totals?.crate_count_a||0," crates"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Grade B Total"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[Number(c.totals?.b_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.totals?.crate_count_b||0," crates"]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Grade C Total"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[Number(c.totals?.c_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.totals?.crate_count_c||0," crates"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Grand Total"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[Number(c.totals?.total_kg||0).toFixed(2)," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.totals?.crate_count_total||0," crates"]})]})]}),c.notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-600",children:c.notes})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx("button",{onClick:()=>{j(!1),x(null),i([])},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Close"})})]})]})}),m&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add Crate"}),e.jsx("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:ie,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Grade ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:w.grade,onChange:O=>A({...w,grade:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"A",children:"Grade A"}),e.jsx("option",{value:"B",children:"Grade B"}),e.jsx("option",{value:"C",children:"Grade C"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Crate Count ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"1",required:!0,value:w.crate_count,onChange:O=>A({...w,crate_count:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Number of crates"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the number of crates of this grade"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Total Weight (kg) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",required:!0,value:w.total_weight_kg,onChange:O=>A({...w,total_weight_kg:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Total weight for all crates"}),w.crate_count>1&&w.total_weight_kg&&e.jsxs("p",{className:"mt-1 text-xs text-blue-600",children:["Weight per crate: ",(parseFloat(w.total_weight_kg)/parseInt(w.crate_count)).toFixed(2)," kg"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:w.notes,onChange:O=>A({...w,notes:O.target.value}),rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:w.crate_count>1?`Add ${w.crate_count} Crates`:"Add Crate"})]})]})]})})]})}function Cg(){const[o,d]=g.useState([]),[u,N]=g.useState([]),[k,S]=g.useState(!0),[P,E]=g.useState(!1),[m,D]=g.useState(null),[v,j]=g.useState({farm_id:"",season_number:"",name:"",start_date:"",end_date:"",status:"PLANNED",notes:""});g.useEffect(()=>{C()},[]),g.useEffect(()=>{if(v.season_number&&v.start_date){const w=new Date(v.start_date).getFullYear(),A=`${v.season_number} - ${w}`;j(b=>({...b,name:A}))}},[v.season_number,v.start_date]);const C=async()=>{try{const[w,A]=await Promise.all([F.get("/api/v1/seasons?per_page=1000"),F.get("/api/v1/farms?per_page=1000")]),b=w.data?.data||w.data||[],I=A.data?.data||A.data||[];d(Array.isArray(b)?b:[]),N(Array.isArray(I)?I:[])}catch(w){console.error("Error fetching data:",w),alert("Error loading data: "+(w.response?.data?.message||w.message))}finally{S(!1)}},q=()=>{D(null),j({farm_id:"",season_number:"",name:"",start_date:"",end_date:"",status:"PLANNED",notes:""}),E(!0)},c=w=>{D(w);let A="";if(w.name){const b=w.name.match(/^(Season\s+[12])/i);b&&(A=b[1])}j({farm_id:w.farm_id||"",season_number:A,name:w.name||"",start_date:w.start_date?w.start_date.split("T")[0]:"",end_date:w.end_date?w.end_date.split("T")[0]:"",status:w.status||"PLANNED",notes:w.notes||""}),E(!0)},x=async w=>{w.preventDefault();try{m?await F.patch(`/api/v1/seasons/${m.id}`,v):await F.post("/api/v1/seasons",v),E(!1),C()}catch(A){const b=A.response?.data?.message||A.response?.data?.errors||"Unknown error";alert("Error saving season: "+(typeof b=="string"?b:JSON.stringify(b)))}},h=async w=>{if(confirm("Delete this season?"))try{await F.delete(`/api/v1/seasons/${w}`),C()}catch(A){alert("Error deleting season: "+(A.response?.data?.message||A.message))}},i=(w,A)=>{if(!w||!A)return"N/A";const b=new Date(w).toLocaleDateString(),I=new Date(A).toLocaleDateString();return`${b} - ${I}`},R=w=>({PLANNED:"bg-blue-100 text-blue-800",ACTIVE:"bg-green-100 text-green-800",COMPLETED:"bg-gray-100 text-gray-800",CANCELLED:"bg-red-100 text-red-800"})[w]||"bg-gray-100 text-gray-800",B=w=>{const A=u.find(b=>b.id===w);return A?A.name:"N/A"};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Seasons"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage farming seasons"})]}),e.jsxs("button",{onClick:q,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"New Season"]})]}),e.jsx("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Tip:"})," Typically, there are 2 seasons within 12 months. Note that the two seasons may not fall in the same calendar year."]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farm"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Range"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No seasons found"})}):o.map(w=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:B(w.farm_id)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:i(w.start_date,w.end_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${R(w.status)}`,children:w.status||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>c(w),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h(w.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},w.id))})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:m?"Edit Season":"New Season"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Farm ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:v.farm_id,onChange:w=>j({...v,farm_id:w.target.value}),disabled:!!m,className:`w-full px-3 py-2 border border-gray-300 rounded-lg ${m?"bg-gray-100 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"",children:"Select Farm"}),u.map(w=>e.jsx("option",{value:w.id,children:w.name},w.id))]}),m&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Farm cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Season Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:v.season_number,onChange:w=>j({...v,season_number:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Season"}),e.jsx("option",{value:"Season 1",children:"Season 1"}),e.jsx("option",{value:"Season 2",children:"Season 2"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Season Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:v.name,onChange:w=>j({...v,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",placeholder:"Auto-generated from Season Number and Start Date",readOnly:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Auto-generated from Season Number and Start Date year"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:v.start_date,onChange:w=>j({...v,start_date:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["End Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:v.end_date,min:v.start_date||void 0,onChange:w=>j({...v,end_date:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:v.status,onChange:w=>j({...v,status:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"PLANNED",children:"Planned"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:v.notes,onChange:w=>j({...v,notes:w.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Optional notes about this season"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[m?"Update":"Create"," Season"]})]})]})]})})]})}function Eg({children:o}){const{user:d,logout:u}=gn(),N=ir(),k=Zr(),[S,P]=g.useState(!1),[E,m]=g.useState([]),[D,v]=g.useState(!1),j=()=>{const G=N.pathname;return{gari:G.startsWith("/gari"),bellPepper:G.startsWith("/bell-pepper"),tomatoes:G.startsWith("/tomatoes"),habaneros:G.startsWith("/habaneros"),sales:G.startsWith("/sales"),livestock:!1}},[C,q]=g.useState(j());g.useEffect(()=>{const G=N.pathname;q(_=>({..._,gari:G.startsWith("/gari")?!0:_.gari,bellPepper:G.startsWith("/bell-pepper")?!0:_.bellPepper,tomatoes:G.startsWith("/tomatoes")?!0:_.tomatoes,habaneros:G.startsWith("/habaneros")?!0:_.habaneros,sales:G.startsWith("/sales")?!0:_.sales}))},[N.pathname]),g.useEffect(()=>{if(d){const G=d.permissions?.map(_=>_.name)||d.roles?.flatMap(_=>_.permissions?.map(le=>le.name)||[])||[];m(G)}},[d]);const c=()=>{u(),k("/login")},x=G=>{q(_=>({..._,[G]:!_[G]}))},h=[{name:"Bell Pepper",key:"bellPepper",icon:dn,items:[{name:"Production Cycles",href:"/bell-pepper/production-cycles",icon:fi},{name:"Daily Logs",href:"/bell-pepper/daily-logs",icon:su},{name:"Harvest Records",href:"/bell-pepper/harvest-records",icon:Xe},{name:"Inventory",href:"/bell-pepper-inventory",icon:Xe},{name:"KPIs",href:"/bell-pepper-kpis",icon:ot}]},{name:"Habaneros",key:"habaneros",icon:dn,items:[{name:"Production",href:"/habaneros-production",icon:xt},{name:"Inventory",href:"/habaneros-inventory",icon:Xe},{name:"KPIs",href:"/habaneros-kpis",icon:ot}]},{name:"Tomatoes",key:"tomatoes",icon:dn,items:[{name:"Production",href:"/tomatoes-production",icon:xt},{name:"Inventory",href:"/tomatoes-inventory",icon:Xe},{name:"KPIs",href:"/tomatoes-kpis",icon:ot}]},{name:"Gari",key:"gari",icon:xt,items:[{name:"Production Batches",href:"/gari-production-batches",icon:xt},{name:"Inventory",href:"/gari-inventory",icon:Xe},{name:"KPIs",href:"/gari-kpis",icon:ot},{name:"Waste & Losses",href:"/gari-waste-losses",icon:ot},{name:"Packaging Materials",href:"/packaging-materials",icon:Xe}]},{name:"Sales",key:"sales",icon:xn,items:[{name:"Sales Orders",href:"/sales/orders",icon:xn},{name:"Customers",href:"/sales/customers",icon:un},{name:"Products",href:"/sales/products",icon:Xe},{name:"KPIs",href:"/sales/kpis",icon:ot}]},{name:"Reports",items:[{name:"Dashboard",href:"/",icon:Pp},{name:"Consolidated Expenses",href:"/reports/consolidated-expenses",icon:hn},{name:"Staff Allocation",href:"/reports/staff-allocation",icon:un}]},{name:"Admin Settings",items:[{name:"Farms",href:"/farms",icon:ar},{name:"Sites",href:"/admin/sites",icon:Up},{name:"Farm Zones",href:"/admin/farm-zones",icon:Ap},{name:"Factories",href:"/admin/factories",icon:zd},{name:"Borehole Management",href:"/admin/boreholes",icon:xt},{name:"Greenhouse Management",href:"/admin/greenhouses",icon:xt},{name:"Scale Devices",href:"/scale-devices",icon:yi},{name:"Label Templates",href:"/label-templates",icon:bi},{name:"Crops",href:"/admin/crops",icon:dn},{name:"Worker Job Roles",href:"/admin/worker-job-roles",icon:vp},{name:"Assets",href:"/admin/assets",icon:qp},{name:"Asset Categories",href:"/admin/asset-categories",icon:Ep},{name:"Site Types",href:"/admin/site-types",icon:zd},{name:"Activity Types",href:"/admin/activity-types",icon:Mp},{name:"Seasons",href:"/admin/seasons",icon:fi},{name:"Admin Zones",href:"/admin/admin-zones",icon:Dp},{name:"Roles",href:"/admin/roles",icon:vi},{name:"Users",href:"/admin/users",icon:un}]}],i=(G,_,le="view")=>{if(d?.roles?.some(L=>L.name==="ADMIN"))return!0;const z=[G,_,le].filter(Boolean).join(".");return E.includes(z)},R=(G,_)=>i(G,_,"view"),B=G=>G==="/"?N.pathname==="/":N.pathname.startsWith(G),w=G=>G.items.some(_=>B(_.href)),A=G=>({"/":{menu:"reports",submenu:"dashboard"},"/farms":{menu:"admin",submenu:"farms"},"/scale-devices":{menu:"admin",submenu:"scale-devices"},"/label-templates":{menu:"admin",submenu:"label-templates"},"/gari-production-batches":{menu:"gari",submenu:"production-batches"},"/gari-inventory":{menu:"gari",submenu:"inventory"},"/gari-kpis":{menu:"gari",submenu:"kpis"},"/gari-waste-losses":{menu:"gari",submenu:"waste-losses"},"/packaging-materials":{menu:"gari",submenu:"packaging-materials"},"/admin/boreholes":{menu:"admin",submenu:"boreholes"},"/admin/greenhouses":{menu:"admin",submenu:"greenhouses"},"/bell-pepper/production-cycles":{menu:"bell-pepper",submenu:"production-cycles"},"/bell-pepper/daily-logs":{menu:"bell-pepper",submenu:"daily-logs"},"/bell-pepper/harvest-records":{menu:"bell-pepper",submenu:"harvest-records"},"/bell-pepper-inventory":{menu:"bell-pepper",submenu:"inventory"},"/bell-pepper-kpis":{menu:"bell-pepper",submenu:"kpis"},"/tomatoes-production":{menu:"tomatoes",submenu:"production"},"/tomatoes-inventory":{menu:"tomatoes",submenu:"inventory"},"/tomatoes-kpis":{menu:"tomatoes",submenu:"kpis"},"/habaneros-production":{menu:"habaneros",submenu:"production"},"/habaneros-inventory":{menu:"habaneros",submenu:"inventory"},"/habaneros-kpis":{menu:"habaneros",submenu:"kpis"},"/reports/consolidated-expenses":{menu:"reports",submenu:"consolidated-expenses"},"/reports/staff-allocation":{menu:"reports",submenu:"staff-allocation"},"/sales/orders":{menu:"sales",submenu:"orders"},"/sales/customers":{menu:"sales",submenu:"customers"},"/sales/products":{menu:"sales",submenu:"products"},"/sales/kpis":{menu:"sales",submenu:"kpis"},"/admin/admin-zones":{menu:"admin",submenu:"admin-zones"},"/admin/sites":{menu:"admin",submenu:"sites"},"/admin/farm-zones":{menu:"admin",submenu:"farm-zones"},"/admin/factories":{menu:"admin",submenu:"factories"},"/admin/crops":{menu:"admin",submenu:"crops"},"/admin/worker-job-roles":{menu:"admin",submenu:"worker-job-roles"},"/admin/assets":{menu:"admin",submenu:"assets"},"/admin/asset-categories":{menu:"admin",submenu:"asset-categories"},"/admin/site-types":{menu:"admin",submenu:"site-types"},"/admin/activity-types":{menu:"admin",submenu:"activity-types"},"/admin/seasons":{menu:"admin",submenu:"seasons"},"/admin/roles":{menu:"admin",submenu:"roles"},"/admin/users":{menu:"admin",submenu:"users"}})[G]||{menu:null,submenu:null},b=G=>{const{menu:_,submenu:le}=A(G.href);if(!R(_,le))return null;const z=B(G.href);return e.jsxs(bt,{to:G.href,onClick:()=>P(!1),className:`flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors ml-4 ${z?"bg-green-50 text-green-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(G.icon,{className:"mr-3 h-4 w-4"}),G.name]},G.name)},I=G=>{if(G.key){const _=C[G.key]||!1,le=w(G);return e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),x(G.key)},className:`w-full flex items-center justify-between px-4 py-2.5 text-sm font-semibold rounded-lg transition-colors ${le?"bg-green-50 text-green-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(G.icon,{className:"mr-3 h-5 w-5"}),G.name]}),_?e.jsx(Np,{className:"h-4 w-4"}):e.jsx(_p,{className:"h-4 w-4"})]}),_&&e.jsx("div",{className:"mt-1 space-y-1",children:G.items.map(b)})]},G.name)}else return e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:G.name}),e.jsx("div",{className:"mt-1 space-y-1",children:G.items.map(b)})]},G.name)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:e.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[e.jsxs("div",{className:"flex items-center flex-shrink-0 px-4 py-4 border-b border-gray-200 flex-nowrap",children:[D?e.jsx(ar,{className:"h-8 w-8 text-green-600 flex-shrink-0"}):e.jsx("img",{src:"/images/ogenki-logo.png",alt:"Ogenki Farms",className:"h-12 w-auto object-contain max-w-[120px] flex-shrink-0",onError:()=>v(!0)}),e.jsx("h1",{className:"ml-2 text-sm font-bold text-gray-900 whitespace-nowrap truncate",children:"Ogenki Farms"})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-2 overflow-y-auto",children:h.map(I)})}),e.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 font-medium",children:d?.email?.charAt(0).toUpperCase()||"U"})})}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:d?.name||d?.email||"User"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:d?.email})]}),e.jsx("button",{onClick:c,className:"ml-2 p-2 text-gray-400 hover:text-gray-600",title:"Logout",children:e.jsx($d,{className:"h-5 w-5"})})]})})]})}),e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center flex-nowrap flex-1 min-w-0",children:[D?e.jsx(ar,{className:"h-6 w-6 text-green-600 flex-shrink-0"}):e.jsx("img",{src:"/images/ogenki-logo.png",alt:"Ogenki Farms",className:"h-10 w-auto object-contain max-w-[100px] flex-shrink-0",onError:()=>v(!0)}),e.jsx("h1",{className:"ml-2 text-sm font-bold text-gray-900 whitespace-nowrap truncate",children:"Ogenki Farms"})]}),e.jsx("button",{onClick:()=>P(!S),className:"p-2 text-gray-400 hover:text-gray-600",children:S?e.jsx(Ze,{className:"h-6 w-6"}):e.jsx(Rp,{className:"h-6 w-6"})})]}),S&&e.jsx("div",{className:"bg-white border-b border-gray-200 max-h-[calc(100vh-64px)] overflow-y-auto",children:e.jsxs("nav",{className:"px-2 py-2 space-y-2",children:[h.map(I),e.jsxs("button",{onClick:c,className:"w-full flex items-center px-4 py-3 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg",children:[e.jsx($d,{className:"mr-3 h-5 w-5"}),"Logout"]})]})})]}),e.jsx("div",{className:"md:pl-64",children:e.jsx("main",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o})})})]})}function Ag({children:o}){const{user:d,loading:u}=gn();return u?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):d?o:e.jsx(rr,{to:"/login"})}function Dg(){const{user:o,loading:d}=gn();if(d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})});if(!o)return e.jsx(rr,{to:"/login"});const u=o?.roles?.some(S=>S.name==="ADMIN"),N=o.permissions?.map(S=>S.name)||o.roles?.flatMap(S=>S.permissions?.map(P=>P.name)||[])||[];return u||N.includes("reports.dashboard.view")?e.jsx($p,{}):N.includes("bell-pepper.harvests.view")?e.jsx(rr,{to:"/bell-pepper-harvests",replace:!0}):N.includes("bell-pepper.inventory.view")?e.jsx(rr,{to:"/bell-pepper-inventory",replace:!0}):N.includes("gari.production-batches.view")?e.jsx(rr,{to:"/gari-production-batches",replace:!0}):N.includes("gari.inventory.view")?e.jsx(rr,{to:"/gari-inventory",replace:!0}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-yellow-800",children:"No Access"}),e.jsx("p",{className:"text-yellow-700",children:"You don't have access to any pages. Please contact your administrator."})]})})}function Pg(){return e.jsx(pp,{children:e.jsxs(Md,{children:[e.jsx(ye,{path:"/login",element:e.jsx(zp,{})}),e.jsx(ye,{path:"/*",element:e.jsx(Ag,{children:e.jsx(Eg,{children:e.jsxs(Md,{children:[e.jsx(ye,{path:"/",element:e.jsx(Dg,{})}),e.jsx(ye,{path:"/farms",element:e.jsx(Bp,{})}),e.jsx(ye,{path:"/farms/:id",element:e.jsx(Vp,{})}),e.jsx(ye,{path:"/scale-devices",element:e.jsx(Gp,{})}),e.jsx(ye,{path:"/label-templates",element:e.jsx(Wp,{})}),e.jsx(ye,{path:"/gari-production-batches",element:e.jsx(Kp,{})}),e.jsx(ye,{path:"/gari-production-batches/:id",element:e.jsx(Qp,{})}),e.jsx(ye,{path:"/gari-inventory",element:e.jsx(Yp,{})}),e.jsx(ye,{path:"/gari-sales",element:e.jsx(Jp,{})}),e.jsx(ye,{path:"/gari-kpis",element:e.jsx(Xp,{})}),e.jsx(ye,{path:"/packaging-materials",element:e.jsx(Zp,{})}),e.jsx(ye,{path:"/gari-waste-losses",element:e.jsx(eg,{})}),e.jsx(ye,{path:"/bell-pepper/production-cycles",element:e.jsx(vg,{})}),e.jsx(ye,{path:"/bell-pepper/daily-logs",element:e.jsx(bg,{})}),e.jsx(ye,{path:"/bell-pepper/harvest-records",element:e.jsx(Sg,{})}),e.jsx(ye,{path:"/bell-pepper-production",element:e.jsx(ag,{})}),e.jsx(ye,{path:"/bell-pepper-cycles/:id",element:e.jsx(ng,{})}),e.jsx(ye,{path:"/bell-pepper-harvests",element:e.jsx(lg,{})}),e.jsx(ye,{path:"/bell-pepper-inventory",element:e.jsx(us,{cropName:"Bell Pepper",basePath:"bell-pepper"})}),e.jsx(ye,{path:"/bell-pepper-kpis",element:e.jsx(us,{cropName:"Bell Pepper",basePath:"bell-pepper"})}),e.jsx(ye,{path:"/tomatoes-production",element:e.jsx(us,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(ye,{path:"/tomatoes-inventory",element:e.jsx(us,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(ye,{path:"/tomatoes-kpis",element:e.jsx(us,{cropName:"Tomatoes",basePath:"tomatoes"})}),e.jsx(ye,{path:"/habaneros-production",element:e.jsx(us,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(ye,{path:"/habaneros-inventory",element:e.jsx(us,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(ye,{path:"/habaneros-kpis",element:e.jsx(us,{cropName:"Habaneros",basePath:"habaneros"})}),e.jsx(ye,{path:"/sales/orders",element:e.jsx(Ng,{})}),e.jsx(ye,{path:"/sales/customers",element:e.jsx(_g,{})}),e.jsx(ye,{path:"/sales/products",element:e.jsx(wg,{})}),e.jsx(ye,{path:"/sales/kpis",element:e.jsx(kg,{})}),e.jsx(ye,{path:"/reports/consolidated-expenses",element:e.jsx(tg,{})}),e.jsx(ye,{path:"/reports/staff-allocation",element:e.jsx(sg,{})}),e.jsx(ye,{path:"/admin/admin-zones",element:e.jsx(dg,{})}),e.jsx(ye,{path:"/admin/sites",element:e.jsx(ig,{})}),e.jsx(ye,{path:"/admin/boreholes",element:e.jsx(fg,{})}),e.jsx(ye,{path:"/admin/greenhouses",element:e.jsx(rg,{})}),e.jsx(ye,{path:"/admin/farm-zones",element:e.jsx(og,{})}),e.jsx(ye,{path:"/admin/factories",element:e.jsx(cg,{})}),e.jsx(ye,{path:"/admin/crops",element:e.jsx(mg,{})}),e.jsx(ye,{path:"/admin/worker-job-roles",element:e.jsx(hg,{})}),e.jsx(ye,{path:"/admin/assets",element:e.jsx(pg,{})}),e.jsx(ye,{path:"/admin/asset-categories",element:e.jsx(gg,{})}),e.jsx(ye,{path:"/admin/site-types",element:e.jsx(yg,{})}),e.jsx(ye,{path:"/admin/activity-types",element:e.jsx(jg,{})}),e.jsx(ye,{path:"/admin/seasons",element:e.jsx(Cg,{})}),e.jsx(ye,{path:"/admin/roles",element:e.jsx(ug,{})}),e.jsx(ye,{path:"/admin/users",element:e.jsx(xg,{})})]})})})})]})})}class Rg extends Ni.Component{constructor(d){super(d),this.state={hasError:!1,error:null}}static getDerivedStateFromError(d){return{hasError:!0,error:d}}componentDidCatch(d,u){console.error("React Error:",d,u)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",fontFamily:"sans-serif"},children:[e.jsx("h1",{children:"Something went wrong"}),e.jsxs("p",{children:["Error: ",this.state.error?.message||"Unknown error"]}),e.jsx("pre",{style:{background:"#f5f5f5",padding:"10px",overflow:"auto"},children:this.state.error?.stack}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}const xi=document.getElementById("app");if(!xi)console.error('App element not found! Make sure <div id="app"></div> exists in the HTML.'),document.body.innerHTML='<div style="padding: 20px;"><h1>Error: App element not found</h1><p>Make sure the HTML includes: &lt;div id="app"&gt;&lt;/div&gt;</p></div>';else try{mx.createRoot(xi).render(e.jsx(Ni.StrictMode,{children:e.jsx(Rg,{children:e.jsx(dp,{children:e.jsx(Pg,{})})})}))}catch(o){console.error("Failed to render React app:",o),xi.innerHTML=`
            <div style="padding: 20px; font-family: sans-serif;">
                <h1>Failed to Load Application</h1>
                <p>Error: ${o.message}</p>
                <pre style="background: #f5f5f5; padding: 10px; overflow: auto;">${o.stack}</pre>
                <button onclick="window.location.reload()">Reload Page</button>
            </div>
        `}
